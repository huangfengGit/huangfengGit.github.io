window.__require=function t(e,o,n){function i(r,a){if(!o[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=o[r]={exports:{}};e[r][0].call(u.exports,function(t){return i(e[r][1][t]||t)},u,u.exports,t,e,o,n)}return o[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({GFunction:[function(t,e,o){"use strict";cc._RF.push(e,"da948UjpF5ARKW0fp21pXJl","GFunction"),Object.defineProperty(o,"__esModule",{value:!0}),o.gFunction=void 0,o.gFunction={randomRange:function(t,e){var o=e-t,n=Math.random();return t+Math.round(n*o)}},cc._RF.pop()},{}],LudoChessShadow:[function(t,e,o){"use strict";cc._RF.push(e,"d964dfhM7dBRKI34oQvyTJN","LudoChessShadow");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.LudoChessShadow=void 0;var r=cc._decorator,a=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sp=null,e.spf_list=[],e}return i(e,t),e.prototype.show=function(t,e){this.sp.spriteFrame=this.spf_list[t-1],this.node.opacity=255,cc.tween(this.node).to(1,{opacity:0}).call(function(){e()}).start()},s([c(cc.Sprite)],e.prototype,"sp",void 0),s([c([cc.SpriteFrame])],e.prototype,"spf_list",void 0),s([a],e)}(cc.Component);o.LudoChessShadow=l,cc._RF.pop()},{}],LudoChess:[function(t,e,o){"use strict";cc._RF.push(e,"221b82GzNpGS5B8DbNWdvoa","LudoChess");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.LudoChess=void 0;var r=t("../../../../../Common/script/base/AudioManager"),a=t("../../../MainScene/LudoEnum"),c=t("../../../MainScene/MapInfo"),l=t("./LudoChessShadow"),u=t("./LudoGameGlobal"),p=cc._decorator,d=p.ccclass,_=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spn=null,e.shadowNode=null,e.campType=a.E_Ludo_CampType.red,e.pf_shadow=null,e._isOnWinPath=!1,e._winPathDire=1,e}return i(e,t),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currFlyPathIdx",{get:function(){return this._currFlyPathIdx},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.node.active=!1,this._shadowPool=new cc.NodePool,this._status=a.E_Ludo_Chess_Status.None,this._isOnWinPath=!1,this._currFlyPathIdx=-1,this._currWinPathIdx=-1},e.prototype.start=function(){},e.prototype.init=function(){var t=this;this.node.setPosition(c.Ludo_Map_StandBy_Pos[this.campType-1].x,c.Ludo_Map_StandBy_Pos[this.campType-1].y),this._isOnWinPath=!1,this._currWinPathIdx=-1,this._currFlyPathIdx=-1,this.node.scale=10,this.node.active=!0,cc.tween(this.node).delay(.1*this.campType).to(.2,{scale:1}).call(function(){t._status=a.E_Ludo_Chess_Status.StandBy}).start()},e.prototype.reconnectInit=function(){this.node.active=!0,this.node.stopAllActions(),this.showShadowAnima(),this._status=a.E_Ludo_Chess_Status.StandBy},e.prototype.setFlyEndCallback=function(t,e){this._flyEndTarget=t,this._flyEndCallback=e},e.prototype.getShadowNode=function(){return this._shadowPool.size()>0?this._shadowPool.get():cc.instantiate(this.pf_shadow)},e.prototype.showShadowAnima=function(){var t=this,e=this.getShadowNode();e.parent=this.shadowNode,e.setPosition(this.node.getPosition()),e.getComponent(l.LudoChessShadow).show(this.campType,function(){t._shadowPool.put(e)})},e.prototype.toFly=function(t){cc.error("\u672c\u8f6e\u70b9\u6570\uff1an = ",t," _currFlyPathIdx = ",this._currFlyPathIdx,"_isOnWinPath = ",this._isOnWinPath),-1==this._currFlyPathIdx?t>=4?(this._flyNum=1,this._status=a.E_Ludo_Chess_Status.Fly,this.fly()):this.flyEnd():(this._flyNum=t,this._status=a.E_Ludo_Chess_Status.Fly,this.fly())},e.prototype.getMapPosInfo=function(t,e){return void 0===e&&(e=c.C_LUDO_MAP_FLY_PATH),c.C_Ludo_Map_Pos[e[this.campType-1][t]]},e.prototype.getNextMapPos=function(){return-1==this._currFlyPathIdx?(this._currFlyPathIdx=0,this.getMapPosInfo(this._currFlyPathIdx)):(!this._isOnWinPath&&this._currFlyPathIdx+1>c.C_LUDO_MAP_FLY_PATH[this.campType-1].length-1&&this.tryStartRunWinPath(),this._isOnWinPath?1==this._winPathDire?(this._currWinPathIdx++,this._currWinPathIdx>=c.C_LUDO_MAP_WIN_PATH[this.campType-1].length&&(this._currWinPathIdx-=2,this._winPathDire=2),this.getMapPosInfo(this._currWinPathIdx,c.C_LUDO_MAP_WIN_PATH)):(this._currWinPathIdx>=0&&this._currWinPathIdx--,this._currWinPathIdx>-1?this.getMapPosInfo(this._currWinPathIdx,c.C_LUDO_MAP_WIN_PATH):(this._currFlyPathIdx--,this.getMapPosInfo(this._currFlyPathIdx))):(this._currFlyPathIdx=this._currFlyPathIdx+1,this.getMapPosInfo(this._currFlyPathIdx)))},e.prototype.fly=function(){var t=this;if(this._flyNum>0){r.AudioManager.Singleton.play("","ludoDrop"),this._flyNum--;var e=this.getNextMapPos();if(null==e)return void cc.error("\u83b7\u53d6\u4e0b\u6b21\u4f4d\u7f6e\u9519\u8bef\uff1a_currFlyPathIdx = ",this._currFlyPathIdx,"_currWinPathIdx = ",this._currWinPathIdx," _isOnWinPath = ",this._isOnWinPath);this.spn.setAnimation(0,"yidong",!0);var o=cc.sequence(cc.jumpTo(.2,cc.v2(e.x,e.y),80,1),cc.callFunc(function(){t.fly(),t.spn.setAnimation(0,"daiji",!0)},this));this.node.runAction(o),this.showShadowAnima()}else this.flyEnd()},e.prototype.setChessMapPos=function(t){if(this.node.active=!0,0!=t){var e=null,o=0;this._isOnWinPath=!1,t<=c.C_LUDO_MAP_FLY_PATH[this.campType-1].length?(o=c.C_LUDO_MAP_FLY_PATH[this.campType-1][t-1],this._currFlyPathIdx=t-1,e=this.getMapPosInfo(this._currFlyPathIdx)):(this._isOnWinPath=!0,o=t-c.C_LUDO_MAP_FLY_PATH[this.campType-1].length-1,this._currWinPathIdx=o,e=this.getMapPosInfo(this._currWinPathIdx,c.C_LUDO_MAP_WIN_PATH)),cc.error("\u65ad\u7ebf\u91cd\u8fde\uff0c\u8bbe\u7f6e\u4f4d\u7f6e serverindex = ",t,"pathidx = ",o,"p = ",e),this.node.setPosition(e.x,e.y,0)}else this.node.setPosition(c.Ludo_Map_StandBy_Pos[this.campType-1].x,c.Ludo_Map_StandBy_Pos[this.campType-1].y)},e.prototype.tryStartRunWinPath=function(){this._currFlyPathIdx>-1&&!this._isOnWinPath&&this._currFlyPathIdx>=c.C_LUDO_MAP_FLY_PATH[this.campType-1].length-1&&(this._isOnWinPath=!0,this._winPathDire=1,this._currWinPathIdx=-1)},e.prototype.flyEnd=function(){if(this._isOnWinPath){if(5==this._currWinPathIdx)return;this._winPathDire=1!=this._winPathDire?1:this._winPathDire}else this._currWinPathIdx=-1,this.tryStartRunWinPath();this.node.zIndex=1e3-this.node.y,this._status=a.E_Ludo_Chess_Status.StandBy;var t=!1;this._currFlyPathIdx>-1&&(t=u.LudoGlobal.gameEngine.canHitFly(this)),this._flyEndTarget&&this._flyEndCallback&&this._flyEndCallback.call(this._flyEndTarget,this,t)},e.prototype.isFly=function(){return this._currFlyPathIdx>-1},e.prototype.beHitFly=function(){var t=this;this._currFlyPathIdx=-1,this._currWinPathIdx=-1,this._isOnWinPath=!1,r.AudioManager.Singleton.play("","ludoKill");var e=cc.v2(c.Ludo_Map_StandBy_Pos[this.campType-1].x,c.Ludo_Map_StandBy_Pos[this.campType-1].y);this.spn.setAnimation(0,"yidong",!0);var o=cc.sequence(cc.jumpTo(.2,cc.v2(e.x,e.y),80,1),cc.callFunc(function(){t.fly(),t.spn.setAnimation(0,"daiji",!0)},this));this.node.runAction(o)},s([_(sp.Skeleton)],e.prototype,"spn",void 0),s([_(cc.Node)],e.prototype,"shadowNode",void 0),s([_({type:cc.Enum(a.E_Ludo_CampType)})],e.prototype,"campType",void 0),s([_(cc.Prefab)],e.prototype,"pf_shadow",void 0),s([d],e)}(cc.Component);o.LudoChess=h,cc._RF.pop()},{"../../../../../Common/script/base/AudioManager":void 0,"../../../MainScene/LudoEnum":"LudoEnum","../../../MainScene/MapInfo":"MapInfo","./LudoChessShadow":"LudoChessShadow","./LudoGameGlobal":"LudoGameGlobal"}],LudoController:[function(t,e,o){"use strict";cc._RF.push(e,"95e67l+xmZDmbYeOYjF4zCW","LudoController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../../../../../Boot/scirpt/AppConst"),i=t("../../../../../../Common/script/base/BaseCode"),s=t("../../../../../../Common/script/base/WebSocketManager"),r=t("../Model/LudoModel"),a=t("./LudoNetData"),c=t("./LudoQueueMessages"),l=function(){function t(){this.view=null,this.mapNotyfy=new Map}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t,this._instance.RegistNotify()),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Model",{get:function(){return null==this._model&&(this._model=new r.default,this._model.gameid=91007,this._model.levelid=910071),this._model},enumerable:!1,configurable:!0}),t.Destroy=function(){this._instance&&(this._instance.UnRegistNotify(),this._instance._model=null,this._instance=null)},t.prototype.RegistNotify=function(){this.UnRegistNotify(),c.LudoQueueMessages.instance.removeAllMes(),this.RegistNotyfyEx("sc_sitdown_ludo_n",this.sc_sitdown_ludo_n),this.RegistNotyfyEx("sc_situpkeep_ludo_n",this.sc_situpkeep_ludo_n),this.RegistNotyfyEx("sc_tablestart_ludo_n",this.sc_tablestart_ludo_n),this.RegistNotyfyEx("sc_ready_ludo_n",this.sc_ready_ludo_n),this.RegistNotyfyEx("sc_end_ludo_n",this.sc_end_ludo_n),this.RegistNotyfyEx("sc_tablestart_ludo_n",this.sc_tablestart_ludo_n),this.RegistNotyfyEx("sc_randomdice_ludo_n",this.sc_randomdice_ludo_n),this.RegistNotyfyEx("sc_makefirstpos_ludo_n",this.sc_makefirstpos_ludo_n),this.RegistNotyfyEx("sc_leave_ludo_n",this.sc_leave_ludo_n),this.RegistNotyfyEx("sc_one_exittable_n",this.sc_one_exittable_n)},t.prototype.RegistNotyfyEx=function(t,e){var o=this,n=function(n){o.AddTexMessages(n,t,e.bind(o))};s.WebSocketManager.getInstance.RegistNotify(t,n,this),this.mapNotyfy.set(t,n)},t.prototype.AddTexMessages=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=null),c.LudoQueueMessages.instance.AddTexMes(e,t,o)},t.prototype.UnRegistNotify=function(){var t=this;this.mapNotyfy.forEach(function(e,o){s.WebSocketManager.getInstance.UnRegistNotify(o,e,t)}),this.mapNotyfy=new Map},t.prototype.cs_entertable_ludo=function(t){void 0===t&&(t=0);var e=new a.cs_entertable_ludo;e._g=this.Model.gameid,e.fn="cs_entertable_ludo",e.levelid=0==n.AppConst.currentlevelid?this.Model.levelid:n.AppConst.currentlevelid,e.tableid=t,s.WebSocketManager.getInstance.SendJSON(e,this.sc_entertable_ludo.bind(this)),this.view.DisconnectCountdown()},t.prototype.sc_entertable_ludo=function(t){var e=this;if(this.view.stopDisconnectCountdown(),1==t.result){if(this.Model.gameid=t.gameid,this.Model.levelid=t.levelid,this.Model.tableid=t.tableid,this.Model.brate=t.brate,this.Model._recover=t._recover,this.Model.limitgold=t.limitgold,this.Model.playerDataList=t.palyerlist||[],t.palyerlist&&t.palyerlist.length>0){var o=t.palyerlist.find(function(t){return t.py.userid==n.AppConst.mPlayerModel.userid});o&&(this.Model._posServer=o.pos),this.view.UpdatePlsyList()}if(this.view)switch(this.Model._recover._status){case 1:this.view.isCanExeTexMas=!0;break;case 2:this.cs_ready_ludo(),this.view.isCanExeTexMas=!0;break;case 3:case 4:this.view.reconnectionInitView();break;case 5:case 6:this.cs_ready_ludo(),this.view.isCanExeTexMas=!0}}else{var s=i.BaseCode[n.AppConst.languageType][t.result+""];s&&""!=s?this.view.Tips.ShowTips(s,function(){e.cs_applyexittable(),e.view.ExitGame()}):this.view.Tips.ShowTips("1"==n.AppConst.languageType?"The room can't be found or is full , please try later.":"\u0930\u0942\u092e  \u0928\u0939\u0940\u0902 \u092e\u093f\u0932\u093e \u092f\u093e \u092d\u0930\u093e \u0939\u0941\u0906 \u0939\u0948",function(){e.cs_applyexittable(),e.view.ExitGame()})}},t.prototype.cs_sitdown_ludo=function(){var t=new a.cs_sitdown_ludo;t._g=this.Model.gameid,t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,t.iskeep=0,t.gold=n.AppConst.mPlayerModel.gold,t.pos=0,t.pas="",t.iskeep=0,t.fn="cs_sitdown_ludo",s.WebSocketManager.getInstance.SendJSON(t,this.sc_sitdown_ludo.bind(this)),this.view.DisconnectCountdown()},t.prototype.sc_sitdown_ludo=function(t){this.view.stopDisconnectCountdown(),console.log("---sc_sitdown_ludo---",t),this.view&&1==t.result&&(n.AppConst.mPlayerModel.gold=t.ugold)},t.prototype.sc_sitdown_ludo_n=function(t){console.log("---sc_sitdown_ludo_n---",t),this.view&&1==t.result&&this.view.sc_sitdown_ludo_n(t)},t.prototype.cs_ready_ludo=function(){this.view.DisconnectCountdown();var t=new a.cs_ready_ludo;t._g=this.Model.gameid,t.fn="cs_ready_ludo",t.levelid=this.Model.levelid,t.pos=0,t.tableid=this.Model.tableid,s.WebSocketManager.getInstance.SendJSON(t,this.sc_ready_ludo.bind(this))},t.prototype.sc_ready_ludo=function(t){this.view.stopDisconnectCountdown(),console.log("---sc_ready_ludo---",t),this.view},t.prototype.sc_ready_ludo_n=function(t){console.log("---sc_ready_ludo_n---",t),this.view&&1==t.result&&this.view.sc_ready_Ludo_n(t.pos)},t.prototype.cs_situpkeep_ludo=function(t){var e=new a.cs_situpkeep_ludo;e._g=this.Model.gameid,e.keep=t,e.fn="cs_situpkeep_ludo",e.tableid=this.Model.tableid,s.WebSocketManager.getInstance.SendJSON(e,this.sc_situpkeep_ludo.bind(this))},t.prototype.sc_situpkeep_ludo=function(t){console.log("---sc_situpkeep_ludo---",t),this.view},t.prototype.sc_situpkeep_ludo_n=function(t){console.log("---sc_situpkeep_ludo_n---",t),this.view},t.prototype.sc_tablestart_ludo_n=function(t){console.log("---sc_tablestart_ludo_n---",t),this.view&&1==t.result&&this.view.GameStart()},t.prototype.cs_makefirstpos_ludo=function(){this.view.DisconnectCountdown();var t=new a.cs_makefirstpos_ludo;t._g=this.Model.gameid,t.fn="cs_makefirstpos_ludo",t.levelid=this.Model.levelid,t.tableid=this.Model.gameid,s.WebSocketManager.getInstance.SendJSON(t,this.sc_makefirstpos_ludo.bind(this))},t.prototype.sc_makefirstpos_ludo=function(t){this.view.stopDisconnectCountdown(),console.log("---sc_makefirstpos_ludo---",t),this.view&&(1==t.result||cc.error("\u786e\u8ba4\u5148\u624b\u5931\u8d25\uff1a",t.result))},t.prototype.sc_makefirstpos_ludo_n=function(t){console.log("---sc_makefirstpos_ludo_n---",t),this.view&&(1==t.result?this.view.sc_makefirstpos_ludo_n(t):cc.error("\u786e\u8ba4\u5148\u624b\u901a\u77e5\u5931\u8d25\uff1a",t.result))},t.prototype.cs_randomdice_ludo=function(){this.view.DisconnectCountdown();var t=new a.cs_randomdice_ludo;t._g=this.Model.gameid,t.fn="cs_randomdice_ludo",t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,s.WebSocketManager.getInstance.SendJSON(t,this.sc_randomdice_ludo.bind(this))},t.prototype.sc_randomdice_ludo=function(t){this.view.stopDisconnectCountdown(),console.log("---sc_randomdice_ludo---",t),this.view&&(1==t.result||cc.error("\u4e22\u9ab0\u5b50\u5931\u8d25\uff1a",t.result))},t.prototype.sc_randomdice_ludo_n=function(t){console.log("---sc_randomdice_ludo_n---",t),this.view&&(1==t.result?this.view.sc_randomdice_ludo_n(t):cc.error("\u4e22\u9ab0\u5b50\u7ed3\u679c\u9519\u8bef"))},t.prototype.sc_end_ludo_n=function(t){console.log("---sc_end_ludo_n---",t),this.view&&(1==t.result?(this.Model._pos2win=t._pos2win,this.Model._pos2gold=t._pos2gold,this.view.sc_end_ludo_n(t)):console.error("\u7ed3\u7b97\u6570\u636e\u9519\u8bef"))},t.prototype.cs_applyexittable=function(){this.view.DisconnectCountdown();var t=new a.cs_applyexittable;t._g=this.Model.gameid,t.fn="cs_applyexittable",t.gameid=this.Model.gameid,t.levelid=this.Model.levelid,t.pos=this.Model._posServer,t.tableid=this.Model.tableid,s.WebSocketManager.getInstance.SendJSON(t,this.sc_applyexittable.bind(this))},t.prototype.sc_applyexittable=function(t){this.view.stopDisconnectCountdown(),this.view&&(1==t.result?this.view.ExitGame():this.view.ExitGameFail())},t.prototype.cs_exittable_ludo=function(){var t=new a.cs_exittable_ludo;t._g=this.Model.gameid,t.fn="cs_exittable_ludo",t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,s.WebSocketManager.getInstance.SendJSON(t,this.sc_exittable_ludo.bind(this))},t.prototype.sc_exittable_ludo=function(){this.view&&this.view.ExitGame()},t.prototype.sc_one_exittable_n=function(t){if(this.view&&1==t.result)if(t.userid==n.AppConst.mPlayerModel.userid)this.view.ExitGame();else{var e=this.view.playerList.find(function(e){return e.serverpos==t.pos});e&&e.setBreak(!0)}},t.prototype.sc_leave_ludo_n=function(t){this.view&&1==t.result&&this.view.sc_leave_ludo_n(t)},t}();o.default=l,cc._RF.pop()},{"../../../../../../Boot/scirpt/AppConst":void 0,"../../../../../../Common/script/base/BaseCode":void 0,"../../../../../../Common/script/base/WebSocketManager":void 0,"../Model/LudoModel":"LudoModel","./LudoNetData":"LudoNetData","./LudoQueueMessages":"LudoQueueMessages"}],LudoCountDown:[function(t,e,o){"use strict";cc._RF.push(e,"4bf8fl0tcBOhIWE1g4HBIX0","LudoCountDown");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.LudoCountDown=void 0;var r=cc._decorator,a=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbl=null,e.sp=null,e}return i(e,t),Object.defineProperty(e.prototype,"duration",{set:function(t){this._duration=t,this._cd=t,this.lbl&&this.schedule(this.updataTimeForLbl),this.sp&&this.schedule(this.updataTimeForSprite)},enumerable:!1,configurable:!0}),e.prototype.stop=function(){this.lbl&&this.unschedule(this.updataTimeForLbl),this.sp&&this.unschedule(this.updataTimeForSprite)},e.prototype.updataTimeForSprite=function(t){this._cd-=t,this.sp.fillRange=-(1-this._cd/this._duration),this._cd<0&&(this.unschedule(this.updataTimeForSprite),this._cdDoneTarget&&this._cdDoneCallBack.call(this._cdDoneTarget,this))},e.prototype.updataTimeForLbl=function(t){this._duration-=t,this.lbl.string=String(Math.floor(this._duration)),this._duration<0&&(this.unschedule(this.updataTimeForLbl),this._cdDoneTarget&&this._cdDoneCallBack.call(this._cdDoneTarget,this))},e.prototype.setcdDoneCallback=function(t,e){this._cdDoneTarget=t,this._cdDoneCallBack=e},s([c(cc.Label)],e.prototype,"lbl",void 0),s([c(cc.Sprite)],e.prototype,"sp",void 0),s([a],e)}(cc.Component);o.LudoCountDown=l,cc._RF.pop()},{}],LudoDeci:[function(t,e,o){"use strict";cc._RF.push(e,"35a2cbBp85BGLzguw4t2E2X","LudoDeci");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.LudoDeci=void 0;var r=cc._decorator,a=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spn_dice=null,e}return i(e,t),e.prototype.start=function(){this.spn_dice.setCompleteListener(this.completeListener.call(this))},e.prototype.play=function(t,e){this.spn_dice.setCompleteListener(null),this.spn_dice.setAnimation(0,t,e)},e.prototype.throw=function(t,e){this.spn_dice.setCompleteListener(e),this.spn_dice.setAnimation(0,"bai"+t,!1)},e.prototype.completeListener=function(){this._completetarget&&this._completeCallBack&&this._completeCallBack.call(this._completetarget,this)},e.prototype.setCompleteCallBack=function(t,e){this._completetarget=t,this._completeCallBack=e},s([c(sp.Skeleton)],e.prototype,"spn_dice",void 0),s([a],e)}(cc.Component);o.LudoDeci=l,cc._RF.pop()},{}],LudoEnum:[function(t,e,o){"use strict";cc._RF.push(e,"26322v7871DqomPx2GeOc4S","LudoEnum"),Object.defineProperty(o,"__esModule",{value:!0}),o.E_Ludo_Map_PointType=o.E_Ludo_Chess_Status=o.E_Ludo_Player_Status=o.E_Ludo_Game_Status=o.E_Ludo_CampType=void 0,function(t){t[t.None=0]="None",t[t.red=1]="red",t[t.blue=2]="blue",t[t.yellow=3]="yellow",t[t.green=4]="green"}(o.E_Ludo_CampType||(o.E_Ludo_CampType={})),function(t){t[t.None=0]="None",t[t.Init=1]="Init",t[t.DetermineOrder=2]="DetermineOrder",t[t.Gaming=3]="Gaming",t[t.End=4]="End"}(o.E_Ludo_Game_Status||(o.E_Ludo_Game_Status={})),function(t){t[t.None=0]="None",t[t.StandBy=1]="StandBy",t[t.ReadyThrow=2]="ReadyThrow",t[t.Throwing=3]="Throwing",t[t.MoveChess=4]="MoveChess",t[t.WIN=5]="WIN"}(o.E_Ludo_Player_Status||(o.E_Ludo_Player_Status={})),function(t){t[t.None=0]="None",t[t.StandBy=1]="StandBy",t[t.Fly=2]="Fly",t[t.WIN=3]="WIN"}(o.E_Ludo_Chess_Status||(o.E_Ludo_Chess_Status={})),function(t){t[t.None=0]="None",t[t.Normal=1]="Normal",t[t.Safe=2]="Safe",t[t.WIN_PATH=3]="WIN_PATH"}(o.E_Ludo_Map_PointType||(o.E_Ludo_Map_PointType={})),cc._RF.pop()},{}],LudoGameEngine:[function(t,e,o){"use strict";cc._RF.push(e,"84b67+Mu5dBlpfnnXFOO0ly","LudoGameEngine");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.LudoGameEngine=o.E_Game_LAYOUT=void 0;var r,a=t("../../../MainScene/LudoEnum"),c=t("../../../MainScene/MapInfo"),l=t("../../../rxlib/TGlobal"),u=t("./Controller/LudoController"),p=t("./LudoGameGlobal");(function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"})(r=o.E_Game_LAYOUT||(o.E_Game_LAYOUT={}));var d=cc._decorator,_=d.ccclass,h=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layout=r.HORIZONTAL,e}return i(e,t),Object.defineProperty(e.prototype,"gameStatus",{get:function(){return this._gameStatus},set:function(t){this._gameStatus=t,this.changeGameStatus()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"winnerCampType",{set:function(t){this._winnerCampType=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){p.LudoGlobal.gameEngine=this,this._gameStatus=a.E_Ludo_Game_Status.None},e.prototype.init=function(t){this._playerList=t,this._playerList.forEach(function(t,e){t.localpos=e+1})},e.prototype.startGame=function(){cc.log("\u6e38\u620f\u5f00\u59cb"),this._actionPlayerIdx=-1,this._winnerCampType=a.E_Ludo_CampType.None,this.gameStatus=a.E_Ludo_Game_Status.Init},e.prototype.update=function(t){switch(this._gameStatus){case a.E_Ludo_Game_Status.Init:for(var e=!0,o=0,n=this._playerList;o<n.length;o++)null!=(p=n[o]).player&&p.chess.status==a.E_Ludo_Chess_Status.None&&(e=!1);if(e){for(var i=function(t){null!=t.player&&cc.tween().delay(1).call(function(){t.status=a.E_Ludo_Player_Status.ReadyThrow}).start()},s=0,r=this._playerList;s<r.length;s++)i(p=r[s]);this.gameStatus=a.E_Ludo_Game_Status.DetermineOrder}break;case a.E_Ludo_Game_Status.DetermineOrder:for(var c=u.default.instance.Model.getStartAction(),l=0;l<this._playerList.length;l++){var p;if(null!=(p=this._playerList[l]).player){if(p.status!=a.E_Ludo_Player_Status.StandBy)return;p.serverpos==u.default.instance.Model.firstpos&&(c=l)}}this._actionPlayerIdx=c,this.gameStatus=a.E_Ludo_Game_Status.Gaming;break;case a.E_Ludo_Game_Status.Gaming:if(!this._playerList[this._actionPlayerIdx])return;switch(this._playerList[this._actionPlayerIdx].updateGame(t),this._playerList[this._actionPlayerIdx].status){case a.E_Ludo_Player_Status.StandBy:if(u.default.instance.Model.bOff&&u.default.instance.Model.breakPos==u.default.instance.Model.nextpos)return;this._actionPlayerIdx=this._playerList.findIndex(function(t){return t.serverpos==u.default.instance.Model.nextpos}),this._playerList[this._actionPlayerIdx].status=a.E_Ludo_Player_Status.ReadyThrow;break;case a.E_Ludo_Player_Status.WIN:this._gameStatus=a.E_Ludo_Game_Status.End}break;case a.E_Ludo_Game_Status.End:}},e.prototype.changeGameStatus=function(){switch(this._gameStatus){case a.E_Ludo_Game_Status.Init:for(var t=0,e=this._playerList;t<e.length;t++)null!=(c=e[t]).player&&c.init();break;case a.E_Ludo_Game_Status.DetermineOrder:for(var o=0,n=this._playerList;o<n.length;o++)null!=(c=n[o]).player&&(c.status=a.E_Ludo_Player_Status.ReadyThrow);break;case a.E_Ludo_Game_Status.Gaming:var i=this._playerList[this._actionPlayerIdx];null!=i.player&&(i.status=a.E_Ludo_Player_Status.ReadyThrow);break;case a.E_Ludo_Game_Status.End:l.TGlobal.winMgr.showWin("gameStage/win/winWin/winnerWin","Ludo");for(var s=0,r=this._playerList;s<r.length;s++){var c;if(null!=(c=r[s]).player&&c.player.pos==u.default.instance.Model._posServer){var p=u.default.instance.Model._pos2gold.find(function(t){return t.pos==u.default.instance.Model._posServer}).val;c.updateGold(p)}}}},e.prototype.throwDiceForRed=function(){},e.prototype.canHitFly=function(t){var e;e=t._isOnWinPath&&t._currWinPathIdx>-1?c.C_LUDO_MAP_WIN_PATH[t.campType-1][t._currWinPathIdx]:c.C_LUDO_MAP_FLY_PATH[t.campType-1][t.currFlyPathIdx];var o=!1;if(c.C_Ludo_Map_Pos[e].type!=a.E_Ludo_Map_PointType.Safe)for(var n=0,i=this._playerList;n<i.length;n++){var s=i[n];if(null!=s.player){var r;r=s.chess._isOnWinPath&&s.chess._currWinPathIdx>-1?c.C_LUDO_MAP_WIN_PATH[s.campType-1][s.chess._currWinPathIdx]:c.C_LUDO_MAP_FLY_PATH[s.campType-1][s.chess.currFlyPathIdx],s.chess.isFly()&&s.chess.campType!=t.campType&&e==r&&(o=!0,s.chess.beHitFly())}}return o},e.prototype.checkSafeChess=function(){for(var t=[],e=0,o=this._playerList;e<o.length;e++){var n=o[e];if(null!=n.player){var i;i=n.chess._isOnWinPath&&n.chess._currWinPathIdx>-1?c.C_LUDO_MAP_WIN_PATH[n.campType-1][n.chess._currWinPathIdx]:c.C_LUDO_MAP_FLY_PATH[n.campType-1][n.chess.currFlyPathIdx],c.C_Ludo_Map_Pos[i].type==a.E_Ludo_Map_PointType.Safe&&t.push({idx:i,chess:n.chess})}}if(t.length>1){for(var s=!1,r=0;r<t.length;r++)for(var l=r+1;l<t.length;l++)t[r].idx==t[l].idx&&(s=!0);if(s)for(r=0;r<t.length;r++){t[r].chess.node.scale=.5;var u=t[r].chess.node.position;t.length,t[r].chess.node.position=u}}},e.prototype.hit=function(t){this._playerList[t-1].chess.beHitFly()},e.prototype.getWinnerPlayer=function(){if(this._winnerCampType!=a.E_Ludo_CampType.None)return this._playerList[this._winnerCampType-1]},s([h({type:cc.Enum(r)})],e.prototype,"layout",void 0),s([_],e)}(cc.Component);o.LudoGameEngine=y,cc._RF.pop()},{"../../../MainScene/LudoEnum":"LudoEnum","../../../MainScene/MapInfo":"MapInfo","../../../rxlib/TGlobal":"TGlobal","./Controller/LudoController":"LudoController","./LudoGameGlobal":"LudoGameGlobal"}],LudoGameGlobal:[function(t,e,o){"use strict";cc._RF.push(e,"d8ef3jDc6xFqYuHX6ituz32","LudoGameGlobal"),Object.defineProperty(o,"__esModule",{value:!0}),o.LudoGlobal=void 0;var n=function(){function t(){}return Object.defineProperty(t.prototype,"gameEngine",{get:function(){return this._gameEngine},set:function(t){this._gameEngine=t},enumerable:!1,configurable:!0}),t}();o.LudoGlobal=new n,cc._RF.pop()},{}],LudoGameMainUI:[function(t,e,o){"use strict";cc._RF.push(e,"57214WRF1BCUq3hs78B0upb","LudoGameMainUI");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.LudoGameMainUI=void 0;var r=t("../../../../../Common/script/base/AudioManager"),a=t("../../../../../Common/script/base/BaseFrameNative"),c=t("../../../../../Common/script/base/SceneManager"),l=t("../../../MainScene/LudoEnum"),u=t("./Controller/LudoController"),p=t("./LudoGameGlobal"),d=t("./LudoPlayer"),_=t("./LudoTips"),h=t("../../../../../Common/script/base/ReconnectManager"),y=t("../../../../../Common/script/base/BaseCode"),f=t("./Controller/LudoQueueMessages"),g=t("../../../../../Boot/scirpt/AppConst"),b=t("../../../rxlib/TAutoRegNode"),m=t("../../../rxlib/TGlobal"),v=cc._decorator,L=v.ccclass,P=v.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_deci=null,e.btn_hitFly=null,e.edt_diceNum=null,e.playerList=[],e.Tips=null,e.waitingJoin=null,e.Rule=null,e.lbl_rule=null,e.waitingBreak=null,e.label_break=null,e.isCanExeTexMas=!1,e._startWin=null,e.isDisconnection=!1,e.sendTime=0,e.waitbackFun=null,e.closeTime=0,e.disFn=null,e}return i(e,t),e.prototype.start=function(){t.prototype.start.call(this),cc.game.off(cc.game.EVENT_SHOW),cc.game.on(cc.game.EVENT_SHOW,this.gameEventShow.bind(this)),cc.game.off(cc.game.EVENT_HIDE),cc.game.on(cc.game.EVENT_HIDE,this.gameEventHide.bind(this)),u.default.instance.view=this,u.default.instance.RegistNotify(),p.LudoGlobal.gameEngine.init(this.playerList),this.loadSounds(),this.edt_diceNum.node.removeFromParent(!0),this.btn_hitFly.node.removeFromParent(!0),u.default.instance.cs_entertable_ludo()},e.prototype.gameEventShow=function(){var t=this;console.log("---gameEventShow---"),cc.game.resume(),this.isCanExeTexMas=!1,f.LudoQueueMessages.instance.removeAllMes(),this.scheduleOnce(function(){t.sendReconnect()},.5)},e.prototype.sendReconnect=function(){this.playerList[0].sp_finger.node.active=!1,h.ReconnectManager.getInstance.reconnect(this.connectSuccess.bind(this),this.connectFail.bind(this))},e.prototype.connectFail=function(t){var e=this;console.error("\u91cd\u8fde\u5931\u8d25\uff01\uff01"),this.Tips.ShowTips(t,function(){e.sendReconnect()},function(){e.ExitGame()})},e.prototype.connectSuccess=function(){f.LudoQueueMessages.instance.removeAllMes(),this.isCanExeTexMas=!1,this.scheduleOnce(function(){u.default.instance.cs_entertable_ludo(u.default.instance.Model.tableid)},.2)},e.prototype.gameEventHide=function(){console.log("---gameEventHide---"),this.unscheduleAllCallbacks(),this.playerList[0].sp_finger.node.active=!1,cc.game.pause()},e.prototype.loadSounds=function(){cc.assetManager.getBundle("Ludo").loadDir("gameStage/mainUI/res/Sounds",cc.AudioClip,function(t,e){for(var o=0;o<e.length;o++)r.AudioManager.Singleton.add(e[o].name,e[o]);r.AudioManager.Singleton.playBGM("ludoBGM")})},e.prototype.update=function(){this.isDisconnection||1==window.pinus.WebSocket.readyState||(this.isDisconnection=!0,this.Tips.ShowTips(y.BaseCode[g.AppConst.languageType].NETWORK_TIMEOUT,function(){cc.audioEngine.stopAll(),u.default.instance.UnRegistNotify(),c.SceneManager.Singleton.loadScene("GameHall","login")})),this.isCanExeTexMas&&f.LudoQueueMessages.instance.isCanExeNext()&&f.LudoQueueMessages.instance.ExeNextMes()},e.prototype.btn_deci_click=function(){Date.now()-this.sendTime<2e3||0!=this.playerList[0].sp_finger.node.active&&(this.sendTime=Date.now(),p.LudoGlobal.gameEngine.gameStatus==l.E_Ludo_Game_Status.DetermineOrder?u.default.instance.cs_makefirstpos_ludo():u.default.instance.cs_randomdice_ludo())},e.prototype.sc_makefirstpos_ludo_n=function(t){u.default.instance.Model.firstpos=t.firstpos;var e=this.playerList.find(function(e){return e.player&&e.serverpos==t.pos});e?(cc.error("\u786e\u8ba4\u5148\u624b\uff1apos = ",t.pos,"localpos=",e.localpos),e.throwDice(t.dice,0)):cc.error("\u786e\u8ba4\u5148\u624b\u4e3a\u627e\u5230\u73a9\u5bb6")},e.prototype.sc_randomdice_ludo_n=function(t){u.default.instance.Model.nextpos=t.nextpos,u.default.instance.Model.bOff=!1;var e=this.playerList.find(function(e){return e.player&&e.player.pos==t.pos});e?e.throwDice(t.dice,t.cellIndex):cc.error("\u786e\u8ba4\u5148\u624b\u4e3a\u627e\u5230\u73a9\u5bb6"),this.waitingBreak.active=!1,this.waitbackFun&&this.unschedule(this.waitbackFun)},e.prototype.sc_leave_ludo_n=function(t){u.default.instance.Model.breakPos=t.pos,u.default.instance.Model.bOff=t.bOff,u.default.instance.Model.waitTime=t.waitTime,this.waitUserBack()},e.prototype.waitUserBack=function(){var t=this;if(!this.waitingBreak.active){console.log("\u7b49\u5f85\u73a9\u5bb6\u56de\u6765\u64cd\u4f5c",u.default.instance.Model.waitTime),this.waitingBreak.active=!0;var e=this.playerList.find(function(t){return t.player&&t.player.pos==u.default.instance.Model.breakPos});if(e){e.setBreak(!0),this.waitbackFun&&this.unschedule(this.waitbackFun);var o=u.default.instance.Model.waitTime;this.waitbackFun=function(){t.label_break.string="1"==g.AppConst.languageType?"Player  ["+e.player.py.wechat.wName+"] is offline,\n\n the game will be automatically abandoned after "+o+" seconds":"\u092a\u094d\u0932\u0947\u092f\u0930 "+e.player.py.wechat.wName+" \u0911\u092b\u093c\u0932\u093e\u0907\u0928 \u0939\u0948, \u0917\u0947\u092e \u0915\u094b ("+o+") \u0938\u0947\u0915\u0902\u0921 \n\u0915\u0947 \u092c\u093e\u0926 \u0938\u094d\u0935\u091a\u093e\u0932\u093f\u0924 \u0930\u0942\u092a \u0938\u0947 \u091b\u094b\u0921\u093c \u0926\u093f\u092f\u093e \u091c\u093e\u090f\u0917\u093e",o<=0&&(t.waitingBreak.active=!1),o--},this.waitbackFun(),this.schedule(this.waitbackFun,1,u.default.instance.Model.waitTime)}}},e.prototype.btn_hitFly_click=function(){p.LudoGlobal.gameEngine.hit(l.E_Ludo_CampType.red)},e.prototype.close=function(){Date.now()-this.closeTime<=5e3||(this.closeTime=Date.now(),1!=a.BaseFrameNative.packType?u.default.instance.cs_applyexittable():cc.game.end())},e.prototype.sc_sitdown_ludo_n=function(t){t.user.py.userid==g.AppConst.mPlayerModel.userid&&(u.default.instance.Model._posServer=t.user.pos);var e=u.default.instance.Model.playerDataList.findIndex(function(e){return e.py.userid==t.user.py.userid});e>=0?u.default.instance.Model.playerDataList[e]=t.user:u.default.instance.Model.playerDataList.push(t.user),this.UpdatePlsyList()},e.prototype.UpdatePlsyList=function(){for(var t=u.default.instance.Model.playerDataList,e=0;e<4;e++){var o=e;(n=this.playerList[o]).clearUserinfo()}for(e=0;e<t.length;e++){var n=t[o=e],i=u.default.instance.Model.GetLocalPos(n.pos),s=this.playerList[i-1];if(null==s)return void console.error("\u4f4d\u7f6e\u9519\u8bef\uff1adata.pos = ",n.pos,"localpos=",i);s.updateUserInfo(n)}},e.prototype.sc_ready_Ludo_n=function(t){var e=u.default.instance.Model.GetLocalPos(t);this.playerList[e-1].onReady()},e.prototype.GameStart=function(){m.TGlobal.winMgr.popWin(),this.waitingJoin.active=!1,this._startWin=m.TGlobal.winMgr.showWin("gameStage/win/startWin/startWin","Ludo"),this.scheduleOnce(function(){m.TGlobal.winMgr.popWin(),p.LudoGlobal.gameEngine.startGame()},4)},e.prototype.sc_end_ludo_n=function(t){var e=this;u.default.instance.Model._pos2win=t._pos2win,u.default.instance.Model._pos2gold=t._pos2gold,this.scheduleOnce(function(){e.waitingJoin.active=!0,p.LudoGlobal.gameEngine.gameStatus=l.E_Ludo_Game_Status.End},1.5)},e.prototype.reconnectionInitView=function(){var t=this;if(u.default.instance.Model._recover&&u.default.instance.Model._recover.CellIndex){for(var e=0,o=this.playerList;e<o.length;e++){var n=o[e];null!=n.player&&n.reconnectInit()}this.playerList[0].sp_finger.node.active=!1,u.default.instance.Model.nextpos=u.default.instance.Model._recover.currPos,p.LudoGlobal.gameEngine._actionPlayerIdx=this.playerList.findIndex(function(t){return t.player&&t.serverpos==u.default.instance.Model.nextpos}),this.scheduleOnce(function(){t.waitingJoin.active=!1,t.setChessPath(),t.isCanExeTexMas=!0},1.4)}},e.prototype.setChessPath=function(){for(var t=u.default.instance.Model._recover.currPos,e=(u.default.instance.Model._recover.leftTime,u.default.instance.Model._recover.CellIndex),o=function(){var o=i,s=n.playerList.find(function(t){return t.player&&t.player.pos==e[o].pos});s&&(s.chess.setChessMapPos(e[o].val),s.serverpos==t&&(cc.error("\u5f53\u524d\u64cd\u4f5c\u73a9\u5bb6",t," localpos = ",s.localpos),n.scheduleOnce(function(){s.changeStatus(l.E_Ludo_Player_Status.ReadyThrow),p.LudoGlobal.gameEngine.gameStatus=l.E_Ludo_Game_Status.Gaming},1)))},n=this,i=0;i<e.length;i++)o()},e.prototype.ExitGame=function(){f.LudoQueueMessages.instance.removeAllMes(),cc.audioEngine.stopAll(),u.default.instance.UnRegistNotify(),c.SceneManager.Singleton.loadScene("GameHall","gameHall")},e.prototype.ExitGameFail=function(){this.Tips.ShowTips("1"==g.AppConst.languageType?"Leaving the game in the middle will deduct the double gold coins":"\u092c\u0940\u091a \u092e\u0947\u0902 \u0916\u0947\u0932 \u0915\u094b \u091b\u094b\u0921\u093c\u0928\u0947 \u0938\u0947 \u0926\u094b\u0939\u0930\u0947 \u0938\u094b\u0928\u0947 \u0915\u0947 \u0938\u093f\u0915\u094d\u0915\u0947 \u0918\u091f\u093e\u090f\u0902\u0917\u0947",function(){u.default.instance.cs_exittable_ludo()},function(){})},e.prototype.ShowRule=function(){this.Rule.active=!0;var t="";"1"==g.AppConst.languageType?(t+="1. Each player has 1 dice and 1 pawn.\n\n",t+="2. Player who's chess piece reached at the end first wins , the rest of the players lost.\n\n",t+="3. After the game starts, all the player's dice rotates once, and the largest player rolls the dice first\n\n",t+='4. The points of the dice are 4, 5, and 6 to perform "take -off" operation\n\n',t+="5. After the player rolls the dice, it will automatically move the chess piece according to the point of the dice\n\n",t+="6. When the player rolls the dice and 6 appears then player can roll again\n\n",t+="7. When one color chess piece and another color pawn at the same time are at the same position in a grid, the chess pieces will be returned back to the initial grid\n\n",t+="8. After fighting the chess pieces, you can get an extra dice opportunity\n\n",t+="9. For more than 1 minute after the game leaves halfway, it will automatically determine the failure and deduct the double note"):(t+="1. \u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 \u0916\u093f\u0932\u093e\u0921\u093c\u0940 \u0915\u0947 \u092a\u093e\u0938 \u092e\u0947\u0902 1 \u092a\u093e\u0938\u093e \u0914\u0930 1 \u092e\u094b\u0939\u0930\u0947 \u0939\u094b\u0924\u0947 \u0939\u0948\u0902\u0964\n\n",t+="2. \u091c\u093f\u0938 \u0916\u093f\u0932\u093e\u0921\u093c\u0940 \u0915\u0940 \u0936\u0924\u0930\u0902\u091c \u0915\u0940 \u0917\u094b\u091f\u0940 \u0938\u092c\u0938\u0947 \u092a\u0939\u0932\u0947 \u092a\u0939\u0941\u0901\u091a\u0924\u0940 \u0939\u0948 \u0935\u0939 \u092a\u0939\u0932\u0947 \u091c\u0940\u0924 \u091c\u093e\u0924\u093e \u0939\u0948, \u092c\u093e\u0915\u0940 \u0916\u093f\u0932\u093e\u0921\u093c\u0940 \u0939\u093e\u0930 \u091c\u093e\u0924\u0947 \u0939\u0948\u0902\u0964\n\n",t+="3. \u0916\u0947\u0932 \u0936\u0941\u0930\u0942 \u0939\u094b\u0928\u0947 \u0915\u0947 \u092c\u093e\u0926, \u0938\u092d\u0940 \u0916\u093f\u0932\u093e\u0921\u093c\u093f\u092f\u094b\u0902 \u0915\u093e \u092a\u093e\u0938\u093e \u090f\u0915 \u092c\u093e\u0930 \u0918\u0942\u092e\u0924\u093e \u0939\u0948, \u0914\u0930 \u0938\u092c\u0938\u0947 \u092c\u0921\u093c\u093e \u0916\u093f\u0932\u093e\u0921\u093c\u0940 \u092a\u0939\u0932\u0947 \u092a\u093e\u0938\u093e \u0918\u0941\u092e\u093e\u0924\u093e \u0939\u0948\n\n",t+='4. "\u091f\u0947\u0915-\u0911\u092b" \u0911\u092a\u0930\u0947\u0936\u0928 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0921\u093e\u0907\u0938 \u0915\u0947 \u0905\u0902\u0915 4, 5 \u0914\u0930 6 \u0939\u0948\u0902\n\n',t+="5. \u0916\u093f\u0932\u093e\u0921\u093c\u0940 \u0915\u0947 \u092a\u093e\u0938\u093e \u091a\u0932\u0928\u0947 \u0915\u0947 \u092c\u093e\u0926, \u092f\u0939 \u0938\u094d\u0935\u091a\u093e\u0932\u093f\u0924 \u0930\u0942\u092a \u0938\u0947 \u092a\u093e\u0938\u0947 \u0915\u0947 \u0905\u0902\u0915 \u0915\u0947 \u0905\u0928\u0941\u0938\u093e\u0930 \u0936\u0924\u0930\u0902\u091c \u0915\u0947 \u091f\u0941\u0915\u0921\u093c\u0947 \u0915\u094b \u0938\u094d\u0925\u093e\u0928\u093e\u0902\u0924\u0930\u093f\u0924 \u0915\u0930 \u0926\u0947\u0917\u093e\n\n",t+="6. \u091c\u092c \u0916\u093f\u0932\u093e\u0921\u093c\u0940 \u092a\u093e\u0938\u093e \u0918\u0941\u092e\u093e\u0924\u093e \u0939\u0948 \u0914\u0930 6 \u092a\u094d\u0930\u0915\u091f \u0939\u094b\u0924\u093e \u0939\u0948 \u0924\u094b \u0916\u093f\u0932\u093e\u0921\u093c\u0940 \u092b\u093f\u0930 \u0938\u0947 \u0930\u094b\u0932 \u0915\u0930 \u0938\u0915\u0924\u093e \u0939\u0948\n\n",t+="7. \u091c\u092c \u090f\u0915 \u0930\u0902\u0917 \u0915\u093e \u0936\u0924\u0930\u0902\u091c \u0915\u093e \u091f\u0941\u0915\u0921\u093c\u093e \u0914\u0930 \u0926\u0942\u0938\u0930\u093e \u0930\u0902\u0917 \u0915\u093e \u092e\u094b\u0939\u0930\u093e \u090f\u0915 \u0939\u0940 \u0938\u092e\u092f \u092e\u0947\u0902 \u090f\u0915 \u0917\u094d\u0930\u093f\u0921 \u092e\u0947\u0902 \u090f\u0915 \u0939\u0940 \u0938\u094d\u0925\u093f\u0924\u093f \u092e\u0947\u0902 \u0939\u094b\u0924\u093e \u0939\u0948, \u0924\u094b \u0936\u0924\u0930\u0902\u091c \u0915\u0947 \u091f\u0941\u0915\u0921\u093c\u0947 \u092a\u094d\u0930\u093e\u0930\u0902\u092d\u093f\u0915 \u0917\u094d\u0930\u093f\u0921 \u092e\u0947\u0902 \u0935\u093e\u092a\u0938 \u0906 \u091c\u093e\u090f\u0902\u0917\u0947\n\n",t+="8. \u0936\u0924\u0930\u0902\u091c \u0915\u0947 \u091f\u0941\u0915\u0921\u093c\u094b\u0902 \u0938\u0947 \u0932\u0921\u093c\u0928\u0947 \u0915\u0947 \u092c\u093e\u0926, \u0906\u092a \u090f\u0915 \u0905\u0924\u093f\u0930\u093f\u0915\u094d\u0924 \u092a\u093e\u0938\u093e \u0905\u0935\u0938\u0930 \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\n\n",t+="9. \u0916\u0947\u0932 \u0915\u0947 \u0906\u0927\u0947 \u0930\u093e\u0938\u094d\u0924\u0947 \u0915\u0947 \u092c\u093e\u0926 1 \u092e\u093f\u0928\u091f \u0938\u0947 \u0905\u0927\u093f\u0915 \u0938\u092e\u092f \u0924\u0915, \u092f\u0939 \u0938\u094d\u0935\u091a\u093e\u0932\u093f\u0924 \u0930\u0942\u092a \u0938\u0947 \u0935\u093f\u092b\u0932\u0924\u093e \u0915\u093e \u0928\u093f\u0930\u094d\u0927\u093e\u0930\u0923 \u0915\u0930\u0947\u0917\u093e \u0914\u0930 \u0921\u092c\u0932 \u0928\u094b\u091f \u092e\u0947\u0902 \u0915\u091f\u094c\u0924\u0940 \u0915\u0930\u0947\u0917\u093e"),this.lbl_rule.string=t},e.prototype.CloseRule=function(){this.Rule.active=!1},e.prototype.DisconnectCountdown=function(){var t=this;this.disFn&&this.unschedule(this.disFn),this.schedule(this.disFn=function(){t.Tips.ShowTips(y.BaseCode[g.AppConst.languageType].NETWORK_TIMEOUT,function(){cc.audioEngine.stopAll(),u.default.instance.UnRegistNotify(),c.SceneManager.Singleton.loadScene("GameHall","login")})},10)},e.prototype.stopDisconnectCountdown=function(){this.disFn&&this.unschedule(this.disFn)},s([P(cc.Button)],e.prototype,"btn_deci",void 0),s([P(cc.Button)],e.prototype,"btn_hitFly",void 0),s([P(cc.EditBox)],e.prototype,"edt_diceNum",void 0),s([P([d.LudoPlayer])],e.prototype,"playerList",void 0),s([P(_.LudoTips)],e.prototype,"Tips",void 0),s([P(cc.Node)],e.prototype,"waitingJoin",void 0),s([P(cc.Node)],e.prototype,"Rule",void 0),s([P(cc.Label)],e.prototype,"lbl_rule",void 0),s([P(cc.Node)],e.prototype,"waitingBreak",void 0),s([P(cc.Label)],e.prototype,"label_break",void 0),s([L],e)}(b.TAutoRegNode);o.LudoGameMainUI=w,cc._RF.pop()},{"../../../../../Boot/scirpt/AppConst":void 0,"../../../../../Common/script/base/AudioManager":void 0,"../../../../../Common/script/base/BaseCode":void 0,"../../../../../Common/script/base/BaseFrameNative":void 0,"../../../../../Common/script/base/ReconnectManager":void 0,"../../../../../Common/script/base/SceneManager":void 0,"../../../MainScene/LudoEnum":"LudoEnum","../../../rxlib/TAutoRegNode":"TAutoRegNode","../../../rxlib/TGlobal":"TGlobal","./Controller/LudoController":"LudoController","./Controller/LudoQueueMessages":"LudoQueueMessages","./LudoGameGlobal":"LudoGameGlobal","./LudoPlayer":"LudoPlayer","./LudoTips":"LudoTips"}],LudoHead:[function(t,e,o){"use strict";cc._RF.push(e,"eae66NcHXhOSZsLcVIJuKQ7","LudoHead");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.LudoHead=void 0;var r=cc._decorator,a=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sp_head=null,e.lbl_name=null,e}return i(e,t),e.prototype.start=function(){},Object.defineProperty(e.prototype,"playerName",{set:function(t){this.lbl_name.string=t},enumerable:!1,configurable:!0}),e.prototype.setSpHead=function(){},s([c(cc.Sprite)],e.prototype,"sp_head",void 0),s([c(cc.Label)],e.prototype,"lbl_name",void 0),s([a],e)}(cc.Component);o.LudoHead=l,cc._RF.pop()},{}],LudoMainScene:[function(t,e,o){"use strict";cc._RF.push(e,"975daeHughB75wnFqAIj8vU","LudoMainScene");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.LudoMainScene=void 0;var r=t("../rxlib/TGlobal"),a=t("../rxlib/TScene"),c=cc._decorator.ccclass,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),r.TGlobal.Init(this)},e.prototype.start=function(){var t=this;cc.assetManager.loadBundle("Ludo",function(){t.enterStage(1)})},e.prototype.getWinLayer=function(){return this.layerList[1]},s([c],e)}(a.TScene);o.LudoMainScene=l,cc._RF.pop()},{"../rxlib/TGlobal":"TGlobal","../rxlib/TScene":"TScene"}],LudoModel:[function(t,e,o){"use strict";cc._RF.push(e,"1b5eft+175A64fSH9Pl6STF","LudoModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this._posServer=1,this.brate=0,this.playerDataList=[],this.firstpos=0,this.nextpos=0,this.breakPos=0,this.bOff=!1,this.waitTime=0,this.limitgold=0,this._sdices=[],this._pos2Dices=[],this._pos2win=[],this._pos2gold=[],this._recover=null}return t.prototype.InitData=function(){this.limitgold=0,this._sdices=[],this._pos2Dices=[],this._pos2win=[],this._pos2gold=[]},t.prototype.GetLocalPos=function(t){(this._posServer<1||this._posServer>4)&&(this._posServer=1);var e=t-this._posServer;return(e<0?e+4:e)+1},t.prototype.getStartAction=function(){if(this._sdices&&this._sdices.length>0)return this._sdices.sort(function(t,e){return e.val-t.val}),this._sdices[0].pos},t.prototype.getNextPoint=function(t){var e;if(null!=this._pos2Dices[0]&&this._pos2Dices[0].pos==t)return this._pos2Dices.shift().val;cc.error("\u83b7\u53d6\u4e0b\u6b21\u70b9\u6570\uff0c\u5bf9\u5e94pos\u9519\u8bef",t,null===(e=this._pos2Dices[0])||void 0===e?void 0:e.pos)},t}();o.default=n,cc._RF.pop()},{}],LudoNetData:[function(t,e,o){"use strict";cc._RF.push(e,"ac76aYDNkJINYfBnEoqnJx2","LudoNetData");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.sc_leave_ludo_n=o.sc_exittable_ludo=o.cs_exittable_ludo=o.sc_one_exittable_n=o.cs_applyexittable=o.sc_makefirstpos_ludo_n=o.sc_makefirstpos_ludo=o.cs_makefirstpos_ludo=o.sc_randomdice_ludo_n=o.sc_randomdice_ludo=o.cs_randomdice_ludo=o.sc_entertable_ludo=o.cs_entertable_ludo=o.sc_enterrobot_ludo=o.cs_enterrobot_ludo=o.sc_end_ludo_n=o.sc_tablestart_ludo_n=o.sc_ready_ludo_n=o.sc_ready_ludo=o.cs_ready_ludo=o.TableRecoverLudoSD=o.sc_situpkeep_ludo_n=o.sc_situpkeep_ludo=o.cs_situpkeep_ludo=o.sc_sitdown_ludo_n=o.sc_sitdown_ludo=o.cs_sitdown_ludo=void 0;var s=t("../../../../../../Common/script/base/cs_base"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.cs_base);o.cs_sitdown_ludo=r;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_sitdown_ludo=a;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_sitdown_ludo_n=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.cs_base);o.cs_situpkeep_ludo=l;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_situpkeep_ludo=u;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_situpkeep_ludo_n=p;o.TableRecoverLudoSD=function(){};var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.cs_base);o.cs_ready_ludo=d;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_ready_ludo=_;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_ready_ludo_n=h;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_tablestart_ludo_n=y;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_end_ludo_n=f;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.cs_base);o.cs_enterrobot_ludo=g;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_enterrobot_ludo=b;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.cs_base);o.cs_entertable_ludo=m;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_entertable_ludo=v;var L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.cs_base);o.cs_randomdice_ludo=L;var P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_randomdice_ludo=P;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_randomdice_ludo_n=w;var M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.cs_base);o.cs_makefirstpos_ludo=M;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_makefirstpos_ludo=T;var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_makefirstpos_ludo_n=C;var S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.cs_base);o.cs_applyexittable=S;var O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_one_exittable_n=O;var E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.cs_base);o.cs_exittable_ludo=E;var x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_exittable_ludo=x;var F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.sc_base);o.sc_leave_ludo_n=F,cc._RF.pop()},{"../../../../../../Common/script/base/cs_base":void 0}],LudoPlayer:[function(t,e,o){"use strict";cc._RF.push(e,"1afe5QSR/JJk4FwwXRTqidL","LudoPlayer");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.LudoPlayer=void 0;var r=t("../../../../../Boot/scirpt/AppConst"),a=t("../../../../../Common/script/base/AudioManager"),c=t("../../../../../Common/script/base/BaseFrameNative"),l=t("../../../../../Common/script/util/UIUtil"),u=t("../../../MainScene/LudoEnum"),p=t("./LudoChess"),d=t("./LudoCountDown"),_=t("./LudoDeci"),h=t("./LudoGameEngine"),y=t("./LudoGameGlobal"),f=cc._decorator,g=f.ccclass,b=f.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sp_headFrame=null,e.sp_head=null,e.pf_dice_node=null,e.lbl_name=null,e.lbl_mygold=null,e.pf_cd=null,e.campType=0,e.chess=null,e.sp_finger=null,e.deciNumber=null,e.lbl_deciNum=null,e.spf_headFrameList=[],e.node_userbreak=null,e.player=null,e.localpos=0,e.serverpos=0,e.isMySelf=!1,e._roundPoint=0,e._throwNum=0,e.cellIndex=0,e}return i(e,t),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},set:function(t){this._status!=t&&this.changeStatus(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPoint",{get:function(){return this._roundPoint},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.pf_cd.node.active=!1,this.sp_finger&&(y.LudoGlobal.gameEngine.layout==h.E_Game_LAYOUT.HORIZONTAL?(this.sp_finger.node.active=!1,cc.tween(this.sp_finger.node).repeatForever(cc.tween(this.sp_finger.node).by(.5,{x:-30,y:-30}).by(.5,{x:30,y:30})).start()):(this.sp_finger.node.active=!1,cc.tween(this.sp_finger.node).repeatForever(cc.tween(this.sp_finger.node).by(.5,{x:30,y:-30}).by(.5,{x:-30,y:30})).start())),this.actionHintOver()},e.prototype.clearUserinfo=function(){this.player=null,this.serverpos=0,this.lbl_name.string="",this.sp_head.spriteFrame=null,this.setBreak(!1)},e.prototype.updateUserInfo=function(t){var e=this;if(this.player=t,t&&null!=this.player.py){this.lbl_name.string=t.py.userid+""+this.player.py.wechat==null?this.player.py._n:this.player.py.wechat.wName,this.lbl_name.string=l.UIUtil.getNickNameSub(this.lbl_name.string,6);var o=c.BaseFrameNative.serverlistItem.api2+this.player.py.wechat.wicon;cc.assetManager.loadRemote(o,function(t,o){o instanceof cc.Texture2D&&(e.sp_head.spriteFrame=new cc.SpriteFrame(o))}),t.py.userid==r.AppConst.mPlayerModel.userid?(this.isMySelf=!0,this.updateGold(t.py.gold)):this.isMySelf=!1,this.serverpos=t.pos,cc.error("\u73a9\u5bb6\u5750\u4e0b\uff1alocalpos = ",this.localpos," serverpos = ",this.serverpos),this.setBreak(!1)}},e.prototype.init=function(){var t=this;this.pf_Dice=this.pf_dice_node.getComponent(_.LudoDeci),this.sp_headFrame.spriteFrame=this.spf_headFrameList[this.campType-1],this.pf_cd.node.active=!1,this.pf_cd.setcdDoneCallback(this,this.cdDoneCallback),this.chess.setFlyEndCallback(this,this.chessFlyEnd),this.scheduleOnce(function(){t.chess.init()},1),this.campType,u.E_Ludo_CampType.red},e.prototype.reconnectInit=function(){this.pf_Dice=this.pf_dice_node.getComponent(_.LudoDeci),this.sp_headFrame.spriteFrame=this.spf_headFrameList[this.campType-1],this.pf_cd.node.active=!1,this.pf_cd.setcdDoneCallback(this,this.cdDoneCallback),this.chess.setFlyEndCallback(this,this.chessFlyEnd),this.chess.reconnectInit()},e.prototype.onReady=function(){cc.log("\u73a9\u5bb6\u51c6\u5907",this.localpos),this._status=u.E_Ludo_Player_Status.StandBy,this.setBreak(!1)},e.prototype.actionHintStart=function(){cc.tween(this.sp_headFrame.node).repeatForever(cc.tween(this.sp_headFrame.node).to(.3,{color:new cc.Color(100,100,100)}).to(.3,{color:new cc.Color(255,255,255)})).start(),this.sp_finger&&(this.sp_finger.node.active=!0)},e.prototype.actionHintOver=function(){cc.Tween.stopAllByTarget(this.sp_headFrame.node),this.sp_finger&&(this.sp_finger.node.active=!1)},e.prototype.cdDoneCallback=function(){},e.prototype.showCountDown=function(){this.pf_cd.node.active=!0,this.pf_cd.duration=10},e.prototype.stopCountDown=function(){this.pf_cd.stop(),this.pf_cd.node.active=!1},Object.defineProperty(e.prototype,"playerName",{set:function(t){this.lbl_name.string=t},enumerable:!1,configurable:!0}),e.prototype.updateGame=function(){switch(this._status){case u.E_Ludo_Player_Status.StandBy:case u.E_Ludo_Player_Status.ReadyThrow:case u.E_Ludo_Player_Status.Throwing:case u.E_Ludo_Player_Status.MoveChess:}},e.prototype.changeStatus=function(t){switch(this._status=t,this._status){case u.E_Ludo_Player_Status.StandBy:this._throwNum=0;break;case u.E_Ludo_Player_Status.ReadyThrow:this.readyThrow();break;case u.E_Ludo_Player_Status.Throwing:case u.E_Ludo_Player_Status.MoveChess:}},e.prototype.readyThrow=function(){cc.error("\u5f00\u59cb\u5012\u8ba1\u65f6",this.localpos),this._roundPoint=0,this.actionHintStart(),this.showCountDown()},e.prototype.throwDice=function(t,e){var o=this;this.pf_Dice&&(this._throwNum+=1,this.actionHintOver(),this.pf_cd.node.active&&this.stopCountDown(),cc.error("\u6447\u9ab0\u5b50\u70b9\u6570\uff1apos = ",this.localpos,t),0!=t?(this.cellIndex=e,this.setBreak(!1),a.AudioManager.Singleton.play("","ludoDice"),this._roundPoint=t,this.status=u.E_Ludo_Player_Status.Throwing,this.pf_Dice.throw(t,function(){switch(y.LudoGlobal.gameEngine.gameStatus){case u.E_Ludo_Game_Status.Gaming:o.chess.toFly(o._roundPoint);break;case u.E_Ludo_Game_Status.DetermineOrder:o.status=u.E_Ludo_Player_Status.StandBy}o.showDiceNumber(t)})):this.status=u.E_Ludo_Player_Status.StandBy)},e.prototype.showDiceNumber=function(t){var e=this;cc.Tween.stopAllByTarget(this.deciNumber),this.deciNumber.active=!0,this.lbl_deciNum.string=t+"",this.deciNumber.setScale(.1),cc.tween(this.deciNumber).to(.1,{scale:1.2}).to(.1,{scale:1}).delay(2).call(function(){e.deciNumber.active=!1}).start()},e.prototype.chessFlyEnd=function(){var t=this;this.chess._currFlyPathIdx>-1&&this.chess.setChessMapPos(this.cellIndex),this.scheduleOnce(function(){t.status=u.E_Ludo_Player_Status.StandBy,t.pf_Dice.play("bai8",!1)},.5)},e.prototype.updateGold=function(t){this.lbl_mygold&&(this.player.py.gold=t,this.lbl_mygold.string=String(l.UIUtil.formatNumber100(t)))},e.prototype.setBreak=function(t){this.node_userbreak.active=t},s([b(cc.Sprite)],e.prototype,"sp_headFrame",void 0),s([b(cc.Sprite)],e.prototype,"sp_head",void 0),s([b(cc.Node)],e.prototype,"pf_dice_node",void 0),s([b(cc.Label)],e.prototype,"lbl_name",void 0),s([b(cc.Label)],e.prototype,"lbl_mygold",void 0),s([b(d.LudoCountDown)],e.prototype,"pf_cd",void 0),s([b({type:cc.Enum(u.E_Ludo_CampType)})],e.prototype,"campType",void 0),s([b(p.LudoChess)],e.prototype,"chess",void 0),s([b(cc.Sprite)],e.prototype,"sp_finger",void 0),s([b(cc.Node)],e.prototype,"deciNumber",void 0),s([b(cc.Label)],e.prototype,"lbl_deciNum",void 0),s([b([cc.SpriteFrame])],e.prototype,"spf_headFrameList",void 0),s([b(cc.Node)],e.prototype,"node_userbreak",void 0),s([g],e)}(cc.Component);o.LudoPlayer=m,cc._RF.pop()},{"../../../../../Boot/scirpt/AppConst":void 0,"../../../../../Common/script/base/AudioManager":void 0,"../../../../../Common/script/base/BaseFrameNative":void 0,"../../../../../Common/script/util/UIUtil":void 0,"../../../MainScene/LudoEnum":"LudoEnum","./LudoChess":"LudoChess","./LudoCountDown":"LudoCountDown","./LudoDeci":"LudoDeci","./LudoGameEngine":"LudoGameEngine","./LudoGameGlobal":"LudoGameGlobal"}],LudoQueueMessages:[function(t,e,o){"use strict";cc._RF.push(e,"8862etfCt1PG5vj+gI8mS9/","LudoQueueMessages"),Object.defineProperty(o,"__esModule",{value:!0}),o.LudoQueueMessages=void 0;var n=function(){function t(){this.listMessages=[],this.oldMsgid=0}return Object.defineProperty(t,"instance",{get:function(){return null==this._texms&&(this._texms=new t),this._texms},enumerable:!1,configurable:!0}),t.prototype.AddTexMes=function(t,e,o){var n=new i;n.name=t,n.status=!1,n.data=e,n.fun=o,this.listMessages.push(n)},t.prototype.isCanExeNext=function(){return 0!=this.listMessages.length&&0==this.listMessages[0].status},t.prototype.ExeNextMes=function(){this.listMessages.length>0&&(this.oldMsgid,this.listMessages[0].data._msgid,this.oldMsgid=this.listMessages[0].data._msgid,this.listMessages[0].status=!0,this.listMessages[0].fun(this.listMessages[0].data),this.listMessages.shift())},t.prototype.RemoveFirstMes=function(){this.listMessages.length>0&&1==this.listMessages[0].status&&this.listMessages.shift()},t.prototype.removeAllMes=function(){this.listMessages=[]},t}();o.LudoQueueMessages=n;var i=function(){};cc._RF.pop()},{}],LudoTips:[function(t,e,o){"use strict";cc._RF.push(e,"6d1cawHthBFn78YnCrKhxK9","LudoTips");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.LudoTips=void 0;var r=t("../../../../../Boot/scirpt/AppConst"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Oops=null,e.Oopsyd=null,e.tipsContent=null,e.btnOKClick=null,e.btnOK=null,e.btnClose=null,e.Fun1=null,e.Fun2=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){console.log("ludo tips start"),this.Oops.node.active="1"==r.AppConst.languageType,this.Oopsyd.node.active="1"!=r.AppConst.languageType},e.prototype.ShowTips=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=null),this.tipsContent.string=t,this.Fun1=e,this.Fun2=o,null!=e&&null!=o?(this.btnOKClick.node.active=!0,this.btnOK.node.active=!1,this.btnClose.node.active=!0):(this.btnOKClick.node.active=!1,this.btnOK.node.active=!0,this.btnClose.node.active=!1),this.node.active=!0},e.prototype.onBtnOKClick=function(){this.Fun1&&this.Fun1(),this.node.active=!1},e.prototype.onBtnOK=function(){this.Fun1&&this.Fun1(),this.node.active=!1},e.prototype.onBtnClose=function(){this.Fun2&&this.Fun2(),this.node.active=!1},s([l(cc.Sprite)],e.prototype,"Oops",void 0),s([l(cc.Sprite)],e.prototype,"Oopsyd",void 0),s([l(cc.Label)],e.prototype,"tipsContent",void 0),s([l(cc.Button)],e.prototype,"btnOKClick",void 0),s([l(cc.Button)],e.prototype,"btnOK",void 0),s([l(cc.Button)],e.prototype,"btnClose",void 0),s([c],e)}(cc.Component);o.LudoTips=u,cc._RF.pop()},{"../../../../../Boot/scirpt/AppConst":void 0}],MapInfo:[function(t,e,o){"use strict";cc._RF.push(e,"55358c8W9RHYKMITl2MHtrY","MapInfo"),Object.defineProperty(o,"__esModule",{value:!0}),o.Ludo_Map_StandBy_Pos=o.C_LUDO_MAP_WIN_PATH=o.C_LUDO_MAP_FLY_PATH=o.C_Ludo_Map_Pos=void 0;var n=t("./LudoEnum");o.C_Ludo_Map_Pos=[{x:0,y:-420,type:n.E_Ludo_Map_PointType.WIN_PATH},{x:-131,y:-420,type:n.E_Ludo_Map_PointType.Normal},{x:-131,y:-318,type:n.E_Ludo_Map_PointType.Normal},{x:-130,y:-216,type:n.E_Ludo_Map_PointType.Normal},{x:-216,y:-131,type:n.E_Ludo_Map_PointType.Normal},{x:-318,y:-131,type:n.E_Ludo_Map_PointType.Safe},{x:-420,y:-131,type:n.E_Ludo_Map_PointType.Normal},{x:-420,y:0,type:n.E_Ludo_Map_PointType.WIN_PATH},{x:-420,y:131,type:n.E_Ludo_Map_PointType.Normal},{x:-318,y:131,type:n.E_Ludo_Map_PointType.Normal},{x:-216,y:131,type:n.E_Ludo_Map_PointType.Normal},{x:-131,y:216,type:n.E_Ludo_Map_PointType.Normal},{x:-131,y:318,type:n.E_Ludo_Map_PointType.Safe},{x:-130,y:420,type:n.E_Ludo_Map_PointType.Normal},{x:0,y:420,type:n.E_Ludo_Map_PointType.WIN_PATH},{x:131,y:420,type:n.E_Ludo_Map_PointType.Normal},{x:131,y:318,type:n.E_Ludo_Map_PointType.Normal},{x:131,y:216,type:n.E_Ludo_Map_PointType.Normal},{x:216,y:131,type:n.E_Ludo_Map_PointType.Normal},{x:318,y:131,type:n.E_Ludo_Map_PointType.Safe},{x:420,y:131,type:n.E_Ludo_Map_PointType.Normal},{x:420,y:0,type:n.E_Ludo_Map_PointType.WIN_PATH},{x:420,y:-131,type:n.E_Ludo_Map_PointType.Normal},{x:318,y:-131,type:n.E_Ludo_Map_PointType.Normal},{x:216,y:-131,type:n.E_Ludo_Map_PointType.Normal},{x:131,y:-216,type:n.E_Ludo_Map_PointType.Normal},{x:131,y:-318,type:n.E_Ludo_Map_PointType.Safe},{x:131,y:-420,type:n.E_Ludo_Map_PointType.Normal},{x:0,y:-318,type:n.E_Ludo_Map_PointType.WIN_PATH},{x:0,y:-216,type:n.E_Ludo_Map_PointType.WIN_PATH},{x:0,y:-105,type:n.E_Ludo_Map_PointType.WIN_PATH},{x:-318,y:0,type:n.E_Ludo_Map_PointType.WIN_PATH},{x:-216,y:0,type:n.E_Ludo_Map_PointType.WIN_PATH},{x:-105,y:0,type:n.E_Ludo_Map_PointType.WIN_PATH},{x:0,y:318,type:n.E_Ludo_Map_PointType.WIN_PATH},{x:0,y:216,type:n.E_Ludo_Map_PointType.WIN_PATH},{x:0,y:105,type:n.E_Ludo_Map_PointType.WIN_PATH},{x:318,y:0,type:n.E_Ludo_Map_PointType.WIN_PATH},{x:216,y:0,type:n.E_Ludo_Map_PointType.WIN_PATH},{x:105,y:0,type:n.E_Ludo_Map_PointType.WIN_PATH}],o.C_LUDO_MAP_FLY_PATH=[[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],[9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,0,1,2,3,4],[16,17,18,19,20,21,22,23,24,25,26,27,0,1,2,3,4,5,6,7,8,9,10,11],[23,24,25,26,27,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]],o.C_LUDO_MAP_WIN_PATH=[[26,27,0,28,29,30],[5,6,7,31,32,33],[12,13,14,34,35,36],[19,20,21,37,38,39]],o.Ludo_Map_StandBy_Pos=[{x:-336,y:-330},{x:-336,y:330},{x:333,y:330},{x:333,y:-330}],cc._RF.pop()},{"./LudoEnum":"LudoEnum"}],TAutoRegEventCom:[function(t,e,o){"use strict";cc._RF.push(e,"38c2bfp7/lCl4djYoYK5qkX","TAutoRegEventCom"),Object.defineProperty(o,"__esModule",{value:!0}),o.TAutoRegEventCom=void 0;var n=function(){function t(t,e){this._autoRegCom=new rx.TAutoRegEventCom(t,e),this._autoRegCom.addEventRegExp(/_click$/)}return t.prototype.autoRegisteredEvent=function(){this._autoRegCom.autoRegisteredEvent()},t.prototype.clearReg=function(){this._autoRegCom.clearReg()},t}();o.TAutoRegEventCom=n,cc._RF.pop()},{}],TAutoRegNode:[function(t,e,o){"use strict";cc._RF.push(e,"e4ee3qXSOhJ7Z8GcBapMAcr","TAutoRegNode");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.TAutoRegNode=void 0;var r=t("./TAutoRegEventCom"),a=t("./TGlobal"),c=cc._decorator.ccclass,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this._autoRegEventCom=new r.TAutoRegEventCom(this,a.TGlobal.eventMgr)},e.prototype.start=function(){this._autoRegEventCom.autoRegisteredEvent()},e.prototype.onDestroy=function(){this._autoRegEventCom&&this._autoRegEventCom.clearReg()},s([c],e)}(cc.Component);o.TAutoRegNode=l,cc._RF.pop()},{"./TAutoRegEventCom":"TAutoRegEventCom","./TGlobal":"TGlobal"}],TGlobal:[function(t,e,o){"use strict";cc._RF.push(e,"0ec7dZqBAhLL5SN9BsWOl5B","TGlobal"),Object.defineProperty(o,"__esModule",{value:!0}),o.TGlobal=void 0;var n=function(){function t(){}return Object.defineProperty(t.prototype,"mainScene",{get:function(){return this._mainScene},set:function(t){this._mainScene=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"assteMgr",{get:function(){return this._assteMgr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"eventMgr",{get:function(){return this._eventMgr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"winMgr",{get:function(){return this._winMgr},enumerable:!1,configurable:!0}),t.prototype.Init=function(t){this._mainScene=t,this._assteMgr=new rx.TAssetsMgr,this._eventMgr=new cc.EventTarget,this._winMgr=new rx.TWinMgr(this._mainScene.getWinLayer().node,this._assteMgr)},t}();o.TGlobal=new n,cc._RF.pop()},{}],TLayer:[function(t,e,o){"use strict";cc._RF.push(e,"421cau+x1NBO5J6iphbHPy5","TLayer");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,s){function r(t){try{c(n.next(t))}catch(e){s(e)}}function a(t){try{c(n.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(r,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(t){return function(e){return c([t,e])}}function c(s){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],n=0}finally{o=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.TLayer=o.stagePrefab=void 0;var c,l=t("./TGlobal");(function(t){t[t.GAME=0]="GAME",t[t.MAINUI=1]="MAINUI",t[t.WIN=2]="WIN",t[t.TOP=3]="TOP",t[t.DEBUG=4]="DEBUG"})(c||(c={}));var u=cc._decorator,p=u.ccclass,d=u.property,_=function(){function t(){this.bundle="",this.prefab=""}return s([d(cc.String)],t.prototype,"bundle",void 0),s([d(cc.String)],t.prototype,"prefab",void 0),s([p("stagePrefab")],t)}();o.stagePrefab=_;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layerType=c.MAINUI,e.showPrefab=[],e}return i(e,t),e.prototype.enterStage=function(t){this.showPrefab.length>=t&&this.addPrefabToLayer(this.showPrefab[t-1].prefab,this.showPrefab[t-1].bundle)},e.prototype.exitStage=function(){this.node.destroyAllChildren()},e.prototype.addPrefabToLayer=function(t,e){return r(this,void 0,void 0,function(){var o,n;return a(this,function(i){switch(i.label){case 0:return[4,l.TGlobal.assteMgr.loadResAsync(t,e,cc.Prefab)];case 1:return o=i.sent(),n=cc.instantiate(o),this.node.addChild(n),[2]}})})},s([d({type:cc.Enum(c)})],e.prototype,"layerType",void 0),s([d([_])],e.prototype,"showPrefab",void 0),s([p],e)}(cc.Component);o.TLayer=h,cc._RF.pop()},{"./TGlobal":"TGlobal"}],TScene:[function(t,e,o){"use strict";cc._RF.push(e,"8cf4dCXbqhN86C0If69l27V","TScene");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.TScene=void 0;var r=t("./TLayer"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layerList=[],e}return i(e,t),Object.defineProperty(e.prototype,"lastStageKey",{get:function(){return this._lastStageKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageKey",{get:function(){return this._stageKey},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._stageKey=0,this._lastStageKey=0},e.prototype.start=function(){},e.prototype.autoAdapterSize=function(){var t,e=this.node.getComponent(cc.Canvas);t||(t=e.designResolution);var o=t,n=cc.view.getFrameSize(),i=n.width,s=n.height,r=i,a=s;i/s>o.width/o.height?r=(a=o.height)*i/s:a=s/i*(r=o.width),e.designResolution=cc.size(r,a),e.node.width=r,e.node.height=a},e.prototype.enterStage=function(t){if(0!=this._stageKey)for(var e=0;e<this.layerList.length;e++)this.layerList[e].exitStage(t,this._stageKey);for(e=0;e<this.layerList.length;e++)this.layerList[e].enterStage(t);this._lastStageKey=this._stageKey,this._stageKey=t,this.exitStage(this._stageKey,t),console.log("entetStage:",this._lastStageKey,this._stageKey)},e.prototype.exitStage=function(){},s([l([r.TLayer])],e.prototype,"layerList",void 0),s([c],e)}(cc.Component);o.TScene=u,cc._RF.pop()},{"./TLayer":"TLayer"}],TWindow:[function(t,e,o){"use strict";cc._RF.push(e,"559f1GgtqhP/Il7RC/G91gT","TWindow");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.TWindow=void 0;var r=t("./TAutoRegEventCom"),a=t("./TGlobal"),c=cc._decorator.ccclass,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._winData=null,e}return i(e,t),Object.defineProperty(e.prototype,"winData",{get:function(){return this._winData},set:function(t){this._winData=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onClose",{set:function(t){this._onClose=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.addComponent(cc.BlockInputEvents).node.active=!0,this._autoRegEventCom=new r.TAutoRegEventCom(this,a.TGlobal.eventMgr),this._autoRegEventCom.autoRegisteredEvent()},e.prototype.start=function(){},e.prototype.show=function(){},e.prototype.close=function(){this._winData=null,this._onClose&&this._onClose(this._onCloseData),this.node.destroy()},s([c],e)}(cc.Component);o.TWindow=l,cc._RF.pop()},{"./TAutoRegEventCom":"TAutoRegEventCom","./TGlobal":"TGlobal"}],startWin:[function(t,e,o){"use strict";cc._RF.push(e,"fbd56LBaylFS7IabeQMz1Sl","startWin");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../rxlib/TGlobal"),a=t("../../../../rxlib/TWindow"),c=(t("../../../mainUI/script/LudoGameGlobal"),cc._decorator),l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_start=null,e.label_contdown=null,e.img_contdown=null,e.waitgametime=null,e}return i(e,t),e.prototype.start=function(){cc.tween(this.img_contdown.node).repeatForever(cc.tween().by(1,{angle:360})).start(),this.startContdown()},e.prototype.btn_start_click=function(){r.TGlobal.winMgr.popWin()},e.prototype.startContdown=function(t){var e=this;void 0===t&&(t=3),this.node.active=!0;var o=t;this.label_contdown.string=o+"",this.waitgametime&&this.unschedule(this.waitgametime),this.schedule(this.waitgametime=function(){if(--o<0)return e.node.active=!1,void e.unschedule(e.waitgametime);e.label_contdown.string=o+""},1,t+1)},e.prototype.stoipContdown=function(){this.waitgametime&&this.unschedule(this.waitgametime),this.node.active=!1},s([u(cc.Button)],e.prototype,"btn_start",void 0),s([u(cc.Label)],e.prototype,"label_contdown",void 0),s([u(cc.Sprite)],e.prototype,"img_contdown",void 0),s([l],e)}(a.TWindow);o.default=p,cc._RF.pop()},{"../../../../rxlib/TGlobal":"TGlobal","../../../../rxlib/TWindow":"TWindow","../../../mainUI/script/LudoGameGlobal":"LudoGameGlobal"}],winnerWin:[function(t,e,o){"use strict";cc._RF.push(e,"01f777lkHFDrKYu9ytVX1nY","winnerWin");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../../../Common/script/base/BaseFrameNative"),a=t("../../../../../../Common/script/util/UIUtil"),c=t("../../../../rxlib/TGlobal"),l=t("../../../../rxlib/TWindow"),u=t("../../../mainUI/script/Controller/LudoController"),p=(t("../../../mainUI/script/LudoGameGlobal"),cc._decorator),d=p.ccclass,_=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.bg_v=null,e.btn_start=null,e.PlayerObject=[],e.btn_Leave=null,e.win_img=null,e.lose_img=null,e.loseFont=null,e.winFont=null,e}return i(e,t),e.prototype.start=function(){u.default.instance.Model._pos2win.sort(function(t,e){return e.val-t.val});for(var t=function(){var t=o;e.PlayerObject[t].active=!1;var n=u.default.instance.Model._pos2win[t];if(n){var i=u.default.instance.view.playerList.find(function(t){return t.player&&t.serverpos==n.pos});if(i){e.PlayerObject[t].active=!0;var s=e.PlayerObject[t].getChildByName("listbgOther"),r=e.PlayerObject[t].getChildByName("listbgME"),c=e.PlayerObject[t].getChildByName("lbl_name"),l=e.PlayerObject[t].getChildByName("sp_head_frame"),p=e.PlayerObject[t].getChildByName("sp_head"),d=e.PlayerObject[t].getChildByName("lbl_wingold"),_=e.PlayerObject[t].getChildByName("lbl_rank");s.active=!i.isMySelf,r.active=i.isMySelf,p.getComponent(cc.Sprite).spriteFrame=i.sp_head.spriteFrame,c.getComponent(cc.Label).string=i.lbl_name.string,c.getComponent(cc.Label).node.color=(new cc.Color).fromHEX(i.isMySelf?"#874220":"9072a4"),_.getComponent(cc.Label).node.color=(new cc.Color).fromHEX(i.isMySelf?"#874220":"9072a4"),l.getComponent(cc.Sprite).spriteFrame=i.sp_headFrame.spriteFrame,d.getComponent(cc.Label).string=(n.val>0?"+":"")+a.UIUtil.formatNumber100(n.val),d.getComponent(cc.Label).font=n.val>0?e.winFont:e.loseFont,i.isMySelf&&(e.win_img.node.active=n.val>=0,e.lose_img.node.active=n.val<0)}}},e=this,o=0;o<4;o++)t()},e.prototype.btn_start_click=function(){u.default.instance.cs_ready_ludo(),c.TGlobal.winMgr.popWin()},e.prototype.btn_Leave_click=function(){1!=r.BaseFrameNative.packType?u.default.instance.cs_applyexittable():cc.game.end()},s([_(cc.Sprite)],e.prototype,"bg",void 0),s([_(cc.Sprite)],e.prototype,"bg_v",void 0),s([_(cc.Button)],e.prototype,"btn_start",void 0),s([_([cc.Node])],e.prototype,"PlayerObject",void 0),s([_(cc.Button)],e.prototype,"btn_Leave",void 0),s([_(cc.Sprite)],e.prototype,"win_img",void 0),s([_(cc.Sprite)],e.prototype,"lose_img",void 0),s([_(cc.Font)],e.prototype,"loseFont",void 0),s([_(cc.Font)],e.prototype,"winFont",void 0),s([d],e)}(l.TWindow);o.default=h,cc._RF.pop()},{"../../../../../../Common/script/base/BaseFrameNative":void 0,"../../../../../../Common/script/util/UIUtil":void 0,"../../../../rxlib/TGlobal":"TGlobal","../../../../rxlib/TWindow":"TWindow","../../../mainUI/script/Controller/LudoController":"LudoController","../../../mainUI/script/LudoGameGlobal":"LudoGameGlobal"}]},{},["LudoEnum","LudoMainScene","MapInfo","LudoController","LudoNetData","LudoQueueMessages","LudoChess","LudoChessShadow","LudoCountDown","LudoDeci","LudoGameEngine","LudoGameGlobal","LudoGameMainUI","LudoHead","LudoPlayer","LudoTips","LudoModel","startWin","winnerWin","GFunction","TAutoRegEventCom","TAutoRegNode","TGlobal","TLayer","TScene","TWindow"]);