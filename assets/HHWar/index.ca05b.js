window.__require=function t(e,i,n){function o(a,r){if(!i[a]){if(!e[a]){var l=a.split("/");if(l=l[l.length-1],!e[l]){var c="function"==typeof __require&&__require;if(!r&&c)return c(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){return o(e[a][1][t]||t)},u,u.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({HHWarAddCash:[function(t,e,i){"use strict";cc._RF.push(e,"39a38EjT7hE/7A92sswJP3B","HHWarAddCash");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../../Boot/scirpt/AppConst"),a=t("../../../../Common/script/base/AudioManager"),r=t("../../../../Common/script/base/ViewBase"),l=t("../Contrl/HHWarViewCtr"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_btn_close=null,e.ui_btn_addCash=null,e.ui_addCash_lab_title=null,e.ui_addCash_lab1=null,e.ui_addCash_lab2=null,e.ui_addCash_lab3=null,e}return o(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/HHWar"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"addCash"},enumerable:!1,configurable:!0}),e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),this.fguiComponent.visible=!1,this.ui_btn_close.onClick(this.Hide,this),this.ui_btn_addCash.onClick(this.openAddCash,this)},e.prototype.allChildCreated=function(){t.prototype.allChildCreated.call(this),this.setLanguage(),this.Show()},e.prototype.setLanguage=function(){for(var t="1"==s.AppConst.languageType?"english":"hindi",e=1;e<5;e++){var i=xgameTable.getComplanguageSevenUpDownById(e);i&&i.comp&&this[i.comp]&&(1==i.type?this[i.comp].text=i[t]:this[i.comp].url=i[t].replace("sevenUpDown","HHWar"))}},e.prototype.Show=function(){t.prototype.Show.call(this),a.AudioManager.Singleton.play("","pop_up")},e.prototype.Hide=function(){t.prototype.Hide.call(this),a.AudioManager.Singleton.play("","btn_close")},e.prototype.openAddCash=function(){this.Hide(),l.default.instance.view.showAddCash()},e}(r.default);i.default=c,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/ViewBase":void 0,"../Contrl/HHWarViewCtr":"HHWarViewCtr"}],HHWarAreaCom:[function(t,e,i){"use strict";cc._RF.push(e,"f3c67hi1TZD2pqnN/fyCCBS","HHWarAreaCom");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allbet=0,e.allBetTemp=0,e.mybet=0,e.starValue=0,e.myBet=null,e.allBet=null,e}return o(e,t),e.prototype.onConstruct=function(){this.backLinght=this.getChild("backLinght").asImage,this.starCom=this.getChild("star").asCom,this.star=this.starCom.getChild("n24").asImage,this.star.fillAmount=0,this.myBet=this.getChild("bets1").asTextField,this.allBet=this.getChild("bets2").asTextField,this.initAni()},e.prototype.initAni=function(){var t=this;cc.assetManager.getBundle("HHWar").load("res/prefab/star",cc.Prefab,function(e,i){e||(t.starNode=cc.instantiate(i),t.starCom.node.addChild(t.starNode),t.starNode.active=!1,t.starAnimation=t.starNode.getComponent(sp.Skeleton),t.starAnimation.clearTracks())})},e.prototype.playStarAni=function(){var t=this;this.starNode&&(this.starNode.active=!0,this.starAnimation.setAnimation(0,"animation",!1),this.starAnimation.setCompleteListener(function(){t.starNode.active=!1}))},e.prototype.showEff=function(){this.getController("bg").setSelectedIndex(1),this.backLinght.node.runAction(cc.repeatForever(cc.sequence(cc.fadeIn(.4),cc.fadeOut(.4))))},e.prototype.chengedStar=function(t){if(0!=t){this.starValue+=t;var e=this.starValue/1e3;this.star.fillAmount=e>1?1:e}},e.prototype.getStarProgress=function(){return this.starValue},e.prototype.cleanEff=function(){this.getController("bg").setSelectedIndex(0),this.backLinght.node.stopAllActions(),this.backLinght.node.opacity=255,this.myBet.text="0",this.allBet.text="/0",this.starValue=0,this.mybet=0,this.allbet=0,this.allBetTemp=0,this.star.fillAmount=0,this._tweener&&(this._tweener.kill(),this._tweener=null)},e.prototype.cleanLinght=function(){this.getController("bg").setSelectedIndex(0),this.backLinght.node.stopAllActions(),this.backLinght.node.opacity=255},e.prototype.setMyBet=function(t){this.mybet=t,this.myBet.text=t+""},e.prototype.setAllbet=function(t){this.allbet=t},e.prototype.setAllBetLabel=function(t){this.allbet=t,this.allBetTemp=t,this.allBet.text="/"+t},e.prototype.addAllBet=function(t){this.allBetTemp+=t,this.allBet.text="/"+this.allBetTemp},e.prototype.getAllBet=function(){return this.allbet},e.prototype.getSelfBet=function(){return this.mybet},e}(fgui.GComponent);i.default=s,cc._RF.pop()},{}],HHWarChipsNow:[function(t,e,i){"use strict";cc._RF.push(e,"f866fL7/F5IP63Az0Ds5pRz","HHWarChipsNow");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onConstruct=function(){this.chipLoader=this.getChild("icon").asLoader,this.eff=this.getChild("eff").asLoader},e.prototype.setBetNum=function(t,e){void 0===e&&(e=!0),this.bet=t,this.chipLoader.url=e?"ui://HHWar/chip"+t:t>=1e3?"ui://HHWar/chip1"+t:"ui://HHWar/chip"+t},e.prototype.getIndex=function(){return this.bet},e.prototype.setEff=function(t){void 0===t&&(t=!1),t?this.eff.url="ui://HHWar/chipEff":""!=this.eff.url&&(this.eff.url="")},e}(fgui.GButton);i.default=s,cc._RF.pop()},{}],HHWarDrwaprize:[function(t,e,i){"use strict";cc._RF.push(e,"0335cAQy/tMr7ValZjWRl7x","HHWarDrwaprize");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onConstruct=function(){this.typeController=this.getController("type")},e.prototype.setData=function(t,e){void 0===e&&(e=!0),1==t?this.typeController.setSelectedIndex(1):2==t?this.typeController.setSelectedIndex(0):this.typeController.setSelectedIndex(2)},e}(fgui.GComponent);i.default=s,cc._RF.pop()},{}],HHWarHelp:[function(t,e,i){"use strict";cc._RF.push(e,"e93681NhjhPcIxdGUcl0m0p","HHWarHelp");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../../Boot/scirpt/AppConst"),a=t("../../../../Common/script/base/AudioManager"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_btn_close=null,e.ui_help_lab_title=null,e.ui_dt_help_lab1=null,e.ui_dt_help_lab2=null,e.ui_dt_help_lab3=null,e.ui_dt_help_lab8=null,e.ui_dt_help_lab4=null,e.ui_dt_help_lab5=null,e.ui_dt_help_lab6=null,e}return o(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/HHWar"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"help"},enumerable:!1,configurable:!0}),e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),this.ui_btn_close.onClick(this.Hide,this)},e.prototype.allChildCreated=function(){t.prototype.allChildCreated.call(this),this.Show()},e.prototype.OnLoadLanguage=function(){var t=xgameTable.getTableMgr().getSheet(xgameTable.EnumExcelKey.Complanguage,xgameTable.EnumComplanguage.HHWar);for(var e in t){var i=t[e];if(i&&i.comp&&this[i.comp]){var n="1"==s.AppConst.languageType?i.english:i.hindi;1==i.type?this[i.comp].text=n:this[i.comp].url="ui://HHWar/"+n}}},e.prototype.Show=function(){this.OnLoadLanguage(),t.prototype.Show.call(this),a.AudioManager.Singleton.play("gamehall","pop_up")},e.prototype.Hide=function(){t.prototype.Hide.call(this),a.AudioManager.Singleton.play("gamehall","btn_close")},e}(t("../../../../Common/script/base/ViewBase").default);i.default=r,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/ViewBase":void 0}],HHWarHistory:[function(t,e,i){"use strict";cc._RF.push(e,"21cda9xM/hJYpYBrvPXyfRD","HHWarHistory");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../../Boot/scirpt/AppConst"),a=t("../../../../Common/script/base/AudioManager"),r=t("../../../../Common/script/base/ViewBase"),l=t("../../../../GameHall/dlc/script/config/LocalizationConfig"),c=t("../Contrl/HHWarViewCtr"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_btn_close=null,e.ui_wins26=null,e.ui_wins812=null,e.ui_toplist=null,e.ui_routines=null,e.ui_trendTypeList=null,e.ui_trend_lab1=null,e.ui_trend_lab6=null,e.ui_trend_lab7=null,e.ui_longwin=null,e.ui_huwin=null,e.centerData=[],e.itemPool=[],e}return o(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/HHWar"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"trend"},enumerable:!1,configurable:!0}),e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),this.fguiComponent.visible=!1,this.ui_btn_close.onClick(this.Hide,this),"2"==s.AppConst.languageType&&this.setLanguage()},e.prototype.setLanguage=function(){var t=l.updownConf.trend;for(var e in t)this[t[e].ui]&&(1==t[e].type?this[t[e].ui].text=t[e]["text"+s.AppConst.languageType]:this[t[e].ui].url=t[e]["text"+s.AppConst.languageType].replace("sevenUpDown","HHWar"));"2"==s.AppConst.languageType?(this.ui_longwin.url="ui://HHWar/longwin1",this.ui_huwin.url="ui://HHWar/huwin1"):(this.ui_longwin.url="ui://HHWar/longwin",this.ui_huwin.url="ui://HHWar/huwin")},e.prototype.Show=function(){t.prototype.Show.call(this),a.AudioManager.Singleton.play("","pop_up"),c.default.instance.cs_gethistory_redb3()},e.prototype.Hide=function(){t.prototype.Hide.call(this),a.AudioManager.Singleton.play("","btn_close")},e.prototype.handleData=function(){var t=this,e=c.default.instance.Model.historyData,i=e.wbs.length>23?e.wbs.slice(e.wbs.length-23):e.wbs,n=[];i.forEach(function(t){n.push(t.win)}),this.handleTrend(n);var o=e.wbs.length>200?e.wbs.slice(e.wbs.length-200):e.wbs;this.centerData=[],o.forEach(function(e){t.centerData.push(e.win)}),this.handleCenter(this.centerData);var s=e.wbs.length>10?e.wbs.slice(e.wbs.length-10):e.wbs;this.handlCardType(s)},e.prototype.handleCenter=function(t){this.addRoutinesItem();for(var e=[],i=this.checkType(t[0]),n=0,o=0;o<t.length;o++){var s=this.checkType(t[o]);e[n]||(e[n]=[]),s==i?(e[n].length>=5&&(e[n+=1]=[]),e[n].push(t[o]),i=s):(e[n+=1]=[],e[n].push(t[o]),i=s)}for(e.length>23&&(e=e.slice(e.length-23)),o=0;o<e.length;o++)for(var a=0;a<e[o].length;a++){s=e[o][a];var r=this.getRoutinesItem();r.setData(s,!1),this.ui_routines.addChild(r),r.x=68*o+5,r.y=72*a}var l=c.default.instance.Model.historyData;isNaN(l._DTProValue[0])&&(l._DTProValue[0]=0),isNaN(l._DTProValue[1])&&(l._DTProValue[1]=0);var u=100*+l._DTProValue[0].toFixed(2),h=100*+l._DTProValue[1].toFixed(2);this.ui_wins26.text=u.toFixed()+"%",this.ui_wins812.text=h.toFixed()+"%"},e.prototype.getRoutinesItem=function(){return this.itemPool.length<=0?fgui.UIPackage.createObject("HHWar","trendItem"):this.itemPool.pop()},e.prototype.addRoutinesItem=function(){for(;this.ui_routines.numChildren>0;){var t=this.ui_routines.removeChildAt(0);this.itemPool.push(t)}},e.prototype.checkType=function(t){return t},e.prototype.handleTrend=function(t){this.ui_toplist.removeChildrenToPool();for(var e=0;e<t.length;e++)this.ui_toplist.addItemFromPool().setData(t[e],!0)},e.prototype.addOneData=function(t,e){void 0===e&&(e=!1)},e.prototype.handlCardType=function(t){this.ui_trendTypeList.removeChildrenToPool();for(var e=t,i=0,n=e.length;i<n;i++){var o=this.ui_trendTypeList.addItemFromPool().asCom;o.getChild("textType1").asTextField.text=this.getCardTypeById(e[i].pokertype),o.getChild("textType2").asTextField.text=this.getCardTypeById(e[i].pokertype),o.getController("lucky").setSelectedIndex(0),o.getController("new").setSelectedIndex(0),(1==e[i].pokertype&&e[i].dui8||e[i].pokertype>1)&&o.getController("lucky").setSelectedIndex(1),i==n-1&&o.getController("new").setSelectedIndex(1)}},e.prototype.getCardTypeById=function(t){var e="";switch(t){case 0:e="High Card";break;case 1:e="Pair";break;case 2:e="Color";break;case 3:e="Sequence";break;case 4:e="Pure Sequence";break;case 5:e="Trail"}return e},e.prototype.clean=function(){for(this.ui_toplist.dispose();this.itemPool.length>0;)this.itemPool.pop().dispose()},e}(r.default);i.default=u,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/ViewBase":void 0,"../../../../GameHall/dlc/script/config/LocalizationConfig":void 0,"../Contrl/HHWarViewCtr":"HHWarViewCtr"}],HHWarModel:[function(t,e,i){"use strict";cc._RF.push(e,"4ce0byCaNZM56U1NBxF+q2i","HHWarModel"),Object.defineProperty(i,"__esModule",{value:!0}),i.TableTD100StatusEnum=void 0,function(t){t[t.WaitForGamble=1]="WaitForGamble",t[t.Gambling=2]="Gambling",t[t.ShowPrize=3]="ShowPrize",t[t.NoBanker=4]="NoBanker"}(i.TableTD100StatusEnum||(i.TableTD100StatusEnum={}));i.default=function(){this.gameid=91005,this.levelid=0,this.tableid=0,this.historyData=null,this.hasGame=!1,this.win10000={}},cc._RF.pop()},{}],HHWarNetData:[function(t,e,i){"use strict";cc._RF.push(e,"f57c74gInZLTKJB5pjlysjK","HHWarNetData");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.sc_chat100_n=i.waybill=i.sc_gethistory_redb3=i.cs_gethistory_redb3=i.sc_applyexittable_redb3=i.cs_applyexittable_redb3=i.sc_end_redb3_n=i.ShowDownSD_redb3=i.sc_gamblearea_redb3_n=i.sc_gambleone_redb3_n=i.sc_gambleone_redb3=i.cs_gambleone_redb3=i.sc_tablestart_redb3_n=i.sc_getroomplayerlist_redb3=i.cs_getroomplayerlist_redb3=i.sc_entertable_redb3=i.cs_entertable_redb3=void 0;var s=t("../../../../Common/script/base/cs_base"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(s.cs_base);i.cs_entertable_redb3=a;var r,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(s.sc_base);i.sc_entertable_redb3=l,function(t){t[t.WaitForGamble=1]="WaitForGamble",t[t.Gambling=2]="Gambling",t[t.ShowPrize=3]="ShowPrize",t[t.NoBanker=4]="NoBanker"}(r||(r={}));var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(s.cs_base);i.cs_getroomplayerlist_redb3=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(s.sc_base);i.sc_getroomplayerlist_redb3=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(s.sc_base);i.sc_tablestart_redb3_n=h;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(s.cs_base);i.cs_gambleone_redb3=p;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(s.sc_base);i.sc_gambleone_redb3=d;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(s.sc_base);i.sc_gambleone_redb3_n=f;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(s.sc_base);i.sc_gamblearea_redb3_n=_;i.ShowDownSD_redb3=function(){};var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(s.sc_base);i.sc_end_redb3_n=y;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(s.cs_base);i.cs_applyexittable_redb3=g;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(s.sc_base);i.sc_applyexittable_redb3=m;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(s.cs_base);i.cs_gethistory_redb3=b;var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(s.sc_base);i.sc_gethistory_redb3=C;i.waybill=function(){};var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(s.sc_base);i.sc_chat100_n=v,cc._RF.pop()},{"../../../../Common/script/base/cs_base":void 0}],HHWarPlayListItem:[function(t,e,i){"use strict";cc._RF.push(e,"2f09fGK4v9JnrHMQP07yARb","HHWarPlayListItem");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../../Boot/scirpt/AppConst"),a=t("../../../../Common/script/util/UIUtil"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onConstruct=function(){this.nickName=this.getChild("userName").asTextField,this.gold=this.getChild("gold").asTextField,this.head=this.getChild("head").asCom.getChild("n0").asLoader},e.prototype.setData=function(t){a.UIUtil.loadImage(this.head,t.head),this.nickName.text=a.UIUtil.getNickNameSub(t.nickName,6);var e=s.AppConst.gameStatus[1]==s.EnumGameStatus.Hide?"":"R$:";this.gold.text=e+a.UIUtil.formatNumber100(t.gold)},e}(fgui.GComponent);i.default=r,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/util/UIUtil":void 0}],HHWarPlayList:[function(t,e,i){"use strict";cc._RF.push(e,"ac9c1Wg78pEYaF0fzf5Kjo2","HHWarPlayList");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../../Boot/scirpt/AppConst"),a=t("../../../../Common/script/base/AudioManager"),r=t("../../../../Common/script/base/ViewBase"),l=t("../../../../Common/script/util/UIUtil"),c=t("../../../../GameHall/dlc/script/config/LocalizationConfig"),u=t("../Contrl/HHWarViewCtr"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_otherPlayList=null,e.otherPlay=[],e.ui_btn_close=null,e.nowPage=0,e.ui_online=null,e.ui_monyRound=null,e.ui_monyMax=null,e.ui_luckyRound=null,e.ui_luckyWin=null,e.ui_monyName=null,e.ui_luckyName=null,e.ui_monyHead=null,e.ui_luckyHead=null,e.ui_player_lab_title=null,e.ui_player_lab1=null,e.ui_player_lab2=null,e.ui_player_lab3=null,e.ui_winnerimg=null,e.ui_luckyimg=null,e.ui_winimg=null,e.ui_winroundimg=null,e.playerNum=0,e.first=!1,e}return o(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/HHWar"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"otherPlayer"},enumerable:!1,configurable:!0}),e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),this.fguiComponent.visible=!1,this.ui_otherPlayList.setVirtual(),this.ui_otherPlayList.itemRenderer=this.renderListItem.bind(this),this.ui_otherPlayList.on(fgui.Event.PULL_UP_RELEASE,this.onPullUpToRefresh,this),this.ui_btn_close.onClick(this.Hide,this),this.monyHead=this.ui_monyHead.getChild("n0").asLoader,this.luckyHead=this.ui_luckyHead.getChild("n0").asLoader,"2"==s.AppConst.languageType&&this.setLanguage()},e.prototype.allChildCreated=function(){t.prototype.allChildCreated.call(this)},e.prototype.setLanguage=function(){var t=c.updownConf.playerList;for(var e in t){var i=t[e].ui;i&&this[i]&&(1==t[e].type?this[t[e].ui].text=t[e]["text"+s.AppConst.languageType]:this[t[e].ui].url=t[e]["text"+s.AppConst.languageType].replace("sevenUpDown","HHWar"))}},e.prototype.Hide=function(){t.prototype.Hide.call(this),a.AudioManager.Singleton.play("","btn_close")},e.prototype.renderListItem=function(t,e){e.setData(this.otherPlay[t])},e.prototype.onPullUpToRefresh=function(){this.playerNum<=100||(this.nowPage+=1,this.first=!1,console.log("========\u4e0b\u62c9============"),u.default.instance.cs_getroomplayerlist_redb3(this.nowPage))},e.prototype.handleData=function(t,e){if(!(t.length<=0)){this.first&&(this.winnerData=null,this.luckyData=null,this.otherPlay.length=0);for(var i=0;i<t.length;i++){var n={head:t[i]._wechat.wicon,nickName:t[i]._wechat.wName,gold:t[i].gold};this.first?1==t[i].s?this.winnerData=t[i]:2==t[i].s?this.luckyData=t[i]:3==t[i].s?(this.winnerData=t[i],this.luckyData=t[i]):this.otherPlay.push(n):this.otherPlay.push(n)}this.ui_otherPlayList.numItems=this.otherPlay.length,this.playerNum=e,this.ui_online.setVar("num",e+"").flushVars(),this.first&&this.showLucky()}},e.prototype.showLucky=function(){this.clean();var t=s.AppConst.gameStatus[1]==s.EnumGameStatus.Hide?"":"R$:";this.winnerData&&(l.UIUtil.loadImage(this.monyHead,this.winnerData._wechat.wicon),this.ui_monyName.text=l.UIUtil.getNickNameSub(this.winnerData._wechat.wName,6),this.ui_monyMax.text=t+l.UIUtil.formatNumber100(this.winnerData.cwScore<0?0:this.winnerData.cwScore),this.ui_monyRound.text=this.winnerData.winTimes+""),this.luckyData&&(l.UIUtil.loadImage(this.luckyHead,this.luckyData._wechat.wicon),this.ui_luckyName.text=l.UIUtil.getNickNameSub(this.luckyData._wechat.wName,6),this.ui_luckyWin.text=t+l.UIUtil.formatNumber100(this.luckyData.cwScore<0?0:this.luckyData.cwScore),this.ui_luckyRound.text=this.luckyData.winTimes+"")},e.prototype.clean=function(){this.monyHead.url="",this.ui_monyName.text="",this.ui_monyMax.text="",this.ui_monyRound.text="",this.luckyHead.url="",this.ui_luckyName.text="",this.ui_luckyWin.text="",this.ui_luckyRound.text=""},e.prototype.Show=function(){t.prototype.Show.call(this),a.AudioManager.Singleton.play("","pop_up"),(1==u.default.instance.view.state||2==u.default.instance.view.state&&u.default.instance.view.updateTable)&&(this.nowPage=0,this.first=!0,cc.log("222222222222222222222"),u.default.instance.cs_getroomplayerlist_redb3(this.nowPage))},e}(r.default);i.default=h,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/ViewBase":void 0,"../../../../Common/script/util/UIUtil":void 0,"../../../../GameHall/dlc/script/config/LocalizationConfig":void 0,"../Contrl/HHWarViewCtr":"HHWarViewCtr"}],HHWarPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"57fefqVeYhO2rNPF0Q7l9oi","HHWarPlayer");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../../Boot/scirpt/AppConst"),a=t("../../../../Common/script/util/UIUtil"),r=t("../Contrl/HHWarViewCtr"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.winEffPlist=[],e.empty=!0,e.tableAllBet=[],e}return o(e,t),e.prototype.onConstruct=function(){this.userName=this.getChild("userName").asTextField,this.gold=this.getChild("gold").asTextField,this.moveHead=this.getChild("n8").asCom,this.head=this.moveHead.getChild("n0").asLoader,this.typeController=this.getController("c1"),this.meController=this.getController("me"),this.winCom=this.getChild("win").asCom,this.winLabel=this.winCom.getChild("n1").asTextField,this.winEffNode=this.getChild("winEff").asLoader,this.init(),this.loadWinEff()},e.prototype.loadWinEff=function(){var t=this;cc.assetManager.getBundle("HHWar").loadDir("res/plist",cc.Prefab,function(e,i){if(e||null===i)cc.error('load "res/plist" error:',e);else for(var n=0;n<i.length;n++)"liansheng1"==i[n].name?t.winEffPlist[0]=cc.instantiate(i[n]):"liansheng2"==i[n].name?t.winEffPlist[1]=cc.instantiate(i[n]):"liansheng3"==i[n].name&&(t.winEffPlist[2]=cc.instantiate(i[n]))})},e.prototype.initPos=function(t){this.pos=t},e.prototype.setData=function(t,e){this.typeController.setSelectedIndex(1),a.UIUtil.loadImage(this.head,t.head),this.headId=t.head,this.userName.text=a.UIUtil.getNickNameSub(t.nickName,6);var i=s.AppConst.gameStatus[1]==s.EnumGameStatus.Hide?"":"R$:";this.gold.text=i+a.UIUtil.formatNumber100(t.gold),this.userid=t.userid,this.empty=!1,this.baseData=e,t.userid==s.AppConst.mPlayerModel.userid?this.meController.setSelectedIndex(1):this.meController.setSelectedIndex(0);var n=r.default.instance.Model.win10000[t.userid];n?this.addWinEff(n):this.winEffNode.node.removeAllChildren()},e.prototype.cleanWinEff=function(){this.winEffNode.node.removeAllChildren()},e.prototype.addWinEff=function(t){this.winEffPlist.length<=0||(this.winEffNode.node.removeAllChildren(),1==t?this.winEffNode.node.addChild(this.winEffPlist[0]):2==t?this.winEffNode.node.addChild(this.winEffPlist[1]):t>=3&&this.winEffNode.node.addChild(this.winEffPlist[2]))},e.prototype.onDestroy=function(){this.winEffPlist.forEach(function(t){cc.isValid(t)&&t.destroy()})},e.prototype.getHeadId=function(){return this.headId},e.prototype.getNickName=function(){return this.userName.text},e.prototype.getBaseData=function(){return this.baseData},e.prototype.setHead=function(t){a.UIUtil.loadImage(this.head,t)},e.prototype.setGold=function(t){var e=s.AppConst.gameStatus[1]==s.EnumGameStatus.Hide?"":"R$:";this.gold.text=e+a.UIUtil.formatNumber100(t)},e.prototype.init=function(){for(var t=0;t<3;t++)this.tableAllBet.push({pos:t+1,bet:0})},e.prototype.reset=function(){for(var t=0;t<3;t++)this.tableAllBet[t].bet=0},e.prototype.getNowBet=function(t){return this.tableAllBet[t-1].bet},e.prototype.setNowBet=function(t,e){this.tableAllBet[t-1].bet+=e},e.prototype.exit=function(){this.typeController.setSelectedIndex(0),this.meController.setSelectedIndex(0),this.empty=!0,this.baseData=null,this.head.url="",this.userid=0,this.reset()},e.prototype.showEff=function(){if(!fgui.GTween.isTweening(this.moveHead)){var t,e,i=this.moveHead.x,n=this.moveHead.y;switch(this.pos){case 0:t=i+20,e=n+40;break;case 1:t=i-20,e=n+40;break;case 2:t=i+20,e=n;break;case 3:t=i+20,e=n-20;break;case 4:t=i-20,e=n;break;case 5:t=i-20,e=n-20}fgui.GTween.to2(i,n,t,e,.05).setTarget(this.moveHead,this.moveHead.setPosition).setRepeat(1,!0).setEase(fgui.EaseType.ElasticIn)}},e.prototype.setWin=function(t){this.winCom.visible=!0;var e=s.AppConst.gameStatus[1]==s.EnumGameStatus.Hide?"":"R$+";this.winLabel.text=e+t,this.winEff()},e.prototype.winEff=function(){var t=this;fgui.GTween.to2(this.winCom.x,this.winCom.y,this.winCom.x,this.winCom.y-20,1.8).setTarget(this.winCom,this.setPosition).setEase(fgui.EaseType.CubicOut).onComplete(function(){t.winCom.visible=!1,t.winCom.y+=20},this)},e}(fgui.GComponent);i.default=l,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/util/UIUtil":void 0,"../Contrl/HHWarViewCtr":"HHWarViewCtr"}],HHWarViewCtr:[function(t,e,i){"use strict";cc._RF.push(e,"80950hHNBhH6pho1aAz08+x","HHWarViewCtr"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("../../../../Boot/scirpt/AppConst"),o=t("../../../../Common/script/base/BaseCode"),s=t("../../../../Common/script/base/CommonCtr"),a=t("../../../../Common/script/base/WebSocketManager"),r=t("../../../../Common/script/base/cs_base"),l=t("../../../../Common/script/util/UIUtil"),c=t("../../../../GameHall/dlc/script/config/LocalizationConfig"),u=t("../Model/HHWarModel"),h=t("../Model/HHWarNetData"),p=function(){function t(){this.view=null}return Object.defineProperty(t,"instance",{get:function(){return null==this._viewCtr&&(this._viewCtr=new t,this._viewCtr.RegistNotify()),this._viewCtr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Model",{get:function(){return null==this._model&&(this._model=new u.default),this._model},enumerable:!1,configurable:!0}),t.prototype.RegistNotify=function(){var t=a.WebSocketManager.getInstance;t.RegistNotify("sc_tablestart_redb3_n",this.sc_tablestart_redb3_n,this),t.RegistNotify("sc_gambleone_redb3_n",this.sc_gambleone_redb3_n,this),t.RegistNotify("sc_gamblearea_redb3_n",this.sc_gamblearea_redb3_n,this),t.RegistNotify("sc_end_redb3_n",this.sc_end_redb3_n,this),t.RegistNotify("sc_entertable_redb3",this.changeTable,this),t.RegistNotify("sc_chat100_n",this.sc_chat100_n,this),t.RegistNotify("sc_addgoldingame",this.sc_addgoldingame,this),t.RegistNotify("sc_freshgold_n",this.sc_freshgold_n,this),t.RegistNotify("sc_one_exittable_n",this.sc_one_exittable_n,this)},t.prototype.UnRegistNotify=function(){var t=a.WebSocketManager.getInstance;t.UnRegistNotify("sc_tablestart_redb3_n",this.sc_tablestart_redb3_n,this),t.UnRegistNotify("sc_gambleone_redb3_n",this.sc_gambleone_redb3_n,this),t.UnRegistNotify("sc_gamblearea_redb3_n",this.sc_gamblearea_redb3_n,this),t.UnRegistNotify("sc_end_redb3_n",this.sc_end_redb3_n,this),t.UnRegistNotify("sc_entertable_redb3",this.changeTable,this),t.UnRegistNotify("sc_chat100_n",this.sc_chat100_n,this),t.UnRegistNotify("sc_addgoldingame",this.sc_addgoldingame,this),t.UnRegistNotify("sc_freshgold_n",this.sc_freshgold_n,this),t.UnRegistNotify("sc_one_exittable_n",this.sc_one_exittable_n,this)},t.Destroy=function(){this._viewCtr&&(this._viewCtr.UnRegistNotify(),this._viewCtr._model=null,this._viewCtr=null)},t.prototype.acceptMsg=function(){return!cc.isValid(this.view)||cc.game.isPaused()||!this.Model.isjoinGame},t.prototype.sc_addgoldingame=function(t){this.view&&1==t.result&&(1==t.status&&(n.AppConst.mPlayerModel.bReCharge=!0,2==this.view.state?this.view.isCanUpdateGold=!1:this.view.isCanUpdateGold=!0,s.CommonCtr.instance.ShowTipLabel(c.updownConf.tip[210408]["text"+n.AppConst.languageType])),this.view.setUserGold(t.lGold))},t.prototype.sc_freshgold_n=function(t){this.view&&1==t.result&&2==t.freshType&&this.view.setUserGold(t.gold)},t.prototype.changeTable=function(t){cc.log("=====changeTable=========",t),this.Model.tableid=t.tableid},t.prototype.cs_entertable_redb3=function(){var t=new h.cs_entertable_redb3;t.gameid=91005,t.levelid=l.UIUtil.CheckGameLeveID(91005,n.AppConst.currentlevelid),t.tableid=n.AppConst.tableid||0,t._limit=0,t.fn="cs_entertable_redb3",t._g=91005,a.WebSocketManager.getInstance.SendJSON(t,this.sc_entertable_redb3.bind(this))},t.prototype.sc_entertable_redb3=function(t){var e,i=this;cc.log("sc_entertable_redb3\u8fdb\u5165\u6e38\u620f = ",t),cc.isValid(this.view)&&(this.Model.hasGame=!0,1==t.result?(this.Model.isjoinGame=!0,n.AppConst.tableid=null,n.AppConst.mPlayerModel.state=0,this.Model.tableid=t.tableid,this.Model.levelid=t.levelid,this.Model.pos=t.pos,this.Model.tableData=t,this.view.sc_entertable_td100(t),this.cs_gethistory_redb3(),this.view.otherPlayer.first=!0,this.cs_getroomplayerlist_redb3(0)):(this.Model.isjoinGame=!1,e=o.BaseCode[n.AppConst.languageType][t.result]||o.BaseCode[n.AppConst.languageType][0],s.CommonCtr.instance.ShowTipCallback(e,function(){i.view.sc_applyexittable_redb3()})))},t.prototype.cs_getroomplayerlist_redb3=function(t){var e=new h.cs_getroomplayerlist_redb3;e.levelid=this.Model.levelid,e.tableid=this.Model.tableid,e.pageIndex=t,e.pageSize=100,e.fn="cs_getroomplayerlist_redb3",e._g=this.Model.gameid,a.WebSocketManager.getInstance.SendJSON(e,this.sc_getroomplayerlist_redb3.bind(this))},t.prototype.sc_getroomplayerlist_redb3=function(t){console.log("sc_getroomplayerlist_redb3 = ",t),this.acceptMsg()||1==t.result&&this.view.otherPlayer.handleData(t.playerlist,t.iCount)},t.prototype.cs_gambleone_redb3=function(t,e){var i=new h.cs_gambleone_redb3;i.levelid=this.Model.levelid,i.tableid=this.Model.tableid,i._tpos=t,i.gamble=e,i.fn="cs_gambleone_redb3",i._g=this.Model.gameid,n.AppConst.isGoldCosted=!0,a.WebSocketManager.getInstance.SendJSON(i,this.sc_gambleone_redb3.bind(this))},t.prototype.sc_gambleone_redb3=function(t){cc.log("sc_gambleone_redb3 = ",t),1==t.result||s.CommonCtr.instance.ShowTipLabel(o.BaseCode[n.AppConst.languageType][t.result])},t.prototype.sc_gambleone_redb3_n=function(t){cc.log("sc_gambleone_redb3_n_\u81ea\u5df1\u4e0b\u6ce8 = ",t),this.acceptMsg()||(this.view.setUserGold(t._curGold),this.view.selfStake(t))},t.prototype.sc_gamblearea_redb3_n=function(t){cc.log("sc_gamblearea_redb3_n\u5176\u4ed6\u4eba = ",t),this.acceptMsg()||(this.view.sc_gamblearea_sud_n(t),this.view.updatePlaterNum(t.pc))},t.prototype.sc_tablestart_redb3_n=function(t){cc.log("sc_tablestart_redb3_n\u5f00\u59cb\u4e0b\u6ce8 = ",t),this.Model.tableid=t.tableid,this.acceptMsg()||(this.view.isCanUpdateGold=!0,this.view.sc_tablestart_redb3_n(t))},t.prototype.sc_end_redb3_n=function(t){this.Model.endData=t,this.acceptMsg()||(cc.log("sc_end_redb3_n =\u6e38\u620f\u7ed3\u7b97 ",t),this.view.sc_end_redb3_n(t))},t.prototype.cs_applyexittable_redb3=function(){if(this.Model.hasGame){var t=new h.cs_applyexittable_redb3;t.gameid=this.Model.gameid,t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,t.pos=this.Model.pos,t.fn="cs_applyexittable_redb3",t._g=this.Model.gameid,a.WebSocketManager.getInstance.SendJSON(t,this.sc_applyexittable_redb3.bind(this))}},t.prototype.sc_applyexittable_redb3=function(t){cc.log("sc_applyexittable_redb3 = ",t),this.acceptMsg()||1==t.result&&this.view.sc_applyexittable_redb3()},t.prototype.sc_one_exittable_n=function(t){var e;if(cc.isValid(this.view)&&(cc.log("========sc_one_exittable_n========",t),1==t.result)){if(t.gameid!=this.Model.gameid)return;t.userid==n.AppConst.mPlayerModel.userid&&(this.Model.endData&&(null===(e=this.Model.endData)||void 0===e?void 0:e._tickme)?this.view.exitGame():this.view.sc_applyexittable_redb3())}},t.prototype.cs_gethistory_redb3=function(){var t=new h.cs_gethistory_redb3;t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,t.fn="cs_gethistory_redb3",t._g=this.Model.gameid,a.WebSocketManager.getInstance.SendJSON(t,this.sc_gethistory_redb3.bind(this))},t.prototype.sc_gethistory_redb3=function(t){cc.log("sc_gethistory_redb3 = ",t),this.acceptMsg()||1==t.result&&(this.Model.historyData||this.view.tableTrendInfo(t),this.Model.historyData=t,this.view.trend.handleData())},t.prototype.cs_chat=function(t,e,i){var n=new r.cs_chat;n.fn="cs_chat",n.levelid=this.Model.levelid,n.tableid=this.Model.tableid,n._g=this.Model.gameid,n.content=t,n.type=e,n.tpos=i,a.WebSocketManager.getInstance.SendJSON(n,this.sc_chat.bind(this))},t.prototype.sc_chat=function(t){cc.log("=========msg------",t),this.view&&(1==t.result||s.CommonCtr.instance.ShowTipLabel(o.BaseCode[n.AppConst.languageType][t.result]))},t.prototype.sc_chat100_n=function(t){this.acceptMsg()||1==t.result&&this.view.sc_chat100_n(t)},t}();i.default=p,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/BaseCode":void 0,"../../../../Common/script/base/CommonCtr":void 0,"../../../../Common/script/base/WebSocketManager":void 0,"../../../../Common/script/base/cs_base":void 0,"../../../../Common/script/util/UIUtil":void 0,"../../../../GameHall/dlc/script/config/LocalizationConfig":void 0,"../Model/HHWarModel":"HHWarModel","../Model/HHWarNetData":"HHWarNetData"}],HHWarView:[function(t,e,i){"use strict";cc._RF.push(e,"dd014dFZBFCc6N6VAPh0sUv","HHWarView");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a},a=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,s){function a(t){try{l(n.next(t))}catch(e){s(e)}}function r(t){try{l(n.throw(t))}catch(e){s(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,r)}l((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(t){return function(e){return l([t,e])}}function l(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(r){s=[6,r],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var l=t("../../../../Boot/scirpt/AppConst"),c=t("../../../../Common/script/base/AudioManager"),u=t("../../../../Common/script/base/BaseFrameNative"),h=t("../../../../Common/script/base/CommonCtr"),p=t("../../../../Common/script/base/CommonView"),d=t("../../../../Common/script/base/ReconnectManager"),f=t("../../../../Common/script/base/ReportManager"),_=t("../../../../Common/script/base/SceneManager"),y=t("../../../../Common/script/base/ViewBase"),g=t("../../../../Common/script/util/UIUtil"),m=t("../../../../GameHall/dlc/script/config/LocalizationConfig"),b=t("../../../../GameHall/script/Module/ChatView/ChatPeopleMsg"),C=t("../../../../GameHall/script/Module/ChatView/ChatView"),v=t("../../../../GameHall/script/Module/ComSettingView/ComSettingView"),w=t("../../../../GameHall/script/Module/RechargeView/RechargeView"),H=t("../Contrl/HHWarViewCtr"),A=t("./HHWarAddCash"),T=t("./HHWarAreaCom"),P=t("./HHWarChipsNow"),M=t("./HHWarDrwaprize"),S=t("./HHWarHelp"),x=t("./HHWarHistory"),k=t("./HHWarPlayer"),N=t("./HHWarPlayList"),B=t("./HHWarPlayListItem"),W=cc._decorator,D=W.ccclass,I=(W.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.players=[],e.ui_btn_trend=null,e.ui_btn_other=null,e.ui_chip0=null,e.ui_chip1=null,e.ui_chip2=null,e.ui_chip3=null,e.ui_chip4=null,e.ui_selectLinght=null,e.state=0,e.bets=[10,50,100,1e3,5e3],e.ui_btn_break=null,e.ui_menu=null,e.ui_btn_toHall=null,e.ui_btn_setting=null,e.ui_backHide=null,e.ui_btn_chat=null,e.ui_btn_help=null,e.ui_btn_dmswitch=null,e.ui_btn_addcash1=null,e.ui_star=null,e.ui_star1=null,e.ui_btn_clickarea1=null,e.ui_btn_clickarea2=null,e.ui_btn_clickarea3=null,e.ui_player0=null,e.ui_player1=null,e.ui_player2=null,e.ui_player3=null,e.ui_player6=null,e.ui_myName=null,e.ui_myGold=null,e.addCash=null,e.updateTable=!1,e.chatView=null,e.settingView=null,e.chipPool=[],e.ui_betGroup=null,e.centerBet2=[],e.centerBet1=[],e.centerBet3=[],e.endBetPos=[[430,500],[1200,500],[810,700]],e.ui_otherPlayerNum=null,e.tableincreaseBet={},e.ui_endpos1=null,e.ui_endpos2=null,e.ui_endpos3=null,e.ui_times=null,e.ui_wait=null,e.ui_betbegins=null,e.ui_betstops=null,e.ui_waitTime=null,e.ui_recordList=null,e.ui_newrecord=null,e.helpView=null,e.ui_center=null,e.ui_hei=null,e.heiAni=null,e.ui_hong=null,e.hongAni=null,e.dTAddCash=null,e.ui_hongwinnode=null,e.hongwinAni=null,e.ui_heiwinnode=null,e.heiwinAni=null,e.vsAni=null,e.vsAni2=null,e.isCanUpdateGold=!0,e.ui_countDown=null,e.ui_menu_lab1=null,e.ui_menu_lab2=null,e.ui_menu_lab3=null,e.ui_waitTime_lab=null,e.vshongnode=null,e.vsheinode=null,e.ui_luckyText=null,e.ui_luckyTitleText=null,e.ui_struckTitleText=null,e.ui_card1=null,e.ui_card2=null,e.ui_card3=null,e.ui_card4=null,e.ui_card5=null,e.ui_card6=null,e.ui_leftcardType=null,e.ui_rightcardType=null,e.ui_luckycardType=null,e.ui_leftcardbg=null,e.ui_rightcardbg=null,e.ui_leftshou=null,e.ui_rightshou=null,e.countDownTimes=0,e}return o(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return"HHWar"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/HHWar"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"MainView"},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){fgui.GRoot.create(),H.default.instance.view=this,fgui.UIObjectFactory.setExtension("ui://HHWar/player",k.default),fgui.UIObjectFactory.setExtension("ui://HHWar/chipsNow",P.default),fgui.UIObjectFactory.setExtension("ui://HHWar/btn_area1",T.default),fgui.UIObjectFactory.setExtension("ui://HHWar/btn_area2",T.default),fgui.UIObjectFactory.setExtension("ui://HHWar/btn_area3",T.default),fgui.UIObjectFactory.setExtension("ui://HHWar/otherPlayerItem",B.default),fgui.UIObjectFactory.setExtension("ui://HHWar/trendItem",M.default),t.prototype.onLoad.call(this)},e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),fgui.GRoot.inst.addChild(this.fguiComponent),this.fguiComponent.makeFullScreen(),this.peopleMsg=this.addFguiComponent(b.default,!0),this.otherPlayer=this.addFguiComponent(N.default,!0),this.trend=this.addFguiComponent(x.default,!0),this.chatView=this.addFguiComponent(C.default,!0),this.addFguiComponent(p.default,!0),this.init(),u.BaseFrameNative.isInHall=!1,u.BaseFrameNative.nowGameView=this,this.initCreat(),this.loadSoundResources(),"2"==l.AppConst.languageType&&this.setLanguage()},e.prototype.allChildCreated=function(){return a(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return t.prototype.allChildCreated.call(this),this.chatView.sendChatMsg=this.sendChatMsg.bind(this),cc.game.off(cc.game.EVENT_SHOW),cc.game.on(cc.game.EVENT_SHOW,this.gameEventShow.bind(this)),cc.game.off(cc.game.EVENT_HIDE),cc.game.on(cc.game.EVENT_HIDE,this.gameEventHide.bind(this)),this.node.getChildByName("bg").removeFromParent(),[4,this.loadAnimation()];case 1:return e.sent(),H.default.instance.cs_entertable_redb3(),[2]}})})},e.prototype.initCreat=function(){for(var t=0;t<300;t++){var e=new fgui.AsyncOperation;e.callback=this.completed.bind(this),e.createObject("HHWar","chipsNow")}},e.prototype.completed=function(t){this.chipPool.push(t)},e.prototype.gameEventShow=function(){console.log("---gameEventShow---"),cc.game.resume(),this.sendReconnect()},e.prototype.sendReconnect=function(){d.ReconnectManager.getInstance.reconnect(this.connectSuccess.bind(this),this.connectFail.bind(this))},e.prototype.connectSuccess=function(){cc.isValid(this.node)&&(this.clearTable(),this.scheduleOnce(function(){H.default.instance.cs_entertable_redb3()},1))},e.prototype.connectFail=function(t){var e=this;h.CommonCtr.instance.ShowTipCallback(t,function(){e.sendReconnect()})},e.prototype.gameEventHide=function(){var t,e;console.log("---gameEventHide---"),this.unscheduleAllCallbacks(),this.heiwinAni.setCompleteListener(null),this.hongwinAni.setCompleteListener(null),this.vsAni.setCompleteListener(null),this.ui_betbegins.visible=!1,this.isCanUpdateGold=!0,(null===(e=null===(t=H.default.instance)||void 0===t?void 0:t.Model)||void 0===e?void 0:e.historyData)&&(H.default.instance.Model.historyData=null),cc.game.pause()},e.prototype.loadAnimation=function(){var t=this;return new Promise(function(e){t.bundle=cc.assetManager.getBundle(t.packageResourceName),t.bundle.loadDir("res/prefab",function(i,n){if(i)e(!1);else{for(var o=0;o<n.length;o++)switch(n[o].name){case"streak":var s=cc.instantiate(n[o]),a=cc.instantiate(n[o]);t.ui_star.node.addChild(s),t.ui_star1.node.addChild(a),t.ui_star1.node.opacity=180;break;case"hei":var r=cc.instantiate(n[o]);t.ui_hei.node.addChild(r),t.heiAni=r.getComponent(sp.Skeleton),t.heiAni.setAnimation(0,"daiji",!0);break;case"hong":var l=cc.instantiate(n[o]);t.ui_hong.node.addChild(l),t.hongAni=l.getComponent(sp.Skeleton),t.hongAni.setAnimation(0,"daiji",!0);break;case"jiao":var c=cc.instantiate(n[o]);t.ui_hongwinnode.node.addChild(c),t.ui_hongwinnode.visible=!1,t.hongwinAni=c.getComponent(sp.Skeleton);break;case"hongzha":var u=cc.instantiate(n[o]);t.ui_heiwinnode.node.addChild(u),t.ui_heiwinnode.visible=!1,t.heiwinAni=u.getComponent(sp.Skeleton);break;case"vs1":var h=cc.instantiate(n[o]);t.ui_betbegins.node.addChild(h),t.ui_betbegins.visible=!1,t.vsAni=h.getComponent(sp.Skeleton),t.vshongnode=cc.find("ATTACHED_NODE_TREE/ATTACHED_NODE:root/ATTACHED_NODE:lan/hei",h),t.vsheinode=cc.find("ATTACHED_NODE_TREE/ATTACHED_NODE:root/ATTACHED_NODE:hong/hong",h);var p=cc.find("ATTACHED_NODE_TREE/ATTACHED_NODE:root/vs2",h);t.vsAni2=p.getComponent(sp.Skeleton)}e(!0)}})})},e.prototype.init=function(){this.ui_btn_trend.onClick(this.showTrend,this),this.ui_btn_other.onClick(this.showOtherPlayer,this);for(var t=1;t<4;t++)this["areaCom"+t]=this.ui_center.getChild("btn_area"+t),this["ui_btn_clickarea"+t].pos=t,this["ui_btn_clickarea"+t].onClick(this.clickArea,this);for(this.ui_chip0.y-=20,this.selectChip=this.ui_chip0,this.ui_selectLinght.setPosition(this.selectChip.x,this.selectChip.y),t=0;t<5;t++)this["ui_chip"+t].onClick(this.clickSelectChip,this);for(this.ui_btn_break.onClick(this.openMenu,this),t=0;t<4;t++)this.players.push(this["ui_player"+t]),this.players[t].initPos(t);this.ui_btn_chat.onClick(this.showChat,this),this.ui_btn_help.onClick(this.showHelp,this),this.ui_btn_setting.onClick(this.showSetting,this),this.ui_btn_toHall.onClick(this.prepareToHall,this),this.ui_backHide.onClick(this.closeMenu,this),this.ui_btn_dmswitch.onClick(this.barrageSwitch,this),this.ui_btn_addcash1.onClick(this.showAddCash,this),this.ui_btn_dmswitch.selected=!0},e.prototype.loadSoundResources=function(){cc.assetManager.getBundle(this.packageResourceName).loadDir("res/Sounds",cc.AudioClip,function(t,e){for(var i=c.AudioManager.Singleton,n=0;n<e.length;n++)i.add(e[n].name,e[n]);i.playBGM("game_bgm")})},e.prototype.sendChatMsg=function(t,e){H.default.instance.cs_chat(t,e,l.AppConst.mPlayerModel.userid)},e.prototype.sc_chat100_n=function(t){cc.log("----------------------------",t);for(var e=this.ui_btn_dmswitch.selected,i=this.ui_player0.userid,n=this.ui_player1.userid,o=0;o<t.chatinfos.length;o++)t.chatinfos[o].pos==i?t.chatinfos[o].wLType=1:t.chatinfos[o].pos==n?t.chatinfos[o].wLType=2:t.chatinfos[o].wLType=0;for(e&&this.peopleMsg.addManyPeopleMsg(t.chatinfos),o=0;o<t.chatinfos.length;o++)""!=t.chatinfos[o].content&&this.chatView.addMsg({fromMe:t.chatinfos[o].pos==l.AppConst.mPlayerModel.userid,content:t.chatinfos[o].content,head:t.chatinfos[o].head,type:t.chatinfos[o].type})},e.prototype.showAddCash=function(){this.addCash?this.addCash.Show():this.addCash=this.addFguiComponent(w.default),this.addCash.init(H.default.instance.Model.tableid,this.mygold)},e.prototype.setSelfInfo=function(t){this.ui_myName.text=g.UIUtil.getNickNameSub(l.AppConst.mPlayerModel.wechat.wName,6),this.ui_player6.setHead(l.AppConst.mPlayerModel.wechat.wicon),this.setUserGold(t)},e.prototype.setUserGold=function(t){this.mygold=t;var e=l.AppConst.gameStatus[1]==l.EnumGameStatus.Hide?"":"R$:";this.ui_myGold.text=e+g.UIUtil.formatNumber100(t);for(var i=0;i<4;i++)if(!this.players[i].empty&&this.players[i].userid==l.AppConst.mPlayerModel.userid){this.players[i].setGold(t);break}},e.prototype.prepareToHall=function(){this.showMenu(),1==this.state&&this.areaCom1.getSelfBet()+this.areaCom2.getSelfBet()+this.areaCom3.getSelfBet()>0?h.CommonCtr.instance.ShowTipCallback(m.updownConf.tip[210406]["text"+l.AppConst.languageType],function(){H.default.instance.cs_applyexittable_redb3()},function(){}):H.default.instance.cs_applyexittable_redb3()},e.prototype.barrageSwitch=function(){this.peopleMsg.fguiComponent.visible=this.ui_btn_dmswitch.selected},e.prototype.showSetting=function(){this.showMenu(),this.settingView?this.settingView.Show():(this.settingView=this.addFguiComponent(v.default,!0),this.settingView.selectLanguageFun=this.selectLanguage.bind(this))},e.prototype.setLanguage=function(){var t=m.updownConf.main;for(var e in t)this[t[e].ui]&&(this[t[e].ui].text=t[e]["text"+l.AppConst.languageType]);var i=xgameTable.getTableMgr().getSheet(xgameTable.EnumExcelKey.Complanguage,xgameTable.EnumComplanguage.HHWar);for(var e in i){var n=i[e];if(n&&n.comp&&this[n.comp]){var o="1"==l.AppConst.languageType?n.english:n.hindi;1==n.type?this[n.comp].text=o:this[n.comp].url="ui://HHWar/"+o}}},e.prototype.selectLanguage=function(){var t,e,i;this.setLanguage(),this.dTAddCash&&this.dTAddCash.setLanguage(),this.trend.setLanguage(),this.otherPlayer.setLanguage(),null===(t=h.CommonCtr.instance.view)||void 0===t||t.setLanguage(),null===(e=this.addCash)||void 0===e||e.setLanguage(),null===(i=this.chatView)||void 0===i||i.setLanguage()},e.prototype.showHelp=function(){this.showMenu(),this.helpView?this.helpView.Show():this.helpView=this.addFguiComponent(S.default,!0)},e.prototype.showChat=function(){this.chatView.Show()},e.prototype.openMenu=function(){c.AudioManager.Singleton.play("gamehal","pop_slider"),this.showMenu()},e.prototype.showMenu=function(){this.ui_backHide.visible=!this.ui_backHide.visible,this.ui_menu.visible=!this.ui_menu.visible},e.prototype.closeMenu=function(){this.ui_backHide.visible=!1,this.ui_menu.visible=!1},e.prototype.clickSelectChip=function(t){var e=fgui.GObject.cast(t.currentTarget);this.selectChip!=e&&(c.AudioManager.Singleton.play("","select"),this.lastSelectChip=this.selectChip,this.selectChip=e,this.moveTopChip(),this.lastSelectChip&&this.moveBottonChip())},e.prototype.moveTopChip=function(){var t=this;fgui.GTween.kill(this.selectChip),fgui.GTween.to2(this.selectChip.x,this.selectChip.y,this.selectChip.x,this.selectChip.y-20,.1).setTarget(this.selectChip,this.selectChip.setPosition).onUpdate(function(){t.ui_selectLinght.setPosition(t.selectChip.x,t.selectChip.y)})},e.prototype.moveBottonChip=function(){fgui.GTween.kill(this.lastSelectChip),fgui.GTween.to2(this.lastSelectChip.x,this.lastSelectChip.y,this.lastSelectChip.x,this.lastSelectChip.y+20,.1).setTarget(this.lastSelectChip,this.lastSelectChip.setPosition)},e.prototype.showTrend=function(t){t.bubbles=!1,this.trend.Show()},e.prototype.showOtherPlayer=function(){this.otherPlayer.Show()},e.prototype.clickArea=function(t){var e;if(1==this.state)if((null===(e=l.AppConst.mPlayerModel)||void 0===e?void 0:e.TotalReGold)<3e4)this.showUpDownAddCash();else if(this.mygold<100*this.selectChip.getIndex())h.CommonCtr.instance.ShowTipLabel(m.updownConf.main[210405]["text"+l.AppConst.languageType]);else{var i=fgui.GObject.cast(t.currentTarget),n=-this.convertNodeSpaceAR(this.selectChip.node,i.node).sub(this.selectChip.node.position).signAngle(cc.v2(0,1))/Math.PI*180,o=this.selectChip.node.x+20*Math.sin(-n/180*3.14),s=this.selectChip.node.y+20*Math.cos(-n/180*3.14),a=this.selectChip.node.x,r=this.selectChip.node.y;fgui.GTween.to2(a,r,o,s,.05).setTarget(this.selectChip.node,this.selectChip.node.setPosition).setRepeat(1,!0).setEase(fgui.EaseType.ElasticIn),H.default.instance.cs_gambleone_redb3([i.pos],[100*this.selectChip.getIndex()])}},e.prototype.showUpDownAddCash=function(){this.dTAddCash?this.dTAddCash.Show():this.dTAddCash=this.addFguiComponent(A.default,!0)},e.prototype.convertNodeSpaceAR=function(t,e){return t.parent.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position))},e.prototype.cleanTable=function(){this.clean(),this.unscheduleAllCallbacks()},e.prototype.sc_applyexittable_redb3=function(){c.AudioManager.Singleton.stopBGM(),cc.game.off(cc.game.EVENT_SHOW),cc.game.off(cc.game.EVENT_HIDE),this.ui_star1.node.stopAllActions(),this.ui_star.node.stopAllActions(),this.hongAni.clearTracks(),this.heiAni.clearTracks(),this.heiwinAni.clearTracks(),this.hongwinAni.clearTracks(),this.vsAni.clearTracks(),this.vsAni2.clearTracks(),this.hongAni.skeletonData=null,this.heiAni.skeletonData=null,this.heiwinAni.skeletonData=null,this.hongwinAni.skeletonData=null,this.vsAni.skeletonData=null,this.vsAni2.skeletonData=null;for(var t=1;t<7;t++)this["ui_card"+t].node.stopAllActions();u.BaseFrameNative.nowGameView=null,this.cleanTable(),this.trend.clean(),this.cleanPool(),this.ui_recordList.dispose(),this.peopleMsg&&this.peopleMsg.destroyItem(),H.default.Destroy(),this.destroy(),_.SceneManager.Singleton.loadScene("GameHall","gameHall")},e.prototype.exitGame=function(){var t=this;h.CommonCtr.instance.ShowTipCallback(m.updownConf.tip[210407]["text"+l.AppConst.languageType],function(){t.sc_applyexittable_redb3()})},e.prototype.showWait=function(t){0!=t&&(this.ui_wait.visible=!0,this.startTime=t,this.ui_waitTime.text=t+"",this.unschedule(this.showTime),this.schedule(this.showTime,1,t-1))},e.prototype.showTime=function(){this.startTime-=1,this.ui_waitTime.text=this.startTime+"",this.startTime<=0&&(this.ui_wait.visible=!1)},e.prototype.sc_entertable_td100=function(t){for(var e=0;e<t._pos2Gold.length;e++)if(t._pos2Gold[e].pos==t.pos){this.setSelfInfo(t._pos2Gold[e].val);break}for(this.mygold>=3e4?this.bets=[10,50,100,1e3,5e3]:this.bets=[1,5,10,50,100],e=0;e<5;e++)this["ui_chip"+e].setBetNum(this.bets[e],!1);this.initPlayerInfo(),this.updatePlaterNum(t.TotalNum),this.ui_wait.visible=!1,this.ui_hong.visible=!0,this.ui_hei.visible=!0,this.ui_hong.node.opacity=255,this.ui_hei.node.opacity=255,3==t.state||1==t.state?(this.clearTable(),this.showWait(t.Endtime)):2==t.state&&(this.ui_times.visible=!0,this.state=1,this.initTableBet())},e.prototype.initTableBet=function(){var t=this;this.clean();var e=H.default.instance.Model.tableData._p2GT,i=H.default.instance.Model.tableData.otherBetList,n=H.default.instance.Model.tableData._userlist,o=H.default.instance.Model.tableData._pos2Gameble,s=H.default.instance.Model.tableData.Endtime;this.countDownTimes=s,this.ui_times.text=this.countDownTimes+"",this.schedule(this.countDown,1,s-1);for(var a=-1,r=0;r<n.length;r++)if(2==n[r].s||3==n[r].s){a=n[r].userid;break}for(r=0;r<i.length;r++){var c=this.findUserById(i[r].pos);if(c)for(var u in 3==c.getBaseData().s&&(c=this.ui_player1),i[r].pos2Gameble){var h=g.UIUtil.formatNumber100(i[r].pos2Gameble[u]);a==i[r].pos&&this["areaCom"+ +u].chengedStar(h),c.setNowBet(+u,h)}}for(r=0;r<o.length;r++)h=g.UIUtil.formatNumber100(o[r].val),a==l.AppConst.mPlayerModel.userid&&this["areaCom"+o[r].pos].chengedStar(h),this["areaCom"+o[r].pos].setMyBet(h);var p=function(i){var n=e[i].pos,o=g.UIUtil.formatNumber100(e[i].val);o>0&&(d["areaCom"+n].setAllBetLabel(o),d.getBetList(o,[],!0,d.bets.length-1,d.bets,function(e){for(var i=0,o=e.length;i<o;i++){var s=t.getChip();s.touchable=!1,1e3==e[i]?s.setScale(1,1):s.setScale(.45,.45),s.setBetNum(e[i]),t.ui_betGroup.addChild(s),5e3==e[i]?s.setEff(!0):s.setEff(!1),1==n?t.centerBet1.push(s):2==n?t.centerBet2.push(s):t.centerBet3.push(s);var a=t.endBetPos[n-1][0]+Math.floor(630*Math.random()+40),r=t.difference(n,a),l=t.endBetPos[n-1][1]+Math.floor(Math.random()*r+30);s.node.setPosition(a,-l)}}))},d=this;for(r=0;r<e.length;r++)p(r)},e.prototype.initPlayerInfo=function(){for(var t=H.default.instance.Model.tableData._userlist,e=t.filter(function(t){return 1==t.s||2==t.s||3==t.s}),i=t.filter(function(t){return 0==t.s}).sort(function(t,e){return e.gold-t.gold}),n=0;n<e.length;n++){var o={head:e[n]._wechat.wicon,nickName:e[n]._wechat.wName,gold:e[n].gold,userid:e[n].userid};1==e[n].s?(this.ui_player0.setData(o,e[n]),e[n].userid==l.AppConst.mPlayerModel.userid&&this.ui_player6.getController("c2").setSelectedIndex(1)):2==e[n].s?(this.ui_player1.setData(o,e[n]),e[n].userid==l.AppConst.mPlayerModel.userid&&this.ui_player6.getController("c2").setSelectedIndex(2)):3==e[n].s&&(this.ui_player0.setData(o,e[n]),this.ui_player1.setData(o,e[n]),e[n].userid==l.AppConst.mPlayerModel.userid&&this.ui_player6.getController("c2").setSelectedIndex(1))}var s=2;for(n=0;n<i.length&&!(s>=4);n++)o={head:i[n]._wechat.wicon,nickName:i[n]._wechat.wName,gold:i[n].gold,userid:i[n].userid},this["ui_player"+s].setData(o,i[n]),s+=1},e.prototype.sc_tablestart_redb3_n=function(t){return a(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,this.playVSAni()];case 1:return e.sent(),this.playAfterVS(),this.playSendCard(),this.startGame(t.Endtime),[2]}})})},e.prototype.playVSAni=function(){var t=this;return new Promise(function(e){t.ui_hong.visible=!1,t.ui_hei.visible=!1,t.vshongnode.active=!0,t.vsheinode.active=!0,t.ui_betbegins.visible=!0,t.vsheinode,c.AudioManager.Singleton.play("","effectVs"),t.vsAni?(t.vsAni.timeScale=.8,t.vsAni.setAnimation(0,"animation",!1),t.vsAni2.setAnimation(0,"animation",!1),t.vsAni.setCompleteListener(function(){cc.isValid(t.ui_hong)&&(t.vshongnode.active=!1,t.vsheinode.active=!1,t.ui_hong.node.opacity=0,t.ui_hei.node.opacity=0,t.ui_hong.visible=!0,t.ui_hei.visible=!0,t.ui_betbegins.visible=!1,e(!0))})):(t.vshongnode.active=!1,t.vsheinode.active=!1,t.ui_hong.node.opacity=0,t.ui_hei.node.opacity=0,t.ui_hong.visible=!0,t.ui_hei.visible=!0,t.ui_betbegins.visible=!1,e(!0))})},e.prototype.playAfterVS=function(){this.ui_hong.node.opacity=0,this.ui_hei.node.opacity=0,this.ui_hong.node.x=350,this.ui_hong.node.runAction(cc.spawn(cc.fadeIn(.5),cc.moveTo(.5,cc.v2(270,-500)))),this.ui_hei.node.x=250,this.ui_hei.node.runAction(cc.spawn(cc.fadeIn(.5),cc.moveTo(.5,cc.v2(312,-500))))},e.prototype.playSendCard=function(){this.ui_leftcardbg.visible=!1,this.ui_rightcardbg.visible=!1,this.ui_leftcardType.url="",this.ui_rightcardType.url="",this.ui_luckycardType.url="";for(var t=1;t<7;t++)this["ui_card"+t].getChildAt(0).asLoader.url="ui://HHWar/cards18";this.ui_center.getController("sendCards").setSelectedIndex(0),this.ui_center.getController("sendCards").setSelectedIndex(1)},e.prototype.startGame=function(t){t<=0||(this.ui_wait.visible=!1,this.updateTable=!1,this.state=1,this.countDownTimes=t,this.ui_times.visible=!0,this.ui_times.text=this.countDownTimes+"",this.unschedule(this.countDown),this.schedule(this.countDown,1,t-1))},e.prototype.countDown=function(){this.countDownTimes-=1,this.ui_times.text=this.countDownTimes+""},e.prototype.report=function(){return a(this,void 0,void 0,function(){var t,e,i,n;return r(this,function(){return t=0,e=H.default.instance.Model.endData.sdlist,i=e.money,n=e.gamble,t=-(t=i-n),f.default.Singleton.reportGameRound(g.UIUtil.formatNumber100(t)),[2]})})},e.prototype.storage=function(){return a(this,void 0,void 0,function(){var t,e,i,n,o,s;return r(this,function(){for(n in t=H.default.instance.Model.win10000,e=H.default.instance.Model.endData._pos2Gold,i=H.default.instance.Model.endData.sdlist.money,t){for(o=!1,s=0;s<e.length;s++)e[s].pos==+n&&e[s].val>=4e5&&(o=!0);o||+n!=l.AppConst.mPlayerModel.userid&&t[n]&&(t[n]>1?t[n]-=1:delete t[n])}for(s=0;s<e.length;s++)e[s].pos&&e[s].val>=4e5&&e[s].pos!=l.AppConst.mPlayerModel.userid&&(t[e[s].pos]>=1?t[e[s].pos]<3&&(t[e[s].pos]+=1):t[e[s].pos]=1);return i>=4e5?t[l.AppConst.mPlayerModel.userid]>=1?t[l.AppConst.mPlayerModel.userid]<3&&(t[l.AppConst.mPlayerModel.userid]+=1):t[l.AppConst.mPlayerModel.userid]=1:t[l.AppConst.mPlayerModel.userid]>1?t[l.AppConst.mPlayerModel.userid]-=1:delete t[l.AppConst.mPlayerModel.userid],[2]})})},e.prototype.sc_end_redb3_n=function(t){var e;return a(this,void 0,void 0,function(){var i,n,o,s,a,u,h,p,d,f,_,y,m=this;return r(this,function(r){switch(r.label){case 0:return this.state=2,this.report(),this.storage(),i=H.default.instance.Model.endData,n=this.calculationWinType(),[4,this.closeBetstops()];case 1:return r.sent(),[4,this.turnoverCard()];case 2:return r.sent(),n&&(this.ui_luckycardType.url="ui://HHWar/cardtypeLucky"+t.sdlist.PokerType[t.rpos-1].val),[4,this.playAniByWin(i.rpos)];case 3:for(r.sent(),this.addTableTrend(i.rpos),(null===(e=this.trend.fguiComponent)||void 0===e?void 0:e.visible)&&H.default.instance.cs_gethistory_redb3(),o=i.rpos,1==i.rpos?(n?(this.areaCom3.showEff(),s=this.centerBet2):s=this.centerBet2.concat(this.centerBet3),this.areaCom1.showEff()):2==i.rpos&&(n?(this.areaCom3.showEff(),s=this.centerBet1):s=this.centerBet1.concat(this.centerBet3),this.areaCom2.showEff()),s.length>0&&c.AudioManager.Singleton.play("","wingetcoins"),1==o?u=this.ui_leftshou.node.position:2==o&&(u=this.ui_rightshou.node.position),h=function(t){p.scheduleOnce(function(){s[t].node.runAction(cc.sequence(cc.moveTo(.15,u.x,u.y),cc.callFunc(function(){s[t].removeFromParent(),m.addChipToPool(s[t])})))},.001*t+.01)},p=this,d=0;d<s.length;d++)h(d);return f=[],_=i.sdlist.money,y=i.sdlist._pos2winlost,this.scheduleOnce(function(){for(var e=0;e<y.length;e++)y[e].val>0&&(_=g.UIUtil.formatNumber100(y[e].val),m.getBetList(_,[],!0,m.bets.length-1,m.bets,function(t){for(var i=0,n=t.length;i<n;i++){var o=m.getChip();o.touchable=!1,1e3==t[i]?o.setScale(1,1):o.setScale(.45,.45),o.node.x=u.x,o.node.y=u.y,o.setBetNum(t[i]),m.ui_betGroup.addChild(o),f.push(o);var s,a=m.endBetPos[y[e].pos-1][0]+Math.floor(630*Math.random()+40),r=m.difference(y[e].pos,a);s=m.endBetPos[y[e].pos-1][1]+Math.floor(Math.random()*r+30),o.node.runAction(cc.moveTo(.15+.01*i,a,-s))}}));for(var s=[],r={},h=[],p=0;p<i._pos2Gold.length;p++)if(i._pos2Gold[p].pos&&i._pos2Gold[p].val>0&&i._pos2Gold[p].pos!=l.AppConst.mPlayerModel.userid){var d=m.findUserIndex(i._pos2Gold[p].pos);if(m.players[0].userid==m.players[1].userid&&1==d)continue;d>=0&&!s.includes(d)&&(s.push(d),h.push(g.UIUtil.formatNumber100(i._pos2Gold[p].val)))}h.length>0&&h.reduce(function(t,e){return t+e});var b=[];t.poswl.forEach(function(t){t.val>0&&b.push(t)}),c.AudioManager.Singleton.play("","wingetcoins");var C=cc.v2(u.x,-u.y),v=g.UIUtil.formatNumber100(b.length>0?b[0].val:0)-(_<0?0:_);if(v>0){var w=b[0].pos;m.getBetList(v,[],!0,m.bets.length-1,m.bets,function(t){for(var e=function(e){m.scheduleOnce(function(){m.flyChip(C,w,t[e])},.002*e+.02)},i=0,n=t.length;i<n;i++)e(i)})}if(b[1]){var H=cc.v2(u.x,-u.y),A=g.UIUtil.formatNumber100(b[1].val)-(_<0?0:_),T=b[1].pos;A>0&&m.getBetList(A,[],!0,m.bets.length-1,m.bets,function(t){for(var e=function(e){m.scheduleOnce(function(){m.flyChip(H,T,t[e])},.002*e+.02)},i=0,n=t.length;i<n;i++)e(i)})}var P=function(t){r[s[t]]=[],m.getBetList(h[t],[],!0,m.bets.length-1,m.bets,function(e){for(var i=0,n=e.length;i<n;i++){var o=m.getChip();o.touchable=!1,1e3==e[i]?o.setScale(1,1):o.setScale(.45,.45),o.node.x=u.x,o.node.y=u.y,o.setBetNum(e[i]),m.ui_betGroup.addChild(o),r[s[t]].push(o)}})};for(p=0;p<s.length;p++)P(p);for(var M in r)for(p=0;p<r[M].length;p++){var S=m.endBetPos[o-1][0]+Math.floor(630*Math.random()+40),x=m.difference(o,S),k=m.endBetPos[o-1][1]+Math.floor(Math.random()*x+30);r[M][p].node.runAction(cc.moveTo(.15+.01*p,S,-k))}m.scheduleOnce(function(){var t=function(t){c.AudioManager.Singleton.play("","wingetcoins");for(var e=function(e){var i=r[t][e].node.position.sub(cc.v3(m.players[t].node.x,m.players[+t].node.y,0)).mag();r[t][e].node.runAction(cc.sequence(cc.moveTo(i/3e3,m.players[t].node.x,m.players[+t].node.y),cc.callFunc(function(){r[t][e].removeFromParent(),m.addChipToPool(r[t][e])})))},i=0;i<r[t].length;i++)e(i)};for(var e in r)t(e);m.showPlayerWin(i._pos2Gold),i.sdlist.money>0&&(c.AudioManager.Singleton.play("","wingetcoins"),m.ui_player6.setWin(g.UIUtil.formatNumber100(i.sdlist.money)));for(var s=function(t){var e=f[t].node.position.sub(cc.v3(m.ui_player6.node.x,m.ui_player6.node.y,0)).mag();f[t].node.runAction(cc.sequence(cc.moveTo(e/3e3,m.ui_player6.node.x,m.ui_player6.node.y),cc.callFunc(function(){f[t].removeFromParent(),m.addChipToPool(f[t])})))},l=0;l<f.length;l++)s(l);m.isCanUpdateGold&&m.setUserGold(i.money),1==i.rpos?a=n?m["centerBet"+o].concat(m.centerBet3):m["centerBet"+o]:2==i.rpos&&(a=n?m["centerBet"+o].concat(m.centerBet3):m["centerBet"+o]);var u=function(t){var e=a[t].node.position.sub(cc.v3(2013,-1003,0)).mag();a[t].node.runAction(cc.sequence(cc.moveTo(e/3e3,2013,-1003),cc.callFunc(function(){a[t].removeFromParent(),m.addChipToPool(a[t])})))};for(l=0;l<a.length;l++)u(l);m.scheduleOnce(function(){m["areaCom"+o].cleanLinght(),m.clean(),m.updateTableInfo(),m.ui_luckycardType.url=""},1)},1)},1),[2]}})})},e.prototype.turnoverCard=function(){return a(this,void 0,void 0,function(){var t=this;return r(this,function(){return[2,new Promise(function(e){return a(t,void 0,void 0,function(){var t,i,n,o=this;return r(this,function(s){switch(s.label){case 0:t=H.default.instance.Model.endData,i=t.sdlist._pos2CardList,n=0,s.label=1;case 1:return n<3?[4,this.setCard(this["ui_card"+(n+1)],i[0].vallist[n])]:[3,4];case 2:s.sent(),2==n&&(this.ui_leftcardbg.visible=!0,this.ui_leftcardType.url="ui://HHWar/cardtype"+t.sdlist.PokerType[0].val),s.label=3;case 3:return n++,[3,1];case 4:return this.scheduleOnce(function(){return a(o,void 0,void 0,function(){var n;return r(this,function(o){switch(o.label){case 0:n=0,o.label=1;case 1:return n<3?[4,this.setCard(this["ui_card"+(n+4)],i[1].vallist[n])]:[3,4];case 2:o.sent(),2==n&&(this.ui_rightcardbg.visible=!0,this.ui_rightcardType.url="ui://HHWar/cardtype"+t.sdlist.PokerType[1].val,this.scheduleOnce(function(){e(!0)},1)),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},.5),[2]}})})})]})})},e.prototype.setCard=function(t,e){var i=this;return new Promise(function(n){c.AudioManager.Singleton.play("","card_deal"),t.node.runAction(cc.sequence(cc.scaleTo(.2,0,.75),cc.callFunc(function(){t.getChildAt(0).asLoader.url="ui://HHWar/cards"+e}),cc.scaleTo(.2,.75,.75),cc.callFunc(n,i,!0)))})},e.prototype.calculationWinType=function(){var t=H.default.instance.Model.endData,e=t.rpos,i=t.sdlist.PokerType[e-1].val;if(i>1)return!0;if(1==i){for(var n=t.sdlist._pos2CardList[e-1].vallist,o=0,s=0;s<3;s++)n[s]%100>=8&&(o+=1);if(o>=2)return!0}return!1},e.prototype.playAniByWin=function(t){var e=this;return new Promise(function(i){1==t?(e.heiAni.setAnimation(0,"win",!1),e.heiAni.addAnimation(0,"daiji",!0),e.hongAni.setAnimation(0,"lost",!1),e.hongAni.addAnimation(0,"daiji",!0),e.ui_heiwinnode.visible=!0,e.heiwinAni.setAnimation(0,"animation",!1),e.heiwinAni.setCompleteListener(function(){cc.isValid(e.ui_heiwinnode)&&(e.ui_heiwinnode.visible=!1,i(!0))}),c.AudioManager.Singleton.play("","hongzha")):2==t&&(e.hongAni.setAnimation(0,"win",!1),e.hongAni.addAnimation(0,"daiji",!0),e.heiAni.setAnimation(0,"lost",!1),e.heiAni.addAnimation(0,"daiji",!0),e.ui_hongwinnode.visible=!0,e.hongwinAni.timeScale=1.5,e.hongwinAni.setAnimation(0,"animation",!1),e.hongwinAni.setCompleteListener(function(){cc.isValid(e.ui_hongwinnode)&&(e.ui_hongwinnode.visible=!1,i(!0))}),e.scheduleOnce(function(){c.AudioManager.Singleton.play("","jiao")},.7))})},e.prototype.showPlayerWin=function(t){for(var e=0;e<t.length;e++)if(t[e].pos&&t[e].val>0&&t[e].pos!=l.AppConst.mPlayerModel.userid){var i=this.findUserById(t[e].pos);if(this.players[0].userid==this.players[1].userid&&i&&1==i.pos)continue;i&&i.setWin(g.UIUtil.formatNumber100(t[e].val))}},e.prototype.updateTableInfo=function(){this.updateTable=!0,this.ui_player6.getController("c2").setSelectedIndex(0);for(var t=H.default.instance.Model.endData.playerlist,e=t.filter(function(t){return 1==t.s||2==t.s||3==t.s}),i=t.filter(function(t){return 0==t.s}).sort(function(t,e){return e.gold-t.gold}),n=!1,o=!1,s=0;s<e.length;s++){var a={head:e[s]._wechat.wicon,nickName:e[s]._wechat.wName,gold:e[s].gold,userid:e[s].userid};1==e[s].s?(this.ui_player0.setData(a,e[s]),n=!0,e[s].userid==l.AppConst.mPlayerModel.userid&&this.ui_player6.getController("c2").setSelectedIndex(1)):2==e[s].s?(o=!0,this.ui_player1.setData(a,e[s]),e[s].userid==l.AppConst.mPlayerModel.userid&&this.ui_player6.getController("c2").setSelectedIndex(2)):3==e[s].s&&(n=!0,o=!0,this.ui_player0.setData(a,e[s]),this.ui_player1.setData(a,e[s]),e[s].userid==l.AppConst.mPlayerModel.userid&&this.ui_player6.getController("c2").setSelectedIndex(1))}n||this.ui_player0.exit(),o||this.ui_player1.exit();var r=2;for(s=0;s<i.length&&!(r>=4);s++)a={head:i[s]._wechat.wicon,nickName:i[s]._wechat.wName,gold:i[s].gold,userid:i[s].userid},this["ui_player"+r].setData(a,i[s]),r+=1;var c=H.default.instance.Model.win10000[l.AppConst.mPlayerModel.userid];if(c?this.ui_player6.addWinEff(c):this.ui_player6.cleanWinEff(),r<4)for(s=r;s<4;s++)this["ui_player"+r].exit()},e.prototype.flipCardAction=function(t,e){var i=this;c.AudioManager.Singleton.play("","open_card"),t.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,0,.6),cc.skewTo(.1,0,20)),cc.callFunc(function(){i.showCard(t,e)}),cc.spawn(cc.scaleTo(.1,.6,.6),cc.skewTo(.1,0,0))))},e.prototype.showCard=function(t,e){t.getChildAt(0).asLoader.url="ui://HHWar/cards"+e},e.prototype.closeBetstops=function(){var t=this;return new Promise(function(e){t.scheduleOnce(function(){c.AudioManager.Singleton.play("","end_bet"),t.ui_betstops.visible=!0},.5),t.scheduleOnce(function(){t.ui_betstops.visible=!1,e(!0)},1.5)})},e.prototype.tableTrendInfo=function(t){var e=t.wbs;this.ui_recordList.removeChildrenToPool();for(var i=e.length>14?e.slice(e.length-14):e,n=0;n<i.length;n++)this.ui_recordList.addItemFromPool().setData(i[n].win)},e.prototype.addTableTrend=function(t){var e=this,i=this.ui_recordList.numChildren;i>=14&&this.ui_recordList.removeChildToPoolAt(0),this.ui_recordList.addItemFromPool().setData(t),this.ui_newrecord.visible=!0;var n=9*i+47*i+this.ui_recordList.x-5;i>=14&&(n-=55),this.ui_newrecord.x=n,this.scheduleOnce(function(){e.ui_newrecord.visible=!1},4)},e.prototype.clearTable=function(){this.clean(),this.unscheduleAllCallbacks(),this.ui_betstops.visible=!1,this.ui_betbegins.visible=!1,this.ui_times.text="0",this.ui_times.visible=!1,this.ui_newrecord.visible=!1,this.ui_heiwinnode.visible=!1,this.ui_hongwinnode.visible=!1,this.ui_leftcardbg.visible=!1,this.ui_rightcardbg.visible=!1,this.ui_leftcardType.url="",this.ui_rightcardType.url="",this.ui_luckycardType.url="";for(var t=1;t<7;t++)this["ui_card"+t].node.stopAllActions(),this["ui_card"+t].getChildAt(0).asLoader.url="ui://HHWar/cards18"},e.prototype.clean=function(){this.centerBet1.length=0,this.centerBet2.length=0,this.centerBet3.length=0,this.areaCom1.cleanEff(),this.areaCom2.cleanEff(),this.areaCom3.cleanEff(),this.recoveryPoker(),this.players.forEach(function(t){t.reset()})},e.prototype.selfStake=function(t){var e=g.UIUtil.formatNumber100(t.gamble);this.flyChip(this.ui_player6,t.tpos,e,!0);var i=this["areaCom"+t.tpos].getAllBet();this["areaCom"+t.tpos].setAllbet(i+e),this["areaCom"+t.tpos].addAllBet(e),this.updateMeAreaBet(t._pos2Gamble),this.players[1].userid==l.AppConst.mPlayerModel.userid&&this.flyStar(e,t.tpos,this.ui_player6);for(var n=0;n<4;n++)this.players[n].empty||this.players[n].userid!=l.AppConst.mPlayerModel.userid||this.players[n].showEff()},e.prototype.updateMeAreaBet=function(t){for(var e=0;e<t.length;e++)this["areaCom"+t[e].pos].setMyBet(g.UIUtil.formatNumber100(t[e].val))},e.prototype.flyStar=function(t,e,i){var n=this;if(!(this["areaCom"+e].getStarProgress()>=1e3))if(!this.starAction||this.starAction.isDone()){this.ui_star.node.x=i?i.node.x:this.ui_player1.node.x,this.ui_star.node.y=i?i.node.y:this.ui_player1.node.y,this.ui_star.visible=!0,this.ui_star1.node.x=i?i.node.x:this.ui_player1.node.x,this.ui_star1.node.y=i?i.node.y:this.ui_player1.node.y,this.ui_star1.visible=!0;var o=cc.v2(this.ui_star.node.x,this.ui_star.node.y),s=cc.v2(this["ui_endpos"+e].node.x,this["ui_endpos"+e].node.y),a=cc.v2((o.x+s.x)/2,-200);this.scheduleOnce(function(){n.ui_star1.node.runAction(cc.sequence(cc.bezierTo(.35,[o,a,s]),cc.callFunc(function(){cc.isValid(n.ui_star1)&&(n.ui_star1.visible=!1)})))},.1),cc.tween(this.ui_star.node).bezierTo,this.starAction=this.ui_star.node.runAction(cc.sequence(cc.bezierTo(.5,[o,a,s]),cc.callFunc(function(){cc.isValid(n.ui_star)&&(n["areaCom"+e].chengedStar(t),n["areaCom"+e].playStarAni(),n.ui_star.visible=!1)})))}else this["areaCom"+e].chengedStar(t)},e.prototype.sc_gamblearea_sud_n=function(t){this.tableincreaseBet={1:0,2:0,3:0},this.tableUserStake(t.otherBetList),this.OtherUserStake(t._p2GT)},e.prototype.updatePlaterNum=function(t){this.ui_otherPlayerNum.text=t+""},e.prototype.tableUserStake=function(t){for(var e=this,i=function(i){var o=n.findUserById(t[i].pos);if(!o)return"continue";var s=o.getBaseData();if(s&&3==s.s?(n.ui_player0.setGold(t[i].userGold),n.ui_player1.setGold(t[i].userGold),o=n.ui_player1):o.setGold(t[i].userGold),t[i].pos!=l.AppConst.mPlayerModel.userid&&o&&!o.empty){var a=function(s){var a=o.getNowBet(+s),r=g.UIUtil.formatNumber100(t[i].pos2Gameble[s])-a;r>0&&(n.tableincreaseBet[s]+=r,o.setNowBet(+s,r),1!=o.pos||1!=+s&&2!=+s||n.flyStar(r,+s),n.getBetList(r,[],!1,n.bets.length-1,n.bets,function(t){for(var i=function(i){e.scheduleOnce(function(){o.showEff(),e["areaCom"+s].addAllBet(t[i]),e.flyChip(o,+s,t[i])},.03*i+.02)},n=0,a=t.length;n<a;n++)i(n)}))};for(var r in t[i].pos2Gameble)a(r)}},n=this,o=0;o<t.length;o++)i(o)},e.prototype.OtherUserStake=function(t){for(var e=this,i=this.bets[0]<10?1:0,n=function(n){var s=t[n].pos,a=o["areaCom"+s].getAllBet(),r=o.tableincreaseBet[s],l=g.UIUtil.formatNumber100(t[n].val);if(o["areaCom"+s].setAllbet(l),l>a){var c=l-a-r;if(1==i&&(c-=c%100/10),c>100)for(var u=Math.floor(c/3),h=u-u%10,p=[h,h,c-2*h],d=function(t){o.scheduleOnce(function(){e.otherFlyChip(p[t],s)},.25*t)},f=0;f<3;f++)d(f);else o.otherFlyChip(c,s)}},o=this,s=0;s<t.length;s++)n(s)},e.prototype.randomNum=function(){var t=Math.random();return t<.4?.4:t>.6?.6:t},e.prototype.otherFlyChip=function(t,e){var i=this,n=cc.v2(this.ui_btn_other.x-50,this.ui_btn_other.y-50);this.getBetList(t,[],!0,this.bets.length-1,this.bets,function(t){for(var o=function(o){i.scheduleOnce(function(){i["areaCom"+e].addAllBet(t[o]),i.showOtherEff(),i.flyChip(n,e,t[o])},.08*o)},s=0,a=t.length;s<a;s++)o(s)})},e.prototype.showOtherEff=function(){if(!fgui.GTween.isTweening(this.ui_btn_other)){var t=this.ui_btn_other.x,e=this.ui_btn_other.y,i=t-30,n=e-30;fgui.GTween.to2(t,e,i,n,.1).setTarget(this.ui_btn_other,this.ui_btn_other.setPosition).setRepeat(1,!0).setEase(fgui.EaseType.ElasticIn)}},e.prototype.findUserById=function(t){for(var e=0;e<4;e++)if(this.players[e].userid==t)return this.players[e];return null},e.prototype.findUserIndex=function(t){for(var e=0;e<4;e++)if(this.players[e].userid==t)return e;return-1},e.prototype.getBetList=function(t,e,i,n,o,s){for(void 0===n&&(n=4);t>0;){var a=Math.random()>.3;t>=o[n]?a&&i&&n-1>=0?(t-=o[n-1],e.push(o[n-1])):(t-=o[n],e.push(o[n])):(t<o[0]&&(t=0),n--)}s&&s(e)},e.prototype.flyChip=function(t,e,i,n){void 0===n&&(n=!1),c.AudioManager.Singleton.play("","bet");var o=this.getChip();1e3==i?o.setScale(1,1):o.setScale(.45,.45),n?(o.node.x=this.selectChip.node.x,o.node.y=this.selectChip.node.y):(o.node.x=t.x,o.node.y=-t.y),o.setBetNum(i),this.ui_betGroup.addChild(o),5e3==i?o.setEff(!0):o.setEff(!1),1==e?this.centerBet1.push(o):2==e?this.centerBet2.push(o):this.centerBet3.push(o);var s=this.endBetPos[e-1][0]+Math.floor(630*Math.random()+40),a=this.difference(e,s),r=this.endBetPos[e-1][1]+Math.floor(Math.random()*a+30),l=+(o.node.position.sub(cc.v3(s,r,0)).mag()/6e3).toFixed(2),u=cc.moveTo(l,s,-r);o.node.runAction(u)},e.prototype.difference=function(t,e){var i=320;return 3==t?i=130:2==t&&(i=70),1==t?e>640&&e<700?i=210:e>=700&&e<790?i=180:e>=790&&e<960?i=105:e>650&&(i=70):2==t&&(e>1350&&e<1460?i=90:e>=1460&&e<1560?i=110:e>=1560&&e<1646?i=150:e>=1646&&e<1700?i=200:e>=1700&&e<1887&&(i=320)),i},e.prototype.getChip=function(){return this.chipPool.length<=0?fgui.UIPackage.createObject("HHWar","chipsNow"):this.chipPool.pop()},e.prototype.addChipToPool=function(t){this.chipPool.push(t)},e.prototype.cleanPool=function(){for(;this.chipPool.length;)this.chipPool.pop().dispose()},e.prototype.recoveryPoker=function(){for(;this.ui_betGroup.numChildren>0;){var t=this.ui_betGroup.removeChildAt(0);this.addChipToPool(t)}},s([D],e)}(y.default));i.default=I,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/BaseFrameNative":void 0,"../../../../Common/script/base/CommonCtr":void 0,"../../../../Common/script/base/CommonView":void 0,"../../../../Common/script/base/ReconnectManager":void 0,"../../../../Common/script/base/ReportManager":void 0,"../../../../Common/script/base/SceneManager":void 0,"../../../../Common/script/base/ViewBase":void 0,"../../../../Common/script/util/UIUtil":void 0,"../../../../GameHall/dlc/script/config/LocalizationConfig":void 0,"../../../../GameHall/script/Module/ChatView/ChatPeopleMsg":void 0,"../../../../GameHall/script/Module/ChatView/ChatView":void 0,"../../../../GameHall/script/Module/ComSettingView/ComSettingView":void 0,"../../../../GameHall/script/Module/RechargeView/RechargeView":void 0,"../Contrl/HHWarViewCtr":"HHWarViewCtr","./HHWarAddCash":"HHWarAddCash","./HHWarAreaCom":"HHWarAreaCom","./HHWarChipsNow":"HHWarChipsNow","./HHWarDrwaprize":"HHWarDrwaprize","./HHWarHelp":"HHWarHelp","./HHWarHistory":"HHWarHistory","./HHWarPlayList":"HHWarPlayList","./HHWarPlayListItem":"HHWarPlayListItem","./HHWarPlayer":"HHWarPlayer"}]},{},["HHWarViewCtr","HHWarModel","HHWarNetData","HHWarAddCash","HHWarAreaCom","HHWarChipsNow","HHWarDrwaprize","HHWarHelp","HHWarHistory","HHWarPlayList","HHWarPlayListItem","HHWarPlayer","HHWarView"]);