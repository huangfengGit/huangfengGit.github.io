window.__require=function e(t,i,o){function n(a,l){if(!i[a]){if(!t[a]){var r=a.split("/");if(r=r[r.length-1],!t[r]){var c="function"==typeof __require&&__require;if(!l&&c)return c(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+a+"'")}a=r}var u=i[a]={exports:{}};t[a][0].call(u.exports,function(e){return n(t[a][1][e]||e)},u,u.exports,e,t,i,o)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<o.length;a++)n(o[a]);return n}({BenzBmwAwardRecord:[function(e,t,i){"use strict";cc._RF.push(t,"9ac074twKpJEprTnzdvENv8","BenzBmwAwardRecord");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../../Common/script/base/AudioManager"),l=e("../../../../Common/script/base/ViewBase"),r=e("../control/BenzBmwViewCtrl"),c=e("../model/BenzBmwGameData"),u=cc._decorator,h=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_record_40ju=null,t.ui_record_title=null,t.ui_colseBtn=null,t.ui_closeMask=null,t.fortyRate=[],t.awardList=[],t}return n(t,e),Object.defineProperty(t.prototype,"packageResourceName",{get:function(){return"benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"packageName",{get:function(){return"res/benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentName",{get:function(){return"AwardRecord"},enumerable:!1,configurable:!0}),t.prototype.createChildComponents=function(){e.prototype.createChildComponents.call(this),this.fguiComponent.center()},t.prototype.allChildCreated=function(){e.prototype.allChildCreated.call(this),this.Hide(),this.initUI()},t.prototype.initUI=function(){this.ui_closeMask.onClick(this.Hide.bind(this)),this.ui_colseBtn.onClick(this.Hide.bind(this));for(var e=0;e<c.default.IconsCnt;e++){var t="sevenDayRate"+e;this.fortyRate[e]=this.fguiComponent.getChild(t).asTextField,this.getChild("titleIcon_"+e).asCom.getController("iconItemIndex").setSelectedIndex(e)}for(e=0;e<10;e++)t="awardList"+e,this.awardList[e]=this.fguiComponent.getChild(t).asList},t.prototype.Percentage=function(e,t){return 0==e||0==t?0:Math.round(e/t*1e4)/100},t.prototype.calculateCarRate=function(){for(var e=r.default.instance.Model.historyRecord,t=c.default.CarName,i={},o=0;o<e.length;o++){var n=t[e[o]];i[n]>=1?i[n]+=1:null==n&&null==n||(i[n]=1)}var s=[0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<c.default.IconsCnt;o++){if(Object.prototype.hasOwnProperty.call(i,t[o])){var a=i[t[o]];s[o]=this.Percentage(a,e.length)}this.fortyRate[o].text=s[o]+"%"}},t.prototype.setHistoryData=function(){this.calculateCarRate();for(var e=r.default.instance.Model.historyRecord,t=e.reverse(),i=[],o=0,n=0;n<e.length;n++)n%4==0&&(i[o]=t.slice(n,n+4),o++);var s=0,a=0;for(n=0;n<10;n++)this.awardList[n].removeChildrenToPool();var l=[];for(n=e.length-1;n>=0;n--){a>=4&&(s++,a=0),a%4==0&&(l=i[s]);var c=l[a],u=this.awardList[s].addItemFromPool().asCom;u.getController("iconItemIndex").setSelectedIndex(c),u.getController("new").setSelectedIndex(0),0==n&&u.getController("new").setSelectedIndex(1),a++}},t.prototype.Show=function(){e.prototype.Show.call(this),this.ui_record_title.text=r.default.instance.Model.GetLanguage(10008),this.ui_record_40ju.text=r.default.instance.Model.GetLanguage(10009)},t.prototype.Hide=function(){e.prototype.Hide.call(this),a.AudioManager.Singleton.play("gamehall","btn_close")},s([h],t)}(l.default));i.default=p,cc._RF.pop()},{"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/ViewBase":void 0,"../control/BenzBmwViewCtrl":"BenzBmwViewCtrl","../model/BenzBmwGameData":"BenzBmwGameData"}],BenzBmwBetRecordItem:[function(e,t,i){"use strict";cc._RF.push(t,"3cbb7sXZxdHA4DhpysKyI16","BenzBmwBetRecordItem");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s=e("../control/BenzBmwViewCtrl"),a=e("../model/BenzBmwGameData"),l=function(e){function t(){return e.call(this)||this}return n(t,e),t.prototype.onConstruct=function(){this.betTime=this.getChild("betTime").asTextField,this.betCarName=this.getChild("betCarName").asTextField,this.betCnt=this.getChild("betCnt").asTextField,this.betPayout=this.getChild("betPayout").asTextField,this.betMcode=this.getChild("betMcode").asTextField,this.betTableid=this.getChild("betTableid").asTextField,this.betWinCar=this.getChild("betWinCar").asTextField,this.betWinCnt=this.getChild("betWinCnt").asTextField},t.prototype.setData=function(e){this.betTime.text=e.StakeDate;for(var t=e._pos2Gamble,i=0;i<t.length;i++){var o=t[i].pos,n=a.default.CarName[o];this.betCarName.text=""+n,this.betCnt.text=""+t[i].val,this.betWinCnt.text=""+t[i].val}var l=e.AddorReduceMoney;this.betPayout.text=""+l,this.betMcode.text=""+s.default.instance.Model.boardCode,this.betTableid.text=""+s.default.instance.Model.tableid;var r=e.prizeType,c=a.default.CarName[r];this.betWinCar.text=""+c},t}(fgui.GComponent);i.default=l,cc._RF.pop()},{"../control/BenzBmwViewCtrl":"BenzBmwViewCtrl","../model/BenzBmwGameData":"BenzBmwGameData"}],BenzBmwBetRecord:[function(e,t,i){"use strict";cc._RF.push(t,"aa092nMgwxDUZpxgStPCHDF","BenzBmwBetRecord");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../../Common/script/base/ViewBase"),l=e("../control/BenzBmwViewCtrl"),r=e("../model/BenzBmwGameData"),c=cc._decorator,u=c.ccclass,h=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_closeMask=null,t.ui_colseBtn=null,t.ui_recordList=null,t.ui_betSingle=null,t.ui_betAll=null,t.ui_betSingleUse=null,t.ui_betAllUse=null,t.ui_betSingleWin=null,t.ui_betAllWin=null,t.listChildIndex=0,t}return n(t,e),Object.defineProperty(t.prototype,"packageResourceName",{get:function(){return"benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"packageName",{get:function(){return"res/benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentName",{get:function(){return"BetRecord"},enumerable:!1,configurable:!0}),t.prototype.createChildComponents=function(){e.prototype.createChildComponents.call(this),this.fguiComponent.center()},t.prototype.allChildCreated=function(){e.prototype.allChildCreated.call(this),this.Hide(),this.initUI()},t.prototype.initUI=function(){this.ui_closeMask.onClick(this.Hide.bind(this)),this.ui_colseBtn.onClick(this.Hide.bind(this)),this.ui_recordList.on(fgui.Event.PULL_UP_RELEASE,this.pullUpReqNewData.bind(this))},t.prototype.resetData=function(){this.listChildIndex=0,this.ui_recordList.removeChildrenToPool()},t.prototype.Show=function(){this._fguiComponent.visible||e.prototype.Show.call(this)},t.prototype.setBetRecods=function(e){var t=e;if(null!=t&&0!=t.length){for(var i=0;i<t.length;i++)for(var o=t[i]._pos2Gamble,n=0;n<o.length;n++){this.ui_recordList.addItemFromPool();var s=this.ui_recordList.getChildAt(this.listChildIndex);s.getChild("betTime").asTextField.text=t[i].StakeDate;var a=o[n].pos,c=r.default.CarName[a];s.getChild("betCarName").asTextField.text=c,s.getChild("betCnt").asTextField.text=""+o[n].val;var u=t[i].AddorReduceMoney;s.getChild("betPayout").asTextField.text=""+u,s.getChild("betMcode").asTextField.text=""+l.default.instance.Model.boardCode,s.getChild("betTableid").asTextField.text=""+l.default.instance.Model.tableid;var h=t[i].prizeType,p=r.default.CarName[h];s.getChild("betWinCar").asTextField.text=p,s.getChild("betWinCnt").asTextField.text=""+o[n].val,this.listChildIndex++}console.log("------------------listChildIndex : "+this.listChildIndex)}},t.prototype.setOtherData=function(){var e=l.default.instance.Model.currGamble;this.ui_betSingle.text=""+e,this.ui_betSingleUse.text=""+e;var t=l.default.instance.Model.currWinScore;this.ui_betSingleWin.text=""+t;var i=l.default.instance.Model.totalGamble;this.ui_betAll.text=""+i,this.ui_betAllUse.text=""+i;var o=l.default.instance.Model.totalWinScore;this.ui_betAllWin.text=""+o},t.prototype.pullUpReqNewData=function(){if(0!=l.default.instance.Model.historyGamele.length){var e=l.default.instance.Model.historyGamelePage;this.parent.cs_gethistorygamble_bcbm(e)}},s([u],t)}(a.default));i.default=h,cc._RF.pop()},{"../../../../Common/script/base/ViewBase":void 0,"../control/BenzBmwViewCtrl":"BenzBmwViewCtrl","../model/BenzBmwGameData":"BenzBmwGameData"}],BenzBmwBetResult:[function(e,t,i){"use strict";cc._RF.push(t,"1a5b5UASdVO572skxZjRmfS","BenzBmwBetResult");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../../Boot/scirpt/AppConst"),l=e("../../../../Common/script/base/AudioManager"),r=e("../../../../Common/script/base/ViewBase"),c=e("../../../../Common/script/util/UIUtil"),u=e("../control/BenzBmwViewCtrl"),h=e("../model/BenzBmwGameData"),p=e("../model/BenzBmwNetData"),d=cc._decorator,m=d.ccclass,f=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.middleLightPicPos=[cc.v2(491,586),cc.v2(491,750),cc.v2(724,586),cc.v2(724,750),cc.v2(956,586),cc.v2(956,750),cc.v2(1189,586),cc.v2(1189,750)],t.middleCarType=[2,3,4,5,6,7,8,9],t.selfAllBetText=[],t.allUsersAllBetText=[],t.selfSingleBetNum=null,t.otherSingleBetNum=null,t.betIndex=null,t.scheduleCallback=[],t.betCarsBtn=[],t.createBetStakePic=[],t.createBetStakePicCnt=0,t.selfAllBetPos=[],t.selfAllBetPosCopy=[],t.selfAllBetNum=[],t.selfAllBetNumCopy=[],t.selfBetPos=[],t.selfBetNum=[],t._selfPos2Gamble=[],t._allPos2Gamble=[],t.haveBet=!1,t.haveContinueBet=!1,t.isInit=!1,t.allBetNum=[],t.chipPool=[],t}return n(t,e),t.prototype.createChildComponents=function(){e.prototype.createChildComponents.call(this),this.fguiComponent.center()},t.prototype.allChildCreated=function(){e.prototype.allChildCreated.call(this),this.fguiComponent.node.anchorX=.5;var t=cc.winSize.width/this.fguiComponent.node.width,i=cc.winSize.height/this.fguiComponent.node.height;this.fguiComponent.node.setScale(t,i),this.fguiComponent.center(),this.initUi(),this.eventListener()},t.prototype.initUi=function(){this.leftDownLightPic=this.fguiComponent.getChild("leftDownLightPic").asImage,this.leftDownLightPic.visible=!1,this.leftTopLightPic=this.fguiComponent.getChild("leftTopLightPic").asImage,this.leftTopLightPic.visible=!1,this.rightDownLightPic=this.fguiComponent.getChild("rightDownLightPic").asImage,this.rightDownLightPic.visible=!1,this.rightTopLightPic=this.fguiComponent.getChild("rightTopLightPic").asImage,this.rightTopLightPic.visible=!1,this.middleLightPic=this.fguiComponent.getChild("middleLightPic").asImage,this.middleLightPic.visible=!1;for(var e=0;e<h.default.IconsCnt;e++){var t="start"+e;t="selfAllBetText"+e,this.selfAllBetText[e]=this.fguiComponent.getChild(t).asTextField,this.selfAllBetText[e].text="0",t="allBetText"+e,this.allUsersAllBetText[e]=this.fguiComponent.getChild(t).asTextField}for(e=0;e<h.default.IconsCnt;e++)t="n"+(73+e),this.betCarsBtn[e]=this.fguiComponent.getChild(t).asButton,this.betCarsBtn[e].onClick(this.sendBetResultReq.bind(this,e)),this.allBetNum[e]=0;this.isInit=!0,this.saveBetData()},t.prototype.eventListener=function(){var e=this;this.node.on(h.default.GameEvent.ChooseBetNum,function(t){t&&(e.selfSingleBetNum=null,e.selfSingleBetNum=t)}),this.node.on(h.default.GameEvent.ContinueBet,function(){e.sendContinueBetResultReq()})},t.prototype.setSelfSingleBetNum=function(e){e&&(this.selfSingleBetNum=null,this.selfSingleBetNum=e)},t.prototype.showCarLightPic=function(){var e=u.default.instance.Model._prizeType;cc.error("awardType = ",e),e==h.default.IconsCode.Ferrari?this.showLeftTopLightPic(!0):e==h.default.IconsCode.Lamborghini?this.showLeftDownLightPic(!0):e==h.default.IconsCode.Hyundai?this.showRightTopLightPic(!0):e==h.default.IconsCode.MazDa?this.showRightDownLightPic(!0):this.showMiddleLightPic(!0,e)},t.prototype.showLeftDownLightPic=function(e){var t=e;this.leftDownLightPic.visible=t},t.prototype.showLeftTopLightPic=function(e){var t=e;this.leftTopLightPic.visible=t},t.prototype.showRightDownLightPic=function(e){var t=e;this.rightDownLightPic.visible=t},t.prototype.showRightTopLightPic=function(e){var t=e;this.rightTopLightPic.visible=t},t.prototype.showMiddleLightPic=function(e,t){var i=e;this.middleLightPic.visible=i,i&&t&&this.moveN1toN2(this.middleLightPic.node,this.betCarsBtn[t].node)},t.prototype.moveN1toN2=function(e,t){e.position=e.parent.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position))},t.prototype.convertNodeSpaceAR=function(e,t){return e.parent.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position))},t.prototype.reconnectShowBetNumResult=function(){this.reconnectShowBets()},t.prototype.reconnectShowBets=function(){var e=u.default.instance.Model._pos2Gameble;if(this._selfPos2Gamble=e,e.length>0)for(var t=0;t<e.length;t++)if(e[t].val>0){var i=e[t].val,o=e[t].pos;this.reconnectGenerateChip(i,o),this.showSelfBetValue(o,i)}var n=u.default.instance.Model._p2GT;for(this._allPos2Gamble=n,t=0;t<n.length;t++)if(n[t].val>0){var s=n[t].val;e.length>0&&e[t]&&e[t].val>0&&(s=n[t].val-e[t].val),o=n[t].pos,this.reconnectGenerateChip(s,o),this.showAllBetValue(o,n[t].val),this.allBetNum[o]=n[t].val}},t.prototype.reconnectGenerateChip=function(e,t){var i=e,o=u.default.instance.Model.gameleList;o=JSON.parse(JSON.stringify(o)).reverse();for(var n=0;n<o.length;n++){for(var s=Math.floor(i/o[n]),a=0;a<s;a++)this.RealGenerateChip(o[n],t);i%=o[n]}},t.prototype.RealGenerateChip=function(e,t){for(var i=-1,o=u.default.instance.Model.gameleList,n=0;n<h.default.BetBtnsCnt;n++)if(e==o[n]){i=n;break}var s=i;if(-1!=s){this.createBetStakePic[this.createBetStakePicCnt]=this.getChip();var a=this.createBetStakePic[this.createBetStakePicCnt],l=u.default.instance.view._benzBmwBottomBar.betBtns[s].asButton;a.getController("type").setSelectedIndex(l.getController("type").selectedIndex),a.asButton.title=l.title,a.pivotX=.5,a.pivotY=.5;var r=this.getBetStakeImageEndPos(t,a);a.x=r.x,a.y=r.y,a.setScale(.4,.4),a.setPivot(.5,.5,!0),this.createBetStakePicCnt++}},t.prototype.getChip=function(){var e=null;return(e=this.chipPool[0])?((e=this.chipPool.shift()).node.active=!0,e.visible=!0):(e=fgui.UIPackage.createObject("res/benzBmw","btn_bet1").asCom).touchable=!1,u.default.instance.view.ui_ComChipsGroup.addChild(e),e},t.prototype.addChipToPool=function(e){e&&(this.chipPool[this.chipPool.length]=e,e.visible=!1,e.node.active=!1)},t.prototype.cleanPool=function(){for(;this.chipPool.length;)this.chipPool.pop().dispose();this.chipPool=null},t.prototype.showSelfBetValue=function(e,t){var i=e,o=t;this.selfAllBetText[i].text=""+c.UIUtil.formatNumber100(o)},t.prototype.showAllBetValue=function(e,t){var i=e,o=t;this.selfAllBetText[i].node.opacity=255,this.selfAllBetText[i].visible=!0,this.allUsersAllBetText[i].text="/"+c.UIUtil.formatNumber100(o),this.allUsersAllBetText[i].node.opacity=255,this.allUsersAllBetText[i].visible=!0},t.prototype.sendBetResultReq=function(e){var t;if((null===(t=a.AppConst.mPlayerModel)||void 0===t?void 0:t.TotalReGold)<3e4)u.default.instance.view._benzBmwBottomBar.ui_RechargeTip.visible=!0;else if(this.haveBet=!0,this.betIndex=e,this.selfBetPos=[],this.selfBetNum=[],this.selfBetPos.push(this.betIndex),this.selfBetNum.push(this.selfSingleBetNum),this.selfAllBetPos.push(this.betIndex),this.selfAllBetNum.push(this.selfSingleBetNum),this.selfAllBetPosCopy.push(this.betIndex),this.selfAllBetNumCopy.push(this.selfSingleBetNum),this.selfBetPos.length>0&&this.selfBetNum.length>0){var i=new p.cs_gambleone_bcbm;i._tpos=this.selfBetPos,i.gamble=this.selfBetNum,u.default.instance.cs_gambleone_bcbm(i)}},t.prototype.sendContinueBetResultReq=function(){},t.prototype.showBetResult=function(){this.showSelfBetResult();var e=u.default.instance.Model._pos2GambleTotal;this.showOtherUserBet(e)},t.prototype.showSelfBetResult=function(){var e=this;this._selfPos2Gamble=u.default.instance.Model._pos2Gameble;var t,i=u.default.instance.Model.betCarTypePos;this.selfSingleBetNum=u.default.instance.Model.betGamble,t=cc.v2(505,1021);for(var o=-1,n=0;n<h.default.BetBtnsCnt;n++)if(this.selfSingleBetNum==u.default.instance.Model.gameleList[n]){o=n;break}if(this.allBetNum[i]+=this.selfSingleBetNum,this.selfSingleBetNum&&-1!=o){var s=i;this.betIndex=i;var a=this.createBetStakeImage(o,t),r=this.getBetStakeImageEndPos(s,a);l.AudioManager.Singleton.play("","benz_betCoin"),a.node.runAction(cc.callFunc(function(){fgui.GTween.to2(t.x,t.y,r.x,r.y,.5).setTarget(a,a.setPosition).setEase(fgui.EaseType.CubicOut).onComplete(function(){e._selfPos2Gamble.some(function(t,i,o){if(s==t.pos){var n=o[i].val;e.selfAllBetText[s].text=""+c.UIUtil.formatNumber100(n)}},e),e.selfAllBetText[s].node.opacity=255,e.selfAllBetText[s].visible=!0,u.default.instance.Model._pos2GambleTotal.some(function(t,o,n){s==t.pos&&(n[o].val,e.allUsersAllBetText[s].text="/"+c.UIUtil.formatNumber100(e.allBetNum[i]),e.allUsersAllBetText[s].node.opacity=255,e.allUsersAllBetText[s].visible=!0)},e)},e)}))}else console.log("\u62bc\u6ce8\u503c\u6216\u8005\u62bc\u6ce8\u8f66\u5b50\u7d22\u5f15\u6709\u5f02\u5e38")},t.prototype.showOtherUserBet=function(e){var t=e,i=this._selfPos2Gamble;if(0==this._allPos2Gamble.length)for(var o=0;o<t.length;o++){var n=t[o].val;if(t[o].val>0){if(i.length>0)for(var s=0;s<i.length;s++)if(i[s].pos==t[o].pos){n-=i[s].val;break}var a=t[o].pos;n>0&&this.GenerateChip(n,a)}}else if(t.length>this._allPos2Gamble.length){for(o=0;o<t.length;o++)if(t[o].val>0&&!this._allPos2Gamble[o]){if(n=t[o].val,i.length>0)for(s=0;s<i.length;s++)if(i[s].pos==t[o].pos){n-=i[s].val;break}a=t[o].pos,n>0&&this.GenerateChip(n,a)}else if(t[o].val>this._allPos2Gamble[o].val){if(n=t[o].val-this._allPos2Gamble[o].val,i.length>0)for(s=0;s<i.length;s++)if(i[s].pos==t[o].pos){n-=i[s].val;break}a=t[o].pos,n>0&&this.GenerateChip(n,a)}}else if(t.length==this._allPos2Gamble.length)for(o=0;o<t.length;o++)if(t[o].val>0&&t[o].val>this._allPos2Gamble[o].val){if(n=t[o].val-this._allPos2Gamble[o].val,i.length>0)for(s=0;s<i.length;s++)if(i[s].pos==t[o].pos){n-=i[s].val;break}a=t[o].pos,n>0&&this.GenerateChip(n,a)}this._allPos2Gamble=t},t.prototype.GenerateChip=function(e,t){var i=this,o=e,n=u.default.instance.Model.gameleList,s=[];if(n[0]<1e3){var a=Math.floor(o%1e4/1e3);o=Math.floor(o-100*a)}for(;o>=100;)for(var l=n.length-1;l>=0;l--)if(o>=n[l]){o=c.UIUtil.accAdd(o,-n[l]),s[s.length]=n[l];break}for(var r=function(e){var o=function(){var n=i.scheduleCallback.indexOf(o);n>-1&&i.scheduleCallback.splice(n,1),i.showOtherUserBetResult(s[e],t)};h.scheduleOnce(o,100*e/1e3),-1==h.scheduleCallback.indexOf(o)&&h.scheduleCallback.push(o)},h=this,p=0;p<s.length;p++)r(p)},t.prototype.getBetList=function(e,t){for(var i=t,o=[],n=0,s=t,a=0,l=e;;){++a>=e.length&&(a=0);var r=e[a];if((n+=r)<=s&&(i-=r,o.push(r)),n==s&&i<=0)break;n>s?n-=r:(e=l.slice(a),a=0)}return console.log("\u8981\u8fdb\u884c\u5206\u89e3\u7684\u603b\u6295\u6ce8\u5206\u6570 \uff1a "+t),console.log(o),o},t.prototype.showOtherUserBetResult=function(e,t){var i=this;if(null!=u.default.instance.view&&!u.default.instance.view._isDestory){var o=t;this.otherSingleBetNum=e;var n,s=[cc.v2(825,49),cc.v2(950,49),cc.v2(1055,49),cc.v2(1200,49)];Math.floor(Math.random()*s.length),n=cc.v2(2e3,960);for(var a=-1,r=0;r<h.default.BetBtnsCnt;r++)if(this.otherSingleBetNum==u.default.instance.Model.gameleList[r]){a=r;break}if(this.allBetNum[o]+=this.otherSingleBetNum,this.otherSingleBetNum&&-1!=a){var p=o;this.betIndex=o;var d=this.createBetStakeImage(a,n),m=this.getBetStakeImageEndPos(p,d);l.AudioManager.Singleton.play("","benz_betCoin"),d.node.runAction(cc.callFunc(function(){fgui.GTween.to2(n.x,n.y,m.x,m.y,.3).setTarget(d,d.setPosition).setEase(fgui.EaseType.CubicOut).onComplete(function(){i.selfAllBetText[p].node.opacity=255,i.selfAllBetText[p].visible=!0,u.default.instance.Model._p2GT.some(function(e,t,n){p==e.pos&&(n[t].val,i.allUsersAllBetText[p].text="/"+c.UIUtil.formatNumber100(i.allBetNum[o]),i.allUsersAllBetText[p].node.opacity=255,i.allUsersAllBetText[p].visible=!0)},i)},i)}))}else console.log("\u62bc\u6ce8\u503c\u6216\u8005\u62bc\u6ce8\u8f66\u5b50\u7d22\u5f15\u6709\u5f02\u5e38")}},t.prototype.createBetStakeImage=function(e,t){this.createBetStakePic[this.createBetStakePicCnt]=this.getChip();var i=this.createBetStakePic[this.createBetStakePicCnt],o=u.default.instance.view._benzBmwBottomBar.betBtns[e].asButton;return i.getController("type").setSelectedIndex(o.getController("type").selectedIndex),i.node.active=!0,i.asButton.title=o.title,i.pivotX=.5,i.pivotY=.5,i.x=t.x,i.y=t.y,i.setScale(.4,.4),i.setPivot(.5,.5,!0),this.createBetStakePicCnt++,i},t.prototype.getBetStakeImageEndPos=function(e,t){var i=e,o=this.betCarsBtn[i].x-Math.floor(this.betCarsBtn[i].width/2)+Math.floor(t.width/4),n=this.betCarsBtn[i].x+Math.floor(this.betCarsBtn[i].width/2)-Math.floor(t.width/4),s=this.betCarsBtn[i].y-Math.floor(this.betCarsBtn[i].height/2)+Math.floor(t.height/4)+20,a=this.betCarsBtn[i].y+Math.floor(this.betCarsBtn[i].height/2)-Math.floor(t.height/4)-30,l=Math.floor(Math.random()*(n-o+1))+o,r=Math.floor(Math.random()*(a-s+1))+s;return cc.v2(l,r)},t.prototype.getBetStakeImageEndPos2=function(e,t){var i=e,o=this.convertNodeSpaceAR(t.node,this.betCarsBtn[i].node),n=o.x-Math.floor(this.betCarsBtn[i].width/2)+Math.floor(t.width/4),s=o.x+Math.floor(this.betCarsBtn[i].width/2)-Math.floor(t.width/4),a=o.y-Math.floor(this.betCarsBtn[i].height/2)+Math.floor(t.height/4)+20,l=o.y+Math.floor(this.betCarsBtn[i].height/2)-Math.floor(t.height/4)-30,r=Math.floor(Math.random()*(s-n+1))+n,c=Math.floor(Math.random()*(l-a+1))+a;return cc.v2(r,c)},t.prototype.saveBetData=function(){this.isInit&&(this.selfAllBetPos=[],this.selfAllBetNum=[],this.isInit=!1),!this.haveContinueBet&&this.haveBet&&(this.selfAllBetPos=[],this.selfAllBetNum=[],this.selfAllBetPos=this.selfAllBetPosCopy,this.selfAllBetNum=this.selfAllBetNumCopy),cc.sys.localStorage.setItem("selfAllBetPos",JSON.stringify(this.selfAllBetPos)),cc.sys.localStorage.setItem("selfAllBetNum",JSON.stringify(this.selfAllBetNum))},t.prototype.setBetCarsBtnEnable=function(e){for(var t=0;t<h.default.IconsCnt;t++)this.betCarsBtn[t].enabled=e},t.prototype.resetData=function(){this.hideLightPic(),this.saveBetData();for(var e=0;e<h.default.IconsCnt;e++)this.selfAllBetText[e]&&(this.selfAllBetText[e].text="0"),this.allUsersAllBetText[e]&&(this.allUsersAllBetText[e].text="/0"),this.allBetNum[e]=0;for(var t=0;t<this.createBetStakePic.length;t++)this.addChipToPool(this.createBetStakePic[t]);this.createBetStakePic=[],cc.error("\u6e05\u7406\u684c\u9762\u7b79\u7801"),this.createBetStakePicCnt=0,this.haveContinueBet=!1,this.haveBet=!1,this.selfAllBetPosCopy=[],this.selfAllBetNumCopy=[],this._selfPos2Gamble=[],this._allPos2Gamble=[]},t.prototype.hideLightPic=function(){this.leftDownLightPic&&(this.leftDownLightPic.visible=!1),this.rightDownLightPic&&(this.rightDownLightPic.visible=!1),this.leftTopLightPic&&(this.leftTopLightPic.visible=!1),this.rightTopLightPic&&(this.rightTopLightPic.visible=!1),this.middleLightPic&&(this.middleLightPic.visible=!1)},t.prototype.onDestroy=function(){var t=this;this.scheduleCallback.forEach(function(e){e&&t.unschedule(e)}),this.unscheduleAllCallbacks(),e.prototype.onDestroy.call(this)},t.prototype.RecycleChips=function(){if(u.default.instance.Model._prizeIndex){var e=this,t=this.createBetStakePic.length;t>0&&l.AudioManager.Singleton.play("","wingetcoins");for(var i=function(){var t=o,i=e.createBetStakePic[t];if(null==i)return"continue";var n=e.convertNodeSpaceAR(i.node,u.default.instance.view.icons[u.default.instance.Model._prizeIndex].node);e.createBetStakePic.splice(t,1),o--,i.node.stopAllActions(),i.node.runAction(cc.sequence(cc.moveTo(.4,cc.v2(n.x,n.y)).easing(cc.easeSineOut()),cc.callFunc(function(){e.addChipToPool(i)})))},o=0;o<t;o++)i();this.scheduleOnce(function(){e.RecycleChipToTpos()},.5)}},t.prototype.RecycleChipToTpos=function(){var e=this,t=this,i=u.default.instance.Model.sdlist?u.default.instance.Model.sdlist.gold:0,o=u.default.instance.Model._winGold-i,n=u.default.instance.Model.gameleList;if((i>0||o>0)&&l.AudioManager.Singleton.play("","wingetcoins"),i>0){l.AudioManager.Singleton.play("","wingetcoins");for(var s=[];i>=100;)for(var a=n.length-1;a>=0;a--)if(i>=n[a]){i=c.UIUtil.accAdd(i,-n[a]),(m=this.getChip()).asButton.title=""+c.UIUtil.formatNumber100(n[a]),this.moveN1toN2(m.node,u.default.instance.view.icons[u.default.instance.Model._prizeIndex].node),m.pivotX=.5,m.pivotY=.5,m.setScale(.4,.4),m.setPivot(.5,.5,!0),s[s.length]=m;break}for(var r=function(i){var o=function(){var n=e.scheduleCallback.indexOf(o);n>-1&&e.scheduleCallback.splice(n,1);var a=s[i],l=e.getBetStakeImageEndPos2(u.default.instance.Model._prizeType,a),r=e.convertNodeSpaceAR(a.node,u.default.instance.view._benzBmwBottomBar.ui_mySelfInfo.node);a.node.stopAllActions(),a.node.runAction(cc.sequence(cc.moveTo(.5,cc.v2(l.x,l.y)).easing(cc.easeSineOut()),cc.delayTime(.5),cc.moveTo(.5,cc.v2(r.x,r.y)).easing(cc.easeSineOut()),cc.callFunc(function(){t.addChipToPool(a)})))};h.scheduleOnce(o,0),-1==h.scheduleCallback.indexOf(o)&&h.scheduleCallback.push(o)},h=this,p=0;p<s.length;p++)r(p)}if(cc.error("\u5176\u4ed6\u73a9\u5bb6\u603b\u8f93\u8d62\uff1a",o),o>0){for(var d=[];o>=100;)for(a=n.length-1;a>=0;a--)if(o>=n[a]){var m;o=c.UIUtil.accAdd(o,-n[a]),(m=this.getChip()).asButton.title=""+c.UIUtil.formatNumber100(n[a]),this.moveN1toN2(m.node,u.default.instance.view.icons[u.default.instance.Model._prizeIndex].node),m.pivotX=.5,m.pivotY=.5,m.setScale(.4,.4),m.setPivot(.5,.5,!0),d[d.length]=m;break}for(var f=function(i){var o=function(){var n=e.scheduleCallback.indexOf(o);n>-1&&e.scheduleCallback.splice(n,1);var s=d[i],a=e.getBetStakeImageEndPos2(u.default.instance.Model._prizeType,s),l=e.convertNodeSpaceAR(s.node,u.default.instance.view._benzBmwBottomBar.ui_btnWatch.node);s.node.stopAllActions(),s.node.runAction(cc.sequence(cc.moveTo(.5,cc.v2(a.x,a.y)).easing(cc.easeSineOut()),cc.delayTime(.5),cc.moveTo(.5,cc.v2(l.x,l.y)).easing(cc.easeSineOut()),cc.callFunc(function(){t.addChipToPool(s)})))};b.scheduleOnce(o,0),-1==b.scheduleCallback.indexOf(o)&&b.scheduleCallback.push(o)},b=this,g=0;g<d.length;g++)f(g)}this.scheduleOnce(function(){u.default.instance.view.showWinTextAni(!0)},.9),this.scheduleOnce(function(){u.default.instance.view._benzBmwBetResult.resetData()},2)},s([m],t)}(r.default));i.default=f,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/ViewBase":void 0,"../../../../Common/script/util/UIUtil":void 0,"../control/BenzBmwViewCtrl":"BenzBmwViewCtrl","../model/BenzBmwGameData":"BenzBmwGameData","../model/BenzBmwNetData":"BenzBmwNetData"}],BenzBmwBottomBar:[function(e,t,i){"use strict";cc._RF.push(t,"72cb4ZkxtNDO5b7PYIN9wus","BenzBmwBottomBar");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../../Boot/scirpt/AppConst"),l=e("../../../../Common/script/base/AudioManager"),r=e("../../../../Common/script/base/ViewBase"),c=e("../../../../Common/script/util/UIUtil"),u=e("../../../../GameHall/script/Module/RechargeView/RechargeView"),h=e("../control/BenzBmwViewCtrl"),p=e("../model/BenzBmwGameData"),d=cc._decorator,m=d.ccclass,f=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.betBtns=[],t.betBtnShowScale={chooseScale:1,notChooseScale:.8},t.betBgPos=[],t.isShowMenu=!1,t.chooseBetBtnsIndexs=[],t.ui_betBtnTipBg=null,t.ui_tableIdText=null,t.ui_userGoldText=null,t.ui_userNameText=null,t.ui_gameBoardCodeText=null,t.ui_mySelfInfo=null,t.ui_userHead=null,t.ui_userHeadLoader=null,t.ui_btnRule=null,t.ui_btnResult=null,t.ui_btn_dmswitch=null,t.ui_winLVAnim=null,t.ui_RechargeTip=null,t.ui_btn_addCash=null,t.ui_btn_closeCash=null,t.ui_btnRecharge=null,t.ui_addCash_Tip_n8=null,t.ui_btnChat=null,t.ui_btnWatch=null,t.addCash=null,t}return n(t,e),Object.defineProperty(t.prototype,"packageResourceName",{get:function(){return"benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"packageName",{get:function(){return"res/benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentName",{get:function(){return"Bar"},enumerable:!1,configurable:!0}),t.prototype.createChildComponents=function(){e.prototype.createChildComponents.call(this),this.fguiComponent.center()},t.prototype.allChildCreated=function(){e.prototype.allChildCreated.call(this),this.fguiComponent.node.anchorX=.5;var t=cc.winSize.width/this.fguiComponent.node.width,i=cc.winSize.height/this.fguiComponent.node.height;this.fguiComponent.node.setScale(t,i),this.fguiComponent.center(),this.ui_addCash_Tip_n8.text=this.ui_addCash_Tip_n8.text.replace("100","300")},t.prototype.OnLoadCompleted=function(){this.initUI(),this.eventListener()},t.prototype.initUI=function(){this.ui_btnResult.onClick(this.getHistory.bind(this));for(var e=0;e<p.default.BetBtnsCnt;e++){var t="n"+(31+e);this.betBtns[e]=this.fguiComponent.getChild(t).asButton,this.setBetBtnScale(e,this.betBtnShowScale.notChooseScale),this.betBtns[e].onClick(this.showBet.bind(this,e))}this.ui_betBtnTipBg.visible=!1,this.ui_btnRule.onClick(this.showMenu.bind(this));for(var i=0;i<5;i++)this.betBgPos[i]=this.getChild("chipPos"+(1+i)).node;var o=cc.sys.localStorage.getItem(p.default.SaveLocalData.ChooseBetBtns);if(o){o=o.split(",");for(var n=0;n<o.length;n++)this.chooseBetBtnsIndexs[n]=parseInt(o[n])}else for(var s=0;s<Math.floor(p.default.BetBtnsCnt/2);s++)this.moveN1toN2(this.betBtns[s].node,this.betBgPos[s]),this.chooseBetBtnsIndexs[s]=s,this.betBtns[s].getController("type").setSelectedIndex(s),h.default.instance.Model.gameleList[s]&&(this.betBtns[s].title=c.UIUtil.formatNumber100(h.default.instance.Model.gameleList[s])+"");this.chooseBetBtnsIndexs=[0,1,2,3,4],this.updateBetBtns(!0);var l=a.AppConst.gameStatus[1]==a.EnumGameStatus.Hide?"0":"R$:0";this.ui_userGoldText.text=l,this.ui_userNameText.text="",this.ui_gameBoardCodeText.text=""},t.prototype.eventListener=function(){var e=this;this.node.on(p.default.GameEvent.CompeleteChooseBetBtns,function(){h.default.instance.Model.hasChangeBetBtns=!0,e.updateBetBtns()}),this.ui_btnRecharge.onClick(function(){l.AudioManager.Singleton.play("gamehall","pop_up"),e.showAddCash()}),this.ui_btn_addCash.onClick(function(){l.AudioManager.Singleton.play("gamehall","pop_up"),e.ui_RechargeTip.visible=!1,e.showAddCash()}),this.ui_btn_closeCash.onClick(function(){l.AudioManager.Singleton.play("gamehall","btn_close"),e.ui_RechargeTip.visible=!1}),this.ui_btnChat.clearClick(),this.ui_btnChat.onClick(function(){l.AudioManager.Singleton.play("gamehall","pop_up"),h.default.instance.view.ChatShow()}),this.ui_btnWatch.onClick(function(){l.AudioManager.Singleton.play("gamehall","pop_up")}),this.ui_btnWatch.onClick(function(){l.AudioManager.Singleton.play("gamehall","pop_up"),h.default.instance.cs_getroomplayerlist_bcbm(!0,0,28)}),this.ui_btn_dmswitch.onClick(this.barrageSwitch,this),this.ui_btn_dmswitch.selected=!0},t.prototype.barrageSwitch=function(){l.AudioManager.Singleton.play("","benz_botton"),h.default.instance.view.peopleMsg.fguiComponent.visible=this.ui_btn_dmswitch.selected},t.prototype.getHistory=function(){l.AudioManager.Singleton.play("","benz_botton"),h.default.instance.cs_gethistory_bcbm(40),h.default.instance.Model.activeReqHistory=!0},t.prototype.setContinueBetBtnEnable=function(){},t.prototype.showMenu=function(){l.AudioManager.Singleton.play("","benz_botton"),this.isShowMenu=!this.isShowMenu,h.default.instance.view._benzBmwSetting.showMenu()},t.prototype.showBoardCode=function(e){e&&(this.ui_gameBoardCodeText.text="\u5c40\u865f\uff1a"+e)},t.prototype.setUserCoins=function(e){if(e){var t=a.AppConst.gameStatus[1]==a.EnumGameStatus.Hide?"":"R$:";this.ui_userGoldText.text=t+c.UIUtil.formatNumber100(e)}},t.prototype.setUserName=function(e){e&&(this.ui_userNameText.text=e)},t.prototype.setUserhead=function(e){e&&c.UIUtil.loadImage(this.ui_userHeadLoader,e)},t.prototype.showHeaderAni=function(){},t.prototype.showBet=function(e){l.AudioManager.Singleton.play("","selectChip");for(var t=0;t<p.default.BetBtnsCnt;t++){var i=this.betBtnShowScale.notChooseScale;this.betBtns[t].setScale(i,i)}var o=e;if(this.setBetBtnScale(o,this.betBtnShowScale.chooseScale),e==p.default.BetBtnsCnt)this.showBetBtnBg(null,!1);else{var n=this.betBtns[o].node;this.showBetBtnBg(n,!0)}var s=setInterval(function(){var t=h.default.instance.Model.gameleList,i=h.default.instance.Model.gameleList[e];t.length>0&&(clearInterval(s),h.default.instance.view.setSelfSingleBetNum(i))},100)},t.prototype.setBetBtnScale=function(e,t){this.betBtns[e].setScale(t,t)},t.prototype.showBetBtnBg=function(e,t){this.ui_betBtnTipBg.visible=t,t&&this.moveN1toN2(this.ui_betBtnTipBg.node,e)},t.prototype.exitGame=function(){h.default.instance.view.ExitGame()},t.prototype.onContinueBetBtnClick=function(){l.AudioManager.Singleton.play("","benz_botton"),console.log("\u7eed\u6295-------------------------------\u7eed\u6295")},t.prototype.updateBetBtns=function(){for(var e=0;e<p.default.BetBtnsCnt;e++)this.betBtns[e].y=1346;if(this.chooseBetBtnsIndexs.length>0){var t=0;for(e=0;e<p.default.BetBtnsCnt;e++)e==this.chooseBetBtnsIndexs[t]&&(this.betBtns[e].getController("type").setSelectedIndex(t),this.moveN1toN2(this.betBtns[e].node,this.betBgPos[t]),h.default.instance.Model.gameleList[e]&&(this.betBtns[e].title=c.UIUtil.formatNumber100(h.default.instance.Model.gameleList[e])+""),t++)}var i=this.chooseBetBtnsIndexs[0];this.showBet(i),this.showBetBtnBg(this.betBgPos[0],!0)},t.prototype.showAddCash=function(){this.addCash?this.addCash.Show():this.addCash=this.addFguiComponent(u.default),this.addCash.init(h.default.instance.Model.tableid,h.default.instance.Model.mPlayerModel.gold)},t.prototype.moveN1toN2=function(e,t){e.position=e.parent.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position))},t.prototype.convertNodeSpaceAR=function(e,t){return e.parent.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position))},s([m],t)}(r.default));i.default=f,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/ViewBase":void 0,"../../../../Common/script/util/UIUtil":void 0,"../../../../GameHall/script/Module/RechargeView/RechargeView":void 0,"../control/BenzBmwViewCtrl":"BenzBmwViewCtrl","../model/BenzBmwGameData":"BenzBmwGameData"}],BenzBmwChooseBetsBtn:[function(e,t,i){"use strict";cc._RF.push(t,"6b5d89DD0NA24cwzZAlW1TJ","BenzBmwChooseBetsBtn");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../../Common/script/modules/@mogafa/fairygui-component/lib/FguiFullScreenBase"),l=e("../model/BenzBmwGameData"),r=cc._decorator,c=r.ccclass,u=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.betsBtn=[],t.betsBtnDarkPic=[],t.betsBtnChooseSure=[],t.currentChooseCnt=0,t.CHOOSE_MAX_CNT=l.default.BetBtnsChooseMaxCnt,t.currentChooseIndexs=[],t}return n(t,e),Object.defineProperty(t.prototype,"packageResourceName",{get:function(){return"benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"packageName",{get:function(){return"res/benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentName",{get:function(){return"Setting_ChooseBets"},enumerable:!1,configurable:!0}),t.prototype.createChildComponents=function(){e.prototype.createChildComponents.call(this),this.fguiComponent.center()},t.prototype.allChildCreated=function(){e.prototype.allChildCreated.call(this),this.initUI(),this.eventListener()},t.prototype.initUI=function(){this.show(!1);for(var e=0;e<l.default.BetBtnsCnt;e++){var t="n"+(16+e);this.betsBtn[e]=this.fguiComponent.getChild(t).asButton,this.betsBtn[e].node.on(cc.Node.EventType.TOUCH_END,this.chooseBetBtns.bind(this,e)),t="n"+(26+e),this.betsBtnChooseSure[e]=this.fguiComponent.getChild(t).asImage,this.betsBtnChooseSure[e].visible=!1,t="n"+(36+e),this.betsBtnDarkPic[e]=this.fguiComponent.getChild(t).asImage,this.betsBtnDarkPic[e].visible=!1,e<5?(this.currentChooseCnt++,this.currentChooseIndexs.push(e),this.betsBtnChooseSure[e].visible=!0):this.betsBtnDarkPic[e].visible=!0}var i=cc.sys.localStorage.getItem(l.default.SaveLocalData.ChooseBetBtns);if(i)for(i=i.split(","),e=0;e<i.length;e++)this.currentChooseIndexs[e]=parseInt(i[e]);this.fguiComponent.getChild("btnSure").asButton.onClick(this.saveChooseData.bind(this)),this.fguiComponent.getChild("btnClose").asButton.onClick(this.show.bind(this,!1)),this.chooseCntText=this.getChild("chooseCntText").asTextField,this.chooseTipBg=this.getChild("n46").asImage,this.chooseTipBg.visible=!1,this.chooseTipText=this.getChild("chooseTipText").asTextField,this.chooseTipText.visible=!1},t.prototype.eventListener=function(){var e=this;this.node.on(l.default.OpenWindow.CHOOSE_BETS_BTN_COM,function(t){var i=t;e.show(i)})},t.prototype.show=function(e){var t=e;this.fguiComponent.visible=t,t&&this.setChooseBetBtnsData()},t.prototype.saveChooseData=function(){if(this.currentChooseCnt<5)return this.chooseTipText.text=l.default.TipViewText.atLeastChooseBetCnt,void this.showChooseTipView();this.show(!1),this.currentChooseIndexs.sort(function(e,t){return e-t}),cc.sys.localStorage.setItem(l.default.SaveLocalData.ChooseBetBtns,this.currentChooseIndexs),this.node.emit(l.default.GameEvent.CompeleteChooseBetBtns,this.currentChooseIndexs)},t.prototype.chooseBetBtns=function(e){var t=e,i=this.betsBtnChooseSure[t].visible;if(this.currentChooseCnt>=5&&!i)return this.chooseTipText.text=l.default.TipViewText.mostChooseBetCnt,void this.showChooseTipView();if(i){var o;this.currentChooseCnt--,o=this.currentChooseIndexs;for(var n=0;n<this.currentChooseIndexs.length;n++)t==o[n]&&this.currentChooseIndexs.splice(n,1)}else this.currentChooseCnt++,this.currentChooseIndexs.push(t);this.betsBtnChooseSure[t].visible=!i,this.betsBtnDarkPic[t].visible=i;var s=this.currentChooseCnt+"/"+this.CHOOSE_MAX_CNT;this.chooseCntText.text=s},t.prototype.showChooseTipView=function(){this.chooseTipBg.visible=!0,this.chooseTipText.visible=!0,this.chooseTipText.node.setScale(.8),this.chooseTipText.node.opacity=0,this.chooseTipText.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(.25,1),cc.fadeIn(.25)),cc.delayTime(1.25),cc.spawn(cc.scaleTo(.25,.8),cc.fadeOut(.25)))),this.chooseTipBg.node.setScale(1),this.chooseTipBg.node.opacity=0,this.chooseTipBg.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(.25,1.3),cc.fadeIn(.25)),cc.delayTime(1.25),cc.spawn(cc.scaleTo(.25,1),cc.fadeOut(.25))))},t.prototype.setChooseBetBtnsData=function(){var e=cc.sys.localStorage.getItem(l.default.SaveLocalData.ChooseBetBtns);if(e){var t=0;e=e.split(",");for(var i=0;i<e.length;i++)e[i]=parseInt(e[i]);for(i=0;i<l.default.BetBtnsCnt;i++)i==parseInt(e[t])?(this.betsBtnChooseSure[i].visible=!0,this.betsBtnDarkPic[i].visible=!1,t++):(this.betsBtnChooseSure[i].visible=!1,this.betsBtnDarkPic[i].visible=!0)}else console.error("\u6ca1\u6709\u83b7\u53d6\u5230\u5df2\u9009\u62e9\u7684\u7b79\u7801\u6570\u636e BetsData : "+e)},s([c],t)}(a.default));i.default=u,cc._RF.pop()},{"../../../../Common/script/modules/@mogafa/fairygui-component/lib/FguiFullScreenBase":void 0,"../model/BenzBmwGameData":"BenzBmwGameData"}],BenzBmwDanmuCom:[function(e,t,i){"use strict";cc._RF.push(t,"b47e89KkHNI5KMfGrnMznHz","BenzBmwDanmuCom");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s=e("../../../../Common/script/base/ViewBase"),a=e("../../../../GameHall/script/Module/ChatView/ChatPeopleMsg"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.AutoSetGoProperty=function(){},t.prototype.createChildComponents=function(){e.prototype.createChildComponents.call(this)},t.prototype.OnLoadCompleted=function(){e.prototype.OnLoadCompleted.call(this),this.isLoadEnd=!0;var t=cc.winSize.width/this.fguiComponent.node.width,i=cc.winSize.height/this.fguiComponent.node.height;this.fguiComponent.node.setScale(t,i)},t.prototype.onDestroy=function(){console.log("---TCUserComp onDestroy---"),this.unscheduleAllCallbacks()},t.prototype.MyStart=function(){return this.mystart=!0,this.peopleMsg=this.addFguiComponent(a.default,!0),this.peopleMsg},t}(s.default);i.default=l,cc._RF.pop()},{"../../../../Common/script/base/ViewBase":void 0,"../../../../GameHall/script/Module/ChatView/ChatPeopleMsg":void 0}],BenzBmwGameData:[function(e,t,i){"use strict";cc._RF.push(t,"5aaa6X+cE1EiI1W2ClSPfQ5","BenzBmwGameData"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.AwardMuls=[60,50,40,30,22,16,12,9,8,7,6,5],e.IconsCnt=12,e.RollIconsCnt=26,e.RollIconsType=[4,7,9,10,11,12,1,8,9,10,11,12,5,3,7,9,10,11,12,2,8,9,10,11,12,6],e.IconsCode=cc.Enum({Ferrari:0,Lamborghini:1,Maserati:2,PorSche:3,Benz:4,Bmw:5,Audo:6,Lexus:7,Vw:8,Toyota:9,Hyundai:10,MazDa:11}),e.CarName=cc.Enum({0:"\u6cd5\u62c9\u5229",1:"\u5170\u535a\u57fa\u5c3c",2:"\u739b\u838e\u62c9\u8482",3:"\u4fdd\u65f6\u6377",4:"\u5954\u9a70",5:"\u5b9d\u9a6c",6:"\u5965\u8fea",7:"\u96f7\u514b\u8428\u65af",8:"\u5927\u4f17",9:"\u4e30\u7530",10:"\u73b0\u4ee3",11:"\u9a6c\u81ea\u8fbe"}),e.BetBtnsCnt=5,e.BetBtnsChooseMaxCnt=5,e.GameUIControlName=cc.Enum({STARTBET_OR_STOPBET:"startBetOrStopBet",GAME_STATUS_TEXT_TIP:"gameStatus",WIN_TYPE:"winType",AWARD_ICON_INDEX:"awardIconIndex",RULE_PAGE:"rulepage",BTN_STATUS:"btnStatus"}),e.OpenWindow=cc.Enum({CHOOSE_BETS_BTN_COM:"chooseBetBtnsCom",CHOOSE_RULE_DETAILS:"chooseRuleDetails"}),e.TipViewText=cc.Enum({pleaseBetAgain:"\u5f53\u524d\u7b79\u7801\u5df2\u66f4\u65b0\uff0c\u65e0\u6cd5\u7eed\u6295\uff0c\u8bf7\u91cd\u65b0\u62bc\u6ce8",dontHaveBetData:"\u5f53\u524d\u6ca1\u6709\u7eed\u6295\u6570\u636e",atLeastChooseBetCnt:"\u6700\u5c11\u9078\u64c75\u500b\u7c4c\u78bc",mostChooseBetCnt:"\u6700\u591a\u9078\u64c75\u500b\u7c4c\u78bc",cantLeave:"\u9019\u5c40\u5df2\u4e0b\u6ce8\uff0c\u9084\u4e0d\u80fd\u96e2\u958b\u54e6~"}),e.GameEvent=cc.Enum({CompeleteChooseBetBtns:"compeleteChooseBetBtns",ChooseBetNum:"chooseBetNum",ContinueBet:"continueBet"}),e.SaveLocalData=cc.Enum({ChooseBetBtns:"chooseBetBtns"}),e}();i.default=o,cc._RF.pop()},{}],BenzBmwGameSpine:[function(e,t,i){"use strict";cc._RF.push(t,"89e3d3PIL5GbIhxiEOmWbjX","BenzBmwGameSpine");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s=e("../../../../SlotsCommon/script/modules/spin-result/SpineCommon"),a={Path:"res/spine/",carWinAni:"car_ske"},l=function(){function e(){}return e.carWinAniName=["falali","lanbojini","masaladi","baoshijie","benchi","baoma","aodi","lekesasi","dazhong","fengtian","luhu","jiebao"],e}(),r=function(e){function t(t){var i=e.call(this,t,[a.Path+a.carWinAni])||this;return i.skeleton.premultipliedAlpha=!1,i}return n(t,e),Object.defineProperty(t.prototype,"packageResourceName",{get:function(){return"benzBmw"},enumerable:!1,configurable:!0}),t.prototype.playCarWinAni=function(e){var t=e;this.PlayStop(),this.clearTrack(),this.skeleton.skeletonData=this._resources[a.carWinAni],this.skeleton.enabled=!0,this.skeleton.setAnimation(0,l.carWinAniName[t],!1),l.carWinAniName[t]},t.prototype.clearTrack=function(){this.skeleton.clearTracks(),this.skeleton.skeletonData=null,this.skeleton.enabled=!1},t.prototype.PlayStop=function(){this.skeleton.clearTracks(),this.skeleton.setToSetupPose(),this.skeleton.enabled=!1},t}(s.default);i.default=r,cc._RF.pop()},{"../../../../SlotsCommon/script/modules/spin-result/SpineCommon":void 0}],BenzBmwGameStatus:[function(e,t,i){"use strict";cc._RF.push(t,"ad9afNkzWpLg7egJt2sAM7l","BenzBmwGameStatus"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.PreGamble=1,e.Gambling=2,e.ShowPrize=3,e.NoBanker=4,e}();i.default=o,cc._RF.pop()},{}],BenzBmwHelpView:[function(e,t,i){"use strict";cc._RF.push(t,"5a038wJ2TFE5buEJ3hYQOEa","BenzBmwHelpView");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../../Common/script/base/AudioManager"),l=e("../../../../Common/script/base/ViewBase"),r=e("../control/BenzBmwViewCtrl"),c=e("../model/BenzBmwGameData"),u=cc._decorator,h=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_closeMask=null,t.ui_colseBtn=null,t.rulepageController=null,t.ui_settingTitle=null,t}return n(t,e),Object.defineProperty(t.prototype,"packageResourceName",{get:function(){return"benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"packageName",{get:function(){return"res/benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentName",{get:function(){return"Setting_HelpViewNew"},enumerable:!1,configurable:!0}),t.prototype.createChildComponents=function(){e.prototype.createChildComponents.call(this),this.fguiComponent.center(),this.Hide(),this.node.on("showPayTable",this.Show,this)},t.prototype.allChildCreated=function(){e.prototype.allChildCreated.call(this),this.fguiComponent.node.anchorX=.5;var t=cc.winSize.width/this.fguiComponent.node.width,i=cc.winSize.height/this.fguiComponent.node.height;this.fguiComponent.node.setScale(t,i),this.fguiComponent.center()},t.prototype.OnLoadCompleted=function(){this.initUI(),this.eventListener()},t.prototype.initUI=function(){this.ui_closeMask.onClick(this.Hide.bind(this)),this.ui_colseBtn.onClick(this.Hide.bind(this)),this.rulepageController=this.fguiComponent.getController(c.default.GameUIControlName.RULE_PAGE)},t.prototype.eventListener=function(){var e=this;this.node.on(c.default.OpenWindow.CHOOSE_RULE_DETAILS,function(){e.Show(),e.ui_settingTitle.text=r.default.instance.Model.GetLanguage(10007)})},t.prototype.Hide=function(){e.prototype.Hide.call(this),a.AudioManager.Singleton.play("gamehall","btn_close")},s([h],t)}(l.default));i.default=p,cc._RF.pop()},{"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/ViewBase":void 0,"../control/BenzBmwViewCtrl":"BenzBmwViewCtrl","../model/BenzBmwGameData":"BenzBmwGameData"}],BenzBmwModel:[function(e,t,i){"use strict";cc._RF.push(t,"45147Ytu/tKjLcLSnIBa3Qr","BenzBmwModel"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("../../../../Boot/scirpt/AppConst"),n=function(){function e(){this.gameid=null,this.tableid=null,this.levelid=null,this.palyerlist=null,this.userList=null,this.gameStatus=null,this.selfPos=null,this._myServerPos=null,this.boardCode=null,this.gameleList=[],this.PersonAreaMaxLimit=[],this.AllAreaMaxLimit=[],this.slefAllGamble=0,this._prizeIndex=-1,this.historyRecord=[],this.betEndtime=null,this.prizeEndtime=null,this.hasChangeBetBtns=!1,this.activeReqHistory=!1,this.sdlist=null,this.historyGamele=[],this.historyGamelePage=null,this.currGamble=null,this.totalGamble=null,this.currWinScore=null,this.totalWinScore=null,this.redLimitMes=null,this.BBConfig=null}return e.prototype.Init=function(){this.palyerlist=[],this.selfPos=-1},e.prototype.GetLanguage=function(e){null==this.BBConfig&&(this.BBConfig=xgameTable.getTableMgr().getSheet(xgameTable.EnumExcelKey.Complanguage,xgameTable.EnumComplanguage.Benzbmw));var t=this.BBConfig["id_"+e];return"1"==o.AppConst.languageType?t.english:t.hindi},e}();i.default=n,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0}],BenzBmwNetData:[function(e,t,i){"use strict";cc._RF.push(t,"71968WfqHtJL5Wd3i1IN5VB","BenzBmwNetData");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.roomplayersd_bcbm=i.sc_getroomplayerlist_bcbm=i.cs_getroomplayerlist_bcbm=i.sc_chat100_n=i.historygamblebcbmSD=i.sc_gethistorygamble_bcbm=i.cs_gethistorygamble_bcbm=i.sc_end_bcbm_n=i.ShowDownSDbcbm=i.sc_showdown_bcbm_n=i.sc_tablestart_bcbm_n=i.sc_gethistory_bcbm=i.cs_gethistory_bcbm=i.cs_applyexittable=i.cs_exitroom=i.sc_gambleareabcbm_n=i.sc_gambleone_bcbm_n=i.sc_gambleone_bcbm=i.cs_gambleone_bcbm=i.cs_entertable_bcbm=i.sc_entertable_n=i.sc_entertable_bcbm=void 0;var s=e("../../../../Common/script/base/cs_base"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.sc_base);i.sc_entertable_bcbm=a;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.sc_base);i.sc_entertable_n=l;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.cs_base);i.cs_entertable_bcbm=r;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.cs_base);i.cs_gambleone_bcbm=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.sc_base);i.sc_gambleone_bcbm=u;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.sc_base);i.sc_gambleone_bcbm_n=h;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.sc_base);i.sc_gambleareabcbm_n=p;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.cs_base);i.cs_exitroom=d;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.cs_base);i.cs_applyexittable=m;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.cs_base);i.cs_gethistory_bcbm=f;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.sc_base);i.sc_gethistory_bcbm=b;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.sc_base);i.sc_tablestart_bcbm_n=g;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.sc_base);i.sc_showdown_bcbm_n=_;i.ShowDownSDbcbm=function(){};var B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.sc_base);i.sc_end_bcbm_n=B;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.cs_base);i.cs_gethistorygamble_bcbm=C;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.sc_base);i.sc_gethistorygamble_bcbm=y;i.historygamblebcbmSD=function(){};var w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.sc_base);i.sc_chat100_n=w;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.cs_base);i.cs_getroomplayerlist_bcbm=v;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.sc_base);i.sc_getroomplayerlist_bcbm=S;i.roomplayersd_bcbm=function(){},cc._RF.pop()},{"../../../../Common/script/base/cs_base":void 0}],BenzBmwOtherPlayerItem:[function(e,t,i){"use strict";cc._RF.push(t,"f8316G7zDFH65u0JLdXEgZ7","BenzBmwOtherPlayerItem");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(fgui.GComponent);i.default=s,cc._RF.pop()},{}],BenzBmwPlayerList:[function(e,t,i){"use strict";cc._RF.push(t,"c71bcqQP5lOBZcTbeZh03Tc","BenzBmwPlayerList");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s=e("../../../../Boot/scirpt/AppConst"),a=e("../../../../Common/script/base/AudioManager"),l=e("../../../../Common/script/base/ViewBase"),r=e("../../../../Common/script/util/UIUtil"),c=e("../control/BenzBmwViewCtrl"),u=e("./BenzBmwOtherPlayerItem"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_btn_close=null,t.ui_otherPlayList=null,t.ui_online=null,t.pageIndex=0,t.playerList=[],t.ui_settingTitle=null,t}return n(t,e),Object.defineProperty(t.prototype,"packageResourceName",{get:function(){return"benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"packageName",{get:function(){return"res/benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentName",{get:function(){return"otherPlayer"},enumerable:!1,configurable:!0}),t.prototype.createChildComponents=function(){e.prototype.createChildComponents.call(this),this.ui_btn_close.onClick(this.Hide,this),fgui.UIObjectFactory.setExtension("ui://benzBmw/otherPlayerItem",u.default),this.ui_otherPlayList.itemRenderer=this.renderListItem.bind(this),this.ui_otherPlayList.setVirtual(),this.ui_otherPlayList.on(fgui.Event.PULL_UP_RELEASE,this.onPullUpToRefresh,this),this.ui_otherPlayList.numItems=0,this.fguiComponent.node.anchorX=.5;var t=cc.winSize.width/this.fguiComponent.node.width,i=cc.winSize.height/this.fguiComponent.node.height;this.fguiComponent.node.setScale(t,i),this.fguiComponent.center(),this.Hide()},t.prototype.renderListItem=function(e,t){var i=t.asCom,o=s.AppConst.gameStatus[1]==s.EnumGameStatus.Hide?"":"R$:";r.UIUtil.SetLimitTxt(i.getChild("userName").asTextField,this.playerList[e]._wechat.wName,9),i.getChild("gold").asTextField.text=o+r.UIUtil.formatNumber100(this.playerList[e].gold),r.UIUtil.loadImage(i.getChild("head").asCom.getChild("userHeadLoader").asLoader,this.playerList[e]._wechat.wicon)},t.prototype.onPullUpToRefresh=function(){var e=this;cc.error("222\u771f\u662f\u603b\u4eba\u6570",c.default.instance.Model.userListTotals,this.playerList.length),c.default.instance.Model.userListTotals>this.playerList.length&&(this.pageIndex++,this.scheduleOnce(function(){c.default.instance.cs_getroomplayerlist_bcbm(!0,e.pageIndex,28)},.2))},t.prototype.ShowList=function(e){null!=e&&(r.UIUtil.Concat(this.playerList,e),cc.error("1111\u771f\u5b9e\u603b\u4eba\u6570",c.default.instance.Model.userListTotals,this.playerList.length),this.ui_otherPlayList.numItems+=e.length,this.ui_online.setVar("num",c.default.instance.Model.userListTotals+"").flushVars())},t.prototype.Show=function(){this.ui_settingTitle.text=c.default.instance.Model.GetLanguage(10005),this.ui_online.text=c.default.instance.Model.GetLanguage(10006)+"{num=0}",e.prototype.Show.call(this)},t.prototype.Hide=function(){a.AudioManager.Singleton.play("gamehall","btn_close"),this.ui_otherPlayList.numItems=0,this.pageIndex=0,this.playerList=[],e.prototype.Hide.call(this)},t}(l.default);i.default=h,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/ViewBase":void 0,"../../../../Common/script/util/UIUtil":void 0,"../control/BenzBmwViewCtrl":"BenzBmwViewCtrl","./BenzBmwOtherPlayerItem":"BenzBmwOtherPlayerItem"}],BenzBmwPregame:[function(e,t,i){"use strict";cc._RF.push(t,"a6a77A3eItL3I2003MT4i0w","BenzBmwPregame");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../../Boot/scirpt/AppConst"),l=e("../../../../Common/script/base/BaseCode"),r=e("../../../../Common/script/base/CommonCtr"),c=e("../../../../Common/script/base/CommonView"),u=e("../../../../Common/script/base/SceneManager"),h=e("../../../../Common/script/base/ViewBase"),p=e("../../../../Common/script/base/WebSocketManager"),d=e("../../../../Common/script/util/UIUtil"),m=e("../control/BenzBmwViewCtrl"),f=e("../model/BenzBmwNetData"),b=e("./BenzBmwView"),g=cc._decorator,_=g.ccclass,B=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=null,t}return n(t,e),Object.defineProperty(t.prototype,"packageResourceName",{get:function(){return"benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"packageName",{get:function(){return"res/benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentName",{get:function(){return"login"},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){fgui.addLoadHandler(),fgui.GRoot.create(),e.prototype.onLoad.call(this)},t.prototype.createChildComponents=function(){e.prototype.createChildComponents.call(this),fgui.GRoot.inst.addChild(this.fguiComponent),this.fguiComponent.makeFullScreen(),this.addFguiComponent(c.default)},t.prototype.allChildCreated=function(){e.prototype.allChildCreated.call(this),cc.log("--allChildCreated--"),this.LoginSuccess()},t.prototype.LoginSuccess=function(){cc.log("--LoginSuccess--"),m.default.instance.Model.mPlayerModel=a.AppConst.mPlayerModel,this.cs_createtable_bcbm()},t.prototype.cs_createtable_bcbm=function(){if(cc.log("--cs_createtable_bcbm--"),p.WebSocketManager.getInstance.webSocket.getConnectState()){var e=new f.cs_entertable_bcbm;e._g=m.default.instance.Model.gameid,e.gameid=m.default.instance.Model.gameid,e.levelid=d.UIUtil.CheckGameLeveID(m.default.instance.Model.gameid,a.AppConst.currentlevelid),e.fn="cs_entertable_bcbm",e.tableid=0,p.WebSocketManager.getInstance.SendJSON(e,this.sc_entertable_bcbm.bind(this))}else r.CommonCtr.instance.ShowTipCallback(l.BaseCode[a.AppConst.languageType][-205],function(){u.SceneManager.Singleton.loadScene("GameHall","gameHall")})},t.prototype.sc_entertable_bcbm=function(e){cc.log("---sc_entertable_bcbm---",e),(e||1==e.result)&&(1==e.result?(cc.log("\u52a0\u8f7dBenzBmwView"),this.view=this.addFguiComponent(b.default),this.scheduleOnce(function(){m.default.instance.sc_entertable_bcbm(e)},2)):r.CommonCtr.instance.ShowTipCallback(l.BaseCode[a.AppConst.languageType][-205],function(){u.SceneManager.Singleton.loadScene("GameHall","gameHall")}))},s([_],t)}(h.default));i.default=B,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/BaseCode":void 0,"../../../../Common/script/base/CommonCtr":void 0,"../../../../Common/script/base/CommonView":void 0,"../../../../Common/script/base/SceneManager":void 0,"../../../../Common/script/base/ViewBase":void 0,"../../../../Common/script/base/WebSocketManager":void 0,"../../../../Common/script/util/UIUtil":void 0,"../control/BenzBmwViewCtrl":"BenzBmwViewCtrl","../model/BenzBmwNetData":"BenzBmwNetData","./BenzBmwView":"BenzBmwView"}],BenzBmwSettingView:[function(e,t,i){"use strict";cc._RF.push(t,"f9485jglXFMJLJOCyvReS8m","BenzBmwSettingView");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s=e("../../../../Boot/scirpt/AppConst"),a=e("../../../../Common/script/base/AudioManager"),l=e("../../../../Common/script/base/BaseFrameNative"),r=e("../../../../Common/script/base/ViewBase"),c=e("../../../../GameHall/dlc/script/config/LocalizationConfig"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_btn_break=null,t.ui_setSound=null,t.ui_setMusic=null,t.ui_btn_setLanguage=null,t.ui_resver=null,t.ui_setting_title_text=null,t.ui_setting_Sound_text=null,t.ui_setting_music_text=null,t.ui_btn_logout_lab=null,t.ui_btn_logout=null,t.ui_settingTitle=null,t}return n(t,e),Object.defineProperty(t.prototype,"packageResourceName",{get:function(){return"benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"packageName",{get:function(){return"res/benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentName",{get:function(){return"setting"},enumerable:!1,configurable:!0}),t.prototype.createChildComponents=function(){e.prototype.createChildComponents.call(this),this.fguiComponent.visible=!1,this.fguiComponent.setPivot(.5,.5),this.fguiComponent.center(),this.ui_btn_break.onClick(this.Hide,this),this.ui_resver.setVar("ver",l.BaseFrameNative.resVersion).flushVars(),this.ui_setMusic.on(fgui.Event.STATUS_CHANGED,this.onChangedMusic1,this),this.ui_setSound.on(fgui.Event.STATUS_CHANGED,this.onChangedSound1,this);var t=a.AudioManager.Singleton.YinxiaoVolume;this.ui_setSound.value=t;var i=a.AudioManager.Singleton.MusicVolume;cc.log("=====MusicVolume==========",i),this.ui_setMusic.value=i,this.ui_btn_setLanguage.onClick(this.selectLanguage,this),this.typeController=this.fguiComponent.getController("c1"),this.ui_btn_logout.onClick(this.logout,this),"2"==s.AppConst.languageType?(this.setLanguage(),this.ui_btn_setLanguage.selected=!0):this.ui_btn_setLanguage.selected=!1,this.fguiComponent.node.anchorX=.5;var o=cc.winSize.width/this.fguiComponent.node.width,n=cc.winSize.height/this.fguiComponent.node.height;this.fguiComponent.node.setScale(o,n),this.fguiComponent.center()},t.prototype.allChildCreated=function(){e.prototype.allChildCreated.call(this),this.typeController.setSelectedIndex(l.BaseFrameNative.isInHall?0:1),l.BaseFrameNative.isInHall||(this.ui_resver.y+=23),this.Show()},t.prototype.setLanguage=function(){var e=c.GodElephant;for(var t in e)e[t].ui&&this[e[t].ui]&&(this[e[t].ui].text=e[t]["text"+s.AppConst.languageType]);this.ui_resver.setVar("base",e[30005]["text"+s.AppConst.languageType]).flushVars(),this.ui_settingTitle.text=e[30006]["text"+s.AppConst.languageType]},t.prototype.selectLanguage=function(){this.ui_btn_setLanguage.selected?s.AppConst.languageType="2":s.AppConst.languageType="1",cc.sys.localStorage.setItem("languageType",s.AppConst.languageType),this.setLanguage(),this.selectLanguageFun&&this.selectLanguageFun()},t.prototype.logout=function(){this.logoutFunction&&this.logoutFunction()},t.prototype.onChangedSound1=function(){var e=Math.floor(10*this.ui_setSound.value)/10;e!=a.AudioManager.Singleton.YinxiaoVolume&&(a.AudioManager.Singleton.YinxiaoVolume=e,cc.log("------------------",e))},t.prototype.onChangedMusic1=function(){var e=Math.floor(10*this.ui_setMusic.value)/10;e!=a.AudioManager.Singleton.MusicVolume&&(a.AudioManager.Singleton.MusicVolume=e,cc.log("------------------",e))},t.prototype.Show=function(){e.prototype.Show.call(this),s.AppConst.dealer.popUpCount++},t.prototype.Hide=function(){a.AudioManager.Singleton.play("","btn_close"),e.prototype.Hide.call(this),s.AppConst.dealer.popUpCount--},t}(r.default);i.default=u,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/BaseFrameNative":void 0,"../../../../Common/script/base/ViewBase":void 0,"../../../../GameHall/dlc/script/config/LocalizationConfig":void 0}],BenzBmwSetting:[function(e,t,i){"use strict";cc._RF.push(t,"7e401zfsx1HRptJEGX20t7x","BenzBmwSetting");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../../Common/script/base/AudioManager"),l=e("../../../../Common/script/base/CommonCtr"),r=e("../../../../Common/script/base/ViewBase"),c=e("../control/BenzBmwViewCtrl"),u=e("../model/BenzBmwGameData"),h=e("./BenzBmwSettingView"),p=cc._decorator,d=p.ccclass,m=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isShowMenu=!1,t.ui_btn_Menu_Settings=null,t.ui_btn_Menu_Help=null,t.ui_btn_Menu_Exit=null,t.ui_mask=null,t}return n(t,e),Object.defineProperty(t.prototype,"packageResourceName",{get:function(){return"benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"packageName",{get:function(){return"res/benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentName",{get:function(){return"Setting"},enumerable:!1,configurable:!0}),t.prototype.createChildComponents=function(){e.prototype.createChildComponents.call(this),this.fguiComponent.center()},t.prototype.allChildCreated=function(){e.prototype.allChildCreated.call(this),this.showMenu(),this.fguiComponent.node.anchorX=.5;var t=cc.winSize.width/this.fguiComponent.node.width,i=cc.winSize.height/this.fguiComponent.node.height;this.fguiComponent.node.setScale(t,i),this.fguiComponent.center()},t.prototype.OnLoadCompleted=function(){this.initUI()},t.prototype.initUI=function(){var e=this;this.fguiComponent.visible=!1,this.ui_mask.onClick(this.showMenu.bind(this)),this.ui_btn_Menu_Help.onClick(this.showRuleDetails.bind(this)),this.ui_btn_Menu_Exit.onClick(this.applyexit.bind(this)),this.ui_btn_Menu_Settings.onClick(function(){e.showMenu(),e.settingView?e.settingView.Show():(e.settingView=c.default.instance.view.addFguiComponent(h.default,!0),e.settingView.selectLanguageFun=function(){a.AudioManager.Singleton.play("","benz_button1"),e.OnLoadLanguage()})}),this.setMusicBtnStatus(),this.setEffectBtnStatus()},t.prototype.setMusicBtnStatus=function(){"open"==localStorage.getItem("SoundStatus")?this.fguiComponent.getChild("btnMusic").asButton.getController("button").setSelectedIndex(0):"close"==localStorage.getItem("SoundStatus")&&this.fguiComponent.getChild("btnMusic").asButton.getController("button").setSelectedIndex(1)},t.prototype.setEffectBtnStatus=function(){"open"==localStorage.getItem("EffectStatus")?this.fguiComponent.getChild("btnEffect").asButton.getController("button").setSelectedIndex(0):"close"==localStorage.getItem("EffectStatus")&&this.fguiComponent.getChild("btnEffect").asButton.getController("button").setSelectedIndex(1)},t.prototype.showSetBetBtns=function(){a.AudioManager.Singleton.play("","benz_button1"),this.showMenu(),this.node.emit(u.default.OpenWindow.CHOOSE_BETS_BTN_COM,!0)},t.prototype.showRuleDetails=function(){a.AudioManager.Singleton.play("","benz_button1"),this.showMenu(),this.node.emit(u.default.OpenWindow.CHOOSE_RULE_DETAILS,!0)},t.prototype.showBetHistory=function(){},t.prototype.onMusicClick=function(){},t.prototype.onEffectClick=function(){},t.prototype.showMenu=function(){a.AudioManager.Singleton.play("","benz_botton"),this.isShowMenu=!this.isShowMenu,this.fguiComponent.visible=!this.isShowMenu,this.isShowMenu||(this.ui_btn_Menu_Exit.title=c.default.instance.Model.GetLanguage(10001),this.ui_btn_Menu_Help.title=c.default.instance.Model.GetLanguage(10002),this.ui_btn_Menu_Settings.title=c.default.instance.Model.GetLanguage(10003))},t.prototype.applyexit=function(){a.AudioManager.Singleton.play("","benz_botton"),this.showMenu(),0==c.default.instance.Model.slefAllGamble?c.default.instance.cs_applyexittable():l.CommonCtr.instance.ShowTip(c.default.instance.Model.GetLanguage(10004),function(){c.default.instance.cs_applyexittable()},function(){})},s([d],t)}(r.default));i.default=m,cc._RF.pop()},{"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/CommonCtr":void 0,"../../../../Common/script/base/ViewBase":void 0,"../control/BenzBmwViewCtrl":"BenzBmwViewCtrl","../model/BenzBmwGameData":"BenzBmwGameData","./BenzBmwSettingView":"BenzBmwSettingView"}],BenzBmwTipView:[function(e,t,i){"use strict";cc._RF.push(t,"256a1Tc6exM+osC7FLZUAww","BenzBmwTipView");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../../Common/script/base/ViewBase"),l=cc._decorator,r=l.ccclass,c=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_tipText=null,t}return n(t,e),Object.defineProperty(t.prototype,"packageResourceName",{get:function(){return"benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"packageName",{get:function(){return"res/benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentName",{get:function(){return"Tip"},enumerable:!1,configurable:!0}),t.prototype.createChildComponents=function(){e.prototype.createChildComponents.call(this),this.fguiComponent.center(),this.initUI()},t.prototype.allChildCreated=function(){e.prototype.allChildCreated.call(this);var t=cc.winSize.width/this.fguiComponent.node.width,i=cc.winSize.height/this.fguiComponent.node.height;this.fguiComponent.node.setScale(t,i)},t.prototype.initUI=function(){this.Hide()},t.prototype.show=function(){var e=this;this.Show(),this.scheduleOnce(function(){e.Hide()},1.5)},t.prototype.setTipText=function(e){this.ui_tipText.text=e},s([r],t)}(a.default));i.default=c,cc._RF.pop()},{"../../../../Common/script/base/ViewBase":void 0}],BenzBmwViewCtrl:[function(e,t,i){"use strict";cc._RF.push(t,"18f4d3h1llJVbTrW400E8yF","BenzBmwViewCtrl"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("../../../../Boot/scirpt/AppConst"),n=e("../../../../Common/script/base/BaseCode"),s=e("../../../../Common/script/base/CommonCtr"),a=e("../../../../Common/script/base/cs_base"),l=e("../../../../Common/script/base/WebSocketManager"),r=e("../model/BenzBmwGameStatus"),c=e("../model/BenzBmwModel"),u=e("../model/BenzBmwNetData"),h=function(){function e(){this.isTableStart=!1,this.CreateTableCallBack=null}return Object.defineProperty(e,"instance",{get:function(){return null==this._viewCtr&&(this._viewCtr=new e),this._viewCtr},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Model",{get:function(){return null==this._model&&(this._model=new c.default,this.Model.gameid=8003,this.Model.levelid=80031,this._model.Init()),this._model},enumerable:!1,configurable:!0}),e.prototype.RegistNotify=function(){var e=l.WebSocketManager.getInstance;e.RegistNotify("sc_gambleone_bcbm_n",this.sc_gambleone_bcbm_n,this),e.RegistNotify("sc_entertable_n",this.sc_entertable_n,this),e.RegistNotify("sc_end_bcbm_n",this.sc_end_bcbm_n,this),e.RegistNotify("sc_tablestart_bcbm_n",this.sc_tablestart_bcbm_n,this),e.RegistNotify("sc_showdown_bcbm_n",this.sc_showdown_bcbm_n,this),e.RegistNotify("sc_gambleareaturn_n",this.sc_gambleareaturn_n,this),e.RegistNotify("sc_chat100_n",this.sc_chat100_n,this),e.RegistNotify("sc_addgoldingame",this.sc_addgoldingame,this)},e.prototype.UnRegistNotify=function(){cc.error("---UnRegistNotify---");var e=l.WebSocketManager.getInstance;e.UnRegistNotify("sc_gambleone_bcbm_n",this.sc_gambleone_bcbm_n,this),e.UnRegistNotify("sc_entertable_n",this.sc_entertable_n,this),e.UnRegistNotify("sc_end_bcbm_n",this.sc_end_bcbm_n,this),e.UnRegistNotify("sc_tablestart_bcbm_n",this.sc_tablestart_bcbm_n,this),e.UnRegistNotify("sc_showdown_bcbm_n",this.sc_showdown_bcbm_n,this),e.UnRegistNotify("sc_gambleareaturn_n",this.sc_gambleareaturn_n,this),e.UnRegistNotify("sc_chat100_n",this.sc_chat100_n,this),e.UnRegistNotify("sc_addgoldingame",this.sc_addgoldingame,this)},e.prototype.sc_entertable_bcbm=function(e){null==this.view||this.view._isDestory||(1==e.result?(console.log("sc_entertable_bcbm    ",e),this.Model.tableid=e.tableid,this.Model.levelid=e.levelid,this.Model.userList=e._userlist,this.Model._myServerPos=e.pos,this.Model.gameStatus=e.state,this.Model._prizeType=e._prizeType,this.Model._prizerate=e._prizerate,this.Model._pos2Gold=e._pos2Gold,this.Model._pos2Gameble=e._pos2Gameble,this.Model._p2GT=e._p2GT,this.Model.palyerlist=e._userlist,this.Model.boardCode=parseInt(e.MatchCode),this.Model.gameleList=e.gamblelist,this.Model.gameStatus==r.default.Gambling?this.Model.betEndtime=e.Endtime-2:this.Model.gameStatus==r.default.ShowPrize&&(this.Model.prizeEndtime=e.Endtime),this.Model.PersonAreaMaxLimit=e.PersonAreaMaxLimit,this.Model.AllAreaMaxLimit=e.AllAreaMaxLimit,this.view.showGamePanel(),this.view.sc_entertable_bcbm(),this.view.showBoardCode(),this.view.setUserCoins(),this.view.setUserName(),this.view.setUserhead()):console.error("\u670d\u52a1\u5668\u8fd4\u56de\u6570\u636e\u5f02\u5e38 result \uff1a "+e.result))},e.prototype.sc_entertable_n=function(e){var t=this;null==this.view||this.view._isDestory||(console.log("sc_entertable_n"),console.log(e),1==e.result?(this.Model.palyerlist=e.plist,this.Model.userList=e._userlist,this.Model._myServerPos=e.pos,this.Model.boardCode=e.mcode,this.Model.maxCount=e.maxCount,e.plist.forEach(function(e){e.py.userid==t.Model.mPlayerModel.userid&&(t.Model._myServerPos=e.pos)}),this.Model.isline&&(this.Model.isline=!1),this.view.sc_entertable_n()):console.error("\u670d\u52a1\u5668\u8fd4\u56de\u6570\u636e\u5f02\u5e38 result \uff1a "+e.result))},e.prototype.sc_tablestart_bcbm_n=function(e){null!=this.view&&!this.view._isDestory&&this.Model.tableid&&(cc.log("\u6e38\u620f\u5f00\u59cb ",e),1==e.result?(this.isTableStart=!0,this.Model.tableid=e.tableid,this.Model._myServerPos=e.pos,this.view.sc_tablestart_bcbm()):console.error("\u670d\u52a1\u5668\u8fd4\u56de\u6570\u636e\u5f02\u5e38 result \uff1a "+e.result))},e.prototype.cs_gambleone_bcbm=function(e){if(e){var t=new u.cs_gambleone_bcbm;t._g=this.Model.gameid,t.fn="cs_gambleone_bcbm",t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,t._tpos=e._tpos,t.gamble=e.gamble,l.WebSocketManager.getInstance.SendJSON(t,this.sc_gambleone_bcbm.bind(this))}},e.prototype.sc_gambleone_bcbm=function(e){null==this.view||this.view._isDestory||(cc.log("\u4e0b\u6ce8\u8fd4\u56de",e),-7!=e.result&&-8!=e.result||(cc.error(e.message),this.Model.redLimitMes=e.message,s.CommonCtr.instance.ShowTipLabel(this.Model.GetLanguage(10010))),-5==e.result&&s.CommonCtr.instance.ShowTipLabel(this.Model.GetLanguage(10011)))},e.prototype.sc_gambleone_bcbm_n=function(e){null!=this.view&&!this.view._isDestory&&this.Model.tableid&&(cc.log("\u4e00\u6b21\u4e0b\u6ce8\u901a\u77e5",e),this.view.ui_WaitPanel.visible||(1==e.result?(this.Model.betUserPos=e.pos,this.Model.betGamble=e.gamble,this.Model.betCarTypePos=e.tpos,this.Model.betAllRate=e.allrate,this.Model._curGold=e._curGold,this.Model._pos2Gameble=e._pos2Gamble,this.Model._pos2GambleTotal=e._pos2GambleTotal,this.view.sc_gambleone_bcbm()):console.error("\u670d\u52a1\u5668\u8fd4\u56de\u6570\u636e\u5f02\u5e38 result \uff1a "+e.result)))},e.prototype.sc_gambleareaturn_n=function(e){var t=this;if(cc.log("\u5176\u4ed6\u73a9\u5bb6\u4e0b\u6ce8\uff1a",e),null!=this.view&&!this.view._isDestory&&this.Model.tableid&&!this.view.ui_WaitPanel.visible)if(1==e.result)if(this.Model._p2GT=e._p2GT,this.isTableStart){console.log("isTableStart = "+this.isTableStart);var i=setInterval(function(){t.view&&(t.view.sc_gambleareabcbm(),t.isTableStart=!1,clearInterval(i))},2e3)}else this.view.sc_gambleareabcbm();else console.error("\u670d\u52a1\u5668\u8fd4\u56de\u6570\u636e\u5f02\u5e38 result \uff1a "+e.result)},e.prototype.sc_showdown_bcbm_n=function(e){null!=this.view&&!this.view._isDestory&&this.Model.tableid&&(1==e.result?(this.Model._prizeIndex=e.index,this.Model._prizeType=e._prizeType,this.Model._prizerate=e._prizerate,this.Model._curGold=e._curGold,this.Model.sdlist=e.sdlist,this.Model._winGold=e.winGold,this.view.sc_showdown_bcbm()):console.error("\u670d\u52a1\u5668\u8fd4\u56de\u6570\u636e\u5f02\u5e38 result \uff1a "+e.result))},e.prototype.sc_end_bcbm_n=function(e){null!=this.view&&!this.view._isDestory&&this.Model.tableid&&(1==e.result?(this.Model._pos2Gold=e._pos2Gold,this.Model._tickme=e._tickme,this.view.sc_end_bcbm()):console.error("\u670d\u52a1\u5668\u8fd4\u56de\u6570\u636e\u5f02\u5e38 result \uff1a "+e.result))},e.prototype.cs_exitroom=function(){var e=new u.cs_exitroom;e._g=this.Model.gameid,e.gameid=this.Model.gameid,e.fn="cs_exitroom",e.levelid=this.Model.levelid,l.WebSocketManager.getInstance.SendJSON(e,this.sc_exitroom.bind(this))},e.prototype.sc_exitroom=function(){},e.prototype.cs_applyexittable=function(){if(l.WebSocketManager.getInstance.webSocket.getConnectState()){var e=new u.cs_applyexittable;e._g=this.Model.gameid,e.gameid=this.Model.gameid,e.fn="cs_applyexittable",e.levelid=this.Model.levelid,e.tableid=this.Model.tableid,e.pos=this.Model._myServerPos,l.WebSocketManager.getInstance.SendJSON(e,this.sc_applyexittable.bind(this))}else this.view.ExitGame()},e.prototype.sc_applyexittable=function(e){null==this.view||this.view._isDestory||(1==e.result?this.view._benzBmwBottomBar.exitGame():s.CommonCtr.instance.ShowTipLabel(n.BaseCode[o.AppConst.languageType][e.result]||n.BaseCode[o.AppConst.languageType][-207]))},e.prototype.cs_gethistory_bcbm=function(e){var t=new u.cs_gethistory_bcbm;t.fn="cs_gethistory_bcbm",t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,t._g=this.Model.gameid,t.Count=e,l.WebSocketManager.getInstance.SendJSON(t,this.sc_gethistory_bcbm.bind(this))},e.prototype.sc_gethistory_bcbm=function(e){null==this.view||this.view._isDestory||(cc.log("\u8d70\u52bf\u56fe\u6570\u636e\uff1a",e),1==e.result?(this.Model.historyRecord=e._pos2win,this.view.sc_gethistory_bcbm()):console.error("\u670d\u52a1\u5668\u8fd4\u56de\u6570\u636e\u5f02\u5e38 result \uff1a "+e.result))},e.prototype.cs_gethistorygamble_bcbm=function(e){var t=new u.cs_gethistorygamble_bcbm;t.fn="cs_gethistorygamble_bcbm",t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,t._g=this.Model.gameid,t.Count=e,JSON.stringify(t),l.WebSocketManager.getInstance.SendJSON(t,this.sc_gethistorygamble_bcbm.bind(this))},e.prototype.sc_gethistorygamble_bcbm=function(e){null==this.view||this.view._isDestory||(1==e.result?(this.Model.historyGamele=e.historys,this.Model.historyGamelePage=e.index,this.Model.currGamble=e.currGamble,this.Model.currWinScore=e.currWinScore,this.Model.totalGamble=e.totalGamble,this.Model.totalWinScore=e.totalWinScore,this.view.sc_gethistorygamble_bcbm()):console.error("\u670d\u52a1\u5668\u8fd4\u56de\u6570\u636e\u5f02\u5e38 result \uff1a "+e.result))},e.prototype.cs_chat=function(e,t,i){var o=new a.cs_chat;o.levelid=this.Model.levelid,o.tableid=this.Model.tableid,o.type=t,o.tpos=i,o.content=e,o._g=this.Model.gameid,o.fn="cs_chat",l.WebSocketManager.getInstance.SendJSON(o,this.sc_chat.bind(this))},e.prototype.sc_chat=function(e){console.log("----sc_chat----",e),null==this.view||this.view._isDestory||-1==e.result||e.result},e.prototype.sc_chat_n=function(e){null!=this.view&&!this.view._isDestory&&this.Model.tableid&&this.view.sc_chat_n(e)},e.prototype.sc_chat100_n=function(e){this.view&&this.Model.tableid&&1==e.result&&this.view.sc_chat100_n(e)},e.prototype.cs_getroomplayerlist_bcbm=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=21);var o=new u.cs_getroomplayerlist_bcbm;o.levelid=this.Model.levelid,o.tableid=this.Model.tableid,o._g=this.Model.gameid,o.pageSize=i,o.pageIndex=t,o.fn="cs_getroomplayerlist_bcbm",e?l.WebSocketManager.getInstance.SendJSON(o,this.sc_getroomplayerlist_bcbm2.bind(this)):l.WebSocketManager.getInstance.SendJSON(o,this.sc_getroomplayerlist_bcbm.bind(this))},e.prototype.sc_getroomplayerlist_bcbm=function(e){null==this.view||this.view._isDestory||(1==e.result?(this.Model.userListTotals=e.iCount,this.view._benzBmwBottomBar.ui_btnWatch.getChild("n1").asTextField.text=this.Model.userListTotals?this.Model.userListTotals+"":"0"):cc.error("cs_getroomplayerlist_AndBah error:"+e.result))},e.prototype.sc_getroomplayerlist_bcbm2=function(e){null==this.view||this.view._isDestory||(1==e.result?this.view.UpdateOtherPlayer(e):cc.error("cs_getroomplayerlist_AndBah error:"+e.result))},e.prototype.sc_addgoldingame=function(t){null==this.view||this.view._isDestory||1==t.result&&(o.AppConst.mPlayerModel.bReCharge=!0,e.instance.Model._curGold=t.lGold,this.view._benzBmwBottomBar.setUserCoins(t.lGold),1==t.status&&s.CommonCtr.instance.ShowTipLabel(this.Model.GetLanguage(10012)))},e}();i.default=h,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/BaseCode":void 0,"../../../../Common/script/base/CommonCtr":void 0,"../../../../Common/script/base/WebSocketManager":void 0,"../../../../Common/script/base/cs_base":void 0,"../model/BenzBmwGameStatus":"BenzBmwGameStatus","../model/BenzBmwModel":"BenzBmwModel","../model/BenzBmwNetData":"BenzBmwNetData"}],BenzBmwView:[function(e,t,i){"use strict";cc._RF.push(t,"97e13Mca5JHq57wFN0l5zfa","BenzBmwView");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../../Boot/scirpt/AppConst"),l=e("../../../../Common/script/base/AudioManager"),r=e("../../../../Common/script/base/BaseFrameNative"),c=e("../../../../Common/script/base/CommonCtr"),u=e("../../../../Common/script/base/CommonView"),h=e("../../../../Common/script/base/ReconnectManager"),p=e("../../../../Common/script/base/ReportManager"),d=e("../../../../Common/script/base/SceneManager"),m=e("../../../../Common/script/base/ViewBase"),f=e("../../../../Common/script/base/WebSocketManager"),b=e("../../../../Common/script/util/UIUtil"),g=e("../../../../GameHall/script/Module/ChatView/ChatView"),_=e("../control/BenzBmwViewCtrl"),B=e("../model/BenzBmwGameData"),C=e("../model/BenzBmwGameStatus"),y=e("../model/BenzBmwNetData"),w=e("./BenzBmwAwardRecord"),v=e("./BenzBmwBetRecord"),S=e("./BenzBmwBetResult"),M=e("./BenzBmwBottomBar"),T=e("./BenzBmwDanmuCom"),P=e("./BenzBmwGameSpine"),x=e("./BenzBmwHelpView"),z=e("./BenzBmwPlayerList"),A=e("./BenzBmwSetting"),R=e("./BenzBmwWin"),O=cc._decorator,I=O.ccclass,N=(O.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_leftRoadBg=null,t.ui_rightRoadBg=null,t.ui_leftRoadBgAni=null,t.ui_rightRoadBgAni=null,t.ui_iconMoveBg=null,t.ui_startBetTip=null,t.ui_awardIcontypeCom=null,t.ui_awardMul=null,t.ui_selfWinText=null,t.otherWinText=[],t.ui_RoadGroup=null,t.ui_betTimeTipCom=null,t.ui_betTimeText=null,t.ui_betTimeColokPic=null,t.ui_betTimeDashboardAni=null,t.ui_betTimeFullBg=null,t.ui_n45=null,t.ui_awardList=null,t.ui_DanmuCom=null,t.ui_WaitPanel=null,t.createOver=!1,t.awardCarType=null,t.icons=[],t.iconsCnt=B.default.RollIconsCnt,t.awardCarSpineNode=null,t._awardCarSpineAni=null,t.awardIconTypeControl=null,t.spineresCreatorOver=!1,t.latelyHistoryData=[],t._status=null,t.theFirstFourUsersPos=[],t.bReconnect=!1,t.ChatTip=null,t.WinLV=0,t.winLVAnimNode=null,t._TicketCnt=0,t._bStartRoll=!1,t._CurRollPostion=0,t._StepTimeInter=[],t._RunStepCnt=0,t._curPos=0,t._StepTimeIndex=0,t._benzBmwBetResult=null,t.ui_ComChipsGroup=null,t._benzBmwHelpView=null,t._benzBmwBottomBar=null,t._benzBmwAwardRecord=null,t._benzBmwWin=null,t._benzBmwBetRecord=null,t._benzBmwSetting=null,t.ui_OtherPlayerPanel=null,t.OtherPlayerPanel=null,t.pauseTime=0,t.ClockPicFillAmount=[5,11,16,22,27,33,39,44,50,55,61,67,72,78,83,89,94,100],t.timeCountDownFun=null,t}return n(t,e),Object.defineProperty(t.prototype,"packageResourceName",{get:function(){return"benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"packageName",{get:function(){return"res/benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentName",{get:function(){return"MainView"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"needProcess",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){fgui.addLoadHandler(),fgui.GRoot.create(),_.default.instance.view=this,e.prototype.onLoad.call(this),this.eventListener(),cc.game.on(cc.game.EVENT_HIDE,this.backstage,this),cc.game.on(cc.game.EVENT_SHOW,this.activation,this)},t.prototype.activation=function(){(new Date).getTime()-this.pauseTime>3e3&&(cc.sys.isNative||(cc.game.resume(),window.location.reload()))},t.prototype.backstage=function(){this.pauseTime=(new Date).getTime(),console.log("\u6e38\u620f\u8fdb\u5165\u540e\u53f0"),cc.game.pause()},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks(),_.default.instance.UnRegistNotify(),_.default.instance.view=null,_.default._viewCtr=null,this.node.destroyAllChildren(),fgui.UIPackage.removePackage("res/benzBmw"),cc.assetManager.getBundle("benzBmw").releaseAll(),e.prototype.onDestroy.call(this)},t.prototype.createChildComponents=function(){this.fguiComponent.visible=!1,e.prototype.createChildComponents.call(this),fgui.GRoot.inst.addChild(this.fguiComponent),this.fguiComponent.makeFullScreen(),this._benzBmwBottomBar=this.addFguiComponent(M.default),this._benzBmwSetting=this.addFguiComponent(A.default),this._benzBmwAwardRecord=this.addFguiComponent(w.default),this._benzBmwWin=this.addFguiComponent(R.default),this._benzBmwBetRecord=this.addFguiComponent(v.default),this._benzBmwHelpView=this.addFguiComponent(x.default);var t=this.getChild("BetResultCom").asCom;this._benzBmwBetResult=t.node.addComponent(S.default),this._benzBmwBetResult.fguiComponent=t;var i=this.ui_DanmuCom.node.addComponent(T.default);i.fguiComponent=this.ui_DanmuCom,i.active=!0,this.peopleMsg=i.MyStart(),this.OtherPlayerPanel=this.addFguiComponent(z.default),this.ChatTip=this.addFguiComponent(g.default,!0),this.ChatTip.sendChatMsg=this.sendChatMsg.bind(this),this.ui_ComChipsGroup.node.setScale(this.fguiWidth/2340,this.fguiHeight/1080),this.addFguiComponent(u.default),this.loadSounds()},t.prototype.allChildCreated=function(){e.prototype.allChildCreated.call(this),this.initUI();var t=this;cc.assetManager.getBundle("benzBmw").load("res/prefabs/liansheng_lizi",cc.Prefab,function(e,i){!e&&cc.isValid(t.node)&&(t.winLVAnimNode=cc.instantiate(i),t._benzBmwBottomBar.ui_winLVAnim.node.addChild(t.winLVAnimNode),t.winLVAnimNode.active=!0,t.SetWinLVAnim(!1))})},t.prototype.OnLoadCompleted=function(){this.fguiComponent.center();var e=cc.winSize.width/this.fguiComponent.node.width,t=cc.winSize.height/this.fguiComponent.node.height;this.fguiComponent.node.setScale(e,t),this.createOver=!0,r.BaseFrameNative.nowGameView=this,r.BaseFrameNative.isInHall=!1,_.default.instance.RegistNotify(),cc.game.off(cc.game.EVENT_SHOW),cc.game.on(cc.game.EVENT_SHOW,this.gameEventShow.bind(this)),cc.game.off(cc.game.EVENT_HIDE),cc.game.on(cc.game.EVENT_HIDE,this.gameEventHide.bind(this))},t.prototype.gameEventShow=function(){var e=this;console.log("---gameEventShow---"),cc.game.resume(),this._benzBmwBetResult.resetData(),this.scheduleOnce(function(){e.sendReconnect()},.5)},t.prototype.sendReconnect=function(){this._isDestory||(c.CommonCtr.instance.ShowLoading(),h.ReconnectManager.getInstance.reconnect(this.connectSuccess.bind(this),this.connectFail.bind(this)))},t.prototype.connectSuccess=function(){var e=this;c.CommonCtr.instance.ShowLoading(),this.scheduleOnce(function(){e.cs_entertable_bcbm(),e._benzBmwBetResult.resetData()},1)},t.prototype.connectFail=function(e){var t=this;this._isDestory||c.CommonCtr.instance.ShowTip(e,function(){t.sendReconnect()})},t.prototype.gameEventHide=function(){console.log("---gameEventHide---"),this.unscheduleAllCallbacks(),cc.game.pause()},t.prototype.loadSounds=function(){cc.assetManager.getBundle(this.packageResourceName).loadDir("res/sounds",cc.AudioClip,function(e,t){for(var i=0;i<t.length;i++)l.AudioManager.Singleton.add(t[i].name,t[i]);l.AudioManager.Singleton.playBGM("benz_bgm")})},t.prototype.initUI=function(){for(var e=0;e<this.iconsCnt;e++){var t="n"+(e+1);this.icons[e]=this.fguiComponent.getChild(t).asImage}for(e=0;e<4;e++){var i="otherWinText"+e;this.otherWinText[e]=this.fguiComponent.getChild(i).asTextField,this.otherWinText[e].visible=!1}this.ui_iconMoveBg.visible=!1;var o=this.icons[0].x,n=this.icons[0].y;this.ui_iconMoveBg.setPosition(o,n),this.ui_startBetTip.visible=!1,this.ui_RoadGroup.visible=!1,this.ui_awardIcontypeCom.visible=!1,this.awardIconTypeControl=this.ui_awardIcontypeCom.getController(B.default.GameUIControlName.AWARD_ICON_INDEX),this.awardCarSpineNode=this.fguiComponent.getChild("awardCarAni").node,this._awardCarSpineAni=new P.default(this.awardCarSpineNode),this.addChild(this._awardCarSpineAni),this.ui_selfWinText.node.zIndex=10},t.prototype.eventListener=function(){},t.prototype.cs_entertable_bcbm=function(){var e=new y.cs_entertable_bcbm;e._g=_.default.instance.Model.gameid,e.gameid=_.default.instance.Model.gameid,e.levelid=b.UIUtil.CheckGameLeveID(_.default.instance.Model.gameid,a.AppConst.currentlevelid),e.fn="cs_entertable_bcbm",e.tableid=0,f.WebSocketManager.getInstance.SendJSON(e,this.sc_entertable_bcbm_reconnect.bind(this))},t.prototype.sc_entertable_bcbm_reconnect=function(e){this.createOver&&(this.createOver=!1,_.default.instance.sc_entertable_bcbm(e))},t.prototype.showGamePanel=function(){this.fguiComponent.visible=!0,this.fguiComponent.node.opacity=0,this.fguiComponent.node.runAction(cc.fadeIn(1)),this.node.emit(B.default.GameEvent.CompeleteChooseBetBtns,null)},t.prototype.update=function(){var e=this;this._TicketCnt++,this._bStartRoll&&(this.ui_iconMoveBg.visible=!0,this._TicketCnt%this._StepTimeInter[this._StepTimeIndex]==0&&(this._CurRollPostion++,this._CurRollPostion=this._CurRollPostion%26,this.ui_iconMoveBg.setPosition(this.icons[this._CurRollPostion].x,this.icons[this._CurRollPostion].y),l.AudioManager.Singleton.play("","benz_iconBg"),this._StepTimeIndex++,this._StepTimeIndex>=this._RunStepCnt&&(this._bStartRoll=!1,this.scheduleOnce(function(){var t=cc.blink(2,6);e.ui_iconMoveBg.node.runAction(t),e.showAwardResult()},.5)),this._TicketCnt=0))},Object.defineProperty(t.prototype,"status",{get:function(){return this._status},set:function(e){var t=this;if(this._status=e,e==C.default.Gambling)this._benzBmwBetResult.resetData(),this.HideAwardIconAndSpine(),this._benzBmwBetResult.hideLightPic(),this._benzBmwBetResult.setBetCarsBtnEnable(!0),this._benzBmwBottomBar.setContinueBetBtnEnable(!0),this.ui_n45.visible=!0,this.showBettingTextTips(),this.showRoadBg(!0),this.playRoadBgAni(!1),this.scheduleOnce(function(){t.showBetTimeCountDown()},2),_.default.instance.cs_getroomplayerlist_bcbm(!1,0,3),this.ui_WaitPanel.visible=!1;else if(e==C.default.ShowPrize)if(this.awardCarType=_.default.instance.Model._prizeType,null!=this.awardCarType||null!=this.awardCarType){this.ui_betTimeColokPic.fillAmount=100,this.showAwardTextTips(),this._benzBmwBetResult.setBetCarsBtnEnable(!1),this._benzBmwBottomBar.setContinueBetBtnEnable(!1);var i,o=_.default.instance.Model.prizeEndtime;if(o&&(this.bReconnect=!0),0==o||o&&o<=5)this.ui_iconMoveBg.visible=!0,i=_.default.instance.Model._prizeIndex,console.log("awardIconBg\u505c\u5728 \uff1a"+i+"\u4f4d\u7f6e\u4e0a"),this.icons&&this.icons[i]&&this.ui_iconMoveBg.setPosition(this.icons[i].x,this.icons[i].y),this.showAwardResult();else this.scheduleOnce(function(){t.playRoadBgAni(!0),t.showRoadBg(!1),t.setMoveIconBgData()},2);_.default.instance.Model.prizeEndtime=null}else console.log("\u670d\u52a1\u5668\u8fd4\u56de\u6570\u636e\u5f02\u5e38")},enumerable:!1,configurable:!0}),t.prototype.setMoveIconBgData=function(){switch(l.AudioManager.Singleton.play("","benz_iconBgmove"),this._curPos=_.default.instance.Model._prizeIndex,console.log("awardIconBg\u505c\u5728 \uff1a"+this._curPos+"\u4f4d\u7f6e\u4e0a"),this.awardCarType){case B.default.IconsCode.Audo:case B.default.IconsCode.Lexus:var e=[0,13];Math.floor(Math.random()*e.length),console.log("awardIconBg\u505c\u5728 \uff1a"+this._curPos+"\u4f4d\u7f6e\u4e0a");break;case B.default.IconsCode.Vw:case B.default.IconsCode.Toyota:case B.default.IconsCode.Hyundai:case B.default.IconsCode.MazDa:e=[0,6,13,19],Math.floor(Math.random()*e.length),console.log("awardIconBg\u505c\u5728 \uff1a"+this._curPos+"\u4f4d\u7f6e\u4e0a")}var t=this._curPos;this._RunStepCnt=(t+this.iconsCnt-this._CurRollPostion)%this.iconsCnt,this._RunStepCnt+=4*this.iconsCnt,this._StepTimeIndex=0;for(var i=0;i<this._RunStepCnt-5;i++)this._StepTimeInter[i]=2;this._StepTimeInter[this._RunStepCnt-8]=4,this._StepTimeInter[this._RunStepCnt-7]=6,this._StepTimeInter[this._RunStepCnt-6]=8,this._StepTimeInter[this._RunStepCnt-5]=10,this._StepTimeInter[this._RunStepCnt-4]=12,this._StepTimeInter[this._RunStepCnt-3]=14,this._StepTimeInter[this._RunStepCnt-2]=16,this._StepTimeInter[this._RunStepCnt-1]=20,this._StepTimeInter[this._RunStepCnt]=1,this._StepTimeInter[6]=12,this._StepTimeInter[5]=10,this._StepTimeInter[4]=8,this._StepTimeInter[3]=6,this._StepTimeInter[2]=4,this._StepTimeInter[1]=2,this._StepTimeInter[0]=1,this._bStartRoll=!0},t.prototype.showAwardResult=function(){var e=this;if(l.AudioManager.Singleton.stopEffect("benz_iconBgmove"),this.ui_betTimeTipCom.visible=!0,this.ui_n45.visible=!1,this.playAwardCarSpineAni(),this._benzBmwBetResult.showCarLightPic(),this.scheduleOnce(function(){var t=_.default.instance.Model._prizerate;e.showAwardIcon(e.awardCarType,t);var i=_.default.instance.Model.sdlist;if(i){var o=i.gold;0!=o&&(e._benzBmwWin.showWinAni(o),e._benzBmwBottomBar.setUserCoins(_.default.instance.Model._curGold))}e._benzBmwBetResult.RecycleChips()},.5),_.default.instance.cs_gethistory_bcbm(7),this.playRoadBgAni(!1),this.showRoadBg(!0),_.default.instance.Model.slefAllGamble>0){var t=_.default.instance.Model.slefAllGamble-_.default.instance.Model.sdlist.gold;p.default.Singleton.reportGameRound(b.UIUtil.formatNumber100(t))}_.default.instance.Model.slefAllGamble=0,cc.error("\u6e05\u7406\u4e0b\u6ce8\u91d1\u989d"),_.default.instance.Model._tickme&&this.TimeOutExitGame(),this.SetWinLVAnim(!0,_.default.instance.Model.sdlist.gold)},t.prototype.showBoardCode=function(){var e=String(_.default.instance.Model.boardCode);this._benzBmwBottomBar.showBoardCode(e)},t.prototype.setUserCoins=function(){var e=_.default.instance.Model.mPlayerModel.gold;this._benzBmwBottomBar.setUserCoins(e)},t.prototype.setUserName=function(){var e=_.default.instance.Model.mPlayerModel._n;this._benzBmwBottomBar.setUserName(e)},t.prototype.setUserhead=function(){var e=_.default.instance.Model.mPlayerModel.wechat.wicon;this._benzBmwBottomBar.setUserhead(e)},t.prototype.updateUserListUI=function(){},t.prototype.showRoadBg=function(){this.ui_leftRoadBg.visible=!1,this.ui_rightRoadBg.visible=!1},t.prototype.playRoadBgAni=function(){this.ui_leftRoadBgAni.visible=!0,this.ui_rightRoadBgAni.visible=!0,this.ui_leftRoadBgAni.playing=!0,this.ui_rightRoadBgAni.playing=!0},t.prototype.playStartBetAni=function(){var e=this;l.AudioManager.Singleton.play("","benz_startBet"),this.ui_startBetTip.visible=!0;var t=B.default.GameUIControlName.STARTBET_OR_STOPBET;this.ui_startBetTip.getController(t).setSelectedIndex(0),this.scheduleOnce(function(){e.ui_startBetTip.visible=!1},2)},t.prototype.playStopBetAni=function(){var e=this;this.ui_startBetTip.visible=!0;var t=B.default.GameUIControlName.STARTBET_OR_STOPBET;this.ui_startBetTip.getController(t).setSelectedIndex(1),this.scheduleOnce(function(){e.ui_startBetTip.visible=!1},1)},t.prototype.showBettingTextTips=function(){},t.prototype.showAwardTextTips=function(){},t.prototype.showBetTimeCountDown=function(){var e=this;this.ui_betTimeColokPic.fillAmount=0,this.ui_betTimeText.text="10";var t=9,i=0;if(_.default.instance.Model.betEndtime){t=_.default.instance.Model.betEndtime-1,i=9-t,_.default.instance.Model.betEndtime=null,this.ui_betTimeColokPic.fillAmount=this.ClockPicFillAmount[i]/100;var o=9-i;this.ui_betTimeText.text=""+(o<0?0:o)}this.ui_betTimeDashboardAni.playing=!0,this.ui_betTimeTipCom.visible=!0,this.ui_betTimeFullBg.visible=!1,this.timeCountDownFun&&this.unschedule(this.timeCountDownFun),this.timeCountDownFun=function(){e.ui_betTimeColokPic.fillAmount=e.ClockPicFillAmount[i]/100;var t=9-i;e.ui_betTimeText.text=""+(t<0?0:t),9==i?(e.ui_betTimeFullBg.visible=!0,e.ui_betTimeDashboardAni.playing=!1,e.playStopBetAni(),l.AudioManager.Singleton.play("","benz_countdownEnd"),e.unschedule(e.timeCountDownFun)):10-i<=4&&l.AudioManager.Singleton.play("","benz_countdown"),i++},this.schedule(this.timeCountDownFun,1,t,0)},t.prototype.showAwardIcon=function(e,t){var i=e;this.awardIconTypeControl.setSelectedIndex(i),this.ui_awardMul.text="X"+t},t.prototype.HideAwardIconAndSpine=function(){this.ui_RoadGroup.visible=!1,this.ui_awardIcontypeCom.visible=!1,this.awardCarSpineNode.active=!1,this._awardCarSpineAni.clearTrack()},t.prototype.playAwardCarSpineAni=function(){},t.prototype.showWinTextAni=function(e){var t=this;if(e&&_.default.instance.Model.sdlist&&_.default.instance.Model.sdlist.gold>0){var i=_.default.instance.Model.sdlist.gold;this.ui_selfWinText.text="R$+"+b.UIUtil.formatNumber100(i),this.ui_selfWinText.y=1007,this._benzBmwBottomBar.showHeaderAni(),this.ui_selfWinText.visible=!0,this.ui_selfWinText.node.opacity=255;var o=this.ui_selfWinText.x,n=this.ui_selfWinText.y,s=this.ui_selfWinText.x,a=this.ui_selfWinText.y-100;fgui.GTween.to2(o,n,s,a,1).setTarget(this.ui_selfWinText,this.ui_selfWinText.setPosition).setEase(fgui.EaseType.CubicOut).onComplete(function(){t.ui_selfWinText.node.runAction(cc.fadeOut(1))},this)}},t.prototype.sc_entertable_bcbm=function(){console.log("\u901a\u77e5\u6709\u4eba\u8fdb\u5165\u623f\u95f4 \u66f4\u65b0\u4f4d\u7f6e\u4fe1\u606f"),_.default.instance.Model.palyerlist,_.default.instance.Model.gameStatus==C.default.Gambling&&_.default.instance.Model.betEndtime>4?(this.ui_WaitPanel.visible=!1,this.status=_.default.instance.Model.gameStatus):this.ui_WaitPanel.visible=!0,_.default.instance.cs_gethistory_bcbm(7)},t.prototype.sc_entertable_n=function(){console.log("\u901a\u77e5\u6709\u4eba\u8fdb\u5165\u623f\u95f4 \u66f4\u65b0\u4f4d\u7f6e\u4fe1\u606f"),_.default.instance.Model.palyerlist.length},t.prototype.sc_gambleone_bcbm=function(){if(_.default.instance.Model.betUserPos==_.default.instance.Model._myServerPos){var e=_.default.instance.Model._curGold;this._benzBmwBottomBar.setUserCoins(e),this._benzBmwBetResult.showBetResult(),_.default.instance.Model.slefAllGamble=_.default.instance.Model.betAllRate,cc.error("\u81ea\u5df1\u62bc\u6ce8\u603b\u989d\uff1a",_.default.instance.Model.slefAllGamble),a.AppConst.isGoldCosted=!0}},t.prototype.sc_gambleareabcbm=function(){var e=_.default.instance.Model._p2GT;this._benzBmwBetResult.showOtherUserBet(e)},t.prototype.sc_end_bcbm=function(){this.ui_WaitPanel.visible||(this.status=C.default.ShowPrize,_.default.instance.Model.gameStatus=C.default.ShowPrize)},t.prototype.sc_tablestart_bcbm=function(){this.status=C.default.Gambling,_.default.instance.Model.gameStatus=C.default.Gambling,this.playStartBetAni()},t.prototype.sc_showdown_bcbm=function(){},t.prototype.cs_gethistorygamble_bcbm=function(e){var t=e;0==t&&this._benzBmwBetRecord.resetData(),_.default.instance.cs_gethistorygamble_bcbm(t)},t.prototype.sc_gethistory_bcbm=function(){var e=_.default.instance.Model.historyRecord.reverse();if(e.length>0)if(_.default.instance.Model.activeReqHistory)this._benzBmwAwardRecord.Show(),this._benzBmwAwardRecord.setHistoryData(),_.default.instance.Model.activeReqHistory=!1;else{if(this.latelyHistoryData=e,this.ui_awardList){this.ui_awardList.removeChildrenToPool();for(var t=0;t<e.length;t++)this.ui_awardList.addItemFromPool().asCom.getController("iconItemIndex").setSelectedIndex(e[t])}if(-1==_.default.instance.Model._prizeIndex){var i=this.latelyHistoryData[0],o=-1;for(cc.error("_prizeIndex = ",_.default.instance.Model._prizeIndex),t=0;t<this.iconsCnt;t++)if(i==B.default.RollIconsType[t]-1){o=t,console.log("awardIconBg\u505c\u5728 \uff1a"+t+"\u4f4d\u7f6e\u4e0a"),_.default.instance.Model._prizeIndex=t;break}this.ui_iconMoveBg.setPosition(this.icons[o].x,this.icons[o].y),this.ui_iconMoveBg.visible=!0}}},t.prototype.updateHistory=function(e){null!=e&&null!=e||(e=_.default.instance.Model._prizeType),this.latelyHistoryData.length>=7&&this.latelyHistoryData.pop(),this.latelyHistoryData.splice(0,0,e);var t=this.latelyHistoryData;if(cc.error("2\u8bb0\u5f55\uff1a",t),this.ui_awardList){this.ui_awardList.removeChildrenToPool();for(var i=0;i<t.length;i++)this.ui_awardList.addItemFromPool().asCom.getController("iconItemIndex").setSelectedIndex(t[i])}},t.prototype.sc_gethistorygamble_bcbm=function(){var e=_.default.instance.Model.historyGamele;this._benzBmwBetRecord.setOtherData(),this._benzBmwBetRecord.setBetRecods(e),this._benzBmwBetRecord.Show()},t.prototype.showBetLimitTip=function(){var e=_.default.instance.Model.redLimitMes;c.CommonCtr.instance.ShowTipLabel(e)},t.prototype.setSelfSingleBetNum=function(e){this._benzBmwBetResult.setSelfSingleBetNum(e)},t.prototype.sendChatMsg=function(e,t){_.default.instance.cs_chat(e,t,_.default.instance.Model.mPlayerModel.userid)},t.prototype.sc_chat_n=function(e){1==e.type||(2==e.type?this.ChatTip.addMsg({fromMe:!0,content:e.content,head:_.default.instance.Model.mPlayerModel.wechat.wicon,type:e.type}):3==e.type?this.ChatTip.addMsg({fromMe:!0,content:e.content,head:_.default.instance.Model.mPlayerModel.wechat.wicon,type:e.type}):e.type)},t.prototype.sc_chat100_n=function(e){for(var t=this._benzBmwBottomBar.ui_btn_dmswitch.selected,i=0;i<e.chatinfos.length;i++)e.chatinfos[i].wLType=0;for(t&&this.peopleMsg.addManyPeopleMsg(e.chatinfos),i=0;i<e.chatinfos.length;i++)""!=e.chatinfos[i].content&&this.ChatTip.addMsg({fromMe:e.chatinfos[i].pos==_.default.instance.Model.mPlayerModel.userid,content:e.chatinfos[i].content,head:e.chatinfos[i].head,type:e.chatinfos[i].type})},t.prototype.ShowOtherPlayerPanel=function(e){e?this.OtherPlayerPanel.Show():this.OtherPlayerPanel.Hide()},t.prototype.UpdateOtherPlayer=function(e){null!=e.playerlist&&(this.ShowOtherPlayerPanel(!0),_.default.instance.Model.userListTotals=e.iCount,this._benzBmwBottomBar.ui_btnWatch.getChild("n1").asTextField.text=_.default.instance.Model.userListTotals?_.default.instance.Model.userListTotals+"":"0",this.OtherPlayerPanel&&this.OtherPlayerPanel.fguiComponent.visible&&this.OtherPlayerPanel.ShowList(e.playerlist))},t.prototype.TimeOutExitGame=function(){var e=this;_.default.instance.UnRegistNotify(),this.scheduleOnce(function(){c.CommonCtr.instance.ShowTip(_.default.instance.Model.GetLanguage(10013),function(){e.ExitGame()})},2)},t.prototype.ExitGame=function(){_.default.instance.UnRegistNotify(),cc.audioEngine.stopAll(),this.unscheduleAllCallbacks(),d.SceneManager.Singleton.loadScene("GameHall","gameHall")},t.prototype.SetWinLVAnim=function(e,t){void 0===t&&(t=0),b.UIUtil.formatNumber100(t)<4e3&&(this.WinLV=this.WinLV<=0?0:this.WinLV-1),b.UIUtil.formatNumber100(t)>=4e3&&(this.WinLV=this.WinLV>=3?3:this.WinLV+1),this.winLVAnimNode.getChildByName("liansheng1").active=!1,this.winLVAnimNode.getChildByName("liansheng2").active=!1,this.winLVAnimNode.getChildByName("liansheng3").active=!1,e&&this.WinLV>0&&(this.winLVAnimNode.getChildByName("liansheng1").active=!0)},t.prototype.ChatShow=function(){null==this.ChatTip&&(this.ChatTip=this.addFguiComponent(g.default,!0),this.ChatTip.sendChatMsg=this.sendChatMsg.bind(this)),this.ChatTip.Show()},s([I],t)}(m.default));i.default=N,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/BaseFrameNative":void 0,"../../../../Common/script/base/CommonCtr":void 0,"../../../../Common/script/base/CommonView":void 0,"../../../../Common/script/base/ReconnectManager":void 0,"../../../../Common/script/base/ReportManager":void 0,"../../../../Common/script/base/SceneManager":void 0,"../../../../Common/script/base/ViewBase":void 0,"../../../../Common/script/base/WebSocketManager":void 0,"../../../../Common/script/util/UIUtil":void 0,"../../../../GameHall/script/Module/ChatView/ChatView":void 0,"../control/BenzBmwViewCtrl":"BenzBmwViewCtrl","../model/BenzBmwGameData":"BenzBmwGameData","../model/BenzBmwGameStatus":"BenzBmwGameStatus","../model/BenzBmwNetData":"BenzBmwNetData","./BenzBmwAwardRecord":"BenzBmwAwardRecord","./BenzBmwBetRecord":"BenzBmwBetRecord","./BenzBmwBetResult":"BenzBmwBetResult","./BenzBmwBottomBar":"BenzBmwBottomBar","./BenzBmwDanmuCom":"BenzBmwDanmuCom","./BenzBmwGameSpine":"BenzBmwGameSpine","./BenzBmwHelpView":"BenzBmwHelpView","./BenzBmwPlayerList":"BenzBmwPlayerList","./BenzBmwSetting":"BenzBmwSetting","./BenzBmwWin":"BenzBmwWin"}],BenzBmwWin:[function(e,t,i){"use strict";cc._RF.push(t,"138b5HkQ8tA8aZ78bpRQRTC","BenzBmwWin");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../../Common/script/base/AudioManager"),l=e("../../../../Common/script/base/ViewBase"),r=e("../../../../Common/script/util/UIUtil"),c=cc._decorator,u=c.ccclass,h=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_winText=null,t.ui_loseText=null,t}return n(t,e),Object.defineProperty(t.prototype,"packageResourceName",{get:function(){return"benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"packageName",{get:function(){return"res/benzBmw"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentName",{get:function(){return"Win"},enumerable:!1,configurable:!0}),t.prototype.createChildComponents=function(){e.prototype.createChildComponents.call(this),this.fguiComponent.center()},t.prototype.allChildCreated=function(){e.prototype.allChildCreated.call(this),this.initUI()},t.prototype.initUI=function(){this.Hide()},t.prototype.showWinAni=function(e){var t=this;this.Show();var i=e;i>=0?(a.AudioManager.Singleton.play("","benz_win"),this.ui_winText.text="\u8d62\u5f97\uff1a +"+r.UIUtil.formatNumber100(i)):(a.AudioManager.Singleton.play("","benz_lose"),this.ui_loseText.text="\u8f93\uff1a "+r.UIUtil.formatNumber100(i)),this.scheduleOnce(function(){t.Hide()},3)},s([u],t)}(l.default));i.default=h,cc._RF.pop()},{"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/ViewBase":void 0,"../../../../Common/script/util/UIUtil":void 0}]},{},["BenzBmwViewCtrl","BenzBmwGameData","BenzBmwGameStatus","BenzBmwModel","BenzBmwNetData","BenzBmwAwardRecord","BenzBmwBetRecord","BenzBmwBetRecordItem","BenzBmwBetResult","BenzBmwBottomBar","BenzBmwChooseBetsBtn","BenzBmwDanmuCom","BenzBmwGameSpine","BenzBmwHelpView","BenzBmwOtherPlayerItem","BenzBmwPlayerList","BenzBmwPregame","BenzBmwSetting","BenzBmwSettingView","BenzBmwTipView","BenzBmwView","BenzBmwWin"]);