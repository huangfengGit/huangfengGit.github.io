window.__require=function t(e,i,o){function s(r,l){if(!i[r]){if(!e[r]){var a=r.split("/");if(a=a[a.length-1],!e[a]){var u="function"==typeof __require&&__require;if(!l&&u)return u(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var h=i[r]={exports:{}};e[r][0].call(h.exports,function(t){return s(e[r][1][t]||t)},h,h.exports,t,e,i,o)}return i[r].exports}for(var n="function"==typeof __require&&__require,r=0;r<o.length;r++)s(o[r]);return s}({GroupTitle2:[function(t,e,i){"use strict";cc._RF.push(e,"cfaf6kmr+dBjY3ezUKyiPmt","GroupTitle2");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var n=t("../../../../Boot/scirpt/AppConst"),r=t("../Controller/RummyController2"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.onConstruct=function(){this.colorController=this.getController("c1"),this.title=this.getChild("title").asTextField},e.prototype.setColor=function(t){this.colorController.setSelectedIndex(t)},e.prototype.getColor=function(){return this.colorController.selectedIndex},e.prototype.setTitle=function(t){this.title.text=t},e.prototype.initData=function(t,e){var i="1"==n.AppConst.languageType?"english":"hindi",o=r.default.instance.view;0==t?(this.setColor(1),this.setTitle(xgameTable.getComplanguageRummyById(56)[i]+"("+e+")"),o.allPoints+=e):14==t?o._first_group?o._first_group&&!o._second_group?(o._second_group=!0,this.setColor(0),this.setTitle(xgameTable.getComplanguageRummyById(52)[i])):(this.setColor(0),this.setTitle(xgameTable.getComplanguageRummyById(55)[i])):(o._first_group=!0,this.setColor(0),this.setTitle(xgameTable.getComplanguageRummyById(51)[i])):t>2?o._first_group&&!o._second_group?(o._second_group=!0,this.setColor(0),this.setTitle(xgameTable.getComplanguageRummyById(52)[i])):o._first_group||o._second_group?(this.setColor(0),this.setTitle(xgameTable.getComplanguageRummyById(53)[i])):(this.setColor(1),this.setTitle(xgameTable.getComplanguageRummyById(56)[i]+"("+e+")"),o.allPoints+=e):o._first_group&&o._second_group?(this.setColor(2),this.setTitle(xgameTable.getComplanguageRummyById(54)[i])):o._first_group&&!o._second_group?(this.setColor(3),this.setTitle(xgameTable.getComplanguageRummyById(56)[i]+"("+e+")")):o._first_group||(this.setColor(3),this.setTitle(xgameTable.getComplanguageRummyById(56)[i]+"("+e+")"),o.allPoints+=e)},e}(fgui.GComponent);i.default=l,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../Controller/RummyController2":"RummyController2"}],MainScene2:[function(t,e,i){"use strict";cc._RF.push(e,"b8351nmQ3NGlb19oH4E8xjO","MainScene2");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r},r=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(s,n){function r(t){try{a(o.next(t))}catch(e){n(e)}}function l(t){try{a(o.throw(t))}catch(e){n(e)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,l)}a((o=o.apply(t,e||[])).next())})},l=this&&this.__generator||function(t,e){var i,o,s,n,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function l(t){return function(e){return a([t,e])}}function a(n){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(s=2&n[0]?o.return:n[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return r.label++,{value:n[1],done:!1};case 5:r.label++,o=n[1],n=[0];continue;case 7:n=r.ops.pop(),r.trys.pop();continue;default:if(!(s=(s=r.trys).length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){r=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){r.label=n[1];break}if(6===n[0]&&r.label<s[1]){r.label=s[1],s=n;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(n);break}s[2]&&r.ops.pop(),r.trys.pop();continue}n=e.call(t,r)}catch(l){n=[6,l],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../../../Boot/scirpt/AppConst"),u=t("../../../../Common/script/base/AudioManager"),h=t("../../../../Common/script/base/BaseCode"),c=t("../../../../Common/script/base/BaseFrameNative"),p=t("../../../../Common/script/base/CommonCtr"),m=t("../../../../Common/script/base/CommonView"),d=t("../../../../Common/script/base/NotificationCenter"),_=t("../../../../Common/script/base/NotificationName"),g=t("../../../../Common/script/base/ReconnectManager"),y=t("../../../../Common/script/base/ReportManager"),f=t("../../../../Common/script/base/SceneManager"),b=t("../../../../Common/script/base/ViewBase"),C=t("../../../../Common/script/base/WebSocketManager"),v=t("../../../../Common/script/util/UIUtil"),w=t("../../../../GameHall/script/Module/ChatView/ChatPeopleMsg"),P=t("../../../../GameHall/script/Module/ChatView/ChatView"),k=t("../../../../GameHall/script/Module/ComSettingView/ComSettingView"),M=t("../../../../GameHall/script/Module/GiftView/GiftView"),T=t("../../../../GameHall/script/Module/RechargeView/RechargeView"),S=t("../Controller/RummyController2"),I=t("../Model/Rummy2"),A=t("../Model/RummyModel2"),x=t("./GroupTitle2"),R=t("./Player2"),N=t("./Poker2"),O=t("./RummyFinish2"),D=t("./RummyHelp2"),B=t("./RummyResout2"),G=t("./RummyResoutItem2"),L=t("./Watch/RmAddCash"),U=t("./Watch/RmBetInfo"),F=t("./Watch/RmBoardView"),E=t("./Watch/RmChat"),V=t("./Watch/RmplayerQueue"),j=cc._decorator.ccclass,W=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_tempnode=null,e.chatView=null,e.settingView=null,e.helpInfo=null,e.players=[],e.sendPokerPoint=[],e.ui_centercom=null,e.ui_pokerNode=null,e.ui_btn_pokerback=null,e.ui_LeprosyCard=null,e.ui_OutCard=null,e.ui_btn_outlog=null,e.ui_btn_exit=null,e.ui_btn_discard=null,e.ui_btn_declare=null,e.ui_btn_group=null,e.ui_btn_sort=null,e.ui_coins=null,e.ui_groupNode=null,e.pokerResStart="ui://rummy2/cards",e.ui_btn_prepare=null,e.isFinish=!1,e.commonPoker=[],e.commonPoker2=[],e.ui_allPoints=null,e.ui_outPokerPanel=null,e.ui_outPokerList=null,e.mySitDown=!1,e.ui_menu=null,e.ui_btn_toHall=null,e.ui_btn_setting=null,e.ui_setClick=null,e.ui_myInfo=null,e.pokerPool=[],e.myPokers=[],e.myCards=[],e.sortCards=[],e.giveupPoker=[],e.gameState=0,e.ui_btn_help=null,e.myDrop=!1,e.ui_btn_newGroup=null,e.ui_arrow1=null,e.ui_arrow2=null,e.ui_closeNum=null,e.ui_openNum=null,e.finishView=null,e.ui_waitTurn=null,e.ui_pickTip=null,e.ui_pokerLinght1=null,e.ui_pokerLinght2=null,e.ui_lineout=null,e.ui_pokerDropMask=null,e.ui_cardTimeOut=null,e.ui_finishCard=null,e.ui_cardStart=null,e.ui_cardEff=null,e.ui_myTips=null,e.ui_tipstitle=null,e.tipsControlle=null,e.ui_tipstimes=null,e.ui_btn_switchtable=null,e.ui_statrWait=null,e.ui_waittimeer=null,e.ui_finishbg=null,e.ui_finish=null,e.ui_rummyBet=null,e.ui_btn_transposition=null,e.outPokerColor=new cc.Color,e.ui_rummy_lab_sort=null,e.ui_rummy_lab_discard=null,e.ui_rummy_lab_Declare=null,e.ui_rummy_lab_Finish=null,e.ui_rummy_lab_Group=null,e.ui_rummy_lab_drop=null,e.ui_rummy_lab_back=null,e.ui_rummy_lab_waiting=null,e.ui_rummy_lab_waitingS=null,e.ui_rummy_lab_pick=null,e.ui_rummy_lab_turn=null,e.ui_rummy_lab_points=null,e.ui_rummy_lab_chips=null,e.ui_rummy_lab_exit=null,e.ui_rummy_lab_table=null,e.ui_rummy_lab_help=null,e.ui_rummy_lab_setting=null,e.ui_btn_addcash=null,e.ui_nomoney=null,e.ui_viewcom=null,e.ui_btn_view=null,e.ui_statrWaitone=null,e.ui_view_lab=null,e.ui_btn_view_lab=null,e.ui_one_new_group=null,e.ui_cardouttemp=null,e.ui_LeprosyCard2=null,e.ui_biaozhi1=null,e.ui_biaozhi2=null,e.ui_nozhubo=null,e.ui_btn_Watch=null,e.ui_btn_queue=null,e.ui_myqueuebg=null,e.ui_myqueue=null,e.ui_queuelist=null,e.ui_headcom1=null,e.ui_headcom2=null,e.ui_headcom3=null,e.ui_btn_anchorPlayer=null,e.ui_btn_anchorChat=null,e.ui_btn_anchorbetting=null,e.ui_btn_zhubo=null,e.ui_anchorTime=null,e.ui_anchortimelab=null,e.ui_anchortimenum=null,e.ui_spectatorTime=null,e.ui_spectatorTimeLab=null,e.ui_spectatorTimenum=null,e.ui_request=null,e.ui_betstops=null,e.ui_anchorAninode=null,e.ui_rummy_lab_points4=null,e.ui_allPoints4=null,e.ui_rummy_lab_chips4=null,e.ui_coins4=null,e.ui_myInfo4=null,e.ui_anchorname=null,e.ui_anchornameLan=null,e.ui_anchornameLab=null,e.ui_anchorNomoney=null,e.ui_anchorNomoneytext=null,e.ui_requestlab1=null,e.ui_requestlab2=null,e.ui_rummy_lab_points_Watch=null,e.ui_rummy_lab_chips_Watch=null,e.ui_lingdangAninode=null,e.isshowResout=!0,e.ui_lineup=null,e.ui_lineuptext=null,e.anchorTime=10,e.addCash=null,e.tipsTimes=0,e.playerCount=0,e.changeData=!1,e.gameCount=0,e.animationPlayOver=!1,e.mopaiNow=!1,e.hasMopai=!1,e.fromMopai=0,e.currentPoker=null,e.dapaiCount=0,e.sendCardData={},e.addNewGroupBool=!1,e.groupSpacing=100,e.cardSpacing=95,e.cardSpacing2=95,e.startPos=320,e.startPos2=320,e._first_group=!1,e._second_group=!1,e.allPoints=0,e.groupType=[],e.groupTypePoints=[],e.effectiveGroup=0,e.needLife=0,e.isZahu=!1,e.isCanHupai=!1,e.isMeHupai=!1,e.otherHupai=!1,e.fisrtHuPos=0,e.requesting=!1,e.myGold=0,e.islevel=!1,e.isExit=!1,e.gift=null,e.ui_chat0=null,e.ui_chat1=null,e.ui_chat2=null,e.ui_chat3=null,e.anchorBarrage=!0,e.spectatorBarrage=!0,e.ready=!0,e.isleven=!1,e.titlePool=[],e}return s(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return"rummy2"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/rummy2"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"rummy"},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.controller=S.default.instance,this.controller.view=this,fgui.GRoot.create(),fgui.UIObjectFactory.setExtension("ui://rummy2/player",R.default),fgui.UIObjectFactory.setExtension("ui://rummy2/poker",N.default),fgui.UIObjectFactory.setExtension("ui://rummy2/groupPoker",x.default),fgui.UIObjectFactory.setExtension("ui://rummy2/resout_item",G.default),this.loadSoundResources(),t.prototype.onLoad.call(this)},e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),fgui.GRoot.inst.addChild(this.fguiComponent),this.fguiComponent.makeFullScreen(),this.chatView=this.addFguiComponent(P.default,!0),this.chatView.sendChatMsg=this.sendChatMsg.bind(this),this.chatView.IsInput=!1,this.gift=this.addFguiComponent(M.default),this.resoutPanel=this.addFguiComponent(B.default,!0),this.finishView=this.addFguiComponent(O.default,!0),this.peopleMsg=this.addFguiComponent(w.default,!0),this.rmChat=this.addFguiComponent(E.default,!0),this.addFguiComponent(m.default,!0),this.initUI(),"2"==a.AppConst.languageType&&this.setLanguage(),this.rmBoardView=this.addFguiComponent(F.default),this.fguiComponent.swapChildren(this.rmBoardView.fguiComponent,this.ui_tempnode),this.fguiComponent.removeChild(this.ui_tempnode,!0)},e.prototype.selectLanguage=function(){var t,e;this.setLanguage(),this.resoutPanel.setLanguage(),this.helpInfo&&this.helpInfo.setLanguage(),this.finishView&&this.finishView.setLanguage(),null===(t=p.CommonCtr.instance.view)||void 0===t||t.setLanguage(),null===(e=this.addCash)||void 0===e||e.setLanguage(),d.NotificationCenter.Instance.emit(_.default.AppLanguage.SELECT_LANGUAGE)},e.prototype.setLanguage=function(){for(var t="1"==a.AppConst.languageType?"english":"hindi",e=18;e<44;e++){var i=xgameTable.getComplanguageRummyById(e);i&&i.comp&&this[i.comp]&&(1==i.type?"ui_rummyBet"==i.comp||"ui_closeNum"==i.comp||"ui_openNum"==i.comp?this[i.comp].setVar("base",i[t]).flushVars():this[i.comp].text=i[t]:this[i.comp].url=i[t].replace("rummy","rummy2"))}var o=xgameTable.getComplanguageArenaById(7)[t].split("1");this.ui_requestlab1.text=o[0],this.ui_requestlab2.text=o[1],this.ui_anchornameLab.text=xgameTable.getComplanguageArenaById(8)[t],this.ui_rummy_lab_points4.text=xgameTable.getComplanguageRummyById(28)[t],this.ui_rummy_lab_chips4.text=xgameTable.getComplanguageRummyById(29)[t],this.ui_rummy_lab_points_Watch.text=this.ui_rummy_lab_points4.text,this.ui_rummy_lab_chips_Watch.text=this.ui_rummy_lab_chips4.text,"1"==a.AppConst.languageType?(this.ui_spectatorTimeLab.text="Start matching after",this.ui_anchortimelab.text="Start matching after"):(this.ui_spectatorTimeLab.text="\u0915\u0947 \u092c\u093e\u0926 \u092e\u093f\u0932\u093e\u0928 \u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902",this.ui_anchortimelab.text="\u0915\u0947 \u092c\u093e\u0926 \u092e\u093f\u0932\u093e\u0928 \u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902")},e.prototype.allChildCreated=function(){t.prototype.allChildCreated.call(this),c.BaseFrameNative.nowGameView=this,c.BaseFrameNative.isInHall=!1,this.controller.cs_entertable_rummy(),cc.game.off(cc.game.EVENT_SHOW),cc.game.on(cc.game.EVENT_SHOW,this.gameEventShow.bind(this)),cc.game.off(cc.game.EVENT_HIDE),cc.game.on(cc.game.EVENT_HIDE,this.gameEventHide.bind(this)),this.node.getChildByName("bg").removeFromParent()},e.prototype.loadSoundResources=function(){cc.assetManager.getBundle(this.packageResourceName).loadDir("res/Sounds",cc.AudioClip,function(t,e){for(var i=u.AudioManager.Singleton,o=0;o<e.length;o++)i.add(e[o].name,e[o]);i.playBGMNow&&!cc.audioEngine.isMusicPlaying()&&i.playBGM(i.music)})},e.prototype.gameEventShow=function(){var t=this;console.log("---gameEventShow---"),cc.game.resume(),p.CommonCtr.instance.ShowLoading(!1),this.scheduleOnce(function(){t.sendReconnect()},.5)},e.prototype.sendReconnect=function(){g.ReconnectManager.getInstance.reconnect(this.connectSuccess.bind(this),this.connectFail.bind(this))},e.prototype.connectSuccess=function(){var t=this;cc.isValid(this.node)&&this.scheduleOnce(function(){t.controller.cs_entertable_rummy()},1)},e.prototype.connectFail=function(t){var e=this;p.CommonCtr.instance.ShowTipCallback(t,function(){e.sendReconnect()})},e.prototype.gameEventHide=function(){console.log("---gameEventHide---"),this&&this.players&&this.players.forEach(function(t){!t.seatEmpty&&t.stopTween()}),cc.game.pause()},e.prototype.initUI=function(){for(var t=0;t<5;t++)this.players[t]=this.ui_centercom.getChild("player"+t),this.players[t].initUiSeat(t),this.sendPokerPoint[t]=this.ui_centercom.getChild("point"+t).node.position;if(this.ui_OutCard.onClick(this.takePokerFromRight,this),this.ui_btn_pokerback.onClick(this.takePokerFromSurplus,this),this.ui_btn_exit.onClick(this.openMenu,this),this.ui_btn_discard.onClick(this.outPoker,this),this.ui_btn_group.onClick(this.spliceGroup,this),this.ui_btn_sort.onClick(this.startSortPoker,this),this.ui_btn_prepare.onClick(this.prepare,this),this.ui_btn_declare.onClick(this.hupai,this),this.ui_btn_outlog.onClick(this.outPokerLog,this),this.ui_btn_toHall.onClick(this.exitGame,this),this.ui_btn_setting.onClick(this.setSound,this),this.ui_setClick.onClick(this.openMenu,this),this.ui_btn_help.onClick(this.showHelp,this),this.ui_btn_switchtable.onClick(this.switchtable,this),this.startEff=this.ui_centercom.getTransition("t0"),this.xipaiEff=this.ui_centercom.getTransition("t2"),this.tipsControlle=this.ui_myTips.getController("c1"),this.ui_btn_transposition.onClick(this.switchtable1,this),this.ui_btn_addcash.onClick(this.showAddCash,this),this.ui_btn_view.onClick(this.showResout,this),a.AppConst.gameStatus[1]==a.EnumGameStatus.Hide)for(this.ui_btn_pokerback.getChildAt(0).asLoader.url="ui://rummy2/cards18_2",this.ui_cardStart.getChildAt(0).asLoader.url="ui://rummy2/cards18_2",this.ui_cardouttemp.getChildAt(0).asLoader.url="ui://rummy2/cards18_2",t=0;t<this.ui_cardEff.numChildren;t++)this.ui_cardEff.getChildAt(t).asButton.getChildAt(0).asLoader.url="ui://rummy2/cards18_2";else this.ui_btn_addcash.visible=!0;this.initListening(),this.initResolution()},e.prototype.initListening=function(){var t=this;this.ui_btn_Watch.onClick(this.filedAnchor,this),this.ui_btn_queue.onClick(this.filedAnchor,this),this.ui_btn_anchorPlayer.onClick(this.showPlayer,this),this.ui_btn_anchorbetting.onClick(this.showBetInfo,this),this.ui_btn_zhubo.onClick(this.showBetInfo,this);var e=cc.assetManager.getBundle("rummy2");e.load("res/prefabs/anchor",cc.Prefab,function(e,i){if(!e){var o=cc.instantiate(i);t.anchorAni=o.getComponent(sp.Skeleton),t.anchorNickname=o.getChildByName("nickname").getComponent(cc.Label),t.anchorWenziAni=o.getChildByName("wenzi").getComponent(sp.Skeleton),t.anchorLinghtAni=o.getChildByName("dian").getComponent(sp.Skeleton),t.ui_anchorAninode.node.addChild(o),t.ui_anchorAninode.visible=!1}}),this.ui_btn_anchorChat.onClick(this.showChat,this),e.load("res/prefabs/lingdang",cc.Prefab,function(e,i){if(!e){var o=cc.instantiate(i);t.ui_lingdangAninode.node.addChild(o),t.lingdangAni=o.getComponent(sp.Skeleton),t.ui_lingdangAninode.visible=!1}}),e.load("res/prefabs/fudai",cc.Prefab,function(e,i){if(!e){var o=cc.instantiate(i);t.ui_btn_zhubo.getChild("n1").node.addChild(o),t.fudaiAni=o.getComponent(sp.Skeleton);var s=t.ui_btn_zhubo.visible;t.ui_btn_zhubo.visible=!0,t.fudaiAni.setAnimation(0,"daiji",!0),s||(t.ui_btn_zhubo.alpha=0)}}),fgui.GRoot.inst.width/fgui.GRoot.inst.height<2?(this.ui_anchorAninode.node.scale=.88,this.ui_anchorNomoney.node.scale=.88,this.ui_request.node.scale=.88):(this.ui_anchorAninode.node.scale=1,this.ui_anchorNomoney.node.scale=1,this.ui_request.node.scale=1)},e.prototype.anchorWin=function(t){var e=a.AppConst.gameStatus[1]==a.EnumGameStatus.Hide?"":"R$:";this.ui_coins.text=e+v.UIUtil.formatNumber100(t),this.myGold=t},e.prototype.changeAudience=function(t){u.AudioManager.Singleton.stopBGM(),u.AudioManager.Singleton.playBGM("rummy2gz"),this.controller.Model.myPos=0,this.mySitDown=!1,this.controller.Model.ID=3;var e="1"==a.AppConst.languageType?"english":"hindi",i="";this.rmBoardView.initGold(this.myGold),2==t.changeType?i=xgameTable.getComplanguageArenaById(21)[e]:1==t.changeType&&(i=xgameTable.getComplanguageArenaById(18)[e]),i&&p.CommonCtr.instance.ShowTipCallback(i,function(){})},e.prototype.showChat=function(){3==this.controller.Model.ID?(this.chatView.IsInput=!0,this.chatView.Show()):2==this.controller.Model.ID&&(this.rmChat?this.rmChat.Show():this.rmChat=this.addFguiComponent(E.default,!0))},e.prototype.cleanTableByState=function(){for(var t=1;t<4;t++)this.players[t].exit();this.isshowResout=!1,this.cleanTable()},e.prototype.checkRanking=function(){this.controller.cs_getlineuplist_rummy2()},e.prototype.updateRanking=function(t,e){var i=this;if(this.controller.Model.ranking=t.myIndex,0!=t.myIndex){if(this.ui_myqueuebg.visible=!0,this.ui_myqueue.text=t.myIndex+"",!e){var o="1"==a.AppConst.languageType?"english":"hindi",s=xgameTable.getComplanguageArenaById(12)[o].replace("1","[color=#fff048]"+t.myIndex+"[/color]");this.ui_lineuptext.text=s,this.ui_lineup.visible=!0,fgui.GTween.to(1,10,2).onComplete(function(){cc.isValid(i.ui_lineup)&&(i.ui_lineup.visible=!1)})}}else this.ui_myqueuebg.visible=!1,this.ui_myqueue.text="";if(t.playerlist.length>0){this.ui_queuelist.visible=!0;for(var n=0;n<t.playerlist.length;n++){this["ui_headcom"+(n+1)].visible=!0;var r=this["ui_headcom"+(n+1)].getChildByPath("n5.head").asLoader;v.UIUtil.loadImage(r,t.playerlist[n]._wechat.wicon)}for(n=t.playerlist.length;n<3;n++)this["ui_headcom"+(n+1)].visible=!1}else this.ui_headcom1.visible=!1,this.ui_headcom2.visible=!1,this.ui_headcom3.visible=!1},e.prototype.updateRank=function(t){t.length>0&&(this.ui_queuelist.visible=!0);for(var e=0;e<t.length;e++){this["ui_headcom"+(e+1)].visible=!0;var i=this["ui_headcom"+(e+1)].getChildByPath("n5.head").asLoader;v.UIUtil.loadImage(i,t[e]._wechat.wicon)}for(e=t.length;e<3;e++)this["ui_headcom"+(e+1)].visible=!1;0!=this.controller.Model.ranking&&this.controller.cs_getlineuplist_rummy2(!0)},e.prototype.initGZPanel=function(t){this.players[4].visible=!0,this.animationPlayOver=!0,this.players[4].typeMController.setSelectedIndex(0),this.ui_myInfo4.visible=!0;var e=a.AppConst.gameStatus[1]==a.EnumGameStatus.Hide?"":"R$:";this.ui_coins4.text=e+v.UIUtil.formatNumber100(t),this.gold4=t},e.prototype.playAnchorAni=function(t,e){var i=this;this.ui_anchornameLan.text=e,this.ui_anchorAninode.visible=!0,this.scheduleOnce(function(){i.anchorWenziAni.setToSetupPose(),i.anchorLinghtAni.setToSetupPose(),i.anchorAni.setToSetupPose(),i.ui_anchorAninode.visible=!1,2==i.controller.Model.ID&&i.controller.cs_anchorready_rummy2()},2),t?(this.rmBoardView.Hide(),this.ui_btn_anchorbetting.visible=!1,this.ui_anchorname.visible=!1,this.ui_btn_queue.visible=!1,this.ui_queuelist.visible=!1,this.ui_myInfo4.visible=!1,this.players[4].visible=!1,this.anchorAni.setAnimation(0,"sxb_dibian",!1),this.anchorNickname.string="","1"==a.AppConst.languageType?(this.anchorWenziAni.setAnimation(0,"Cyhbah_1",!1),this.anchorLinghtAni.setAnimation(0,"Cyhbah_1",!1)):(this.anchorWenziAni.setAnimation(0,"Cyhbah_2",!1),this.anchorLinghtAni.setAnimation(0,"Cyhbah_2",!1)),u.AudioManager.Singleton.playBGMNow?"rummyplusbg"!=u.AudioManager.Singleton.music&&(u.AudioManager.Singleton.stopBGM(),u.AudioManager.Singleton.playBGM("rummyplusbg")):(u.AudioManager.Singleton.stopBGM(),u.AudioManager.Singleton.playBGM("rummyplusbg"))):(u.AudioManager.Singleton.playBGMNow?"rummy2gz"!=u.AudioManager.Singleton.music&&(u.AudioManager.Singleton.stopBGM(),u.AudioManager.Singleton.playBGM("rummy2gz")):u.AudioManager.Singleton.playBGM("rummy2gz"),this.changeData&&(this.players[4].initData(this.players[0].basePData),this.initGZPanel(this.players[0].basePData.gold)),this.ui_btn_queue.visible=!0,this.ui_queuelist.visible=!0,this.ui_myInfo4.visible=!0,this.players[4].visible=!0,this.scheduleOnce(function(){i.anchorNickname.string=e},.5),"1"==a.AppConst.languageType?(this.anchorWenziAni.setAnimation(0,"bah_1",!1),this.anchorLinghtAni.setAnimation(0,"bah_1",!1)):(this.anchorWenziAni.setAnimation(0,"bah_2",!1),this.anchorLinghtAni.setAnimation(0,"bah_2",!1)))},e.prototype.anchorQuit=function(){u.AudioManager.Singleton.stopBGM(),u.AudioManager.Singleton.playBGM("rummyplusbg"),this.ui_myInfo.visible=!1,this.ui_myInfo4.visible=!1,this.players[0].visible=!1,this.players[4].visible=!1,this.rmBoardView.Hide(),this.ui_btn_anchorbetting.visible=!1,this.ui_btn_anchorPlayer.visible=!0,this.ui_btn_anchorChat.visible=!0,3==this.controller.Model.ID&&(this.ui_nozhubo.visible=!0,this.ui_btn_queue.visible=!0,this.ui_request.visible=!0,this.ui_anchorname.visible=!1,this.cleanTable())},e.prototype.findAnchorName=function(){return this.players[4].nickName2},e.prototype.showAnchortime=function(t){var e=this;void 0===t&&(t=10),this.rmBoardView.allMyBet=0,this.anchorTime=t,this.ui_anchorname.visible=!1,this.showTips("",0),this.controller.Model.bstate=1,2==this.controller.Model.ID?(this.ui_btn_anchorPlayer.visible=!0,this.ui_btn_anchorChat.visible=!0,this.ui_anchorTime.visible=!0,this.ui_anchortimenum.text=this.anchorTime+"s",this.ui_btn_zhubo.alpha=1,this.controller.Model.anchorWin&&(this.controller.Model.anchorWin=!1,this.fudaiAni&&(this.fudaiAni.setAnimation(0,"jingzhang",!1),this.fudaiAni.addAnimation(0,"daiji",!0))),this.ui_btn_zhubo.y=1150,this.ui_btn_zhubo.visible=!0,this.ui_btn_anchorbetting.visible=!1,fgui.GTween.to2(this.ui_btn_zhubo.x,this.ui_btn_zhubo.y,this.ui_btn_zhubo.x,915,.5).setTarget(this.ui_btn_zhubo,this.ui_btn_zhubo.setPosition).onComplete(function(){cc.isValid(e.ui_btn_zhubo)&&(e.ui_btn_zhubo.y=915)})):3==this.controller.Model.ID&&(this.ui_btn_anchorPlayer.visible=!1,this.ui_btn_anchorChat.visible=!1,this.ui_spectatorTime.visible=!0,this.ui_spectatorTimenum.text=this.anchorTime+"s",this.ui_centercom.getTransition("t3").play(),this.cleanTable(),this.resoutPanel.cleanList(),this.rmBoardView.cleanLinght(),this.rmBoardView.Show(),this.ui_btn_anchorbetting.visible=!1,this.ui_btn_zhubo.visible=!1,this.ui_btn_queue.visible=!1,this.ui_queuelist.visible=!1,this.lingdangAni&&(this.ui_lingdangAninode.visible=!0,this.lingdangAni.setAnimation(0,"animation",!1),this.lingdangAni.setCompleteListener(function(){cc.isValid(e.ui_lingdangAninode)&&(e.ui_lingdangAninode.visible=!1)}))),this.unschedule(this.anchorTimeStart),0==this.anchorTime?this.scheduleOnce(this.anchorTimeStart,0):this.schedule(this.anchorTimeStart,1,this.anchorTime-1)},e.prototype.anchorTimeStart=function(){var t,e,i,o=this;if(this.anchorTime-=1,this.anchorTime<0&&(this.anchorTime=0),this.ui_anchortimenum.text=this.anchorTime+"s",this.ui_spectatorTimenum.text=this.anchorTime+"s",this.anchorTime<=0){if(this.ui_btn_anchorPlayer.visible=!0,this.ui_btn_anchorChat.visible=!0,this.ui_anchorTime.visible=!1,this.ui_spectatorTime.visible=!1,null===(t=this.playerOnline)||void 0===t||t.Hide(),null===(e=this.betInfo)||void 0===e||e.Hide(),null===(i=this.rmChat)||void 0===i||i.Hide(),0==this.controller.Model.anchorID)return;2==this.controller.Model.ID&&fgui.GTween.to2(this.ui_btn_zhubo.x,this.ui_btn_zhubo.y,this.ui_btn_zhubo.x,1150,.5).setTarget(this.ui_btn_zhubo,this.ui_btn_zhubo.setPosition).onComplete(function(){cc.isValid(o.ui_btn_zhubo)&&(o.ui_btn_zhubo.visible=!1,o.ui_btn_zhubo.y=1150)}),3==this.controller.Model.ID&&(this.ui_btn_anchorbetting.y=915,this.ui_btn_anchorbetting.visible=!0,this.ui_btn_zhubo.visible=!1,this.ui_betstops.visible=!0,this.scheduleOnce(function(){o.ui_betstops.visible=!1},1),this.rmBoardView.fguiComponent.getTransition("t0").playReverse(function(){o.rmBoardView.Hide()}),this.ui_centercom.getTransition("t3").playReverse(),this.players[4].visible=!0,this.ui_myInfo4.visible=!0,this.ui_btn_queue.visible=!0,this.ui_anchorname.visible=!0,this.ui_anchornameLan.text=this.players[4].nickName2,this.ui_queuelist.visible=!0)}},e.prototype.showUIById=function(){this.controller.Model.rule&&this.controller.Model.rule.length>0&&(0==this.controller.Model.anchorID?(this.ui_nozhubo.visible=!0,this.ui_btn_queue.visible=!0,this.ui_request.visible=!0):(this.ui_nozhubo.visible=!1,this.ui_btn_queue.visible=!1,this.ui_request.visible=!1)),u.AudioManager.Singleton.stopBGM(),u.AudioManager.Singleton.playBGM("rummyplusbg");var t=this.controller.Model.ID;2==t?(this.ui_btn_anchorPlayer.visible=!0,this.ui_btn_anchorChat.visible=!0):3==t||(this.ui_btn_anchorPlayer.visible=!1,this.ui_btn_anchorChat.visible=!1,this.ui_btn_anchorbetting.visible=!1,this.ui_btn_zhubo.visible=!1,this.ui_btn_prepare.visible=!0)},e.prototype.showState=function(){var t=this.controller.Model.ID,e=this.controller.Model.entertable,i=e.status,o=e.leftTime;if(this.ui_btn_anchorPlayer.visible=!0,this.ui_btn_anchorChat.visible=!0,this.ui_anchorTime.visible=!1,this.ui_spectatorTime.visible=!1,this.ui_btn_anchorbetting.visible=!1,this.ui_btn_zhubo.visible=!1,1==i&&(this.ui_myInfo.visible=!1,this.players[0].visible=!1),2==t)1==i?(this.ui_nozhubo.visible=!0,this.ui_btn_queue.visible=!0,this.ui_request.visible=!0):2==i?this.controller.cs_anchorready_rummy2():3==i?(this.controller.Model.bstate=1,this.ui_btn_zhubo.visible=!0,this.ui_btn_zhubo.alpha=1,this.showAnchortime(Math.floor(o/1e3))):this.gameReconnection();else if(3==t)if(this.controller.Model.anchorID&&(u.AudioManager.Singleton.stopBGM(),u.AudioManager.Singleton.playBGM("rummy2gz")),this.controller.Model.anchorID&&6!=i&&this.controller.cs_getgamble_rummy2(),this.controller.Model.bstate=0,1==i)this.ui_nozhubo.visible=!0,this.ui_btn_queue.visible=!0,this.ui_request.visible=!0;else if(3==i){var s=Math.floor(o/1e3);this.showAnchortime(s),this.rmBoardView.fguiComponent.visible=!0,this.controller.Model.bstate=1}else this.ui_btn_anchorPlayer.visible=!0,this.ui_btn_anchorChat.visible=!0,this.ui_btn_anchorbetting.visible=!0,this.ui_btn_queue.visible=!0,this.ui_anchorname.visible=!0,this.ui_anchornameLan.text=this.players[4].nickName2,this.ui_centercom.getTransition("t3").playReverse(),this.gameReconnection()},e.prototype.showPlayer=function(){this.playerOnline?this.playerOnline.Show():this.playerOnline=this.addFguiComponent(V.default,!0)},e.prototype.showBetInfo=function(){var t=this;3==this.controller.Model.ID?this.rmBoardView.fguiComponent.visible?this.rmBoardView.fguiComponent.getTransition("t0").playReverse(function(){t.rmBoardView.Hide()}):this.rmBoardView.Show(!0):2==this.controller.Model.ID&&(this.betInfo?this.betInfo.Show():this.betInfo=this.addFguiComponent(U.default,!0))},e.prototype.filedAnchor=function(){var t=this;if(a.AppConst.mPlayerModel.bReCharge){u.AudioManager.Singleton.play("","btn_click");var e="1"==a.AppConst.languageType?"english":"hindi",i=this.myGold;if(3==this.controller.Model.ID&&(i=this.rmBoardView.gold),i<8e3*this.controller.Model.baserate){if(this.ui_anchorNomoney.visible)return;var o=this.ui_request.visible;this.ui_request.visible=!1,this.ui_anchorNomoney.visible=!0;var s=v.UIUtil.formatNumber100(8e3*this.controller.Model.baserate),n=xgameTable.getComplanguageArenaById(10)[e];return this.ui_anchorNomoneytext.text=n.replace("80",s+""),void this.scheduleOnce(function(){t.ui_anchorNomoney.visible=!1,t.ui_request.visible=o},2)}this.controller.Model.ranking?(n=xgameTable.getComplanguageArenaById(14)[e],p.CommonCtr.instance.ShowTipCallback(n,function(){t.controller.cs_cancellineup_rummy2()},function(){var t;null===(t=p.CommonCtr.instance.view)||void 0===t||t.Hide()})):this.controller.cs_applylineup_rummy2()}else this.showUpDownAddCash()},e.prototype.hasAnchor=function(){this.controller.Model.bstate=1,u.AudioManager.Singleton.play("","rummy2an"),this.ui_nozhubo.visible=!1,2==this.controller.Model.ID&&(this.ui_btn_queue.visible=!1),this.ui_request.visible=!1},e.prototype.showUpDownAddCash=function(){this.toAddCash?this.toAddCash.Show():this.toAddCash=this.addFguiComponent(L.default,!0)},e.prototype.showAddCash=function(){this.addCash?this.addCash.Show():this.addCash=this.addFguiComponent(T.default);var t;t=this.controller.Model.ID<3?this.myGold:this.rmBoardView.gold,this.addCash.init(this.controller.Model.tableid,t)},e.prototype.gameStartTimes=function(){this.ui_statrWaitone.visible=!1,this.ui_statrWait.visible=!0,this.tipsTimes=3,this.ui_waittimeer.text="3",this.ui_statrWait.getTransition("t0").play(),this.unschedule(this.startGameTimes),this.schedule(this.startGameTimes,1,2)},e.prototype.startGameTimes=function(){var t=this;this.tipsTimes-=1,this.ui_waittimeer.text=this.tipsTimes+"",3==this.tipsTimes||this.tipsTimes<=0&&this.scheduleOnce(function(){cc.isValid(t.ui_statrWait)&&(t.ui_statrWait.visible=!1)},.5)},e.prototype.showPlayerByTime=function(t){var e=this;this.scheduleOnce(function(){e.addNewPlayer(t)},+(3*Math.random()).toFixed(1))},e.prototype.showWait=function(t,e,i){if(console.log("========showWait========",t,e,i),2==this.controller.Model.ID)this.cleanTableByState();else if(1==this.controller.Model.ID&&(e?(this.ui_viewcom.visible=!1,this.ui_statrWait.visible=t,this.ui_statrWait.getController("c1").setSelectedIndex(e?0:1),this.tipsTimes=i,this.ui_waittimeer.text=i+"",this.ui_statrWait.getTransition("t0").play(),this.unschedule(this.startGameTimes),this.schedule(this.startGameTimes,1,i-1)):this.ui_viewcom.visible=!0,cc.log("--------start--------",this.ready,this.gameState),0==this.ready&&0==this.gameState)){if(this.ui_pokerDropMask.visible&&this.ui_nomoney.visible)return;this.controller.cs_ready_rummy()}},e.prototype.showWaitTimes=function(){this.ui_viewcom.visible=!1,this.ui_statrWait.visible=!0,this.ui_statrWait.getController("c1").setSelectedIndex(0),this.tipsTimes=3,this.ui_waittimeer.text="3",this.ui_statrWait.getTransition("t0").play(),this.unschedule(this.startGameTimes),this.schedule(this.startGameTimes,1,2)},e.prototype.showResout=function(){this.ui_viewcom.visible=!1,this.resoutPanel.Show()},e.prototype.showTips=function(t,e,i){if(void 0===i&&(i=1),!t)return this.ui_myTips.visible=!1,void this.unschedule(this.startTipTimes);this.tipsControlle.setSelectedIndex(i),this.ui_myTips.visible=!0,this.ui_tipstitle.text=t,e>0&&(this.tipsTimes=e,this.ui_tipstimes.text=this.tipsTimes+"",this.unschedule(this.startTipTimes),this.schedule(this.startTipTimes,1,e-1))},e.prototype.startTipTimes=function(){this.tipsTimes-=1,1==this.tipsTimes&&3!=this.controller.Model.ID&&this.hupai(null),this.tipsTimes<0||(this.ui_tipstimes.text=this.tipsTimes+"")},e.prototype.addNewPlayer=function(t){var e=this.transformationPos(t.tpos);if(this.controller.Model.anchorData?(e=0,this.changeData=!0):this.changeData=!1,this.players[e].initData(t),3==this.controller.Model.ID&&1==t.tpos){if(0==e)return;this.initGZPanel(t.gold)}},e.prototype.transformationPos=function(t){if(3==this.controller.Model.ID){var e=t-1;return e<=0&&(e+=4),e}var i=t-this.controller.Model.myPos;return i<0&&(i=4+i),i>3&&(i=0),i},e.prototype.playerInfo=function(t){var e=this.transformationPos(t);return[this.players[e].headId,this.players[e].nickName]},e.prototype.getPlayerPos=function(t){for(var e=0;e<5;e++)if(!this.players[e].seatEmpty&&this.players[e].userid==t)return this.players[e].pos},e.prototype.enabledBtn=function(t){this.ui_btn_transposition.enabled=t,this.ui_btn_transposition.touchable=t,t?this.ui_menu.getController("c1").setSelectedIndex(0):this.ui_menu.getController("c1").setSelectedIndex(1)},e.prototype.gameStart=function(){return r(this,void 0,void 0,function(){var t,e,i,o,s=this;return l(this,function(n){switch(n.label){case 0:return this.clean(),this.gameCount+=1,this.gameCount<=10&&y.default.Singleton.report("Game_level_"+this.gameCount),this.ui_viewcom.visible=!1,this.otherHupai=!1,this.isshowResout=!0,a.AppConst.isGoldCosted=!0,this.animationPlayOver=!1,this.ui_statrWait.visible=!1,this.ui_statrWaitone.visible=!1,this.gameState=1,this.ui_cardEff.x=1095,this.ui_cardEff.visible=!0,this.ui_finishbg.visible=!0,this.ui_finish.visible=!0,this.resoutPanel.cleanList(),this.mopaiNow=!1,this.dapaiCount=0,this.isZahu=!1,[4,this.sendPokerDing()];case 1:return n.sent(),u.AudioManager.Singleton.play("","rummyDeal"),this.recoveryPoker(),t=this.controller.Model.tablestartData,this.commonPoker2=t.WildCard,this.checkWildStar(t.WildCard[0],t.WildCard[1]),[4,this.sendPoker()];case 2:for(n.sent(),this.isMeHupai=!1,this.controller.Model.selectCard.length=0,this.myPokers.length>0&&(this.startSortPoker(null),3!=this.controller.Model.ID&&(this.ui_btn_sort.visible=!0)),e=0;e<t._pos2id.length;e++)i=this.transformationPos(t._pos2id[e].pos),this.players[i].userid!=t._pos2id[e].val&&this.players[i].exit();return o=this.transformationPos(t.BPos),this.giveupPoker.push(t.dipai),this.ui_LeprosyCard.url=this.pokerResStart+t.WildCard[1],this.ui_LeprosyCard2.url=this.pokerResStart+t.WildCard[0],this.ui_btn_pokerback.visible=!0,this.startEff.play(function(){s.ui_closeNum.visible=!0,s.ui_openNum.visible=!0,s.closeNum=t._leftmj-2,s.ui_closeNum.setVar("num",s.closeNum+"").flushVars(),s.ui_openNum.setVar("num","1").flushVars(),s.ui_OutCard.url=s.pokerResStart+t.dipai,16==t.dipai||17==t.dipai||t.dipai%100==s.commonPoker[0]%100||t.dipai%100==s.commonPoker[1]%100?s.ui_OutCard.color=cc.Color.set(s.outPokerColor,255,232,127):s.ui_OutCard.color=cc.Color.set(s.outPokerColor,255,255,255),3!=s.controller.Model.ID&&(s.ui_btn_outlog.visible=!0),t.BPos==s.controller.Model.myPos&&(s.showArrow(!0),s.scheduleOnce(s.showPickTip,5)),s.players[o].getDrop()||s.players[o].startOpt(),s.animationPlayOver=!0},1),[2]}})})},e.prototype.checkWildStar=function(t,e){var i,o;i=16==t||17==t?214:t,o=16==e||17==e?214:e,this.commonPoker=[i,o]},e.prototype.advancePlayOver=function(){var t=this;return new Promise(function(e){t.unscheduleAllCallbacks(),t.recoveryPoker();var i=t.controller.Model.tablestartData;if(i)t.commonPoker2=i.WildCard,t.checkWildStar(i.WildCard[0],i.WildCard[1]);else{var o=t.controller.Model.entertable._recover;t.commonPoker2=o.wildCard,t.checkWildStar(o.wildCard[0],o.wildCard[1])}t.myCards.length=0,t.sortCards[0]=[],t.myPokers.length=0;for(var s=3==t.controller.Model.ID,n=0;n<i._pos2tile.length;n++)if(i._pos2tile[n].pos==t.controller.Model.myPos&&t.mySitDown||3==t.controller.Model.ID&&1==i._pos2tile[n].pos)for(var r=0;r<i._pos2tile[n].vallist.length;r++){var l=t.createPoker();t.myPokers[r]=l,t.myCards[r]=i._pos2tile[n].vallist[r],t.sortCards[0][r]=i._pos2tile[n].vallist[r],t.ui_pokerNode.addChild(l),l.node.y=-760,l.setData(i._pos2tile[n].vallist[r],!s)}t.isMeHupai=!1,3!=t.controller.Model.ID&&(t.ui_btn_sort.visible=!0),t.controller.Model.selectCard.length=0,t.startSortPoker(null),t.giveupPoker.length=0,t.giveupPoker.push(i.dipai),t.ui_LeprosyCard.url=t.pokerResStart+i.WildCard[1],t.ui_LeprosyCard2.url=t.pokerResStart+i.WildCard[0],t.startEff.timeScale=5,t.startEff.play(function(){t.startEff.timeScale=1,t.ui_closeNum.visible=!0,t.ui_openNum.visible=!0,t.closeNum=i._leftmj-2,t.ui_closeNum.setVar("num",t.closeNum+"").flushVars(),t.ui_openNum.setVar("num","1").flushVars(),t.ui_OutCard.url=t.pokerResStart+i.dipai,16==i.dipai||17==i.dipai||i.dipai%100==t.commonPoker[0]%100||i.dipai%100==t.commonPoker[1]%100?t.ui_OutCard.color=cc.Color.set(t.outPokerColor,255,232,127):t.ui_OutCard.color=cc.Color.set(t.outPokerColor,255,255,255),3!=t.controller.Model.ID&&(t.ui_btn_outlog.visible=!0),e(!0)},1)})},e.prototype.sendPokerDing=function(){var t=this;return new Promise(function(e){var i=t.controller.Model.tablestartData;t.controller.Model.nowTokenPos=i.BPos;for(var o=t.transformationPos(i.BPos),s=function(s){var n=t.transformationPos(i.dices[s].pos),r=t.createPoker();t.ui_pokerNode.addChild(r),r.node.scale=.6,r.node.setPosition(t.ui_cardStart.node.position),r.setData(i.dices[s].val,!1,!0),r.node.runAction(cc.sequence(cc.moveTo(.05+.1*s,t.sendPokerPoint[n].x,t.sendPokerPoint[n].y),cc.callFunc(function(){o==n&&r.showEff(),s==i.dices.length-1&&(t.players[o].setZhuang(),t.scheduleOnce(function(){e(!0),console.log("==============dingz over")},2))})))},n=0;n<i.dices.length;n++)s(n)})},e.prototype.sendPoker=function(){var t=this;return new Promise(function(e){t.myCards.length=0,t.sortCards[0]=[],t.myPokers.length=0;for(var i=t.controller.Model.tablestartData,o=function(o){if(i._pos2tile[o].pos==t.controller.Model.myPos&&t.mySitDown||3==t.controller.Model.ID&&1==i._pos2tile[o].pos){if(0==i._pos2tile[o].vallist.length)return e(!0),{value:void 0};u.AudioManager.Singleton.play("","rummyDealFlip");for(var s=[],n=0,r=i._pos2tile[o].vallist.length;n<r;n++){var l=t.createPoker();l.setData(18,!1),l.node.scale=.8,l.node.setPosition(t.ui_cardStart.node.position),t.ui_pokerNode.addChild(l),s.push(l)}var a=3==t.controller.Model.ID,h=function(n){var r=s.pop();t.myPokers[n]=r,t.myCards[n]=i._pos2tile[o].vallist[n],t.sortCards[0][n]=i._pos2tile[o].vallist[n],0==n&&t.scheduleOnce(function(){u.AudioManager.Singleton.play("","rummyJokerSelect1")},.1),r.node.runAction(cc.sequence(cc.delayTime(.25+.05*n),cc.spawn(cc.scaleTo(.1,1,1),cc.moveTo(.15,350+130*n,-760),cc.sequence(cc.delayTime(.1),cc.callFunc(function(){t.ui_pokerNode.setChildIndex(r,n)}))),cc.delayTime(.8+-.05*n),cc.scaleTo(.25,0,1),cc.callFunc(function(){r.setData(i._pos2tile[o].vallist[n],!a)}),cc.scaleTo(.2,1,1),cc.moveTo(.2,1160,-760),cc.delayTime(.1),cc.callFunc(function(){n==i._pos2tile[o].vallist.length-1&&(console.log("==============first card end"),e(!0))})))};for(n=0,r=i._pos2tile[o].vallist.length;n<r;n++)h(n)}},s=0;s<i._pos2tile.length;s++){var n=o(s);if("object"==typeof n)return n.value}})},e.prototype.showWaitTurn=function(){this.ui_waitTurn.visible=!1},e.prototype.takePokerFromSurplus=function(){if(cc.log("---------------",this.gameState,this.mopaiNow,this.controller.Model.ID,this.players[0].isCanOperation),C.WebSocketManager.getInstance.webSocket.getConnectState()&&0!=this.gameState&&!this.mopaiNow&&3!=this.controller.Model.ID){if(!this.players[0].isCanOperation){if(this.myDrop||this.hasMopai)return;return this.ui_waitTurn.visible=!0,this.unschedule(this.showWaitTurn),void this.scheduleOnce(this.showWaitTurn,2)}this.mopaiNow=!0,this.players[0].isCanOperation=!1,this.fromMopai=0,this.controller.cs_mopai_rummy(0)}},e.prototype.takePokerFromRight=function(){if(cc.log("---------------",this.gameState,this.mopaiNow,this.controller.Model.ID,this.players[0].isCanOperation),C.WebSocketManager.getInstance.webSocket.getConnectState()&&0!=this.gameState&&!this.mopaiNow&&3!=this.controller.Model.ID){if(!this.players[0].isCanOperation){if(this.myDrop||this.hasMopai)return;if(!this.ui_OutCard.url)return;return this.ui_waitTurn.visible=!0,this.unschedule(this.showWaitTurn),void this.scheduleOnce(this.showWaitTurn,2)}this.mopaiNow=!0,this.players[0].isCanOperation=!1,this.fromMopai=1,this.controller.cs_mopai_rummy(1)}},e.prototype.mopai=function(t,e){var i=this;this.mopaiNow=!1,this.unschedule(this.showPickTip),this.ui_pickTip.visible=!1,this.showArrow(!1),this.players[0].isCanOperation=!1;var o=this.createPoker();this.ui_pokerNode.addChild(o),o.setData(t,!0),this.myPokers.push(o),0==this.fromMopai?o.node.setPosition(this.ui_btn_pokerback.node.position.x+75,this.ui_btn_pokerback.node.position.y-105):o.node.setPosition(this.ui_OutCard.node.position.x+75,this.ui_OutCard.node.position.y-105),o.node.scale=.5,this.hasMopai=!0,this.ui_pokerNode.setChildIndex(o,20),this.myCards.push(t),this.isFinish=e,this.ui_btn_discard.visible=!1;var s=Object.keys(this.sendCardData);if(o.groupIndex=this.sendCardData[s[s.length-1]][0].groupIndex,1==this.fromMopai){this.giveupPoker.pop(),this.ui_OutCard.url=this.pokerResStart+this.giveupPoker[this.giveupPoker.length-1];var n=this.giveupPoker[this.giveupPoker.length-1];16==n||17==n||n%100==this.commonPoker[0]%100||n%100==this.commonPoker[1]%100?this.ui_OutCard.color=cc.Color.set(this.outPokerColor,255,232,127):this.ui_OutCard.color=cc.Color.set(this.outPokerColor,255,255,255),this.ui_openNum.setVar("num",this.giveupPoker.length+"").flushVars()}var r=this.startPos2+13*this.cardSpacing2+(s.length-1)*this.groupSpacing;o.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1,1),cc.moveTo(.2,r,-760)),cc.callFunc(function(){1==i.fromMopai||(i.closeNum--,i.closeNum<0&&(i.closeNum=0),0==i.closeNum&&(cc.log("----------------no card--------"),i.ui_btn_pokerback.visible=!1,i.ui_cardEff.visible=!1),i.ui_closeNum.setVar("num",i.closeNum+"").flushVars()),i.arrangementPoint()})))},e.prototype.noticeSomeMopai=function(t){return r(this,void 0,void 0,function(){var e,i,o,s,n,r,a,h=this;return l(this,function(l){switch(l.label){case 0:return this.animationPlayOver?[3,2]:(this.animationPlayOver=!0,[4,this.advancePlayOver()]);case 1:l.sent(),l.label=2;case 2:return u.AudioManager.Singleton.play("","rummyCardSlide"),1==t.cardPos&&this.ui_outPokerPanel.visible&&this.ui_outPokerList.removeChildToPoolAt(0),this.controller.Model.nowTokenPos=t._pos,t._pos!=this.controller.Model.myPos&&(e=this.transformationPos(t._pos),i=this.createPoker(),this.ui_pokerNode.addChild(i),1==t.cardPos?(i.setData(this.giveupPoker[this.giveupPoker.length-1],!1),i.node.setPosition(this.ui_OutCard.node.position.x+75,this.ui_OutCard.node.position.y-105)):(this.closeNum--,this.closeNum<0&&(this.closeNum=0),this.ui_closeNum.setVar("num",this.closeNum+"").flushVars(),i.setData(18,!1),i.node.setPosition(this.ui_btn_pokerback.node.position.x+75,this.ui_btn_pokerback.node.position.y-105)),i.node.scale=.7,1==t.cardPos&&(this.giveupPoker.pop(),this.ui_openNum.setVar("num",this.giveupPoker.length+"").flushVars(),this.ui_OutCard.url=this.pokerResStart+this.giveupPoker[this.giveupPoker.length-1],16==(o=this.giveupPoker[this.giveupPoker.length-1])||17==o||o%100==this.commonPoker[0]%100||o%100==this.commonPoker[1]%100?this.ui_OutCard.color=cc.Color.set(this.outPokerColor,255,232,127):this.ui_OutCard.color=cc.Color.set(this.outPokerColor,255,255,255)),s={x:this.players[e].node.x,y:this.players[e].node.y},n=.6,3==this.controller.Model.ID&&1==t._pos&&(this.myPokers.push(i),this.myCards.push(t._pai),i.setData(t._pai,!1),r=Object.keys(this.sendCardData),a=this.sendCardData[r[r.length-1]][0].groupIndex,i.groupIndex=a,s={x:2080,y:-760},n=1),i.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,n,n),cc.moveTo(.25,s.x,s.y)),cc.callFunc(function(){3!=h.controller.Model.ID||3==h.controller.Model.ID&&1!=t._pos?(h.ui_pokerNode.removeChild(i),h.addPoker(i)):h.arrangementPoint()})))),0==this.closeNum&&(cc.log("----------------no card--------"),this.ui_btn_pokerback.visible=!1,this.ui_cardEff.visible=!1),[2]}})})},e.prototype.setCurrentPoker=function(t){this.currentPoker=t},e.prototype.outPoker=function(){if(this.hasMopai&&this.currentPoker){this.hasMopai=!1;var t=this.currentPoker.sid;this.controller.cs_dapai_rummy(t,this.sortCards)}},e.prototype.playDelPoker=function(t){var e=this;u.AudioManager.Singleton.play("","rummyPickDiscard"),this.controller.Model.nowTokenPos=t._nextPos;var i=this.transformationPos(t._pos);if(this.players[i].stopTime(),this.ui_outPokerPanel.visible){var o=this.ui_outPokerList.getFromPool();o.getChild("outPokerItem").asLoader.url=this.pokerResStart+t._card,this.ui_outPokerList.addChildAt(o,0)}if(t._pos==this.controller.Model.myPos&&this.mySitDown||3==this.controller.Model.ID&&1==t._pos){this.mopaiNow=!1,this.finishView.fguiComponent.visible=!1,this.hasMopai&&0==this.isZahu&&(this.dapaiCount+=1,this.dapaiCount),this.hasMopai=!1;var s=-1,n=void 0;if(this.currentPoker&&this.currentPoker.sid==t._card)s=this.myPokers.indexOf(this.currentPoker),n=this.currentPoker.sid;else for(var r=0;r<this.myPokers.length;r++)this.myPokers[r].sid==t._card&&(s=r,n=this.myPokers[r].sid);if(-1!=s){this.myCards.splice(this.myCards.indexOf(n),1);var l=this.sortCards[this.myPokers[s].groupIndex];l&&l.splice(this.myCards.indexOf(n),1),I.Rummy2.AddorRemoveSelect(this.myPokers[s],!1);var a=this.myPokers[s];this.myPokers.splice(s,1),this.arrangementPoint(),a.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,.8,.8),cc.moveTo(.25,this.ui_OutCard.node.position.x+75,this.ui_OutCard.node.position.y-105)),cc.callFunc(function(){e.ui_pokerNode.removeChild(a),e.addPoker(a),e.currentPoker=null,e.giveupPoker.push(t._card),e.ui_openNum.setVar("num",e.giveupPoker.length+"").flushVars(),e.ui_OutCard.url=e.pokerResStart+t._card,16==t._card||17==t._card||t._card%100==e.commonPoker[0]%100||t._card%100==e.commonPoker[1]%100?e.ui_OutCard.color=cc.Color.set(e.outPokerColor,255,232,127):e.ui_OutCard.color=cc.Color.set(e.outPokerColor,255,255,255),e.ExecutePlayer(t._nextPos)})))}}else{var h=this.createPoker();this.ui_pokerNode.addChild(h),h.setData(t._card,!1),h.node.setPosition(this.players[i].node.x,this.players[i].node.y),h.node.scale=.3,h.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,.8,.8),cc.moveTo(.25,this.ui_OutCard.node.position.x+75,this.ui_OutCard.node.position.y-105)),cc.callFunc(function(){e.ui_pokerNode.removeChild(h),e.addPoker(h),e.giveupPoker.push(t._card),e.ui_openNum.setVar("num",e.giveupPoker.length+"").flushVars(),e.ui_OutCard.url=e.pokerResStart+t._card,16==t._card||17==t._card||t._card%100==e.commonPoker[0]%100||t._card%100==e.commonPoker[1]%100?e.ui_OutCard.color=cc.Color.set(e.outPokerColor,255,232,127):e.ui_OutCard.color=cc.Color.set(e.outPokerColor,255,255,255),e.ExecutePlayer(t._nextPos)})))}},e.prototype.ExecutePlayer=function(t,e){void 0===e&&(e=20);var i=this.transformationPos(t);this.players[i].getTimeNow()||this.players[i].startOpt(e),t==this.controller.Model.myPos&&this.mySitDown?(u.AudioManager.Singleton.play("","your_turn"),e>5&&this.scheduleOnce(this.showPickTip,5),this.showArrow(!0),this.ui_btn_declare.visible=!1,this.ui_btn_group.visible=!1,this.ui_btn_discard.visible=!1,this.controller.Model.selectCard.length>1&&(this.ui_btn_group.visible=!0)):(this.ui_btn_declare.visible=!1,this.ui_btn_discard.visible=!1)},e.prototype.spliceGroup=function(){var t=this.controller.Model.selectCard;if(!(t.length<2)){var e=!1;if(t.length>1){for(var i=0;i<t.length;i++)if(1==this.sendCardData[t[i].groupIndex].length){e=!0;break}var o=Object.keys(this.sendCardData).length;o<6&&o>0&&(e=!0)}if(e){u.AudioManager.Singleton.play("","rummyGroup"),this.ui_btn_group.visible=!1;for(var s=0;s<this.myPokers.length;s++)this.myPokers[s].groupIndex=this.myPokers[s].groupIndex+1;this.controller.Model.selectCard.forEach(function(t){t.groupIndex=0,t.select=!1}),this.arrangementPoint()}else{var n="1"==a.AppConst.languageType?"english":"hindi";p.CommonCtr.instance.ShowTipLabel(xgameTable.getComplanguageRummyById(48)[n])}}},e.prototype.addNewGroup=function(t){if(!this.addNewGroupBool)if(this.addNewGroupBool=!0,Object.keys(this.sendCardData).length>=6)this.arrangementPoint();else{var e=Object.keys(this.sendCardData);t.groupIndex=this.sendCardData[e[e.length-1]][0].groupIndex+1,this.arrangementPoint()}},e.prototype.initResolution=function(){var t=cc.winSize.width/1920;t>1&&(this.cardSpacing=Math.floor(this.cardSpacing*t),this.startPos=Math.floor(this.startPos-this.startPos*(t-1)))},e.prototype.arrangementPoint=function(){this.sendCardData=null,this.sendCardData={},this.ui_btn_group.visible=!1;for(var t=0;t<this.myPokers.length;t++)this.ui_pokerNode.setChildIndex(this.myPokers[t],t),this.myPokers[t].select=!1,this.sendCardData[this.myPokers[t].groupIndex]||(this.sendCardData[this.myPokers[t].groupIndex]=[]),this.sendCardData[this.myPokers[t].groupIndex].push(this.myPokers[t]);cc.log("-----------------",this.sendCardData);var e=this.startPos,i=this.cardSpacing,o=Object.keys(this.sendCardData).length;95==this.cardSpacing?i=o<=3?115:4==o?105:5==o?100:93:this.cardSpacing>95&&(e-=o<=4?10:5==o?20:30),this.startPos2=e,this.cardSpacing2=i,this.sortCards=[],this.recoveryTitle();var s=0,n=this.wildPokerSid();for(var r in this.groupType.length=0,this.groupTypePoints.length=0,this.sendCardData){var l=this.createGroupTitle();this.ui_groupNode.addChild(l),this.sortCards[s]=[],l.x=e-95,l.y=832,l.width=194*this.sendCardData[r].length-(this.sendCardData[r].length-1)*(194-i);var a=I.Rummy2.GetRummyTypeWild(this.getPokerSid(this.sendCardData[r]),n),u=this.checkPokerPoints(this.sendCardData[r]);for(this.groupType[s]=a,this.groupTypePoints[s]=u,t=0;t<this.sendCardData[r].length;t++)this.sendCardData[r][t].node.x=e,this.sendCardData[r][t].node.y=-760,e+=i,this.sortCards[s][t]=this.sendCardData[r][t].sid;e+=this.groupSpacing,s++}this.controller.Model.selectCard.length=0,this.checkGroupType(),this.ui_allPoints.text=(this.allPoints>80?80:this.allPoints)+"",this.ui_allPoints4.text=(this.allPoints>80?80:this.allPoints)+"",1==this.controller.Model.ID?this.otherHupai&&this.ui_myTips.visible&&this.controller.cs_makecard_rummy(this.sortCards):2==this.controller.Model.ID&&13==this.myPokers.length&&this.controller.cs_makecard_rummy(this.sortCards)},e.prototype.anchorCard=function(t){if(3==this.controller.Model.ID){this.sortCards=t;var e=3==this.controller.Model.ID,i=0;if(!(this.myPokers.length<13)){for(var o=0;o<this.sortCards.length;o++)for(var s=0;this.sortCards[o]&&s<this.sortCards[o].length;s++)this.myPokers[i].setData(this.sortCards[o][s],!e),this.myPokers[i].groupIndex=o,this.ui_pokerNode.setChildIndex(this.myPokers[i],i),this.myCards[i]=this.sortCards[o][s],i++;if(14==this.myPokers.length){var n=this.myPokers.pop();n.removeFromParent(),this.addPoker(n)}this.arrangementPoint()}}},e.prototype.checkGroupType=function(){this.allPoints=0;var t,e=-1;this._first_group=!1,this._second_group=!1,this.needLife=0;var i=0;t=this.groupType.lastIndexOf(14);for(var o=0;o<this.groupType.length;o++)-1!=t&&this.groupType[o]>2&&o!=t&&(e=o);var s="1"==a.AppConst.languageType?"english":"hindi";for(-1!=t&&((n=this.ui_groupNode.getChildAt(t)).setColor(0),n.setTitle(xgameTable.getComplanguageRummyById(51)[s]),this._first_group=!0,i+=1),-1!=e&&((n=this.ui_groupNode.getChildAt(e)).setColor(0),n.setTitle(xgameTable.getComplanguageRummyById(52)[s]),this._second_group=!0,i+=1),o=0;o<this.groupType.length;o++){var n;o!=t&&o!=e&&((n=this.ui_groupNode.getChildAt(o)).initData(this.groupType[o],this.groupTypePoints[o]),-1==t&&-1==e&&this.groupType[o]>2?(n.setTitle(xgameTable.getComplanguageRummyById(58)[s]),n.setColor(3),this.needLife=1):-1==t||-1!=e||1!=this.groupType[o]&&2!=this.groupType[o]?-1!=t||-1!=e||1!=this.groupType[o]&&2!=this.groupType[o]?-1!=t&&-1!=e&&this.groupType[o]>0&&(i+=1):(n.setTitle(xgameTable.getComplanguageRummyById(58)[s]),n.setColor(3)):(n.setTitle(xgameTable.getComplanguageRummyById(59)[s]),n.setColor(3),this.needLife=2))}if(i>this.effectiveGroup){o=0;for(var r=i-this.effectiveGroup;o<r;o++)u.AudioManager.Singleton.play("","rummyPositiveGroup")}this.effectiveGroup=i},e.prototype.getPokerSid=function(t){var e=[];return t.forEach(function(t){e.push(t.sid)}),e},e.prototype.wildPokerSid=function(){var t=this.commonPoker[0]%100,e=this.commonPoker[1]%100;return t==e?[16,17,100+t,200+t,300+t,400+t]:[16,17,100+t,200+t,300+t,400+t,100+e,200+e,300+e,400+e]},e.prototype.checkPokerPoints=function(t){for(var e=0,i=this.commonPoker[0]%100,o=this.commonPoker[1]%100,s=0;s<t.length;s++){var n=t[s].points;16==n||17==n||n==i||n==o||(e+=n>10?10:n)}return e},e.prototype.moveEnd=function(t){if(!this.addNewGroupBool){this.myPokers=this.myPokers.sort(function(t,e){return t.node.x-e.node.x}),t.select=!1;for(var e=0;e<this.myPokers.length;e++)if(this.myPokers[e]==t){var i=this.myPokers[e-1],o=this.myPokers[e+1];i&&o?i.groupIndex==o.groupIndex?this.myPokers[e].groupIndex=i.groupIndex:t.node.x-i.node.x<o.node.x-t.node.x?this.myPokers[e].groupIndex=i.groupIndex:this.myPokers[e].groupIndex=o.groupIndex:this.myPokers[e].groupIndex=i&&!o?i.groupIndex:o.groupIndex}this.ui_btn_discard.visible=!1,this.otherHupai||(this.ui_btn_declare.visible=!1),this.arrangementPoint()}},e.prototype.GroupBtn=function(t){this.isCanHupai=!1;var e=this.controller.Model.selectCard;if(0==e.length)return this.ui_btn_discard.visible=!1,void(this.otherHupai||(this.ui_btn_declare.visible=!1));if(this.ui_btn_group.visible=e.length>1,1!=e.length||this.hasMopai)if(e.length>1||this.otherHupai)this.ui_btn_discard.visible=!1;else{var i=0,o=0,s=-1,n=this.wildPokerSid(),r=0;for(var l in this.sendCardData){var a=this.ui_groupNode.getChildAt(i).getColor();1==a?o+=1:3==a&&(r+=1),t.groupIndex==+l&&(s=a),i++}var u,h=this.getPokerSid(this.sendCardData[t.groupIndex]);1==h.length?u=1:(h.splice(h.indexOf(t.sid),1),u=I.Rummy2.GetRummyTypeWild(h,n));var c=Object.keys(this.sendCardData);if(r!=c.length||1!=this.needLife)if(r<c.length&&r>0&&0==o)u>2?(this.setBtnDisOrDec(!0),this.isCanHupai=!0):this.setBtnDisOrDec(!1);else if(0==o)u>0?(this.setBtnDisOrDec(!0),this.isCanHupai=!0):this.setBtnDisOrDec(!1);else if(1==o)if(1!=s)this.setBtnDisOrDec(!1);else{if(r>0)return void(1==this.needLife?14==u?(this.setBtnDisOrDec(!0),this.isCanHupai=!0):this.setBtnDisOrDec(!1):2==this.needLife?u>2?(this.setBtnDisOrDec(!0),this.isCanHupai=!0):this.setBtnDisOrDec(!1):u>0?(this.setBtnDisOrDec(!0),this.isCanHupai=!0):this.setBtnDisOrDec(!1));u>0?(this.setBtnDisOrDec(!0),this.isCanHupai=!0):this.setBtnDisOrDec(!1)}else this.setBtnDisOrDec(!1);else 14==u?(this.setBtnDisOrDec(!0),this.isCanHupai=!0):this.setBtnDisOrDec(!1)}else this.ui_btn_discard.visible=!1},e.prototype.setBtnDisOrDec=function(t){3!=this.controller.Model.ID&&(this.ui_btn_declare.visible=t,this.ui_btn_discard.visible=!t)},e.prototype.startSortPoker=function(t,e){void 0===e&&(e=null),u.AudioManager.Singleton.play("","rummy_swipe"),null!=e&&e.length>0?this.sortCards=e:this.sortCards=I.Rummy2.GroupSort(this.myCards,this.commonPoker);for(var i=3==this.controller.Model.ID,o=0,s=0;s<this.sortCards.length;s++)for(var n=0;this.sortCards[s]&&n<this.sortCards[s].length;n++)this.myPokers[o].setData(this.sortCards[s][n],!i),this.myPokers[o].groupIndex=s,this.ui_pokerNode.setChildIndex(this.myPokers[o],o),this.myCards[o]=this.sortCards[s][n],o++;this.currentPoker=null,this.ui_btn_discard.visible=!1,this.arrangementPoint()},e.prototype.finishCard=function(){if(this.currentPoker)if(this.hasMopai||13!=this.myPokers.length){if(this.controller.Model.nowTokenPos!=this.controller.Model.myPos)return this.ui_btn_declare.visible=!1,this.ui_btn_discard.visible=!1,void this.arrangementPoint();if(this.isCanHupai){var t=0;for(var e in this.sendCardData){if(this.currentPoker.groupIndex==+e)break;t++}return 1==this.sortCards[t].length?this.sortCards.splice(t,1):this.sortCards[t].splice(this.sortCards[t].indexOf(this.currentPoker.sid),1),this.isMeHupai=!0,this.gameState=0,void this.controller.cs_finish_rummy(this.sortCards,!0,this.currentPoker.sid)}this.arrangementPoint()}else this.arrangementPoint()},e.prototype.hupai=function(){if(this.ui_btn_declare.visible=!1,this.ui_btn_sort.visible=!1,this.ui_btn_group.visible=!1,this.gameState=0,this.otherHupai)this.controller.cs_finish_rummy(this.sortCards,!1);else{this.isMeHupai=!0;var t=0;for(var e in this.sendCardData){if(this.currentPoker.groupIndex==+e)break;t++}1==this.sortCards[t].length?this.sortCards.splice(t,1):this.sortCards[t].splice(this.sortCards[t].indexOf(this.currentPoker.sid),1),this.controller.cs_finish_rummy(this.sortCards,!0,this.currentPoker.sid)}},e.prototype.setbtn_declare=function(){var t=this;this.ui_btn_declare.visible=!1,this.ui_btn_sort.visible=!1,this.isMeHupai?(this.players[0].stopTime(),this.scheduleOnce(function(){t.resoutPanel.Show()},.5)):(this.showTips("",0),2==this.controller.Model.ID&&(this.tipsTimes<10?this.resoutPanel.isshowTime=!1:(this.resoutPanel.isshowTimeNum=5,this.resoutPanel.isshowTime=!0),3==this.resoutPanel.getListNum()&&(this.resoutPanel.isshowTime=!1)),this.resoutPanel.Show());for(var e=0;e<this.myPokers.length;e++)this.myPokers[e].cleanEvent()},e.prototype.sc_startfinish_rummy_n=function(t){var e=this;console.log("==============other hu =======",t);var i=(t.score>80?80:t.score)*this.controller.Model.baserate*100;if(t.bStart){this.controller.Model.bstate=2;for(var o="",s=void 0,n=0;n<5;n++)if(!this.players[n].seatEmpty&&this.players[n].userid==t.hupos){o=this.players[n].getUserName(),s=this.players[n].pos,this.fisrtHuPos=s;break}var r,l=this.transformationPos(s);if(this.players[l].stopTime(),s==this.controller.Model.myPos)if(u.AudioManager.Singleton.play("","rummyWin"),this.currentPoker&&this.currentPoker.sid==t.card)r=this.currentPoker;else for(n=0;n<this.myPokers.length;n++)this.myPokers[n].sid==t.card&&(r=this.myPokers[n]);else{r=this.createPoker(),this.ui_pokerNode.addChild(r),r.setData(t.card,!1),r.node.setPosition(this.players[l].node.x,this.players[l].node.y),r.node.scale=.3,this.myCards.length>0&&!this.myDrop&&3!=this.controller.Model.ID&&(this.ui_btn_declare.visible=!0),this.otherHupai=!0;var h="1"==a.AppConst.languageType?"english":"hindi";this.showTips("[color=#FFD422]"+o+"[/color] "+xgameTable.getComplanguageRummyById(57)[h],t.time,1)}if(r){if(s==this.controller.Model.myPos){if(14==this.myPokers.length){var c=-1;for(n=0;n<this.myPokers.length;n++)if(this.myPokers[n]==this.currentPoker){c=n;break}this.myPokers.splice(c,1)}this.arrangementPoint()}r.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,.8,.8),cc.moveTo(.25,this.ui_finishCard.node.position.x+75,this.ui_finishCard.node.position.y-105)),cc.callFunc(function(){r.removeFromParent(),e.addPoker(r),e.ui_finishCard.url=e.pokerResStart+t.card})))}var p=void 0;if(0==t.hupos||(p=this.getPlayerPos(t.hupos),3!=this.controller.Model.ID&&this.resoutPanel.oneDataAdd(t.comCards,0-i,p,5,t.score,t.hupos,t.winScore)),3!=this.controller.Model.ID)for(n=0;n<t.dropInfo.length;n++){var m=this.getPlayerPos(t.dropInfo[n].pos);this.resoutPanel.oneDataAdd([],t.dropInfo[n].val,m,2,0,t.dropInfo[n].pos,t.winScore)}2==this.controller.Model.ID&&this.myDrop&&this.scheduleOnce(function(){e.tipsTimes<10?e.resoutPanel.isshowTime=!1:(e.resoutPanel.isshowTimeNum=5,e.resoutPanel.isshowTime=!0),3==e.resoutPanel.getListNum()&&(e.resoutPanel.isshowTime=!1),e.resoutPanel.Show()},.5)}else{for(p=void 0,n=0;n<this.players.length;n++)if(!this.players[n].seatEmpty&&this.players[n].userid==t.pos){p=this.players[n].pos;break}(2!=this.controller.Model.ID||this.isshowResout)&&3!=this.controller.Model.ID&&this.resoutPanel.oneDataAdd(t.comCards,0-i,p,5,t.score,t.pos,t.winScore)}3==this.controller.Model.ID&&t.hupos==this.controller.Model.anchorID&&this.showTips("",0)},e.prototype.surrender=function(){this.myDrop},e.prototype.dropGold=function(){this.players[0].stopTime(),this.players[0].setDrop(),this.ui_btn_sort.visible=!1,this.ui_btn_discard.visible=!1,this.isExit&&this.controller.cs_applyexittable_rummy()},e.prototype.sc_drop_rummy_n=function(t){if(console.log("----sc_drop_rummy_n-------------",this.gameState,this.isExit),!this.isExit)if(0!=this.gameState){var e=this.transformationPos(t._pos);if(this.players[e].stopTime(),this.players[e].setDrop(),t._pos==this.controller.Model.myPos){console.log("----sc_drop_rummy_n-------------"),this.myDrop=!0,this.ui_btn_sort.visible=!1,this.showArrow(!1),this.unschedule(this.showPickTip),this.ui_pickTip.visible=!1,this.arrangementPoint();for(var i=0;i<this.myPokers.length;i++)this.myPokers[i].node.y=-760,this.myPokers[i].cleanEvent();this.ui_lineout.visible=!1,this.ui_btn_newGroup.visible=!1;var o=this.myGold,s=o-t.punishScore<0?0:o-t.punishScore,n=a.AppConst.gameStatus[1]==a.EnumGameStatus.Hide?"":"R$:";this.ui_coins.text=n+v.UIUtil.formatNumber100(s),this.myGold=s,t.bDrop||0==this.isZahu&&1==this.controller.Model.ID&&(this.ui_pokerDropMask.visible=!0,this.ui_nomoney.visible=!1,this.ui_cardTimeOut.visible=!0,this.ready=!1)}if(3==this.controller.Model.ID&&1==t._pos){var r=this.gold4;s=r-t.punishScore<0?0:r-t.punishScore,this.setAnchorGold(s)}this.ExecutePlayer(t.nextPos)}else t.bDrop||t._pos!=this.controller.Model.myPos||(console.log("=========sc_drop_rummy_n========",this.isZahu),0==this.isZahu&&(this.ready=!1,this.controller.Model.tablestartData.dices.length>2&&(this.ui_pokerDropMask.visible=!0,this.ui_nomoney.visible=!1,this.ui_cardTimeOut.visible=!0)))},e.prototype.outPokerLog=function(){3!=this.controller.Model.ID&&(this.requesting||(this.ui_outPokerPanel.visible?this.ui_outPokerPanel.visible=!1:(this.requesting=!0,this.controller.cs_getoutcard_rummy())))},e.prototype.showOutPokerPanel=function(t){this.ui_outPokerPanel.visible=!0,this.ui_outPokerList.removeChildrenToPool(),t.outCards.reverse();for(var e=0;e<t.outCards.length;e++)this.ui_outPokerList.addItemFromPool().getChild("outPokerItem").asLoader.url=this.pokerResStart+t.outCards[e]},e.prototype.setAnchorGold=function(t){this.gold4=t;var e=a.AppConst.gameStatus[1]==a.EnumGameStatus.Hide?"":"R$:";this.ui_coins4.text=e+v.UIUtil.formatNumber100(t)},e.prototype.setUserGold=function(t){this.myGold=t;var e=a.AppConst.gameStatus[1]==a.EnumGameStatus.Hide?"":"R$:";if(this.ui_coins.text=e+v.UIUtil.formatNumber100(t),t<8e3*this.controller.Model.baserate)this.islevel=!0,1==this.controller.Model.ID&&(this.ui_pokerDropMask.visible||(this.ui_pokerDropMask.visible=!0,this.ui_cardTimeOut.visible=!1,this.ui_nomoney.visible=!0,this.ready=!1));else{if(this.islevel=!1,this.ui_cardTimeOut.visible)return;this.ready=!0}},e.prototype.initSeat=function(t){this.ui_myInfo.visible=!0,this.players[0].visible=!0,this.myGold=t;var e=a.AppConst.gameStatus[1]==a.EnumGameStatus.Hide?"":"R$:";this.ui_coins.text=e+(v.UIUtil.formatNumber100(t)||0),this.ui_allPoints.text="",this.myDrop&&this.players[0].setDrop(!0),t>=8e3*this.controller.Model.baserate&&this.ui_pokerDropMask.visible&&this.ui_nomoney.visible&&(this.ui_pokerDropMask.visible=!1,this.ui_nomoney.visible=!1)},e.prototype.prepare=function(){this.chatView.Show()},e.prototype.setSound=function(){this.showMenu(),this.settingView?this.settingView.Show():(this.settingView=this.addFguiComponent(k.default,!0),this.settingView.selectLanguageFun=this.selectLanguage.bind(this))},e.prototype.openMenu=function(){u.AudioManager.Singleton.play("","pop_slider"),this.showMenu()},e.prototype.showMenu=function(){this.ui_menu.visible=!this.ui_menu.visible,this.ui_setClick.visible=this.ui_menu.visible},e.prototype.exitGame=function(){var t=this;if(3!=this.controller.Model.ID){var e;if(e="1"==a.AppConst.languageType?"You can exit the game after entering the settlement":"\u0906\u092a \u092c\u0938\u094d\u0924\u0940 \u092e\u0947\u0902 \u092a\u094d\u0930\u0935\u0947\u0936 \u0915\u0930\u0928\u0947 \u0915\u0947 \u092c\u093e\u0926 \u0916\u0947\u0932 \u0938\u0947 \u092c\u093e\u0939\u0930 \u0928\u093f\u0915\u0932 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902",2!=this.controller.Model.ID||1!=this.controller.Model.bstate)if(this.myDrop||1!=this.gameState)this.controller.cs_applyexittable_rummy();else{if(this.islevel)return void this.controller.cs_applyexittable_rummy();if("0"==(this.controller.Model.levelid+"").slice(-1))return this.isExit=!0,void this.controller.cs_drop_rummy();if(2==this.controller.Model.ID)return void p.CommonCtr.instance.ShowTipLabel(e);var i="1"==a.AppConst.languageType?"Can't leave in the middle of the game":"\u0916\u0947\u0932 \u0915\u0947 \u092c\u0940\u091a \u092e\u0947\u0902 \u0928\u0939\u0940\u0902 \u091c\u093e \u0938\u0915\u0924\u0947";p.CommonCtr.instance.ShowTipLabel(i)}else p.CommonCtr.instance.ShowTipLabel(e)}else if(cc.log("------exitGame--------",this.rmBoardView.areaArr.length,this.controller.Model.bstate),this.rmBoardView.areaArr.length>0){var o="1"==a.AppConst.languageType?"english":"hindi";p.CommonCtr.instance.ShowTipCallback(xgameTable.getComplanguageSevenUpDownById(44)[o],function(){t.controller.cs_applyexittable_rummy()},function(){})}else this.controller.cs_applyexittable_rummy()},e.prototype.showGiftPanel=function(t){if(this.gift&&this.gift.fguiComponent.visible)this.gift.fguiComponent.visible=!1;else{this.gift||(this.gift=this.addFguiComponent(M.default)),this.gift.fguiComponent&&(this.gift.fguiComponent.visible=!0),this.setGiftInfo(t.pos);var e=t.localToGlobal(),i=this.fguiComponent.globalToLocal(e.x,e.y);this.gift.fguiY=t.y+30;var o=i.x+156;o+530>this.fguiComponent.width&&(o=i.x-530),this.gift.fguiX=o}},e.prototype.clickGiftHide=function(t){t.bubbles=!1,t.stopPropagationImmediate(),this.gift.fguiComponent.visible=!1,fgui.GRoot.inst.offClick(this.clickGiftHide,this)},e.prototype.setGiftInfo=function(t){this.gift.SendChatFun=this.sendChat.bind(this),this.gift.Pos=t},e.prototype.sendChat=function(t,e){this.controller.cs_chat(e,5,t)},e.prototype.sendChatMsg=function(t,e){1==this.controller.Model.ID?this.controller.cs_chat(t,e,this.controller.Model.myPos):this.controller.cs_chat(t,e,a.AppConst.mPlayerModel.userid)},e.prototype.sc_chat100_n=function(t){for(var e=0;e<t.chatinfos.length;e++)t.chatinfos[e].wLType=0;for(2==this.controller.Model.ID?this.anchorBarrage&&this.peopleMsg.addManyPeopleMsg(t.chatinfos):3==this.controller.Model.ID&&this.spectatorBarrage&&this.peopleMsg.addManyPeopleMsg(t.chatinfos),e=0;e<t.chatinfos.length;e++)""!=t.chatinfos[e].content&&(this.chatView.addMsg({fromMe:t.chatinfos[e].pos==a.AppConst.mPlayerModel.userid,content:t.chatinfos[e].content,head:t.chatinfos[e].head,type:t.chatinfos[e].type}),this.rmChat&&this.rmChat.addMsg({fromMe:t.chatinfos[e].pos==a.AppConst.mPlayerModel.userid,content:t.chatinfos[e].content,head:t.chatinfos[e].head,type:t.chatinfos[e].type}))},e.prototype.sc_chat_n=function(t){var e,i,o=this;if(5==t.type){var s=this.transformationPos(t.pos),n=this.players[s],r=this.transformationPos(t.tpos),l=this.players[r];null===(e=this.gift)||void 0===e||e.Hide(),null===(i=this.gift)||void 0===i||i.show_Gift(n.node,l.node,t.content)}else if(2==t.type)r=this.transformationPos(t.tpos),(l=this.players[r]).showEmj(t.content),this.chatView.addMsg({fromMe:0==r,content:t.content,head:l.headId,type:t.type});else if(3==t.type){var a=this.transformationPos(t.tpos);l=this.players[a],this["ui_chat"+a].getChild("chatText").asTextField.text=t.content,this["ui_chat"+a].visible=!0,this.scheduleOnce(function(){o["ui_chat"+a].visible=!1},3),this.chatView.addMsg({fromMe:0==a,content:t.content,head:l.headId,type:t.type})}},e.prototype.cleanChat=function(){for(var t=0;t<4;t++)this["ui_chat"+t].visible=!1},e.prototype.showHelp=function(){this.showMenu(),this.helpInfo?this.helpInfo.Show():this.helpInfo=this.addFguiComponent(D.default,!0)},e.prototype.showNewGroup=function(t){this.ui_btn_newGroup.visible=t},e.prototype.showArrow=function(t){this.ui_arrow1.visible=t,this.ui_arrow2.visible=t,this.ui_pokerLinght1.visible=t,this.ui_pokerLinght2.visible=t,t?(this.ui_arrow1.node.runAction(cc.repeatForever(cc.jumpBy(1,0,0,3,3))),this.ui_arrow2.node.runAction(cc.repeatForever(cc.jumpBy(1,0,0,3,3)))):(this.ui_arrow2.node.y=-262,this.ui_arrow1.node.y=-262,this.ui_arrow1.node.stopAllActions(),this.ui_arrow2.node.stopAllActions())},e.prototype.sc_token_rummy_n=function(t){return r(this,void 0,void 0,function(){var e;return l(this,function(i){switch(i.label){case 0:return cc.log("=======timeout========",t),this.animationPlayOver?[3,2]:(this.animationPlayOver=!0,[4,this.advancePlayOver()]);case 1:i.sent(),i.label=2;case 2:return e=this.transformationPos(t.pos),this.players[e].startOpt(),this.finishView.fguiComponent.visible=!1,t.pos!=this.controller.Model.myPos?(this.showArrow(!1),this.unschedule(this.showPickTip),this.ui_pickTip.visible=!1):(u.AudioManager.Singleton.play("","your_turn"),this.showArrow(!0),this.scheduleOnce(this.showPickTip,5)),this.controller.Model.nowTokenPos==this.controller.Model.myPos&&(this.dapaiCount+=1,cc.log("==============",this.dapaiCount)),this.controller.Model.nowTokenPos=t.pos,[2]}})})},e.prototype.showPickTip=function(){this.ui_pickTip.visible=!0,this.showArrow(!1)},e.prototype.leaveTable=function(t){for(var e=0;e<4;e++)this.players[e].seatEmpty||-1!=t.userid.indexOf(this.players[e].userid)&&(console.log("===========-----",t),this.players[e].userid==a.AppConst.mPlayerModel.userid&&(this.ready=!1))},e.prototype.sc_one_exittable_n=function(t){var e=this.transformationPos(t.pos);3==this.controller.Model.ID&&1==t.pos&&(this.players[4].visible=!1),this.players[e].exit(),this.playerCount-=1,1==this.playerCount&&1==this.controller.Model.ID&&(this.ui_statrWaitone.visible=!0,this.ui_statrWait.visible=!1);for(var i=-1,o=0;o<this.controller.Model.tableAllPlayer.length;o++)this.controller.Model.tableAllPlayer[o].userid==t.userid&&(i=o);i>-1&&this.controller.Model.tableAllPlayer.splice(i,1),t.pos==this.controller.Model.myPos&&this.gotoHall()},e.prototype.sc_refhuff_rummy_n=function(t){var e=this;console.log("============ref card======",t),this.ui_OutCard.url="",this.xipaiEff.play(function(){e.ui_openNum.setVar("num","1").flushVars(),e.giveupPoker.length=0,e.giveupPoker.push(t.outcard),4==e.controller.Model.entertable._recover.pc?e.closeNum=107-13*e.controller.Model.tablestartData.dices.length-2:e.closeNum=53-13*e.controller.Model.tablestartData.dices.length-1,e.ui_OutCard.url=e.pokerResStart+t.outcard,e.ui_btn_pokerback.visible=!0,e.ui_cardEff.visible=!0,e.ui_closeNum.setVar("num",e.closeNum+"").flushVars()},1)},e.prototype.gameReconnection=function(){this.animationPlayOver=!0;var t=this.controller.Model.entertable;if(4!=t.status&&1!=t.status&&2!=t.status){var e=t._recover;if(e.wildCard&&e.wildCard.length>0&&t.palyerlist.length>1){this.ui_LeprosyCard.url=this.pokerResStart+e.wildCard[1],this.ui_LeprosyCard2.url=this.pokerResStart+e.wildCard[0],e.diPai&&(this.ui_OutCard.url=this.pokerResStart+e.diPai),3!=this.controller.Model.ID&&(this.ui_btn_outlog.visible=!0),this.commonPoker2=e.wildCard,this.checkWildStar(e.wildCard[0],e.wildCard[1]),this.gameState=1,16==e.diPai||17==e.diPai||e.diPai%100==this.commonPoker[0]%100||e.diPai%100==this.commonPoker[1]%100?this.ui_OutCard.color=cc.Color.set(this.outPokerColor,255,232,127):this.ui_OutCard.color=cc.Color.set(this.outPokerColor,255,255,255),this.ui_finishbg.visible=!0,this.ui_finish.visible=!0,this.ui_btn_pokerback.visible=!0,this.ui_btn_pokerback.x=865,this.ui_LeprosyCard.x=794,this.ui_LeprosyCard2.x=735,this.ui_biaozhi1.visible=!0,this.ui_biaozhi2.visible=!0,this.ui_cardEff.x=862,this.ui_cardEff.visible=!0,this.controller.Model.tablestartData=new A.sc_tablestart_rummy2_n,this.controller.Model.tablestartData.dices=[],this.resoutPanel.cleanList(),this.resoutPanel.fguiComponent.visible=!1,this.ui_viewcom.visible=!1,this.finishView.fguiComponent.visible=!1,this.ui_closeNum.visible=!0,this.ui_openNum.visible=!0,this.closeNum=e.mjc-2,this.ui_closeNum.setVar("num",this.closeNum+"").flushVars();for(var i,o,s=0,n=0;n<e._pos2tile.length;n++)s+=e._pos2tile[n].vallist.length;o=4==e.pc?108:54;for(var r,l=!1,u=(n=0,e._pos2Status.length);n<u;n++)if(5==e._pos2Status[n].val){l=!0,r=e._pos2Status[n].pos,this.fisrtHuPos=r;break}for(n=0,u=e._pos2datile.length;n<u;n++)if(e._pos2datile[n].pos==r){this.ui_finishCard.url=this.pokerResStart+e._pos2datile[n].vallist[e._pos2datile[n].vallist.length-1];break}for(i=o-e.mjc-s-(l?1:0),cc.log("-----12312412312313----------",o,e.mjc,s,i),this.giveupPoker.length=i<0?0:i,this.ui_openNum.setVar("num",i+"").flushVars(),n=0,u=e._pos2gold.length;n<u;n++)if(e._pos2gold[n].pos==a.AppConst.mPlayerModel.userid){this.initSeat(e._pos2gold[n].val);break}var h=0;for(n=0,u=e._pos2Status.length;n<u;n++){this.controller.Model.tablestartData.dices[n]={pos:e._pos2Status[n].pos,val:0};var c=this.transformationPos(e._pos2Status[n].pos),p=e._pos2Status[n].val;if(2==p&&this.players[c].setDrop(!0),e._pos2Status[n].pos==this.controller.Model.myPos||3==this.controller.Model.ID&&1==e._pos2Status[n].pos){if(this.mySitDown=!0,h=p,2==p&&(this.myDrop=!0),0==e._pos2tile[n].vallist.length)continue;this.ui_pokerDropMask.visible=!1,3!=this.controller.Model.ID&&(this.ui_btn_sort.visible=!0);var m=0;this.recoveryPoker(),this.myPokers.length=0,this.myCards.length=0;for(var d=0;d<e._pos2tile[n].vallist.length;d++){var _=this.createPoker();_.setData(e._pos2tile[n].vallist[d],!0),this.ui_pokerNode.addChild(_),this.myPokers[m]=_,this.myCards[m]=e._pos2tile[n].vallist[d],m++}this.startSortPoker(null),2==p&&this.myPokers.forEach(function(t){t.cleanEvent()})}}if(1==this.gameState)if(l){this.gameState=0,r==this.controller.Model.myPos||(this.otherHupai=!0,1==h?3!=this.controller.Model.ID&&(this.ui_btn_declare.visible=!0):this.myPokers.forEach(function(t){t.cleanEvent()}));var g=void 0;for(n=0;n<t.palyerlist.length;n++)if(r==t.palyerlist[n].pos){g=t.palyerlist[n].py.wechat.wName;break}var y=v.UIUtil.getNickNameSub(g,6,"");g=g.length>y.length?y+"...":y;var f="1"==a.AppConst.languageType?"english":"hindi";this.showTips("[color=#FFD422]"+g+"[/color] "+xgameTable.getComplanguageRummyById(57)[f],e.lt,1)}else cc.log("------giveupPoker----------",this.giveupPoker,this.myPokers.length),e.tokenpos==this.controller.Model.myPos?(this.controller.Model.nowTokenPos=this.controller.Model.myPos,14==this.myPokers.length?(this.players[0].startOpt(e.lt),this.players[0].isCanOperation=!1,this.hasMopai=!0):(this.mopaiNow=!1,this.ExecutePlayer(e.tokenpos,e.lt))):this.ExecutePlayer(e.tokenpos,e.lt)}}},e.prototype.switchtable=function(){if(this.ui_nomoney.visible){if(this.myGold<8e3*this.controller.Model.baserate){a.AppConst.languageType;var t="1"==a.AppConst.languageType?"Not enough coins, please recharge":"\u092a\u0930\u094d\u092f\u093e\u092a\u094d\u0924 \u0915\u094b\u0907\u0928\u094d\u0938 \u0928\u0939\u0940\u0902, \u0915\u0943\u092a\u092f\u093e \u0930\u093f\u091a\u093e\u0930\u094d\u091c \u0915\u0930\u0947\u0902";return void p.CommonCtr.instance.ShowTipLabel(t)}this.ui_pokerDropMask.visible=!1,this.ready=!0}else this.ui_pokerDropMask.visible=!1,this.ready=!0},e.prototype.switchtable1=function(){this.showMenu(),this.myDrop||this.isMeHupai||0==this.gameState?(this.isleven=!0,this.controller.cs_applyexittable_rummy()):p.CommonCtr.instance.ShowTipLabel(h.BaseCode[a.AppConst.languageType].WAIT_GAME_END)},e.prototype.report=function(){var t;return r(this,void 0,void 0,function(){var e,i,o;return l(this,function(){for(e=0,i=(null===(t=this.controller.Model.endData)||void 0===t?void 0:t._pos2win)||[],o=0;o<i.length;o++)if(i[o].pos==a.AppConst.mPlayerModel.userid){e=i[o].val;break}return e=-e,y.default.Singleton.reportGameRound(v.UIUtil.formatNumber100(e)),[2]})})},e.prototype.endGame=function(){var t,e,i=this;if(!this.isExit)if(3!=this.controller.Model.ID){if(this.report(),2==this.controller.Model.ID){if(cc.log("==================",this.controller.Model.bstate),1==this.controller.Model.bstate)return void this.resoutPanel.updateGold();if(this.controller.Model.anchorData)return this.gameState=0,void this.controller.sc_changeanchor_rummy2_n(this.controller.Model.anchorData)}2!=this.controller.Model.ID||this.isshowResout||this.resoutPanel.updateGold(),this.ui_statrWait.visible||this.ui_viewcom.visible?(this.showWaitTimes(),this.resoutPanel.updateGold()):(this.resoutPanel.fguiComponent.visible||(1==this.controller.Model.ID&&(null===(t=p.CommonCtr.instance.view)||void 0===t||t.Hide()),3!=this.controller.Model.ID&&(2!=this.controller.Model.ID||this.isshowResout)&&this.resoutPanel.Show()),(2!=this.controller.Model.ID||this.isshowResout)&&this.resoutPanel.initData()),(2!=this.controller.Model.ID||this.isshowResout)&&this.cleanTable(),this.gameState=0;var o=this.ui_pokerDropMask.visible,s=this.ui_nomoney.visible;if(o&&this.ui_cardTimeOut.visible&&this.islevel)this.scheduleOnce(function(){i.controller.cs_applyexittable_rummy()},.5);else{if((null===(e=this.controller.Model.endData)||void 0===e?void 0:e.ptime)>=10&&this.controller.Model.isTyc){var n;return n="1"==a.AppConst.languageType?"You can play 10 games a day":"\u0906\u092a \u090f\u0915 \u0926\u093f\u0928 \u092e\u0947\u0902 10 \u0917\u0947\u092e \u0916\u0947\u0932 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902",void p.CommonCtr.instance.ShowTipCallback(n,function(){i.gotoHall()})}s||(this.ui_pokerDropMask.visible=!1),this.scheduleOnce(function(){s||(i.ui_pokerDropMask.visible=!1)},1),this.scheduleOnce(function(){(o=i.ui_pokerDropMask.visible)&&i.ui_cardTimeOut.visible&&i.islevel?i.controller.cs_applyexittable_rummy():(s||(i.ui_pokerDropMask.visible=!1),i.mySitDown&&(cc.log("----------------over-------",o,i.ready,s),!o&&i.ready&&1==i.controller.Model.ID&&i.controller.cs_ready_rummy()))},1)}}else{if(this.gameState=0,this.controller.Model.anchorData)return void this.controller.sc_changeanchor_rummy2_n(this.controller.Model.anchorData);for(var r=S.default.instance.Model.endData,l=0;l<r._pos2gold.length;l++)if(r._pos2gold[l].pos==this.controller.Model.anchorID){this.setAnchorGold(r._pos2gold[l].val);break}this.showTips("",0)}},e.prototype.cleanTable=function(){this.clean(),this.showArrow(!1),this.gift&&this.gift.Hide(),this.unschedule(this.showPickTip),this.ui_pickTip.visible=!1,this.ui_closeNum.setVar("num","0").flushVars(),this.ui_openNum.setVar("num","0").flushVars(),this.ui_cardEff.visible=!1,this.ui_finishCard.url="",this.ui_closeNum.visible=!1,this.ui_openNum.visible=!1,this.currentPoker=null,this.otherHupai=!1,this.hasMopai=!1,this.recoveryPoker(),this.gameState=0,this.giveupPoker.length=0,this.recoveryTitle(),this.ui_btn_sort.visible=!1,this.ui_btn_declare.visible=!1,this.ui_btn_discard.visible=!1,this.ui_btn_group.visible=!1,this.ui_LeprosyCard.url="",this.ui_LeprosyCard2.url="",this.ui_biaozhi1.visible=!1,this.ui_biaozhi2.visible=!1,this.ui_OutCard.url="",this.effectiveGroup=0,this.ui_btn_pokerback.x=1102,this.isCanHupai=!1,this.showTips("",0),this.ui_btn_outlog.visible=!1,this._first_group=!1,this._second_group=!1,this.allPoints=0,this.ui_allPoints.text="0",this.ui_allPoints4.text="0",this.myDrop=!1,this.ui_outPokerPanel.visible=!1,this.ui_waitTurn.visible=!1,this.ui_viewcom.visible=!1},e.prototype.clean=function(){this.players.forEach(function(t){t.stopTime(),t.setZhuang(!1),t.setDrop(!1)})},e.prototype.getPoker=function(){return this.pokerPool.length<=0&&this.pokerPool.push(fgui.UIPackage.createObject("rummy2","poker")),this.pokerPool.shift()},e.prototype.addPoker=function(t){this.pokerPool.push(t)},e.prototype.createPoker=function(){var t=this.getPoker();return t.node.scale=1,t},e.prototype.createGroupTitle=function(){return this.titlePool.length>0?this.titlePool.shift():fgui.UIPackage.createObject("rummy2","groupPoker")},e.prototype.addTitle=function(t){this.titlePool.push(t)},e.prototype.recoveryTitle=function(){for(;this.ui_groupNode.numChildren>0;)this.addTitle(this.ui_groupNode.removeChildAt(0))},e.prototype.recoveryPoker=function(){for(;this.ui_pokerNode.numChildren>0;){var t=this.ui_pokerNode.removeChildAt(0);t.node.stopAllActions(),this.addPoker(t)}},e.prototype.gotoHall=function(){var t,e,i,o;if(this.isleven){this.cleanTable();for(var s=1;s<4;s++)this.players[s].seatEmpty||this.players[s].exit();for(s=0;s<4;s++)this["ui_chat"+s].visible=!1;return this.ui_pokerDropMask.visible=!1,this.playerCount=0,this.isleven=!1,this.controller.Model.init(),void this.controller.cs_entertable_rummy()}this.unscheduleAllCallbacks(),cc.game.off(cc.game.EVENT_SHOW),cc.game.off(cc.game.EVENT_HIDE),c.BaseFrameNative.nowGameView=null,null===(t=this.anchorAni)||void 0===t||t.clearTracks(),null===(e=this.anchorWenziAni)||void 0===e||e.clearTracks(),null===(i=this.anchorLinghtAni)||void 0===i||i.clearTracks(),null===(o=this.lingdangAni)||void 0===o||o.clearTracks(),this.players.forEach(function(t){t.stopTime(),t.clean()}),this.players=null,this.recoveryPoker(),this.pokerPool.forEach(function(t){t.node.stopAllActions(),t&&t.dispose()}),this.titlePool.forEach(function(t){t&&t.dispose()}),this.pokerPool.length=0,this.resoutPanel.clean(),this.controller&&(this.controller.view=null,this.controller.Model.init(),S.default.Destroy(),this.controller=null),f.SceneManager.Singleton.loadScene("GameHall","gameHall")},e.prototype.onDestroy=function(){u.AudioManager.Singleton.stopBGM(),S.default.Destroy(),fgui.UIPackage.removePackage(this.packageName),cc.assetManager.getBundle(this.packageResourceName).releaseAll()},n([j],e)}(b.default);i.default=W,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/BaseCode":void 0,"../../../../Common/script/base/BaseFrameNative":void 0,"../../../../Common/script/base/CommonCtr":void 0,"../../../../Common/script/base/CommonView":void 0,"../../../../Common/script/base/NotificationCenter":void 0,"../../../../Common/script/base/NotificationName":void 0,"../../../../Common/script/base/ReconnectManager":void 0,"../../../../Common/script/base/ReportManager":void 0,"../../../../Common/script/base/SceneManager":void 0,"../../../../Common/script/base/ViewBase":void 0,"../../../../Common/script/base/WebSocketManager":void 0,"../../../../Common/script/util/UIUtil":void 0,"../../../../GameHall/script/Module/ChatView/ChatPeopleMsg":void 0,"../../../../GameHall/script/Module/ChatView/ChatView":void 0,"../../../../GameHall/script/Module/ComSettingView/ComSettingView":void 0,"../../../../GameHall/script/Module/GiftView/GiftView":void 0,"../../../../GameHall/script/Module/RechargeView/RechargeView":void 0,"../Controller/RummyController2":"RummyController2","../Model/Rummy2":"Rummy2","../Model/RummyModel2":"RummyModel2","./GroupTitle2":"GroupTitle2","./Player2":"Player2","./Poker2":"Poker2","./RummyFinish2":"RummyFinish2","./RummyHelp2":"RummyHelp2","./RummyResout2":"RummyResout2","./RummyResoutItem2":"RummyResoutItem2","./Watch/RmAddCash":"RmAddCash","./Watch/RmBetInfo":"RmBetInfo","./Watch/RmBoardView":"RmBoardView","./Watch/RmChat":"RmChat","./Watch/RmplayerQueue":"RmplayerQueue"}],Player2:[function(t,e,i){"use strict";cc._RF.push(e,"6e1d3P9ZGpGfqxykUgYDOpy","Player2");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var n=t("../../../../Boot/scirpt/AppConst"),r=t("../../../../Common/script/base/AudioManager"),l=t("../../../../Common/script/util/UIUtil"),a=t("../Controller/RummyController2"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.headId="0",e.nickName="",e.nickName2="",e.seatEmpty=!0,e.ui_endTimeSpineNode=null,e.ui_endTimeXing=null,e.times=20,e.isCanOperation=!1,e.radius=80,e}return s(e,t),e.prototype.onConstruct=function(){for(var t=0;t<this._children.length;t++)switch(this._children[t]._name){case"head":this.head=this._children[t].asCom.getChild("head").asLoader;break;case"timeLabel":this.timeLabel=this._children[t].asTextField;break;case"n9":this.iszhuang=this._children[t].asImage;break;case"timeimg":this.timeImg=this._children[t].asLoader;break;case"myname":this.myname=this._children[t].asTextField;break;case"dropImg":this.dropImg=this._children[t].asImage;break;case"drop":this.drop=this._children[t].asGraph;break;case"gift":this.gift=this._children[t].asImage;break;case"emj":this.emj=this._children[t].asLoader;break;case"endTimeSpineNode":this.ui_endTimeSpineNode=this._children[t].asLoader;break;case"endTimeXing":this.ui_endTimeXing=this._children[t].asCom}this.typeController=this.getController("c1"),this.typeMController=this.getController("c2"),this.onClick(this.sitDown,this),this.addSpine()},e.prototype.addSpine=function(){var t=this;cc.assetManager.getBundle("rummy2").load("res/prefabs/daojishi_lizi",cc.Prefab,function(e,i){var o=cc.instantiate(i);t.ui_endTimeXing.node.addChild(o),t.moveN1toN2(o,t.ui_endTimeXing.node)})},e.prototype.moveN1toN2=function(t,e){t.position=t.parent.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position))},e.prototype.convertNodeSpaceAR=function(t,e){return t.parent.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position))},e.prototype.sitDown=function(){3!=a.default.instance.Model.ID&&(this.seatEmpty||0==this.seatIndex||a.default.instance.view.showGiftPanel(this))},e.prototype.initUiSeat=function(t){this.seatIndex=t},e.prototype.initData=function(t){this.basePData=t,this.setHead(t.head);var e=l.UIUtil.getNickNameSub(t.nickName,6,"");this.nickName=t.nickName.length>e.length?e+"...":e,this.nickName2=t.nickName,this.userid=t.userid,this.seatEmpty=!1,this.pos=t.tpos,this.headId=t.head,t.userid!=n.AppConst.mPlayerModel.userid?(this.myname.text=this.nickName,this.typeMController.setSelectedIndex(1),this.radius=78):(this.typeMController.setSelectedIndex(0),this.radius=76)},e.prototype.getUserName=function(){return this.nickName},e.prototype.exit=function(){this.head.url="",this.userid=null,this.nickName=null,this.nickName2=null,this.typeController.setSelectedIndex(0),this.setZhuang(!1),this.stopTime(),this.seatEmpty=!0,this.dropImg.visible=!1,this.drop.visible=!1},e.prototype.setDrop=function(t){void 0===t&&(t=!0),this.dropImg.visible=t,this.drop.visible=t},e.prototype.setZhuang=function(t){void 0===t&&(t=!0),this.iszhuang.visible=t},e.prototype.setHead=function(t){this.typeController.setSelectedIndex(1),l.UIUtil.loadImage(this.head,t)},e.prototype.getTimeNow=function(){return this.timeImg.visible},e.prototype.getDrop=function(){return this.dropImg.visible},e.prototype.startOpt=function(t){if(void 0===t&&(t=20),this.times=t,this.timeLabel.text=this.times+"",this.timeLabel.visible=!0,this.isCanOperation=!0,this.timeImg.url="ui://rummy2/tx_1",20==t)this.timeImg.fillAmount=0;else{var e=t/20;this.timeImg.fillAmount=1-e}this.timeImg.visible=!0,this.node.stopAllActions(),this.startTime(),this.tweener&&this.tweener.stop(),this.ui_endTimeXing.visible=!0,this.xingxingPos=this.convertNodeSpaceAR(this.ui_endTimeXing.node,this.ui_endTimeSpineNode.node),this.tweener=cc.tween(this.timeImg).to(t,{fillAmount:1},{onUpdate:this.updateStar.bind(this)}).start()},e.prototype.updateStar=function(){if(cc.isValid(this.ui_endTimeXing)){var t=360*-this.timeImg.fillAmount;this.ui_endTimeXing.x=this.xingxingPos.x+this.radius*Math.sin(-t/180*3.14),this.ui_endTimeXing.y=this.xingxingPos.y+80+this.radius-this.radius*Math.cos(-t/180*3.14),this.ui_endTimeXing.node.angle=t+90}},e.prototype.startTime=function(){var t=this;this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){t.times-=1,t.times<=5&&"ui://rummy2/tx_2"!=t.timeImg.url&&(t.timeImg.url="ui://rummy2/tx_2"),5==t.times&&r.AudioManager.Singleton.play("","tick1"),t.timeLabel.text=t.times+"",t.times<=0?(t.timeImg.url="ui://rummy2/tx_1",t.stopTime()):t.startTime()})))},e.prototype.stopTime=function(){r.AudioManager.Singleton.stopEffect("tick1"),this.stopTween(),this.isCanOperation=!1,this.node.stopAllActions(),this.timeLabel.visible=!1,this.timeImg.visible=!1},e.prototype.stopTween=function(){this.ui_endTimeXing.visible=!1,this.tweener&&this.tweener.stop()},e.prototype.onDestroy=function(){this.tweener&&this.tweener.stop()},e.prototype.clean=function(){clearTimeout(this.emjTimer)},e.prototype.showEmj=function(t){var e=this;clearTimeout(this.emjTimer),this.emj.url="ui://Common/"+t,this.emjTimer=setTimeout(function(){e.emj&&(e.emj.url="")},2e3)},e}(fgui.GComponent);i.default=u,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/util/UIUtil":void 0,"../Controller/RummyController2":"RummyController2"}],Poker2:[function(t,e,i){"use strict";cc._RF.push(e,"0d9baelULNJcpFwbGIR4k44","Poker2");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var n=t("../../../../Common/script/base/AudioManager"),r=t("../Controller/RummyController2"),l=t("../Model/Rummy2"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.select=!1,e.groupIndex=20,e.isMove=!1,e.dragOut=!1,e.dragGroup=!1,e.movePos=new cc.Vec2(0,0),e._touchId=-1,e.tempLocp=new cc.Vec2(0,0),e.hupai=!1,e}return s(e,t),e.prototype.onConstruct=function(){this.pokerLoader=this.getChild("poker").asLoader,this.colorController=this.getController("c1"),this.linghtbg=this.getChild("linghtbg").asImage,this.outPokerRegion=r.default.instance.view.ui_lineout.node.position,this.finish=r.default.instance.view.ui_finish.node.position,this.newGroup=r.default.instance.view.ui_btn_newGroup.node.position;var t=r.default.instance.view.ui_pokerNode.globalToLocal(this.newGroup.x,this.newGroup.y);this.newGroup=new cc.Vec3(t.x,t.y,0)},e.prototype.showEff=function(){this.linghtbg.visible=!0,this.linghtbg.node.runAction(cc.blink(2,5))},e.prototype.setData=function(t,e,i){void 0===i&&(i=!1),this.linghtbg.visible=!1,this.sid=t,this.color=this.getColor(),this.points=this.getNum(),18==t&&r.default.instance.Model.gsb?this.pokerLoader.url="ui://rummy2/cards"+t+"_2":this.pokerLoader.url="ui://rummy2/cards"+t,this.groupIndex=20,this.select=!1,this.init(e),i?this.colorController.setSelectedIndex(0):16==this.points||17==this.points||this.points==r.default.instance.view.commonPoker[0]%100||this.points==r.default.instance.view.commonPoker[1]%100?this.colorController.setSelectedIndex(1):this.colorController.setSelectedIndex(0)},e.prototype.getNum=function(){return this.sid%100},e.prototype.getColor=function(){return Math.floor(this.sid/100)},e.prototype.init=function(t){void 0===t&&(t=!0),t?(this.cleanEvent(),this.on(fgui.Event.TOUCH_BEGIN,this.touchstart,this),this.on(fgui.Event.TOUCH_MOVE,this.touchMove,this),this.on(fgui.Event.TOUCH_END,this.touchEnd,this)):this.cleanEvent()},e.prototype.cleanEvent=function(){this.off(fgui.Event.TOUCH_BEGIN,this.touchstart,this),this.off(fgui.Event.TOUCH_MOVE,this.touchMove,this),this.off(fgui.Event.TOUCH_END,this.touchEnd,this)},e.prototype.touchstart=function(t){-1==this._touchId&&(this._touchId=t.touchId,this.isMove=!1,r.default.instance.view.addNewGroupBool=!1,this.dragOut=!1,this.startTime=Date.now(),this.hupai=!1,this.dragGroup=!1,this.oldIndex=this.parent.getChildIndex(this),t.captureTouch())},e.prototype.touchMove=function(t){if(-1!=this._touchId&&t.touchId==this._touchId){if(Date.now()-this.startTime<100)return;this.movePos.x=t.pos.x,this.movePos.y=-t.pos.y;var e=this.movePos;if(r.default.instance.view.addNewGroupBool)return void(r.default.instance.view.ui_lineout.visible=!1);r.default.instance.view.showNewGroup(!0),13!=this.parent.getChildIndex(this)&&this.parent.setChildIndex(this,13),e.y>-700?r.default.instance.view.ui_lineout.visible=!0:r.default.instance.view.ui_lineout.visible=!1,this.isMove||n.AudioManager.Singleton.play("","rummyFlip"),this.isMove=!0,this.parent.globalToLocal(t.pos.x,-t.pos.y,this.tempLocp),this.node.setPosition(this.tempLocp),this.tempLocp.x>this.newGroup.x&&this.tempLocp.x<this.newGroup.x+182&&this.tempLocp.y<this.newGroup.y&&this.tempLocp.y>this.newGroup.y-276&&!r.default.instance.view.addNewGroupBool?(this.dragOut=!1,this.select=!1,this.dragGroup=!0):this.tempLocp.x>this.finish.x-83.5&&this.tempLocp.x<this.finish.x+83.5&&this.tempLocp.y<this.finish.y+114&&this.tempLocp.y>this.finish.y-114?(this.hupai=!0,this.dragOut=!1,this.select=!1,this.dragGroup=!1,console.log("-----------finish-------")):e.y>this.outPokerRegion.y&&r.default.instance.view.hasMopai?(this.dragOut=!0,this.select=!0,this.hupai=!1,this.dragGroup=!1):(this.dragOut=!1,this.select=!1,this.hupai=!1,this.dragGroup=!1)}},e.prototype.touchEnd=function(t){if(-1!=this._touchId&&t.touchId==this._touchId){if(this._touchId=-1,r.default.instance.view.showNewGroup(!1),r.default.instance.view.ui_lineout.visible=!1,this.parent.setChildIndex(this,this.oldIndex),this.dragGroup)return void r.default.instance.view.addNewGroup(this);if(this.hupai)return r.default.instance.view.setCurrentPoker(this),l.Rummy2.AddorRemoveSelect(this,!0),r.default.instance.view.GroupBtn(this),void r.default.instance.view.finishCard(null,this,this.oldIndex);if(this.dragOut)return this.dragOut=!1,r.default.instance.view.addNewGroupBool=!0,r.default.instance.view.setCurrentPoker(this),void r.default.instance.view.outPoker();this.isMove?r.default.instance.view.moveEnd(this):(this.isMove=!1,this.select?(this.select=!1,this.node.y=-760,n.AudioManager.Singleton.play("","rummyCardDeselect")):(this.select=!0,this.node.y=-730,n.AudioManager.Singleton.play("","rummyCardSelect"),r.default.instance.view.setCurrentPoker(this)),l.Rummy2.AddorRemoveSelect(this,this.select),1==r.default.instance.Model.selectCard.length?r.default.instance.view.GroupBtn(r.default.instance.Model.selectCard[0]):r.default.instance.view.GroupBtn(this))}},e}(fgui.GComponent);i.default=a,cc._RF.pop()},{"../../../../Common/script/base/AudioManager":void 0,"../Controller/RummyController2":"RummyController2","../Model/Rummy2":"Rummy2"}],RmAddCash:[function(t,e,i){"use strict";cc._RF.push(e,"db050tRWuVOJoMPsvM2w36m","RmAddCash");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var n=t("../../../../../Boot/scirpt/AppConst"),r=t("../../../../../Common/script/base/AudioManager"),l=t("../../../../../Common/script/base/ViewBase"),a=t("../../Controller/RummyController2"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_btn_close=null,e.ui_btn_addCash=null,e.ui_addCash_lab_title=null,e.ui_addCash_lab1=null,e.ui_addCash_lab2=null,e.ui_addCash_lab3=null,e}return s(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/rummy2"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"addCash"},enumerable:!1,configurable:!0}),e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),this.fguiComponent.visible=!1,this.ui_btn_close.onClick(this.Hide,this),this.ui_btn_addCash.onClick(this.openAddCash,this),this.setLanguage()},e.prototype.allChildCreated=function(){t.prototype.allChildCreated.call(this),this.Show()},e.prototype.setLanguage=function(){for(var t="1"==n.AppConst.languageType?"english":"hindi",e=1;e<5;e++){var i=xgameTable.getComplanguageSevenUpDownById(e);i&&i.comp&&this[i.comp]&&(1==i.type?this[i.comp].text=i[t]:this[i.comp].url=i[t])}},e.prototype.Show=function(){t.prototype.Show.call(this),r.AudioManager.Singleton.play("","pop_up")},e.prototype.Hide=function(){t.prototype.Hide.call(this),r.AudioManager.Singleton.play("","btn_close")},e.prototype.openAddCash=function(){this.Hide(),a.default.instance.view.showAddCash()},e}(l.default);i.default=u,cc._RF.pop()},{"../../../../../Boot/scirpt/AppConst":void 0,"../../../../../Common/script/base/AudioManager":void 0,"../../../../../Common/script/base/ViewBase":void 0,"../../Controller/RummyController2":"RummyController2"}],RmAreaCom:[function(t,e,i){"use strict";cc._RF.push(e,"60010SEfutC5aqviYsAmkFt","RmAreaCom");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bet=0,e}return s(e,t),e.prototype.onConstruct=function(){for(var t=0;t<this._children.length;t++)switch(this._children[t]._name){case"win":this.win=this._children[t];break;case"mybet":this.mybet=this._children[t];break;case"area":this.area=this._children[t];break;case"odds":this.odds=this._children[t]}},e.prototype.setArea=function(t){this.area.text=t},e.prototype.setOdds=function(t){this.odds.text="x"+t},e.prototype.getOdds=function(){return+this.odds.text.replace("x","")},e.prototype.setConfig=function(t,e){this.area.text=t,this.odds.text=e},e.prototype.showEff=function(){this.win.visible=!0,this.win.node.runAction(cc.repeatForever(cc.sequence(cc.fadeIn(.4),cc.fadeOut(.4))))},e.prototype.cleanLinght=function(){this.win.visible=!1,this.win.node.stopAllActions(),this.win.node.opacity=255,this.cleanBet()},e.prototype.setBet=function(t){this.bet+=t,this.mybet.text=this.bet+""},e.prototype.getBet=function(){return this.bet},e.prototype.cleanBet=function(){this.bet=0,this.mybet.text="0"},e}(fgui.GComponent);i.default=n,cc._RF.pop()},{}],RmBetInfo:[function(t,e,i){"use strict";cc._RF.push(e,"36cd8eAsqhGZY90icctVXgd","RmBetInfo");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var n=t("../../../../../Boot/scirpt/AppConst"),r=t("../../../../../Common/script/base/AudioManager"),l=t("../../../../../Common/script/base/NotificationCenter"),a=t("../../../../../Common/script/base/NotificationName"),u=t("../../../../../Common/script/base/ViewBase"),h=t("../../../../../Common/script/util/UIUtil"),c=t("../../Controller/RummyController2"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.config={1:["1-2","3-4","5-6","7-8","9-10","more"],2:["1","2","3","4","5","more"],3:["A-5","6-10","J-K","Joker"],4:["A-5","6-10","J-K","Joker"]},e.titleConfig={1:xgameTable.getComplanguageArenaById(3),2:xgameTable.getComplanguageArenaById(4),3:xgameTable.getComplanguageArenaById(5),4:xgameTable.getComplanguageArenaById(6)},e.ui_socreTitle=null,e.ui_reImg1=null,e.ui_reImg2=null,e.ui_reImg3=null,e.ui_totalAud=null,e.ui_totalRe=null,e.ui_currentRe=null,e.ui_btn_betting=null,e.ui_btn_reward=null,e.ui_closeBet=null,e.ui_title1=null,e.ui_title2=null,e.ui_type16=null,e.ui_type14=null,e.ui_type26=null,e.ui_type24=null,e}return s(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/rummy2"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"betinfo"},enumerable:!1,configurable:!0}),e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),this.fguiComponent.visible=!1,this.ui_closeBet.onClick(this.Hide,this);var e=c.default.instance.Model.rule[0],i=c.default.instance.Model.rule[1];1==e||2==e?(this.ui_type16.visible=!0,this.ui_type14.visible=!1,this.init(this.ui_type16,this.config[e]),this.leftCom=this.ui_type16,this.leftnum=6):(this.ui_type16.visible=!1,this.ui_type14.visible=!0,this.init(this.ui_type14,this.config[e]),this.leftCom=this.ui_type14,this.leftnum=4),1==i||2==i?(this.ui_type26.visible=!0,this.ui_type24.visible=!1,this.init(this.ui_type26,this.config[i]),this.rightCom=this.ui_type26,this.rightNum=6):(this.ui_type26.visible=!1,this.ui_type24.visible=!0,this.init(this.ui_type24,this.config[i]),this.rightCom=this.ui_type24,this.rightNum=4),this.setLanguage(),l.NotificationCenter.Instance.on(a.default.AppLanguage.SELECT_LANGUAGE,this.setLanguage,this),this.typeController=this.fguiComponent.getController("c1"),this.typeController.onChanged(this.selectPage,this)},e.prototype.onDestroy=function(){l.NotificationCenter.Instance.off(a.default.AppLanguage.SELECT_LANGUAGE,this.setLanguage,this)},e.prototype.init=function(t,e){for(var i=0;i<e.length;i++)t.getChild("bet"+i).asCom.getChild("left").asTextField.text=e[i]},e.prototype.setLanguage=function(){var t=c.default.instance.Model.rule;if(t){var e="1"==n.AppConst.languageType?"english":"hindi";this.ui_title1.text=this.titleConfig[t[0]][e],this.ui_title2.text=this.titleConfig[t[1]][e],6==this.leftnum&&(this.leftCom.getChild("bet5").asCom.getChild("left").text=xgameTable.getComplanguageArenaById(16)[e]),6==this.rightNum&&(this.rightCom.getChild("bet5").asCom.getChild("left").text=xgameTable.getComplanguageArenaById(16)[e]),"1"==n.AppConst.languageType?(this.ui_socreTitle.url="ui://rummy2/title_betting_info",this.ui_reImg1.url="ui://rummy2/txt_betting_currentrewards",this.ui_reImg2.url="ui://rummy2/txt_betting_totalrewards",this.ui_reImg3.url="ui://rummy2/txt_betting_totalaudience",this.ui_btn_betting.getController("c1").selectedIndex=0,this.ui_btn_reward.getController("c1").selectedIndex=0):(this.ui_socreTitle.url="ui://rummy2/title_betting_info2",this.ui_reImg1.url="ui://rummy2/txt_betting_currentrewards_IN",this.ui_reImg2.url="ui://rummy2/txt_betting_totalrewards_IN",this.ui_reImg3.url="ui://rummy2/txt_betting_totalaudience_IN",this.ui_btn_betting.getController("c1").selectedIndex=1,this.ui_btn_reward.getController("c1").selectedIndex=1)}},e.prototype.selectPage=function(){1==this.typeController.selectedIndex&&c.default.instance.cs_anchorrecords_rummy2()},e.prototype.setReward=function(t){var e=n.AppConst.gameStatus[1]==n.EnumGameStatus.Hide?"":"R$";this.ui_totalAud.text=t.Count+"",this.ui_totalRe.text=e+h.UIUtil.formatNumber100(t.TotalBonus),this.ui_currentRe.text=e+h.UIUtil.formatNumber100(c.default.instance.Model.anchorWinNum)},e.prototype.allChildCreated=function(){t.prototype.allChildCreated.call(this),this.Show()},e.prototype.updateBetInfo=function(t){for(var e=c.default.instance.Model.rule[0],i=c.default.instance.Model.rule[1],o=t[0],s=t[1],n=0;n<o._pGT.length;n++){var r=o.rule,l=o._pGT[n].pos,a=h.UIUtil.formatNumber100(o._pGT[n].val);r==e?this.leftCom.getChild("bet"+l).asCom.getChild("right").asTextField.text=a+"":r==i&&(this.rightCom.getChild("bet"+l).asCom.getChild("right").asTextField.text=a+"")}for(n=0;n<s._pGT.length;n++)r=s.rule,l=s._pGT[n].pos,a=h.UIUtil.formatNumber100(s._pGT[n].val),r==e?this.leftCom.getChild("bet"+l).asCom.getChild("right").asTextField.text=a+"":r==i&&(this.rightCom.getChild("bet"+l).asCom.getChild("right").asTextField.text=a+"")},e.prototype.reset=function(){for(var t=0;t<this.leftnum;t++)this.leftCom.getChild("bet"+t).asCom.getChild("right").asTextField.text="0";for(t=0;t<this.rightNum;t++)this.rightCom.getChild("bet"+t).asCom.getChild("right").asTextField.text="0"},e.prototype.Show=function(){t.prototype.Show.call(this),this.reset(),r.AudioManager.Singleton.play("","pop_up"),c.default.instance.cs_getallgamble_rummy2(),this.unschedule(this.getBetInfo),this.schedule(this.getBetInfo,2,5),1==this.typeController.selectedIndex&&c.default.instance.cs_anchorrecords_rummy2()},e.prototype.Hide=function(){t.prototype.Hide.call(this),r.AudioManager.Singleton.play("","btn_close"),this.unschedule(this.getBetInfo)},e.prototype.getBetInfo=function(){c.default.instance.cs_getallgamble_rummy2()},e}(u.default);i.default=p,cc._RF.pop()},{"../../../../../Boot/scirpt/AppConst":void 0,"../../../../../Common/script/base/AudioManager":void 0,"../../../../../Common/script/base/NotificationCenter":void 0,"../../../../../Common/script/base/NotificationName":void 0,"../../../../../Common/script/base/ViewBase":void 0,"../../../../../Common/script/util/UIUtil":void 0,"../../Controller/RummyController2":"RummyController2"}],RmBoardView:[function(t,e,i){"use strict";cc._RF.push(e,"cc515XSMMZKFZRRb0W0Ivo2","RmBoardView");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(s,n){function r(t){try{a(o.next(t))}catch(e){n(e)}}function l(t){try{a(o.throw(t))}catch(e){n(e)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,l)}a((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,o,s,n,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function l(t){return function(e){return a([t,e])}}function a(n){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(s=2&n[0]?o.return:n[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return r.label++,{value:n[1],done:!1};case 5:r.label++,o=n[1],n=[0];continue;case 7:n=r.ops.pop(),r.trys.pop();continue;default:if(!(s=(s=r.trys).length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){r=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){r.label=n[1];break}if(6===n[0]&&r.label<s[1]){r.label=s[1],s=n;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(n);break}s[2]&&r.ops.pop(),r.trys.pop();continue}n=e.call(t,r)}catch(l){n=[6,l],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var l=t("../../../../../Boot/scirpt/AppConst"),a=t("../../../../../Common/script/base/AudioManager"),u=t("../../../../../Common/script/base/CommonCtr"),h=t("../../../../../Common/script/base/NotificationCenter"),c=t("../../../../../Common/script/base/NotificationName"),p=t("../../../../../Common/script/base/ReportManager"),m=t("../../../../../Common/script/base/ViewBase"),d=t("../../../../../Common/script/util/UIUtil"),_=t("../../../../../GameHall/dlc/script/config/LocalizationConfig"),g=t("../../Controller/RummyController2"),y=t("./RmAreaCom"),f=t("./RmChip"),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_bottom=null,e.ui_nickname=null,e.ui_gold=null,e.ui_head=null,e.ui_btn_tanm=null,e.ui_btn_player=null,e.ui_btn_chat=null,e.ui_chip0=null,e.ui_chip1=null,e.ui_chip2=null,e.ui_chip3=null,e.ui_chip4=null,e.ui_selectLinght=null,e.chipPool=[],e.bet=[1,5,10,50,100],e.ui_leftGold=null,e.ui_rightGold=null,e.leftBetCom=null,e.rightBetCom=null,e.ui_win=null,e.config={1:["1-2","3-4","5-6","7-8","9-10","more"],2:["1","2","3","4","5","more"],3:["A-5","6-10","J-K","Joker"],4:["A-5","6-10","J-K","Joker"]},e.config1={1:["3.5","3.5","3.5","3.5","3.5","3.5"],2:["3.5","3.5","3.5","3.5","3.5","3.5"],3:["3.5","3.5","3.5","3.5"],4:["3.5","3.5","3.5","3.5"]},e.ui_titleleft=null,e.ui_titleRight=null,e.titleConfig={1:xgameTable.getComplanguageArenaById(3),2:xgameTable.getComplanguageArenaById(4),3:xgameTable.getComplanguageArenaById(5),4:xgameTable.getComplanguageArenaById(6)},e.leftChip={},e.rightChip={},e.allMyBet=0,e.chipArr=[],e.areaArr=[],e}return s(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/rummy2"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"board"},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){fgui.UIObjectFactory.setExtension("ui://rummy2/chipnow",f.default),fgui.UIObjectFactory.setExtension("ui://rummy2/betwin",y.default),fgui.UIObjectFactory.setExtension("ui://rummy2/betwin1",y.default),t.prototype.onLoad.call(this)},e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),this.fguiComponent.visible=!1,this.fguiComponent.center();for(var e=0;e<5;e++)this["ui_chip"+e].setData(this.bet[e]),this["ui_chip"+e].onClick(this.clickSelectChip,this);for(this.ui_chip0.y-=20,this.selectChip=this.ui_chip0,this.ui_selectLinght.setPosition(this.selectChip.x,this.selectChip.y),this.liftTypeCom6=this.fguiComponent.getChildByPath("left.area6"),this.leftBetCom=this.fguiComponent.getChildByPath("left.betcom"),e=0;e<6;e++)this["liftTypeBet6"+e]=this.liftTypeCom6.getChild("bet"+e),this["liftTypeBet6"+e].pos=e,this["liftTypeBet6"+e].mtype=1,this["liftTypeBet6"+e].onClick(this.clickArea,this);for(this.liftTypeCom4=this.fguiComponent.getChildByPath("left.area4"),e=0;e<4;e++)this["liftTypeBet4"+e]=this.liftTypeCom4.getChild("bet"+e),this["liftTypeBet4"+e].pos=e,this["liftTypeBet4"+e].mtype=1,this["liftTypeBet4"+e].onClick(this.clickArea,this);for(this.rightTypeCom6=this.fguiComponent.getChildByPath("right.area6"),this.rightBetCom=this.fguiComponent.getChildByPath("right.betcom"),e=0;e<6;e++)this["rightTypeBet6"+e]=this.rightTypeCom6.getChild("bet"+e),this["rightTypeBet6"+e].pos=e,this["rightTypeBet6"+e].mtype=2,this["rightTypeBet6"+e].onClick(this.clickArea,this);for(this.rightTypeCom4=this.fguiComponent.getChildByPath("right.area4"),e=0;e<4;e++)this["rightTypeBet4"+e]=this.rightTypeCom4.getChild("bet"+e),this["rightTypeBet4"+e].pos=e,this["rightTypeBet4"+e].mtype=2,this["rightTypeBet4"+e].onClick(this.clickArea,this);this.ui_btn_player.onClick(this.showPlayer,this),this.ui_btn_chat.onClick(this.showChat,this),this.ui_btn_tanm.onClick(this.offChat,this),h.NotificationCenter.Instance.on(c.default.AppLanguage.SELECT_LANGUAGE,this.setlanguage,this),this.ui_win.text=""},e.prototype.onDestroy=function(){h.NotificationCenter.Instance.off(c.default.AppLanguage.SELECT_LANGUAGE,this.setlanguage,this)},e.prototype.allChildCreated=function(){t.prototype.allChildCreated.call(this)},e.prototype.Show=function(e){void 0===e&&(e=!1),this.ui_bottom.visible=!e,a.AudioManager.Singleton.play("","pop_slider"),t.prototype.Show.call(this)},e.prototype.showPlayer=function(){g.default.instance.view.showPlayer()},e.prototype.showChat=function(){g.default.instance.view.showChat()},e.prototype.offChat=function(){g.default.instance.view.spectatorBarrage=this.ui_btn_tanm.selected},e.prototype.initConfig=function(t,e,i){for(var o=0;o<e.length;o++){var s=t.getChild("bet"+o);s.setArea(e[o]),s.setOdds(i[o])}},e.prototype.setlanguage=function(){var t="1"==l.AppConst.languageType?"english":"hindi";this.ui_titleleft.text=this.titleConfig[this.rule[0]][t],this.ui_titleRight.text=this.titleConfig[this.rule[1]][t];var e=xgameTable.getComplanguageArenaById(16)[t];this.liftTypeCom6.getChild("bet5").setArea(e),this.rightTypeCom6.getChild("bet5").setArea(e)},e.prototype.initBoard=function(){if(this.gold=g.default.instance.view.myGold,this.rule=g.default.instance.Model.rule,this.rule){this.setlanguage(),this.gold>=3e4?this.bet=[10,50,100,1e3,5e3]:this.bet=[1,5,10,50,100];for(var t=0;t<5;t++)this["ui_chip"+t].setData(this.bet[t],!0);this.Multiples=g.default.instance.Model.Multiples,this.config1[this.rule[0]]=this.Multiples[0],this.config1[this.rule[1]]=this.Multiples[1],1==this.rule[0]||2==this.rule[0]?(this.liftTypeCom6.visible=!0,this.liftTypeCom4.visible=!1,this.leftCom=this.liftTypeCom6,this.initConfig(this.liftTypeCom6,this.config[this.rule[0]],this.config1[this.rule[0]])):3!=this.rule[0]&&4!=this.rule[0]||(this.liftTypeCom6.visible=!1,this.liftTypeCom4.visible=!0,this.leftCom=this.liftTypeCom4,this.initConfig(this.liftTypeCom4,this.config[this.rule[0]],this.config1[this.rule[0]])),1==this.rule[1]||2==this.rule[1]?(this.rightTypeCom6.visible=!0,this.rightTypeCom4.visible=!1,this.rightCom=this.rightTypeCom6,this.initConfig(this.rightTypeCom6,this.config[this.rule[1]],this.config1[this.rule[1]])):3!=this.rule[1]&&4!=this.rule[1]||(this.rightTypeCom6.visible=!1,this.rightTypeCom4.visible=!0,this.rightCom=this.rightTypeCom4,this.initConfig(this.rightTypeCom4,this.config[this.rule[1]],this.config1[this.rule[1]]));var e=l.AppConst.gameStatus[1]==l.EnumGameStatus.Hide?"":"R$:";this.ui_gold.text=e+d.UIUtil.formatNumber100(g.default.instance.view.myGold),this.ui_nickname.text=d.UIUtil.getNickNameSub(l.AppConst.mPlayerModel.wechat.wName,6),d.UIUtil.loadImage(this.ui_head,l.AppConst.mPlayerModel.wechat.wicon)}},e.prototype.initGold=function(t){this.gold=t,this.gold>=3e4?this.bet=[10,50,100,1e3,5e3]:this.bet=[1,5,10,50,100];for(var e=0;e<5;e++)this["ui_chip"+e].setData(this.bet[e],!0);this.setGold()},e.prototype.setGold=function(){var t=l.AppConst.gameStatus[1]==l.EnumGameStatus.Hide?"":"R$:";this.ui_gold.text=t+d.UIUtil.formatNumber100(this.gold)},e.prototype.clickArea=function(t){if(1==g.default.instance.Model.bstate)if(this.gold<100*this.selectChip.bet)u.CommonCtr.instance.ShowTipLabel(_.updownConf.main[210405]["text"+l.AppConst.languageType]);else{var e=fgui.GObject.cast(t.currentTarget),i=e.mtype,o=e.pos,s=1==i?this.rule[0]:this.rule[1];g.default.instance.cs_gamble_rummy2(s,o,100*this.selectChip.bet)}},e.prototype.sc_gamble=function(t){a.AudioManager.Singleton.play("","bet"),this.gold=t._curGold,this.setGold();var e,i,o=t.rule,s=t.pos,n=d.UIUtil.formatNumber100(t.gamble);this.allMyBet+=n,this.rule[0]==o?(e=(this.liftTypeCom6.visible?this.liftTypeCom6:this.liftTypeCom4).getChild("bet"+s),i=0):this.rule[1]==o&&(e=(this.rightTypeCom6.visible?this.rightTypeCom6:this.rightTypeCom4).getChild("bet"+s),i=1),e.setBet(n),this.flyChip(e,n,s,i)},e.prototype.report=function(t){return n(this,void 0,void 0,function(){var e;return r(this,function(){return e=-(t-this.allMyBet),p.default.Singleton.reportGameRound(d.UIUtil.formatNumber100(e)),[2]})})},e.prototype.gameEnd=function(t){var e,i,o,s,n,r,a,h,c=this;this.Show(!1),this.report(t.wingold),t._win[0]._pGT.length>0&&(i=t._win[0].rule,e=t._win[0]._pGT[0].pos),t._win[1]&&t._win[1]._pGT.length>0&&(n=t._win[1].rule,s=t._win[1]._pGT[0].pos),i&&(i==this.rule[0]?(o=this.leftCom.getChild("bet"+e),a=e):i==this.rule[1]&&(r=this.rightCom.getChild("bet"+e),h=e)),n&&(n==this.rule[0]?(o=this.leftCom.getChild("bet"+s),a=s):n==this.rule[1]&&(r=this.rightCom.getChild("bet"+s),h=s)),o&&o.showEff(),r&&r.showEff(),this.scheduleOnce(function(){var t=c.ui_leftGold.localToGlobal(),e=c.leftBetCom.globalToLocal(t.x,t.y);for(var i in c.leftChip)if(c.leftChip[i]&&c.leftChip[i].length>0&&+i!=a)for(var s=function(t){var o=c.leftChip[i][t];fgui.GTween.to2(o.x,o.y,e.x,e.y,.5).setTarget(o,o.setPosition).onComplete(function(){o.removeFromParent(),c.addChipToPool(o)})},n=0;n<c.leftChip[i].length;n++)s(n);var l=c.ui_rightGold.localToGlobal(),u=c.rightBetCom.globalToLocal(l.x,l.y);for(var i in c.rightChip)if(c.rightChip[i]&&c.rightChip[i].length>0&&+i!=h){var p=function(t){var e=c.rightChip[i][t];fgui.GTween.to2(e.x,e.y,u.x,u.y,.5).setTarget(e,e.setPosition).onComplete(function(){e.removeFromParent(),c.addChipToPool(e)})};for(n=0;n<c.rightChip[i].length;n++)p(n)}c.scheduleOnce(function(){if(o){var t=(e=o.getBet())*o.getOdds()-e;c.flyToWinBet(t,0,o)}var e;r&&(t=(e=r.getBet())*r.getOdds()-e,c.flyToWinBet(t,1,r))},.6)},1),this.scheduleOnce(function(){var e=c.ui_head.localToGlobal(),i=c.leftBetCom.globalToLocal(e.x,e.y);for(var o in c.leftChip)if(c.leftChip[o]&&c.leftChip[o].length>0&&+o==a)for(var s=function(t){var e=c.leftChip[o][t];fgui.GTween.to2(e.x,e.y,i.x,i.y,.5).setTarget(e,e.setPosition).onComplete(function(){e.removeFromParent(),c.addChipToPool(e)})},n=0;n<c.leftChip[o].length;n++)s(n);var r=c.rightBetCom.globalToLocal(e.x,e.y);for(var o in c.rightChip)if(c.rightChip[o]&&c.rightChip[o].length>0&&+o==h){var l=function(t){var e=c.rightChip[o][t];fgui.GTween.to2(e.x,e.y,r.x,r.y,.5).setTarget(e,e.setPosition).onComplete(function(){e.removeFromParent(),c.addChipToPool(e)})};for(n=0;n<c.rightChip[o].length;n++)l(n)}c.showWin(t.wingold),c.gold=t.mygold,c.setGold()},2),this.scheduleOnce(function(){o&&o.cleanLinght(),r&&r.cleanLinght(),c.cleanLinght();var t="1"==l.AppConst.languageType?"Waiting for the anchor to settle":"\u090f\u0902\u0915\u0930 \u0915\u0947 \u092c\u0938\u0928\u0947 \u0915\u093e \u0907\u0902\u0924\u091c\u093c\u093e\u0930";u.CommonCtr.instance.ShowTipLabel(t)},3.5)},e.prototype.flyToWinBet=function(t,e,i){var o,s,n=this;0==e?(o=this.ui_leftGold.localToGlobal(),s=this.leftBetCom):(o=this.ui_rightGold.localToGlobal(),s=this.rightBetCom),this.getBetList(t,[],!1,4,this.bet,function(t){for(var r=0;r<t.length;r++){var l=n.getChip();l.scaleX=.45,l.scaleY=.45,l.setData(t[r]),n.chipArr.push(l),s.addChild(l),0==e?n.leftChip[i.pos].push(l):n.rightChip[i.pos].push(l);var a=s.globalToLocal(o.x,o.y);l.setPosition(a.x,a.y);var u=i.x+Math.floor(Math.random()*(i.width-100))+40,h=i.y+Math.floor(Math.random()*(i.height-100))+40;fgui.GTween.to2(l.x,l.y,u,h,.5+.1*r).setTarget(l,l.setPosition)}})},e.prototype.showSelfBet=function(t){this.allMyBet=0,t._p2G[0]._pGT.length>0&&this.comShowBet(t._p2G[0].rule,t._p2G[0]._pGT),t._p2G[1]._pGT.length>0&&this.comShowBet(t._p2G[1].rule,t._p2G[1]._pGT)},e.prototype.comShowBet=function(t,e){var i,o,s,n=this,r=e;t==this.rule[0]?(i=0,o=this.leftBetCom,s=this.leftCom):(i=1,o=this.rightBetCom,s=this.rightCom);for(var l=function(t){var e=d.UIUtil.formatNumber100(r[t].val);a.allMyBet+=e;var l=r[t].pos,u=s.getChild("bet"+l);-1==a.areaArr.indexOf(u)&&a.areaArr.push(u),a.getBetList(e,[],!1,4,a.bet,function(t){for(var e=0;e<t.length;e++){var s=n.getChip();s.scaleX=.45,s.scaleY=.45,s.setData(t[e]),s.pos=l,s.direction=i,n.chipArr.push(s),u.setBet(t[e]),0==i?(o.addChild(s),n.leftChip[l]||(n.leftChip[l]=[]),n.leftChip[l].push(s)):(o.addChild(s),n.rightChip[l]||(n.rightChip[l]=[]),n.rightChip[l].push(s));var r=u.x+Math.floor(Math.random()*(u.width-100))+40,a=u.y+Math.floor(Math.random()*(u.height-100))+40;s.setPosition(r,a)}})},a=this,u=0,h=r.length;u<h;u++)l(u)},e.prototype.getBetList=function(t,e,i,o,s,n){for(void 0===o&&(o=4);t>0;)t>=s[o]?(t-=s[o],e.push(s[o])):(t<s[0]&&(t=0),o--);n&&n(e)},e.prototype.showWin=function(t){var e=this;if(!(t<=0)){this.ui_bottom.getTransition("t0").play(function(){e.ui_win.text=""});var i=l.AppConst.gameStatus[1]==l.EnumGameStatus.Hide?"":"R$:";this.ui_win.text=i+d.UIUtil.formatNumber100(t)}},e.prototype.cleanLinght=function(){for(var t=0;t<this.areaArr.length;t++)this.areaArr[t].cleanLinght();this.areaArr.length=0,this.clean()},e.prototype.clean=function(){this.leftChip={},this.rightChip={};for(var t=0;t<this.chipArr.length;t++)this.chipArr[t].removeFromParent(),this.addChipToPool(this.chipArr[t]);this.chipArr=[]},e.prototype.flyChip=function(t,e,i,o){-1==this.areaArr.indexOf(t)&&this.areaArr.push(t);var s=this.getChip();s.scaleX=.45,s.scaleY=.45,s.setData(e),s.pos=i,s.direction=o,this.chipArr.push(s);var n,r=this.selectChip.localToGlobal();0==o?(this.leftBetCom.addChild(s),this.leftChip[i]||(this.leftChip[i]=[]),this.leftChip[i].push(s),n=this.leftBetCom.globalToLocal(r.x,r.y)):(this.rightBetCom.addChild(s),this.rightChip[i]||(this.rightChip[i]=[]),this.rightChip[i].push(s),n=this.rightBetCom.globalToLocal(r.x,r.y)),s.setPosition(n.x,n.y);var l=t.x+Math.floor(Math.random()*(t.width-130))+80,a=t.y+Math.floor(Math.random()*(t.height-100))+40;fgui.GTween.to2(s.x,s.y,l,a,.5).setTarget(s,s.setPosition)},e.prototype.getChip=function(){return fgui.UIPackage.createObject("rummy2","chipnow")},e.prototype.addChipToPool=function(){},e.prototype.cleanPool=function(){},e.prototype.clickSelectChip=function(t){var e=fgui.GObject.cast(t.currentTarget);this.selectChip!=e&&(this.lastSelectChip=this.selectChip,this.selectChip=e,this.moveTopChip(),this.lastSelectChip&&this.moveBottonChip())},e.prototype.moveTopChip=function(){var t=this;fgui.GTween.kill(this.selectChip),fgui.GTween.to2(this.selectChip.x,this.selectChip.y,this.selectChip.x,this.selectChip.y-20,.1).setTarget(this.selectChip,this.selectChip.setPosition).onUpdate(function(){t.ui_selectLinght.setPosition(t.selectChip.x,t.selectChip.y)})},e.prototype.moveBottonChip=function(){fgui.GTween.kill(this.lastSelectChip),fgui.GTween.to2(this.lastSelectChip.x,this.lastSelectChip.y,this.lastSelectChip.x,this.lastSelectChip.y+20,.1).setTarget(this.lastSelectChip,this.lastSelectChip.setPosition)},e}(m.default);i.default=b,cc._RF.pop()},{"../../../../../Boot/scirpt/AppConst":void 0,"../../../../../Common/script/base/AudioManager":void 0,"../../../../../Common/script/base/CommonCtr":void 0,"../../../../../Common/script/base/NotificationCenter":void 0,"../../../../../Common/script/base/NotificationName":void 0,"../../../../../Common/script/base/ReportManager":void 0,"../../../../../Common/script/base/ViewBase":void 0,"../../../../../Common/script/util/UIUtil":void 0,"../../../../../GameHall/dlc/script/config/LocalizationConfig":void 0,"../../Controller/RummyController2":"RummyController2","./RmAreaCom":"RmAreaCom","./RmChip":"RmChip"}],RmChat:[function(t,e,i){"use strict";cc._RF.push(e,"3cba8nZxEpIBJDWz45XGtjE","RmChat");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var n=t("../../../../../Common/script/base/AudioManager"),r=t("../../../../../Common/script/base/ViewBase"),l=t("../../../../../Common/script/util/UIUtil"),a=t("../../Controller/RummyController2"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_freeChatList=null,e.message=[],e.emjRes=["deyi","keai","yun","se","zhuakuang","haixiu","outo","ku","fanu"],e.emjIndex="123456789",e.ui_state=null,e.ui_btn_bg=null,e}return s(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/rummy2"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"chat"},enumerable:!1,configurable:!0}),e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),this.fguiComponent.visible=!1,this.ui_freeChatList.setVirtual(),this.ui_freeChatList.itemProvider=this.getListItemResource.bind(this),this.ui_freeChatList.itemRenderer=this.renderListItem.bind(this),this.ui_state.onClick(this.flagChat,this),this.ui_btn_bg.onClick(this.Hide,this),this.ui_state.selected=!0},e.prototype.allChildCreated=function(){t.prototype.allChildCreated.call(this)},e.prototype.Show=function(){t.prototype.Show.call(this),n.AudioManager.Singleton.play("","pop_slider"),this.ui_freeChatList.numItems=this.message.length},e.prototype.getListItemResource=function(t){return this.message[t].fromMe?"ui://rummy2/chatRight":"ui://rummy2/chatLift"},e.prototype.renderListItem=function(t,e){var i=this.message[t],o=e.getChild("title").asTextField,s=e.getChild("head").asCom.getChild("head").asLoader;l.UIUtil.loadImage(s,i.head);var n=e.getChild("emj").asLoader;2==i.type?(this.emjIndex.includes(i.content)?n.url="ui://Common/"+this.emjRes[+i.content-1]:n.url="ui://Common/"+i.content,o.text="      "):(n.url="",o.text=i.content)},e.prototype.addMsg=function(t){var e,i=this.ui_freeChatList.scrollPane.isBottomMost;this.message.push(t),this.message.length>50&&this.message.splice(0,this.message.length-50),(null===(e=this.fguiComponent)||void 0===e?void 0:e.visible)&&(this.ui_freeChatList.numItems=this.message.length,i&&this.ui_freeChatList.scrollPane.scrollBottom())},e.prototype.flagChat=function(){cc.log("-----12312-----------",this.ui_state.selected),a.default.instance.view.anchorBarrage=this.ui_state.selected},e}(r.default);i.default=u,cc._RF.pop()},{"../../../../../Common/script/base/AudioManager":void 0,"../../../../../Common/script/base/ViewBase":void 0,"../../../../../Common/script/util/UIUtil":void 0,"../../Controller/RummyController2":"RummyController2"}],RmChip:[function(t,e,i){"use strict";cc._RF.push(e,"e56edmIWsxKK77y8KPJSi0Q","RmChip");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.setData=function(t,e){void 0===e&&(e=!1),this.bet=t,this.icon=e&&t>=1e3?"ui://rummy2/chip1"+t:"ui://rummy2/chip"+t},e.prototype.getBet=function(){return this.bet},e}(fgui.GButton);i.default=n,cc._RF.pop()},{}],RmplayerQueue:[function(t,e,i){"use strict";cc._RF.push(e,"163d5kRxDdO2aZd4NhFk0oO","RmplayerQueue");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var n=t("../../../../../Boot/scirpt/AppConst"),r=t("../../../../../Common/script/base/AudioManager"),l=t("../../../../../Common/script/base/ViewBase"),a=t("../../../../../Common/script/util/UIUtil"),u=t("../../Controller/RummyController2"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_btn_closePlayer=null,e.ui_playersNum=null,e.ui_playerList=null,e.otherPlay=[],e.page=1,e.ui_socreTitle=null,e.ui_playersLab=null,e}return s(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/rummy2"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"players"},enumerable:!1,configurable:!0}),e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),this.fguiComponent.visible=!1,this.ui_btn_closePlayer.onClick(this.Hide,this),this.ui_playerList.setVirtual(),this.ui_playerList.itemRenderer=this.renderListItem.bind(this),this.ui_playerList.on(fgui.Event.PULL_UP_RELEASE,this.onPullUpToRefresh,this),this.ui_playerList.numItems=0,"2"==n.AppConst.languageType&&this.setLanguage()},e.prototype.Hide=function(){t.prototype.Hide.call(this),r.AudioManager.Singleton.play("","btn_close")},e.prototype.setLanguage=function(){var t="1"==n.AppConst.languageType?"english":"hindi";"1"==n.AppConst.languageType?(this.ui_socreTitle.url="ui://rummy2/title_player",this.ui_playersLab.text="Players"):(this.ui_socreTitle.url="ui://rummy2/title_player2",this.ui_playersLab.text=xgameTable.getComplanguageArenaById(1)[t])},e.prototype.allChildCreated=function(){t.prototype.allChildCreated.call(this),this.Show()},e.prototype.Show=function(){t.prototype.Show.call(this),this.otherPlay.length=0,this.page=0,r.AudioManager.Singleton.play("","pop_up"),u.default.instance.cs_getplayerlist_rummy2(0)},e.prototype.renderListItem=function(t,e){e.getChildAt(2).asTextField.text=this.otherPlay[t]._wechat.wName,a.UIUtil.loadImage(e.getChildByPath("head.head").asLoader,this.otherPlay[t]._wechat.wicon)},e.prototype.onPullUpToRefresh=function(){this.page+=1,u.default.instance.cs_getplayerlist_rummy2(this.page)},e.prototype.updatePlayerList=function(t){var e;this.ui_playersNum.text=t.iCount+"",(e=this.otherPlay).push.apply(e,t.playerlist),this.ui_playerList.numItems=this.otherPlay.length},e}(l.default);i.default=h,cc._RF.pop()},{"../../../../../Boot/scirpt/AppConst":void 0,"../../../../../Common/script/base/AudioManager":void 0,"../../../../../Common/script/base/ViewBase":void 0,"../../../../../Common/script/util/UIUtil":void 0,"../../Controller/RummyController2":"RummyController2"}],Rummy2:[function(t,e,i){"use strict";cc._RF.push(e,"1af3eNSyLNLsrsAkHu//0Xb","Rummy2"),Object.defineProperty(i,"__esModule",{value:!0}),i.PermutationAndCombination=i.RummySplitHelper=i.Rummy2=void 0;var o,s=t("../../../../Common/script/util/UIUtil"),n=t("../Controller/RummyController2"),r=function(){function t(){}return t.GetCardValue=function(t){return t<100?t:t%100},t.GetCompareColor=function(t){var e=Math.floor(t/100);return 2==e?e=4:1==e&&(e=3),3==e?2:1},t.CompareColor=function(e,i){return e<100||i<100?99:t.GetCompareColor(e)>t.GetCompareColor(i)?1:t.GetCompareColor(e)<t.GetCompareColor(i)?-1:0},t.CompareCard=function(e,i){return t.GetCardValue(e)>t.GetCardValue(i)||!(t.GetCardValue(e)<t.GetCardValue(i))&&1==t.CompareColor(e,i)},t.GroupSortByColor=function(t){for(var e=[],i=0;i<5;i++)e[i]=[];for(var o=0;o<t.length;o++){var s=Math.floor(t[o]/100);0==s?e[0].push(t[o]):2==s?e[1].push(t[o]):1==s?e[2].push(t[o]):3==s?e[3].push(t[o]):4==s&&e[4].push(t[o])}return e.filter(function(t){return t.length>0})},t.GroupSort=function(t,e){for(var i,o=this.GroupSortByColor(t),s=0;s<o.length;s++)o[s].sort();var n,r=e[0]%100,l=e[1]%100;n=r==l?[16,17,100+r,200+r,300+r,400+r]:[16,17,100+r,200+r,300+r,400+r,100+l,200+l,300+l,400+l];for(var a=[],u=0;u<o.length;u++)if(o[u].length>0){var h=this.findMaxS(o[u]);h.length>1?a.push.apply(a,h):1==h.length&&(h[0].length>1?a.push.apply(a,h):a.push(h))}var c=a.filter(function(t){return t.length>2}),p=a.filter(function(t){return 2==t.length}),m=a.filter(function(t){return 1==t.length}),d=[];for(u=m.length-1;u>=0;u--)16!=m[u][0]&&17!=m[u][0]&&m[u][0]%100!=e[0]%100&&m[u][0]%100!=e[1]%100||(d.push(m[u][0]),m.splice(u,1));for(u=p.length-1;u>=0;u--){if(16==p[u][0]||17==p[u][0]){d.push.apply(d,p[u]),p.splice(u,1);break}p[u][0]%100==e[0]%100||p[u][0]%100==e[1]%100?(d.push(p[u][0]),p[u].shift(),m.push(p[u]),p.splice(u,1)):p[u][1]%100==e[0]%100||p[u][1]%100==e[1]%100?(d.push(p[u][1]),p[u].pop(),m.push(p[u]),p.splice(u,1)):Math.abs(p[u][0]%100-p[u][1]%100)>2&&(m.push([p[u][0]]),m.push([p[u][1]]),p.splice(u,1))}for(u=0;u<c.length;u++)if(c[u].length>3)if(c[u][0]%100==e[0]%100||c[u][0]%100==e[1]%100){var _=c[u].shift();d.push(_)}else if(c[u][c[u].length-1]%100==e[0]%100||c[u][c[u].length-1]%100==e[1]%100){var g=c[u].pop();d.push(g)}for(p.sort(function(t,e){return e[1]%100-e[0]%100-(t[1]%100-t[0]%100)}),u=m.length-1;u>0;u--){var y=m[u][0]%100;if(16!=y&&17!=y){var f=Math.floor(m[u][0]/100),b=m[u-1][0]%100;if((k=Math.floor(m[u-1][0]/100))==f&&b+2==y)p.unshift([m[u-1][0],m[u][0]]),m.splice(u,1),m.splice(u-1,1),u--;else if(14==y)for(var C=u-1;C>=0;C--){var v=Math.floor(m[C][0]/100),w=m[C][0]%100;if(v!=f)break;if(2==w||3==w){p.unshift([m[u][0],m[C][0]]),m.splice(u,1),m.splice(C,1),u--;break}}}}if(p.length>0&&d.length>0)for(u=0;u<p.length;u++){var P=d.pop();if(!P)break;p[u].push(P)}for(u=m.length-1;u>=0;u--){var k=Math.floor(m[u][0]/100);for(C=0;C<p.length;C++)if(k==(v=Math.floor(p[C][0]/100))){var M=p[C].concat();if(M.push(m[u][0]),this.GetRummyTypeWild(M,n)>0){p[C].push(m[u][0]),m.splice(u,1);break}}}var T=p.filter(function(t){return 2==t.length}),S=p.filter(function(t){return t.length>2}),I=[].concat.apply([],m),A=[].concat.apply([],T);I.push.apply(I,A);var x={};for(u=I.length-1;u>=0;u--)x[N=I[u]%100]?x[N].includes(I[u])||x[N].push(I[u]):(x[N]=[],x[N].push(I[u]));var R=[];for(var N in x)if(x[N].length>2){for(R.push(x[N]),u=0;u<x[N].length;u++)for(C=I.length-1;C>=0;C--)if(I[C]==x[N][u]){I.splice(C,1);break}}else if(2==x[N].length&&d.length>0){var O=[];for(O.push(d.pop()),O.push.apply(O,x[N]),S.push(O),u=0;u<x[N].length;u++)for(C=I.length-1;C>=0;C--)if(I[C]==x[N][u]){I.splice(C,1);break}}if(d.length>0)if(d.length>1&&I.length>0){var D=I.pop();d.push(D),S.push(d)}else S.length>0?(i=S[S.length-1]).push.apply(i,d):I.push.apply(I,d);for(I.reverse(),u=I.length-1;u>=0;u--)for(k=Math.floor(I[u]/100),C=0;C<S.length;C++)if(k==(v=Math.floor(S[C][0]/100))){var B=S[C].concat();if(B.push(I[u]),this.GetRummyTypeWild(B,n)>0){S[C].push(I[u]),I.splice(u,1);break}}S.length>0&&c.push.apply(c,S),R.length>0&&c.push.apply(c,R);for(var G=this.GroupSortByColor(I),L=[],U=0;U<G.length;U++)G[U].sort(),1==G[U].length?L.push.apply(L,G[U]):c.push(G[U]);return L.length>0&&c.push(L),1==c.length?o:(cc.log("--------------------",c,d),c)},t.findMaxS=function(t){var e=[];if(e.push.apply(e,t),e.length<=1)return e;var i=[],o=[];i.push(e[0]);var s=[],n=1;if(e.length>=3)if(3==e.length){if(e[0]%100==2&&e[1]%100==3&&e[e.length-1]%100==14){var r=e.pop();return i.unshift(r),i.push(e[1]),n=2,[i]}}else e[0]%100==2&&e[1]%100==3&&e[e.length-1]%100==14&&(r=e.pop(),i.unshift(r),i.push(e[1]),n=2);for(var l=n;l<e.length;l++)if(i[i.length-1]==e[l]){if(s.length>0&&s[s.length-1]+1==e[l]){var a=[];a.push(s.pop()),a.push(e[l]),o.push(a)}else s.push(e[l]);l==e.length-1&&o.push(i)}else i[i.length-1]+1==e[l]?(i.push(e[l]),l==e.length-1&&o.push(i)):(o.push(i.concat()),(i=[]).push(e[l]),l==e.length-1&&o.push(i));return s.length>0&&(s.length>2?this.shunzi(s)?o.push(s):o.push.apply(o,s.map(function(t){return[].concat(t)})):o.push(s)),o},t.AddorRemoveSelect=function(t,e){if(e)n.default.instance.Model.selectCard.push(t);else{var i=n.default.instance.Model.selectCard.indexOf(t);n.default.instance.Model.selectCard.splice(i,1)}},t.shunzi=function(t){var e=t.concat(),i=!1;if(e[e.length-1]-e[0]==e.length-1&&(i=!0),!i&&e[e.length-1]%100==14){var o=e[e.length-1];e.splice(e.length-1,1),e.unshift(o-13),e[e.length-1]-e[0]==e.length-1&&(i=!0)}return i},t.groupColorNum=function(t){for(var e=[],i=0;i<t.length;i++){var o=Math.floor(t[i]/100);-1==e.indexOf(o)&&e.push(o)}return e},t.GetRummyTypeWild=function(t,e){var i=o.Error;if(t.length<3)return i;t.sort(function(t,e){return t-e});var s=[];if(s.push.apply(s,t),this.IsFlush(t)){var n=t.concat();if(new Set(n).size==t.length&&this.shunzi(t))return o.FStraight_pure}var r,l=s.filter(function(t){return!e.includes(t)});if(r=s.length-l.length,s=null,0==(s=l).length)return t.length;var a=this.IsFlush(s),u=this.groupColorNum(s),h=this.OrderPaiLordNoColor(s,u);if(a){for(var c=!1,p=0,m=0;m<h.length-1;m++){if(!(h[m]-h[m+1]<=r+1-p&&h[m]-h[m+1]!=0)){c=!1;break}p+=h[m]-h[m+1]-1,c=!0}if(14==h[0]&&!c&&h.length>1)for(p=0,h.splice(0,1),h.push(1),m=0;m<h.length-1;m++){if(!(h[m]-h[m+1]<=r+1-p&&h[m]-h[m+1]!=0)){c=!1;break}p+=h[m]-h[m+1]-1,c=!0}(c||1==h.length)&&(i=h.length+r)}else switch(h.length){case 2:this.IsSame(h,2)&&2==u.length&&(1==r&&(i=o.Three_3),2==r&&(i=o.Bomb_4));break;case 3:this.IsSame(h,3)&&3==u.length&&(i=o.Three_3,1==r&&(i=o.Bomb_4),r>1&&(i=o.Error));break;case 4:this.IsSame(h,4)&&0==r&&4==u.length&&(i=o.Bomb_4)}return i},t.OrderPaiLordNoColor=function(t,e){var i=[];s.UIUtil.Concat(i,t);for(var o=0;o<i.length;o++){var n=s.UIUtil.NumberToInt(i[o]/100);i[o]>100&&(i[o]%=100),-1==e.indexOf(n)&&e.push(n)}var r=[];return r.push.apply(r,i),r.sort(function(t,e){return e-t}),r},t.IsFlush=function(t){for(var e=!0,i=Math.floor(t[0]/100),o=1;o<t.length;o++)if(i!=Math.floor(t[o]/100))return!1;return e},t.ColorIsStraight=function(e){if(!this.IsFlush(e))return!1;var i=t.OrderPaiLordNoColor(e,[]);return this.IsStraight(i)},t.IsStraight=function(t){for(var e=!1,i=0;i<t.length-1;i++){if(t[i]-1!=t[i+1]){e=!1;break}e=!0}if(14==t[0]&&!e&&t.length>1)for(t.splice(0,1),t.push(1),i=0;i<t.length-1;i++){if(t[i]-1!=t[i+1]){e=!1;break}e=!0}return e},t.IsSame=function(t,e){for(var i=!1,o=!1,s=0;s<e-1;s++){if(t[s]!=t[s+1]){i=!1;break}i=!0}for(s=t.length-1;s>t.length-e;s--){if(t[s]!=t[s-1]){o=!1;break}o=!0}return!(!i&&!o)},t.GetCombinationCard=function(t,e){if(13!=t.length&&14!=t.length)return cc.error("\u4f20\u5165\u7684\u624b\u724c\u4e0d\u5bf9"),[];t=this.OrderPai(t);var i={bool:!1},o=new a;if(13==t.length)return o.Split(t,e),o.GetCombinationCard(t,e,i);for(var n=0,r=[],l=[],u=0;u<t.length;u++){r=[],s.UIUtil.Concat(r,t),r.splice(u,1),o.Split(r,e);var h=o.GetCombinationCard(r,e,i),c=h.length;if(i.bool)return h;c>n&&(l=[],s.UIUtil.Concat(l,h),n=c)}return l},t.OrderPai=function(t){var e=[];return s.UIUtil.Concat(e,t),e.sort(),e},t.GetPoker_Count=function(t){var e=new Map;return t.forEach(function(t){e.has(t)?e.set(t,e.get(t)+1):e.set(t,1)}),e},t}();i.Rummy2=r,function(t){t[t.Error=0]="Error",t[t.Three_3=1]="Three_3",t[t.Bomb_4=2]="Bomb_4",t[t.FStraight3_3=3]="FStraight3_3",t[t.FStraight4_4=4]="FStraight4_4",t[t.FStraight5_5=5]="FStraight5_5",t[t.FStraight6_6=6]="FStraight6_6",t[t.FStraight7_7=7]="FStraight7_7",t[t.FStraight8_8=8]="FStraight8_8",t[t.FStraight9_9=9]="FStraight9_9",t[t.FStraight10_10=10]="FStraight10_10",t[t.FStraight11_11=11]="FStraight11_11",t[t.FStraight12_12=12]="FStraight12_12",t[t.FStraight13_13=13]="FStraight13_13",t[t.FStraight_pure=14]="FStraight_pure"}(o||(o={}));var l,a=function(){function t(){this.cards=[],this._cardsnocolor=[],this._one=[],this._two=[],this._three=[],this._four=[],this._single=[],this._double=[],this._threeList=[],this._straight=[],this._sequence=[],this._bomb4List=[],this._wildlist=[],this._heart=[],this._spade=[],this._club=[],this._diamond=[],this._comCard=[]}return t.prototype.Split=function(t,e,i){void 0===i&&(i=!1),this.cards=[],s.UIUtil.Concat(this.cards,t),this._wild=e,this._wildforstra=i,this._cardsnocolor=r.OrderPaiLordNoColor(t,[]),this.SearchWild(),this.SearchColor(),this.SearchBase(),this.SearchBomb(),this.Search123(),this._straight=[],this.SearchStraight(this._diamond),this.SearchStraight(this._club),this.SearchStraight(this._spade),this.SearchStraight(this._heart)},t.prototype.SearchColor=function(){var t=this;this.cards.forEach(function(e){4==Math.floor(e/100)&&t._diamond.push(e),3==Math.floor(e/100)&&t._club.push(e),2==Math.floor(e/100)&&t._spade.push(e),1==Math.floor(e/100)&&t._heart.push(e)})},t.prototype.SearchWild=function(){var t=this;this.cards.forEach(function(e){e!=l.jokers16&&e!=l.jokersb17||t._wildlist.push(e),e%100==t._wild%100&&t._wildlist.push(e)})},t.prototype.iswild=function(t){return this._wildlist.indexOf(t)>=0},t.prototype.SearchBase=function(){var t=this,e=r.GetPoker_Count(this._cardsnocolor);e.forEach(function(i,o){4==e.get(o)?(t._one.push(o),t._two.push(o),t._three.push(o),t._four.push(o)):3==e.get[o]?(t._one.push(o),t._two.push(o),t._three.push(o)):2==e.get[o]?(t._one.push(o),t._two.push(o)):1==e.get(o)&&t._one.push(o)}),this._one=r.OrderPaiLordNoColor(this._one,[]),this._two=r.OrderPaiLordNoColor(this._two,[]),this._three=r.OrderPaiLordNoColor(this._three,[]),this._four=r.OrderPaiLordNoColor(this._four,[])},t.prototype.SearchBomb=function(){this._bomb4List=[],s.UIUtil.Concat(this._bomb4List,this._four)},t.prototype.Search123=function(){this._single=[],s.UIUtil.Concat(this._single,this._one),this._double=[],s.UIUtil.Concat(this._double,this._two),this._threeList=[],s.UIUtil.Concat(this._threeList,this._three)},t.prototype.SearchStraight=function(t){if(!(t.length<3)){var e=[];s.UIUtil.Concat(e,t);for(var i=[],o=!1,n=0;n<t.length-1;n++)if((l=!1)&&(this.iswild(t[n])||this.iswild(t[n+1]))&&(l=!0),t[n]==t[n+1]-1||l)i.push(t[n]),n+1==t.length-1&&i.push(t[n+1]);else{if(i.push(t[n]),i.length>=3)this._straight.push(i);else if(n==t.length-2&&t[n+1]%100==14){o=!0;var r=e[n+1]/100*100+1;e.splice(n+1,1),e.unshift(r)}i=[]}if(i.length<3&&(i.forEach(function(t){if(t%100==14){o=!0;var i=t/100*100+1;e.splice(e.indexOf(t),1),e.unshift(i)}}),i=[]),o)for(n=0;n<e.length-1;n++){var l;(l=!1)&&(this.iswild(e[n])||this.iswild(e[n+1]))&&(l=!0),e[n]==e[n+1]-1||l?(e[n]%100==1&&(e[n]=e[n]/100*100+14),i.push(e[n]),n+1==e.length-1&&i.push(e[n+1])):(i.push(e[n]),i.length>=3&&this._straight.push(i),i=[])}i.length>=3&&this._straight.push(i)}},t.prototype.SearchMostCountSequece=function(){for(var t=this,e=0;e<this._straight.length;e++){var i=this._straight[e];if(3==i.length)this._sequence.push(i);else for(var o=3;o<=i.length;o++)u.GetCombination2(i,o).forEach(function(e){t._wildforstra?r.GetRummyTypeWild(t.cards,t._wildlist)>=3&&t._sequence.push(e):r.ColorIsStraight(e)&&t._sequence.push(e)})}},t.prototype.TryGetFirstLife=function(){return!(this._straight.length<1||(this.SearchMostCountSequece(),0))},t.prototype.GetCombinationCard=function(t,e,i){var o;if(this._comCard.length=0,i.bool=!1,cc.log("==============",this._straight,this._threeList,this._straight,this._sequence,this._bomb4List),!this.TryGetFirstLife())return this._comCard.push(t),this._comCard;for(var s=0;s<this._sequence.length;s++){var n=[];if(this._sequence[s].forEach(function(e){t.splice(t.indexOf(e),1)}),this.CheckHuSecond(t,n,this._comCard))return this._comCard=[],this._comCard.push(this._sequence[s]),(o=this._comCard).push.apply(o,n),i.bool=!0,this._comCard;t.push.apply(t,this._sequence[s]),this._comCard.push(this._sequence[s])}return this._comCard.forEach(function(e){e.forEach(function(e){t.splice(t.indexOf(e),1)})}),t.length>0&&this._comCard.push(t),this._comCard},t.prototype.CheckHuSecond=function(t,e,i){var o=this;if(e.length=0,i.length=0,t.length<3)return!1;if(this._wildforstra=!0,r.GetRummyTypeWild(t,this._wildlist)>=3)return e.push(t),!0;for(var n=[],l=3;l<=t.length;l++)u.GetCombination2(t,l).forEach(function(t){var e=[];s.UIUtil.Concat(e,t),r.GetRummyTypeWild(e,o._wildlist)>=3&&n.push(e)});for(var a=[],h=[],c=0;c<n.length;c++){if(n[c].forEach(function(e){t.splice(t.indexOf(e),1)}),0==t.length)return e.push(n[c]),!0;var p=[];if(this.CheckHuMax7(t,p,h))return e.push(n[c]),e.push.apply(e,p),!0;t.push.apply(t,n[c]),a.length=0,s.UIUtil.Concat(a,n[c])}return a.length>0&&i.push(a),h.length>0&&i.push(h),!1},t.prototype.CheckHuMax7=function(t,e,i){var n=this;if(e.length=0,i.length=0,t.length<3)return!1;if(r.GetRummyTypeWild(t,this._wildlist)!=o.Error)return e.push(t),!0;for(var l=[],a=3;a<=t.length;a++)u.GetCombination2(t,a).forEach(function(t){var e=[];s.UIUtil.Concat(e,t);var i=r.GetRummyTypeWild(e,n._wildlist)!=o.Error;i?l.push(e):0!=i||3!=t.length&&4!=t.length||r.GetRummyTypeWild(e,n._wildlist)!=o.Error&&l.push(e)});for(var h=0;h<l.length;h++){if(l[h].forEach(function(e){t.splice(t.indexOf(e),1)}),0==t.length)return e.push(l[h]),!0;var c=[];if(this.CheckHuMax4(t,c))return e.push(l[h]),e.push(c),!0;t.push.apply(t,l[h]),i.length=0,s.UIUtil.Concat(i,l[h])}return!1},t.prototype.CheckHuMax4=function(t,e){return e.length=0,!(t.length<3||r.GetRummyTypeWild(t,this._wildlist)==o.Error||(s.UIUtil.Concat(e,t),0))},t.prototype.ColorIsStraight=function(t){var e=[];if(s.UIUtil.Concat(e,t),this._wildlist.forEach(function(t){e.indexOf(t)>=0&&e.splice(e.indexOf(t),1)}),!this.IsFlushW(e))return!1;var i=r.OrderPaiLordNoColor(e,[]);return this.IsStraightW(i)},t.prototype.IsStraightW=function(t){for(var e=!1,i=0;i<t.length-1;i++){if(t[i]-1!=t[i+1]){e=!1;break}e=!0}return e},t.prototype.IsFlushW=function(t){for(var e=!0,i=t[0]/100,o=1;o<t.length;o++)if(i!=t[o]/100){e=!1;break}return e},t.IsFlush=function(t){var e=!0;if(0==t.length)return e;for(var i=t[0]/100,o=1;o<t.length;o++)if(i!=t[o]/100){e=!1;break}return e},t.IsStraight=function(t){var e=!1;if(t.length<3)return e;for(var i=0;i<t.length-1;i++){if(t[i]-1!=t[i+1]){e=!1;break}e=!0}if(14==t[0]&&!e&&t.length>1)for(t.splice(0,1),t.push(1),i=0;i<t.length-1;i++){if(t[i]-1!=t[i+1]){e=!1;break}e=!0}return e},t}();i.RummySplitHelper=a,function(t){t[t.p2=2]="p2",t[t.p3=3]="p3",t[t.p4=4]="p4",t[t.p5=5]="p5",t[t.p6=6]="p6",t[t.p7=7]="p7",t[t.p8=8]="p8",t[t.p9=9]="p9",t[t.p10=10]="p10",t[t.p11=11]="p11",t[t.p12=12]="p12",t[t.p13=13]="p13",t[t.p14=14]="p14",t[t.jokers16=16]="jokers16",t[t.jokersb17=17]="jokersb17"}(l||(l={}));var u=function(){function t(){}return t.Swap=function(t,e){var i=t;t=e,e=i},t.GetCombination=function(t,e,i,o,s,n){for(var r=i;r>=o;r--)if(s[o-1]=r-1,o>1)this.GetCombination(t,e,r-1,o-1,s,n);else{null==t&&(t=[]);for(var l=[],a=0;a<s.length;a++)l[a]=e[s[a]];t.push(l)}},t.GetPermutation=function(t,e,i,o){if(i==o){null==t&&(t=[]);var n=[];s.UIUtil.Concat(n,e),t.push(n)}else for(var r=i;r<=o;r++)this.Swap(e[i],e[r]),this.GetPermutation(t,e,i+1,o),this.Swap(e[i],e[r])},t.GetPermutation2=function(t,e,i){if(e<0||i>t.length-1)return null;var o=[];return this.GetPermutation(o,t,e,i),o},t.GetPermutation3=function(t){return this.GetPermutation2(t,0,t.length-1)},t.GetPermutation4=function(t,e){if(e>t.length)return null;for(var i=[],o=this.GetCombination2(t,e),s=0;s<o.length;s++){var n=[];this.GetPermutation(n,o[s],0,e-1),i.concat(n)}return i},t.GetCombination2=function(t,e){if(t.length<e)return null;var i=[];return this.GetCombination(i,t,t.length,e,[],e),i},t}();i.PermutationAndCombination=u,cc._RF.pop()},{"../../../../Common/script/util/UIUtil":void 0,"../Controller/RummyController2":"RummyController2"}],RummyController2:[function(t,e,i){"use strict";cc._RF.push(e,"ed049adzb1Mb4lu6/t23cH2","RummyController2"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../Boot/scirpt/AppConst"),s=t("../../../../Common/script/base/BaseCode"),n=t("../../../../Common/script/base/CommonCtr"),r=t("../../../../Common/script/base/cs_base"),l=t("../../../../Common/script/base/WebSocketManager"),a=t("../../../../Common/script/util/UIUtil"),u=t("../Model/RummyModel2"),h=function(){function t(){this.view=null}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t,this._instance.RegistNotify()),this._instance},enumerable:!1,configurable:!0}),t.Destroy=function(){this._instance&&(this._instance.UnRegistNotify(),this._instance._model=null,this._instance=null)},t.prototype.RegistNotify=function(){var t=l.WebSocketManager.getInstance;t.RegistNotify("sc_tablestart_rummy2_n",this.sc_tablestart_rummy_n,this),t.RegistNotify("sc_dapai_rummy2_n",this.sc_dapai_rummy_n,this),t.RegistNotify("sc_mopai_rummy2_n",this.sc_mopai_rummy_n,this),t.RegistNotify("sc_end_rummy2_n",this.sc_end_rummy_n,this),t.RegistNotify("sc_sitdown_rummy2_n",this.sc_sitdown_rummy_n,this),t.RegistNotify("sc_drop_rummy2_n",this.sc_drop_rummy_n,this),t.RegistNotify("sc_situpkeep_rummy2_n",this.sc_situpkeep_rummy_n,this),t.RegistNotify("sc_finish_rummy2_n",this.sc_finish_rummy_n,this),t.RegistNotify("sc_token_rummy2_n",this.sc_token_rummy_n,this),t.RegistNotify("sc_refhuff_rummy2_n",this.sc_refhuff_rummy_n,this),t.RegistNotify("sc_gamblesettlement_rummy2_n",this.sc_gamblesettlement_rummy2_n,this),t.RegistNotify("sc_startgamble_rummy2_n",this.sc_startgamble_rummy2_n,this),t.RegistNotify("sc_changeanchor_rummy2_n",this.sc_changeanchor_rummy2_n,this),t.RegistNotify("sc_entertable_rummy",this.sc_entertable_rummy,this),t.RegistNotify("sc_makecard_rummy2_n",this.sc_makecard_rummy2_n,this),t.RegistNotify("sc_lineuplist_rummy2_n",this.sc_lineuplist_rummy2_n,this),t.RegistNotify("sc_anchorshare_rummy2",this.sc_anchorshare_rummy2,this),t.RegistNotify("sc_chat100_n",this.sc_chat100_n,this),t.RegistNotify("sc_chat_n",this.sc_chat_n,this),t.RegistNotify("sc_one_exittable_n",this.sc_one_exittable_n,this),t.RegistNotify("sc_addgoldingame",this.sc_addgoldingame,this),t.RegistNotify("sc_freshgold_n",this.sc_freshgold_n,this)},t.prototype.UnRegistNotify=function(){var t=l.WebSocketManager.getInstance;t.UnRegistNotify("sc_tablestart_rummy2_n",this.sc_tablestart_rummy_n,this),t.UnRegistNotify("sc_dapai_rummy2_n",this.sc_dapai_rummy_n,this),t.UnRegistNotify("sc_mopai_rummy2_n",this.sc_mopai_rummy_n,this),t.UnRegistNotify("sc_end_rummy2_n",this.sc_end_rummy_n,this),t.UnRegistNotify("sc_sitdown_rummy2_n",this.sc_sitdown_rummy_n,this),t.UnRegistNotify("sc_drop_rummy2_n",this.sc_drop_rummy_n,this),t.UnRegistNotify("sc_situpkeep_rummy2_n",this.sc_situpkeep_rummy_n,this),t.UnRegistNotify("sc_finish_rummy2_n",this.sc_finish_rummy_n,this),t.UnRegistNotify("sc_token_rummy2_n",this.sc_token_rummy_n,this),t.UnRegistNotify("sc_refhuff_rummy2_n",this.sc_refhuff_rummy_n,this),t.UnRegistNotify("sc_gamblesettlement_rummy2_n",this.sc_gamblesettlement_rummy2_n,this),t.UnRegistNotify("sc_startgamble_rummy2_n",this.sc_startgamble_rummy2_n,this),t.UnRegistNotify("sc_changeanchor_rummy2_n",this.sc_changeanchor_rummy2_n,this),t.UnRegistNotify("sc_entertable_rummy",this.sc_entertable_rummy,this),t.UnRegistNotify("sc_makecard_rummy2_n",this.sc_makecard_rummy2_n,this),t.UnRegistNotify("sc_lineuplist_rummy2_n",this.sc_lineuplist_rummy2_n,this),t.UnRegistNotify("sc_anchorshare_rummy2",this.sc_anchorshare_rummy2,this),t.UnRegistNotify("sc_chat100_n",this.sc_chat100_n,this),t.UnRegistNotify("sc_chat_n",this.sc_chat_n,this),t.UnRegistNotify("sc_one_exittable_n",this.sc_one_exittable_n,this),t.UnRegistNotify("sc_addgoldingame",this.sc_addgoldingame,this),t.UnRegistNotify("sc_freshgold_n",this.sc_freshgold_n,this)},Object.defineProperty(t.prototype,"Model",{get:function(){return null==this._model&&(this._model=new u.RummyModel2),this._model},enumerable:!1,configurable:!0}),t.prototype.acceptMsg=function(){return!this.view||cc.game.isPaused()||!this.Model.isjoinGame},t.prototype.sc_freshgold_n=function(t){if(this.view&&1==t.result&&2==t.freshType){this.Model.ID<3?this.view.setUserGold(t.gold):this.view.rmBoardView.initGold(t.gold),o.AppConst.mPlayerModel.bReCharge=!0;var e="1"==o.AppConst.languageType?"english":"hindi",i=xgameTable.getComplanguageRummyById(60)[e];n.CommonCtr.instance.ShowTipLabel(i)}},t.prototype.sc_addgoldingame=function(t){if(cc.log("==========cz============",t),this.view&&1==t.result){if(1==t.status){o.AppConst.mPlayerModel.bReCharge=!0;var e="1"==o.AppConst.languageType?"english":"hindi",i=xgameTable.getComplanguageRummyById(60)[e];n.CommonCtr.instance.ShowTipLabel(i)}this.Model.ID<3?this.view.setUserGold(t.lGold):this.view.rmBoardView.initGold(t.lGold)}},t.prototype.cs_entertable_rummy=function(){var t=new u.cs_entertable_rummy2;t.fn="cs_entertable_rummy2",t.levelid=o.AppConst.currentlevelid,t.tableid=o.AppConst.tableid||0,t._g=910012,t.playercount=6,t.bArena=o.AppConst.bArena,l.WebSocketManager.getInstance.SendJSON(t,this.sc_entertable_rummy.bind(this))},t.prototype.sc_entertable_rummy=function(t){var e=this;if(cc.log("---------------entertable---",t),this.Model.hasGame=!0,this.view){var i=null;if(1==t.result){n.CommonCtr.instance.HideLoading(),o.AppConst.mPlayerModel.state=0,o.AppConst.tableid=null,this.Model.isjoinGame=!0,this.Model.tableid=t.tableid,this.Model.levelid=t.levelid,this.Model.gameid=t.gameid,this.Model.entertable=t,this.Model.tableAllPlayer.length=0,this.Model.gameType=t._recover.pc,this.Model.isTyc="0"==(t.levelid+"").slice(-1),this.Model.baserate=a.UIUtil.formatNumber100(t.brate),this.view.playerCount=0,this.view.ui_rummyBet.setVar("bet",this.Model.baserate+"").flushVars(),this.view.mySitDown=!1,this.view.requesting=!1,this.Model.gsb=o.AppConst.gameStatus[1]==o.EnumGameStatus.Hide,this.view.cleanChat(),this.Model.anchorID=t.anchorid,this.Model.rule=t.rules,this.Model.Multiples=t.Multiples,this.view.ready=!0;for(var r=!1,l=0;l<t.palyerlist.length;l++){var u={tpos:h=0==t.palyerlist[l].pos?6:t.palyerlist[l].pos,head:t.palyerlist[l].py.wechat.wicon,nickName:t.palyerlist[l].py.wechat.wName,userid:c=t.palyerlist[l].py.userid};c==o.AppConst.mPlayerModel.userid?(this.Model.myPos=h,this.view.mySitDown=!0,r=!0):this.Model.tableAllPlayer.push(u)}if(t.rules&&t.rules.length>0?(t.anchorid==o.AppConst.mPlayerModel.userid?this.Model.ID=2:this.Model.ID=r?1:3,this.view.enabledBtn(!1)):this.Model.ID=1,this.view.unscheduleAllCallbacks(),this.view.cleanTable(),this.view.myGold=o.AppConst.mPlayerModel.gold,this.view.showUIById(),this.view.rmBoardView.initBoard(),this.view.resoutPanel.fguiComponent.visible=!1,this.view.rmBoardView.fguiComponent.visible=!1,t.anchorid==o.AppConst.mPlayerModel.userid){for(this.Model.tableAllPlayer.length=0,l=0;l<t.palyerlist.length;l++)u={tpos:h=0==t.palyerlist[l].pos?6:t.palyerlist[l].pos,head:t.palyerlist[l].py.wechat.wicon,nickName:t.palyerlist[l].py.wechat.wName,userid:c=t.palyerlist[l].py.userid,gold:t.palyerlist[l].py.gold},c==o.AppConst.mPlayerModel.userid?(this.Model.myPos=h,this.view.mySitDown=!0,this.view.initSeat(t.palyerlist[l].py.gold)):this.Model.tableAllPlayer.push(u),this.view.addNewPlayer(u);this.view.showState()}else if(3==this.Model.ID){for(l=0;l<t.palyerlist.length;l++){var h,c;u={tpos:h=0==t.palyerlist[l].pos?6:t.palyerlist[l].pos,head:t.palyerlist[l].py.wechat.wicon,nickName:t.palyerlist[l].py.wechat.wName,userid:c=t.palyerlist[l].py.userid,gold:t.palyerlist[l].py.gold},this.view.addNewPlayer(u)}t.anchorid||(this.view.mySitDown=!1),this.cs_getlineuplist_rummy2(!0),this.view.showState()}}else this.Model.isjoinGame=!1,i=s.BaseCode[o.AppConst.languageType][t.result]||s.BaseCode[o.AppConst.languageType][0],n.CommonCtr.instance.ShowTipCallback(i,function(){e.view.gotoHall()})}},t.prototype.sc_sitdown_rummy_n=function(t){if(cc.log("--------------sitdown--",t),!this.acceptMsg()&&1==t.result){var e={tpos:t.tpos,head:t.user.py.wechat.wicon,nickName:t.user.py.wechat.wName,userid:t.user.py.userid,gold:t.gold};if(t.user.py.userid==o.AppConst.mPlayerModel.userid){this.Model.myPos=t.tpos;for(var i=0;i<this.Model.tableAllPlayer.length;i++)this.view.playerCount+=1,this.view.addNewPlayer(this.Model.tableAllPlayer[i]);this.view.initSeat(t.gold),this.view.addNewPlayer(e),this.view.playerCount+=1,this.Model.tableAllPlayer.length<=0&&1==this.Model.ID&&(this.view.ui_statrWaitone.visible=!0),this.Model.anchorID==o.AppConst.mPlayerModel.userid&&(this.view.mySitDown=!1),this.view.mySitDown?(this.view.ui_statrWait.visible=!1,this.view.gameReconnection()):(this.view.mySitDown=!0,this.Model.tableAllPlayer.length>0&&1==this.Model.ID&&this.view.gameStartTimes())}else this.view.playerCount+=1,this.view.ui_statrWaitone.visible=!1,cc.log("---------playernum-----",this.view.playerCount),2==this.view.playerCount&&(this.view.ui_statrWaitone.visible=!1,1==this.Model.ID&&this.view.gameStartTimes()),this.view.addNewPlayer(e)}},t.prototype.sc_tablestart_rummy_n=function(t){cc.log("-------------gamestart",t),this.Model.anchorWinNum=0,this.acceptMsg()||1==t.result&&(this.Model.tablestartData=t,this.view.gameStart())},t.prototype.sc_end_rummy_n=function(t){cc.log("-------------gameover",t),this.acceptMsg()||1==t.result&&(this.Model.endData=t,this.view.endGame())},t.prototype.cs_dapai_rummy=function(t,e){var i=new u.cs_dapai_rummy2;i.fn="cs_dapai_rummy2",i.levelid=this.Model.levelid,i.tableid=this.Model.tableid,i.dapai=t,i.comCards=e,i._g=this.Model.gameid,l.WebSocketManager.getInstance.SendJSON(i,this.sc_dapai_rummy.bind(this))},t.prototype.sc_dapai_rummy=function(t){cc.log("======sc_dapai_rummy=======",t),this.view&&(1==t.result||(this.view.hasMopai=!0,n.CommonCtr.instance.ShowTipLabel(s.BaseCode[o.AppConst.languageType][t.result])))},t.prototype.sc_dapai_rummy_n=function(t){cc.log("-------------dapai--",t),this.acceptMsg()||1==t.result&&this.view.playDelPoker(t)},t.prototype.cs_mopai_rummy=function(t){var e=new u.cs_mopai_rummy2;e.fn="cs_mopai_rummy2",e.levelid=this.Model.levelid,e.tableid=this.Model.tableid,e.cardPos=t,e._g=this.Model.gameid,l.WebSocketManager.getInstance.SendJSON(e,this.sc_mopai_rummy.bind(this))},t.prototype.sc_mopai_rummy=function(t){cc.log("===========sc_mopai_rummy------",t),this.acceptMsg()||(1==t.result?this.view.mopai(t.dapai,t.finish):(this.view.mopaiNow=!1,n.CommonCtr.instance.ShowTipLabel(s.BaseCode[o.AppConst.languageType][t.result])))},t.prototype.sc_mopai_rummy_n=function(t){cc.log("------------sc_mopai_rummy_n-",t),this.acceptMsg()||1==t.result&&this.view.noticeSomeMopai(t)},t.prototype.cs_drop_rummy=function(){var t=new u.cs_drop_rummy2;t.fn="cs_drop_rummy2",t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,t._g=this.Model.gameid,l.WebSocketManager.getInstance.SendJSON(t,this.sc_drop_rummy.bind(this))},t.prototype.sc_drop_rummy=function(t){this.view&&(cc.log("========sc_drop_rummy=======",t),1==t.result&&this.view.dropGold(t.punishScore))},t.prototype.sc_drop_rummy_n=function(t){cc.log("======sc_drop_rummy_n======",t),this.acceptMsg()||1==t.result&&this.view.sc_drop_rummy_n(t)},t.prototype.cs_finish_rummy=function(t,e,i){void 0===i&&(i=0);var o=new u.cs_finish_rummy2;o.fn="cs_finish_rummy2",o.levelid=this.Model.levelid,o.tableid=this.Model.tableid,o._g=this.Model.gameid,o.bFirst=e,o.comCards=t,o.outCard=i,l.WebSocketManager.getInstance.SendJSON(o,this.sc_finish_rummy.bind(this))},t.prototype.sc_finish_rummy=function(t){this.view&&(1==t.result&&this.view.setbtn_declare(t),cc.log("==================sc_finish_rummy-----",t))},t.prototype.sc_finish_rummy_n=function(t){if(!this.acceptMsg()&&this.view){if(!this.view.controller)return;this.view.sc_startfinish_rummy_n(t)}},t.prototype.cs_applyexittable_rummy=function(){if(this.Model.hasGame){var t=new u.cs_applyexittable_rummy2;t.fn="cs_applyexittable_rummy2",t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,t.gameid=this.Model.gameid,t._g=this.Model.gameid,l.WebSocketManager.getInstance.SendJSON(t,this.sc_applyexittable_rummy.bind(this))}},t.prototype.sc_applyexittable_rummy=function(t){cc.log("---====exitgame========",t),this.view&&(1==t.result?this.view.gotoHall():(this.view.isleven=!1,n.CommonCtr.instance.ShowTipLabel(s.BaseCode[o.AppConst.languageType][t.result])))},t.prototype.cs_ready_rummy=function(){var t=new u.cs_ready_rummy2;t.fn="cs_ready_rummy2",t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,t._g=this.Model.gameid,l.WebSocketManager.getInstance.SendJSON(t,this.sc_ready_rummy.bind(this))},t.prototype.sc_ready_rummy=function(t){this.view&&(1==t.result||n.CommonCtr.instance.ShowTipLabel(s.BaseCode[o.AppConst.languageType][t.result]),cc.log("================ready",t))},t.prototype.sc_situpkeep_rummy_n=function(t){this.acceptMsg()||(cc.log("------sc_situpkeep_rummy_n------",t),1==t.result&&this.view.leaveTable(t))},t.prototype.cs_getoutcard_rummy=function(){var t=new u.cs_getoutcard_rummy2;t.fn="cs_getoutcard_rummy2",t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,t._g=this.Model.gameid,l.WebSocketManager.getInstance.SendJSON(t,this.sc_getoutcard_rummy.bind(this))},t.prototype.sc_getoutcard_rummy=function(t){this.view&&(this.view.requesting=!1,1==t.result&&(cc.log("=========sc_getoutcard_rummy-----",t),this.view.showOutPokerPanel(t)))},t.prototype.cs_chat=function(t,e,i){var o=new r.cs_chat;o.fn="cs_chat",o.levelid=this.Model.levelid,o.tableid=this.Model.tableid,o._g=this.Model.gameid,o.content=t,o.type=e,o.tpos=i,l.WebSocketManager.getInstance.SendJSON(o,this.sc_chat.bind(this))},t.prototype.sc_chat=function(t){cc.log("=========msg------",t),this.view&&(1==t.result||n.CommonCtr.instance.ShowTipLabel(s.BaseCode[o.AppConst.languageType][t.result]))},t.prototype.sc_chat_n=function(t){cc.log("=========sc_chat_n------",t),this.acceptMsg()||1==t.result&&this.view.sc_chat_n(t)},t.prototype.sc_chat100_n=function(t){this.acceptMsg()||(1==t.result&&this.view.sc_chat100_n(t),cc.log("------\u6536\u5230\u89c2\u4f17\u7684\u6d88\u606f0----",t))},t.prototype.sc_token_rummy_n=function(t){this.acceptMsg()||1==t.result&&this.view.sc_token_rummy_n(t)},t.prototype.sc_one_exittable_n=function(t){if(!this.acceptMsg()&&(cc.log("========sc_one_exittable_n========",t),1==t.result)){if(t.gameid!=this.Model.gameid)return;this.view.sc_one_exittable_n(t)}},t.prototype.sc_refhuff_rummy_n=function(t){this.acceptMsg()||1==t.result&&this.view.sc_refhuff_rummy_n(t)},t.prototype.cs_makecard_rummy=function(t){var e=new u.cs_makecard_rummy2;e.fn="cs_makecard_rummy2",e.levelid=this.Model.levelid,e.tableid=this.Model.tableid,e._g=this.Model.gameid,e.comCards=t,l.WebSocketManager.getInstance.SendJSON(e,this.sc_makecard_rummy.bind(this))},t.prototype.sc_makecard_rummy=function(){},t.prototype.cs_getplayerlist_rummy2=function(t){var e=new u.cs_getplayerlist_rummy2;e.fn="cs_getplayerlist_rummy2",e.levelid=this.Model.levelid,e.tableid=this.Model.tableid,e._g=this.Model.gameid,e.pageIndex=t,e.pageSize=30,l.WebSocketManager.getInstance.SendJSON(e,this.sc_getplayerlist_rummy2.bind(this))},t.prototype.sc_getplayerlist_rummy2=function(t){cc.isValid(this.view)&&1==t.result&&(this.view.playerOnline.updatePlayerList(t),cc.log("------\u83b7\u53d6\u73a9\u5bb6\u5217\u8868----------",t))},t.prototype.cs_getlineuplist_rummy2=function(t){void 0===t&&(t=!1);var e=new u.cs_getlineuplist_rummy2;e.fn="cs_getlineuplist_rummy2",e.levelid=this.Model.levelid,e.tableid=this.Model.tableid,e._g=this.Model.gameid,e.pageIndex=0,e.pageSize=3,l.WebSocketManager.getInstance.SendJSON(e,this.sc_getlineuplist_rummy2.bind(this,t))},t.prototype.sc_getlineuplist_rummy2=function(t,e){cc.log("-------\u83b7\u53d6\u6392\u961f\u5217\u8868--------",e),this.acceptMsg()||1==e.result&&this.view.updateRanking(e,t)},t.prototype.cs_applylineup_rummy2=function(){var t=new u.cs_applylineup_rummy2;t.fn="cs_applylineup_rummy2",t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,t._g=this.Model.gameid,l.WebSocketManager.getInstance.SendJSON(t,this.sc_applylineup_rummy2.bind(this))},t.prototype.sc_applylineup_rummy2=function(t){cc.log("================\u7533\u8bf7\u6392\u961f------",t),1==t.result&&this.view.checkRanking()},t.prototype.cs_cancellineup_rummy2=function(){var t=new u.cs_cancellineup_rummy2;t.fn="cs_cancellineup_rummy2",t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,t._g=this.Model.gameid,l.WebSocketManager.getInstance.SendJSON(t,this.sc_cancellineup_rummy2.bind(this))},t.prototype.sc_cancellineup_rummy2=function(t){cc.log("================\u53d6\u6d88\u6392\u961f------",t),1==t.result&&this.cs_getlineuplist_rummy2()},t.prototype.cs_gamble_rummy2=function(t,e,i){var o=new u.cs_gamble_rummy2;o.fn="cs_gamble_rummy2",o.levelid=this.Model.levelid,o.tableid=this.Model.tableid,o._g=this.Model.gameid,o.betType=t,o._tpos=e,o.gamble=i,l.WebSocketManager.getInstance.SendJSON(o,this.sc_gamble_rummy2.bind(this))},t.prototype.sc_gamble_rummy2=function(t){cc.log("-------\u73a9\u5bb6\u4e0b\u6ce8------------",t),this.acceptMsg()||1==t.result&&this.view.rmBoardView.sc_gamble(t)},t.prototype.cs_getallgamble_rummy2=function(){var t=new u.cs_getallgamble_rummy2;t.fn="cs_getallgamble_rummy2",t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,t._g=this.Model.gameid,l.WebSocketManager.getInstance.SendJSON(t,this.sc_getallgamble_rummy2.bind(this))},t.prototype.sc_getallgamble_rummy2=function(t){cc.log("---------\u83b7\u53d6\u6240\u6709\u7684\u4e0b\u6ce8--------------",t),this.acceptMsg()||1==t.result&&this.view.betInfo.updateBetInfo(t._p2G)},t.prototype.cs_getgamble_rummy2=function(){var t=new u.cs_getgamble_rummy2;t.fn="cs_getgamble_rummy2",t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,t._g=this.Model.gameid,l.WebSocketManager.getInstance.SendJSON(t,this.sc_getgamble_rummy2.bind(this))},t.prototype.sc_getgamble_rummy2=function(t){cc.log("---------\u83b7\u53d6\u81ea\u5df1\u7684\u4e0b\u6ce8--------------",t),this.acceptMsg()||1==t.result&&this.view.rmBoardView.showSelfBet(t)},t.prototype.sc_gamblesettlement_rummy2_n=function(t){this.acceptMsg()||(cc.log("---------\u7ed3\u7b97------",t),this.view.rmBoardView.gameEnd(t),this.view.ui_btn_anchorbetting.visible=!1)},t.prototype.sc_startgamble_rummy2_n=function(t){cc.log("----------\u5f00\u59cb\u4e0b\u6ce8-----------",t),this.acceptMsg()||this.view.showAnchortime()},t.prototype.sc_changeanchor_rummy2_n=function(t){cc.log("--------\u6709\u4eba\u5f53\u4e3b\u64ad------",t),this.acceptMsg()||(this.Model.anchorData=t,0!=this.view.gameState&&0!=t.newid||(cc.log("--------\u6709\u4eba\u5f53\u4e3b\u64ad111111------",t),this.Model.anchorData=null,this.Model.anchorID=t.newid,this.Model.anchorOldID=t.oldid,this.view.cleanTable(),t.newid==o.AppConst.mPlayerModel.userid?(this.Model.ID=2,this.view.playAnchorAni(!0,t.AnchorName)):(this.Model.ID=3,0!=t.newid&&this.view.playAnchorAni(!1,t.AnchorName)),t.oldid==o.AppConst.mPlayerModel.userid&&(this.view.changeAudience(t),this.Model.anchorWinNum=0),0==t.newid?this.view.anchorQuit():this.view.hasAnchor(),3==this.Model.ID&&this.cs_getlineuplist_rummy2(!0)))},t.prototype.cs_anchorready_rummy2=function(){var t=new u.cs_anchorready_rummy2;t.fn="cs_anchorready_rummy2",t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,t._g=this.Model.gameid,l.WebSocketManager.getInstance.SendJSON(t,this.sc_anchorready_rummy2.bind(this))},t.prototype.sc_anchorready_rummy2=function(t){cc.log("-----------------\u4e3b\u64ad\u51c6\u5907----",t)},t.prototype.sc_makecard_rummy2_n=function(t){cc.log("------------\u63a8\u9001\u4e3b\u64ad\u7684\u724c-----",t),this.acceptMsg()||this.view.anchorCard(t.comCards)},t.prototype.sc_lineuplist_rummy2_n=function(t){this.acceptMsg()||(cc.log("=-==========",t),this.view.updateRank(t.playerlist))},t.prototype.sc_anchorshare_rummy2=function(t){cc.log("-------------\u4e3b\u64ad\u5206\u7ea2------",t),this.Model.anchorWinNum=t.sgold,this.acceptMsg()||(this.view.anchorWin(t.agold),t.sgold>0&&(this.Model.anchorWin=!0))},t.prototype.cs_anchorrecords_rummy2=function(){var t=new u.cs_anchorrecords_rummy2;t.fn="cs_anchorrecords_rummy2",t.levelid=this.Model.levelid,t.tableid=this.Model.tableid,t._g=this.Model.gameid,l.WebSocketManager.getInstance.SendJSON(t,this.sc_anchorrecords_rummy2.bind(this))},t.prototype.sc_anchorrecords_rummy2=function(t){cc.log("------\u4e3b\u64ad\u7684\u83b7\u5229--------",t),this.acceptMsg()||1==t.result&&this.view.betInfo&&this.view.betInfo.setReward(t)},t}();i.default=h,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/BaseCode":void 0,"../../../../Common/script/base/CommonCtr":void 0,"../../../../Common/script/base/WebSocketManager":void 0,"../../../../Common/script/base/cs_base":void 0,"../../../../Common/script/util/UIUtil":void 0,"../Model/RummyModel2":"RummyModel2"}],RummyFinish2:[function(t,e,i){"use strict";cc._RF.push(e,"77d68h86vJH+6i4NqDiYuyN","RummyFinish2");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var n=t("../../../../Boot/scirpt/AppConst"),r=t("../../../../Common/script/base/AudioManager"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_btn_no=null,e.ui_btn_yes=null,e.ui_tips=null,e.ui_tips1=null,e.ui_btn_finish_no=null,e.ui_btn_finish_yes=null,e.ui_btn_finish_title=null,e.ui_tipsTitle=null,e}return s(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/rummy2"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"finish"},enumerable:!1,configurable:!0}),e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),this.fguiComponent.visible=!1,this.ui_btn_no.onClick(this.noFinish,this),this.ui_btn_yes.onClick(this.yesFinish,this),"2"==n.AppConst.languageType&&this.setLanguage()},e.prototype.setLanguage=function(){for(var t="1"==n.AppConst.languageType?"english":"hindi",e=1;e<6;e++){var i=xgameTable.getComplanguageRummyById(e);i&&i.comp&&this[i.comp]&&(1==i.type?this[i.comp].text=i[t]:this[i.comp].url=i[t].replace("rummy","rummy2"))}},e.prototype.noFinish=function(){this.noFunction&&this.noFunction(),this.Hide()},e.prototype.yesFinish=function(){this.yesFunction&&this.yesFunction(),this.Hide()},e.prototype.addFunction=function(t,e){this.noFunction=e,this.yesFunction=t},e.prototype.setTips=function(t){0==t?(this.ui_tips.visible=!0,this.ui_tips1.visible=!1):(this.ui_tips1.visible=!0,this.ui_tips.visible=!1)},e.prototype.Show=function(){t.prototype.Show.call(this),r.AudioManager.Singleton.play("","pop_up")},e.prototype.Hide=function(){t.prototype.Hide.call(this),r.AudioManager.Singleton.play("","btn_close")},e}(t("../../../../Common/script/base/ViewBase").default);i.default=l,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/ViewBase":void 0}],RummyHelp2:[function(t,e,i){"use strict";cc._RF.push(e,"76556g5CQ9HrLAQAcJnFysq","RummyHelp2");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var n=t("../../../../Boot/scirpt/AppConst"),r=t("../../../../Common/script/base/AudioManager"),l=t("../../../../Common/script/base/ViewBase"),a=t("../Controller/RummyController2"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_btn_break=null,e.ui_pokerbg1=null,e.ui_pokerbg2=null,e.ui_pokerbg3=null,e.ui_lab_help_sets=null,e.ui_lab_help_sequences=null,e.ui_lab_help_score=null,e.ui_lab_help_group=null,e.ui_lab_help_discard=null,e.ui_lab_help_declare=null,e.ui_lab_help_basics=null,e.ui_lab_help_add=null,e.ui_declare_title=null,e.ui_declare_lab1=null,e.ui_declare_lab2=null,e.ui_declare_lab3=null,e.ui_declare_lab4=null,e.ui_declare_lab5=null,e.ui_declare_lab6=null,e.ui_declare_lab7=null,e.ui_declare_lab8=null,e.ui_declare_lab9=null,e.ui_declare_lab10=null,e.ui_discard_lab_title=null,e.ui_discard_lab_1=null,e.ui_discard_lab_2=null,e.ui_discard_lab_3=null,e.ui_discard_lab_4=null,e.ui_discard_lab_5=null,e.ui_discard_lab_6=null,e.ui_discard_lab_7=null,e.ui_discard_lab_8=null,e.ui_discard_lab_9=null,e.ui_discard_lab_10=null,e.ui_discard_lab_11=null,e.ui_score_lab_title=null,e.ui_score_lab_1=null,e.ui_score_lab_2=null,e.ui_score_lab_3=null,e.ui_score_lab_4=null,e.ui_score_lab_5=null,e.ui_score_lab_6=null,e.ui_score_lab_7=null,e.ui_score_lab_8=null,e.ui_score_lab_9=null,e.ui_score_lab_10=null,e.ui_score_lab_11=null,e.ui_score_lab_12=null,e.ui_sequences_lab_title=null,e.ui_sequences_lab_1=null,e.ui_sequences_lab_2=null,e.ui_sequences_lab_3=null,e.ui_sequences_lab_4=null,e.ui_sequences_lab_5=null,e.ui_sequences_lab_6=null,e.ui_sequences_lab_7=null,e.ui_sequences_lab_8=null,e.ui_sequences_lab_9=null,e.ui_add_lab_title=null,e.ui_add_lab_1=null,e.ui_add_lab_2=null,e.ui_add_lab_3=null,e.ui_add_lab_4=null,e.ui_add_lab_5=null,e.ui_add_lab_6=null,e.ui_add_lab_7=null,e.ui_add_lab_8=null,e.ui_add_lab_9=null,e.ui_basics_lab_title=null,e.ui_basics_lab_1=null,e.ui_basics_lab_2=null,e.ui_basics_lab_3=null,e.ui_basics_lab_4=null,e.ui_basics_lab_5=null,e.ui_group_lab_title=null,e.ui_group_lab_1=null,e.ui_group_lab_2=null,e.ui_group_lab_3=null,e.ui_group_lab_4=null,e.ui_sets_lab_title=null,e.ui_sets_lab_1=null,e.ui_sets_lab_2=null,e.ui_sets_lab_3=null,e.ui_sets_lab_4=null,e.ui_sets_lab_5=null,e.ui_sets_lab_6=null,e.ui_sets_lab_7=null,e}return s(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/rummy2"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"help"},enumerable:!1,configurable:!0}),e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),this.fguiComponent.visible=!1,this.ui_btn_break.onClick(this.Hide,this),"2"==n.AppConst.languageType&&this.setLanguage(),a.default.instance.Model.gsb&&(this.ui_pokerbg1.url="ui://rummy2/cards18_2",this.ui_pokerbg2.url="ui://rummy2/cards18_2",this.ui_pokerbg3.url="ui://rummy2/cards18_2")},e.prototype.allChildCreated=function(){t.prototype.allChildCreated.call(this),this.Show()},e.prototype.Show=function(){t.prototype.Show.call(this),r.AudioManager.Singleton.play("","pop_up")},e.prototype.Hide=function(){t.prototype.Hide.call(this),r.AudioManager.Singleton.play("","btn_close")},e.prototype.setLanguage=function(){var t=xgameTable.getTableMgr().getSheet(xgameTable.EnumExcelKey.Complanguage,xgameTable.EnumComplanguage.Rummyhelp),e="1"==n.AppConst.languageType?"english":"hindi";for(var i in t){var o=t[i].comp;o&&this[o]&&1==t[i].type&&(this[o].text=t[i][e])}},e}(l.default);i.default=u,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/ViewBase":void 0,"../Controller/RummyController2":"RummyController2"}],RummyModel2:[function(t,e,i){"use strict";cc._RF.push(e,"2ebea2QaplJiohCpcO0z67e","RummyModel2");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.sc_getallgamble_rummy2=i.cs_getallgamble_rummy2=i.sc_getgamble_rummy2=i.cs_getgamble_rummy2=i.GambleInfo=i.sc_gamble_rummy2=i.cs_gamble_rummy2=i.sc_cancellineup_rummy2=i.cs_cancellineup_rummy2=i.sc_applylineup_rummy2=i.cs_applylineup_rummy2=i.sc_getlineuplist_rummy2=i.cs_getlineuplist_rummy2=i.sc_getplayerlist_rummy2=i.cs_getplayerlist_rummy2=i.cs_makecard_rummy2=i.sc_refhuff_rummy2_n=i.sc_one_exittable_n=i.sc_token_rummy2_n=i.sc_getoutcard_rummy2=i.cs_getoutcard_rummy2=i.sc_situpkeep_rummy2_n=i.sc_enterrobot_rummy2=i.cs_enterrobot_rummy2=i.TableRummy2StatusEnum=i.sc_entertable_rummy2=i.cs_entertable_rummy2=i.sc_end_rummy2_n=i.sc_finish_rummy2_n=i.sc_finish_rummy2=i.cs_finish_rummy2=i.sc_drop_rummy2=i.cs_drop_rummy2=i.sc_mopai_rummy2_n=i.sc_mopai_rummy2=i.cs_mopai_rummy2=i.sc_drop_rummy2_n=i.sc_dapai_rummy2_n=i.sc_dapai_rummy2=i.cs_dapai_rummy2=i.sc_tablestart_rummy2_n=i.sc_ready_rummy_n2=i.sc_ready_rummy2=i.cs_ready_rummy2=i.sc_applyexittable_rummy2=i.cs_applyexittable_rummy2=i.sc_sitdown_rummy2_n=i.sc_sitdown_rummy2=i.cs_sitdown_rummy2=i.RummyModel2=void 0,i.sc_changeanchor_rummy2_n=i.sc_anchorrecords_rummy2=i.cs_anchorrecords_rummy2=i.sc_chat100_n=i.sc_anchorready_rummy2=i.cs_anchorready_rummy2=i.sc_gamblesettlement_rummy2_n=void 0;var n=t("../../../../Common/script/base/cs_base"),r=function(){function t(){this.tableid=0,this.gameid=910012,this.myPos=0,this.selectCard=[],this.nowTokenPos=0,this.baserate=0,this.tableAllPlayer=[],this.isTyc=!1,this.isjoinGame=!1,this.gsb=!1,this.hasGame=!1,this.ID=1,this.anchorWin=!1,this.anchorWinNum=0}return t.prototype.init=function(){this.levellist=null,this.myPos=0,this.entertable=null,this.tablestartData=null,this.endData=null,this.selectCard.length=0,this.nowTokenPos=0,this.tableAllPlayer=[],this.tableid=0,this.ID=1,this.anchorID=0,this.ranking=0,this.bstate=0,this.Multiples=[],this.anchorOldID=0,this.anchorWin=!1,this.anchorWinNum=0},t}();i.RummyModel2=r;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_sitdown_rummy2=l;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_sitdown_rummy2=a;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_sitdown_rummy2_n=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_applyexittable_rummy2=h;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_applyexittable_rummy2=c;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_ready_rummy2=p;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_ready_rummy2=m;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_ready_rummy_n2=d;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_tablestart_rummy2_n=_;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_dapai_rummy2=g;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_dapai_rummy2=y;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_dapai_rummy2_n=f;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_drop_rummy2_n=b;var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_mopai_rummy2=C;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_mopai_rummy2=v;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_mopai_rummy2_n=w;var P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_drop_rummy2=P;var k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_drop_rummy2=k;var M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_finish_rummy2=M;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_finish_rummy2=T;var S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_finish_rummy2_n=S;var I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_end_rummy2_n=I;var A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_entertable_rummy2=A;var x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_entertable_rummy2=x,function(t){t[t.WaiteAnchor=1]="WaiteAnchor",t[t.WaiteAnchorReady=2]="WaiteAnchorReady",t[t.Gambling=3]="Gambling",t[t.MatchPlayer=4]="MatchPlayer",t[t.Playing=5]="Playing",t[t.GameEndAndSettle=6]="GameEndAndSettle"}(i.TableRummy2StatusEnum||(i.TableRummy2StatusEnum={}));var R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_enterrobot_rummy2=R;var N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_enterrobot_rummy2=N;var O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_situpkeep_rummy2_n=O;var D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_getoutcard_rummy2=D;var B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_getoutcard_rummy2=B;var G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_token_rummy2_n=G;var L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_one_exittable_n=L;var U=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_refhuff_rummy2_n=U;var F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_makecard_rummy2=F;var E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_getplayerlist_rummy2=E;var V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_getplayerlist_rummy2=V;var j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_getlineuplist_rummy2=j;var W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_getlineuplist_rummy2=W;var H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_applylineup_rummy2=H;var q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_applylineup_rummy2=q;var z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_cancellineup_rummy2=z;var J=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_cancellineup_rummy2=J;var X=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_gamble_rummy2=X;var Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_gamble_rummy2=Z;i.GambleInfo=function(){};var Q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_getgamble_rummy2=Q;var K=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_getgamble_rummy2=K;var Y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_getallgamble_rummy2=Y;var $=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_getallgamble_rummy2=$;var tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_gamblesettlement_rummy2_n=tt;var et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_anchorready_rummy2=et;var it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_anchorready_rummy2=it;var ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_chat100_n=ot;var st=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.cs_base);i.cs_anchorrecords_rummy2=st;var nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_anchorrecords_rummy2=nt;var rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(n.sc_base);i.sc_changeanchor_rummy2_n=rt,cc._RF.pop()},{"../../../../Common/script/base/cs_base":void 0}],RummyResout2:[function(t,e,i){"use strict";cc._RF.push(e,"aed31eZrzdMZJvbQgXF5Iv1","RummyResout2");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var n=t("../../../../Boot/scirpt/AppConst"),r=t("../../../../Common/script/base/AudioManager"),l=t("../../../../Common/script/base/CommonCtr"),a=t("../../../../Common/script/base/ViewBase"),u=t("../Controller/RummyController2"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_resoutList=null,e.ui_btn_start=null,e.ui_btn_leave=null,e.ui_times=null,e.ui_commCard=null,e.ui_commCard2=null,e.ui_resout_lab_1=null,e.ui_resout_lab_2=null,e.ui_resout_lab_3=null,e.ui_resout_lab_4=null,e.ui_resout_lab_5=null,e.ui_resout_lab_6=null,e.ui_resout_lab_7=null,e.ui_resout_lab_8=null,e.ui_timeLabel=null,e.ui_resout_lab_leave=null,e.ui_resout_lab_start=null,e.ui_socreTitle=null,e.ui_btn_time=null,e.ui_resout_lab_time=null,e.times=3,e.startTime=!1,e.isshowTime=!1,e.isshowTimeNum=0,e.anchorTime=5,e}return s(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/rummy2"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"resout"},enumerable:!1,configurable:!0}),e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),this.fguiComponent.visible=!1,this.ui_btn_start.onClick(this.clickStart,this),this.ui_btn_leave.onClick(this.gotoHall,this),"2"==n.AppConst.languageType&&this.setLanguage()},e.prototype.setLanguage=function(){for(var t="1"==n.AppConst.languageType?"english":"hindi",e=6;e<18;e++){var i=xgameTable.getComplanguageRummyById(e);i&&i.comp&&this[i.comp]&&(1==i.type?this[i.comp].text=i[t]:this[i.comp].url=i[t].replace("rummy","rummy2"))}},e.prototype.allChildCreated=function(){t.prototype.allChildCreated.call(this),this.typeController=this.fguiComponent.getController("c1"),this.ui_resoutList.removeChildrenToPool()},e.prototype.cleanList=function(){this.ui_resoutList.removeChildrenToPool()},e.prototype.getListNum=function(){return this.ui_resoutList.numChildren},e.prototype.oneDataAdd=function(t,e,i,o,s,n,r){if(console.log("-------oneDataAdd------------231---------",n,i,s,this.ui_resoutList.numChildren),this.ui_resoutList.numChildren>1){var l=this.insertItem(s);if(-1==l){(d=this.ui_resoutList.addItemFromPool()).initData(t,e,i,o,s,n,1==this.ui_resoutList.numChildren);var a=this.ui_resoutList.getChildAt(0);return void(a.seatPos==u.default.instance.view.fisrtHuPos&&a.setWin(r))}if(this.fguiComponent.visible){for(var h=l,c=this.ui_resoutList.numChildren;h<c;h++){var p=(d=this.ui_resoutList.getChildAt(h)).y+147;fgui.GTween.to2(d.x,d.y,d.x,p,.2).setTarget(d,d.setPosition)}var m=this.ui_resoutList.getFromPool();m.initData(t,e,i,o,s,n,1==this.ui_resoutList.numChildren),m.visible=!1,this.ui_resoutList.addChildAt(m,l),fgui.GTween.to(1,10,.3).onComplete(function(){cc.isValid(m)&&(m.visible=!0)})}else(d=this.ui_resoutList.getFromPool()).initData(t,e,i,o,s,n,1==this.ui_resoutList.numChildren),this.ui_resoutList.addChildAt(d,l)}else{var d;(d=this.ui_resoutList.addItemFromPool()).initData(t,e,i,o,s,n,1==this.ui_resoutList.numChildren)}if(1!=this.ui_resoutList.numChildren){var _=this.ui_resoutList.getChildAt(0);_.seatPos==u.default.instance.view.fisrtHuPos&&_.setWin(r)}},e.prototype.insertItem=function(t){for(var e=1,i=this.ui_resoutList.numChildren;e<i;e++){var o=this.ui_resoutList.getChildAt(e);if(o&&t<+o.points.text)return e}return-1},e.prototype.initData=function(){this.typeController.setSelectedIndex(1);var t=u.default.instance.Model.endData;if(t._pos2win=t._pos2win.sort(function(t,e){return e.val-t.val}),this.ui_resoutList.numChildren<t._pos2win.length){cc.log("=======initData=========="),this.ui_resoutList.removeChildrenToPool();for(var e=0;e<t._pos2win.length;e++){var i=this.ui_resoutList.addItemFromPool(),o=this.getUserWin(t._pos2win[e].pos),s=this.getUserState(t._pos2win[e].pos),n=this.getCard(t._pos2win[e].pos),r=this.getPoint(t._pos2win[e].pos);i.initData(n.comCard,o,n.pos,s,r.val,t._pos2win[e].pos)}}else{e=0;for(var l=this.ui_resoutList.numChildren;e<l;e++)i=this.ui_resoutList.getChildAt(e),r=this.getPoint(i.userid),cc.log("=======initData==========",i.userid,r),i.setPoint(r.val),o=this.getUserWin(i.userid),i.setWin(o)}this.updateGold(),this.times=3,this.ui_times.text=this.times+"",this.node.stopAllActions(),this.showTime()},e.prototype.updateGold=function(){for(var t=u.default.instance.Model.endData,e=0;e<t._pos2win.length;e++)if(t._pos2gold[e].pos==n.AppConst.mPlayerModel.userid){u.default.instance.view.setUserGold(t._pos2gold[e].val);break}},e.prototype.getCard=function(t){for(var e=u.default.instance.Model.endData,i=u.default.instance.view.getPlayerPos(t),o=0;o<e._pos2ShouPai.length;o++)if(i==e._pos2ShouPai[o].pos)return e._pos2ShouPai[o]},e.prototype.getPoint=function(t){var e=u.default.instance.Model.endData,i=u.default.instance.view.getPlayerPos(t);cc.log("----------------------------",i,t);for(var o=0;o<e._pos2Point.length;o++)if(i==e._pos2Point[o].pos)return e._pos2Point[o]},e.prototype.getUserWin=function(t){for(var e=u.default.instance.Model.endData,i=0;i<e._pos2win.length;i++)if(t==e._pos2win[i].pos)return e._pos2win[i].val;return 0},e.prototype.getUserState=function(t){for(var e=u.default.instance.Model.endData,i=0;i<e._pos2Status.length;i++)if(t==e._pos2Status[i].pos)return e._pos2Status[i].val},e.prototype.showTime=function(){var t=this;this.startTime=!0,this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){t.times-=1,t.ui_times.text=t.times+"",0==t.times?(t.startTime=!1,t.scheduleOnce(function(){t.Hide()},.3)):t.showTime()})))},e.prototype.gotoHall=function(){if(2==u.default.instance.Model.ID){var t="1"==n.AppConst.languageType?"english":"hindi",e=xgameTable.getComplanguageArenaById(20)[t];l.CommonCtr.instance.ShowTipCallback(e,function(){u.default.instance.cs_applyexittable_rummy()},function(){var t;null===(t=l.CommonCtr.instance.view)||void 0===t||t.Hide()})}else r.AudioManager.Singleton.play("","btn_click"),u.default.instance.cs_applyexittable_rummy()},e.prototype.Show=function(){this.typeController.setSelectedIndex(0);var e=u.default.instance.view.commonPoker2;this.ui_commCard.setData(e[0],!1,!0),this.ui_commCard2.setData(e[1],!1,!0),t.prototype.Show.call(this),r.AudioManager.Singleton.play("","pop_up"),2==u.default.instance.Model.ID&&this.initTime()},e.prototype.clean=function(){this.node.stopAllActions(),this.unscheduleAllCallbacks(),this.fguiComponent.getTransition("t0").stop();for(var t=0,e=this.ui_resoutList.numChildren;t<e;t++){var i=this.ui_resoutList.getChildAt(t);fgui.GTween.kill(i)}this.ui_resoutList.removeChildren()},e.prototype.initTime=function(){1==u.default.instance.view.fisrtHuPos?(this.anchorTime=5,this.ui_resout_lab_time.text=this.anchorTime+"",this.ui_btn_time.visible=!0,this.unschedule(this.startAnchorTime),this.schedule(this.startAnchorTime,1,this.anchorTime-1)):1!=u.default.instance.view.fisrtHuPos&&(this.ui_btn_time.visible=this.isshowTime,this.isshowTime&&(this.isshowTimeNum>0?(this.anchorTime=this.isshowTimeNum,this.ui_resout_lab_time.text=this.anchorTime+"",this.ui_btn_time.visible=!0,this.unschedule(this.startAnchorTime),this.schedule(this.startAnchorTime,1,this.anchorTime-1)):this.ui_btn_time.visible=!1))},e.prototype.startAnchorTime=function(){this.anchorTime-=1,this.ui_resout_lab_time.text=this.anchorTime+"",this.anchorTime<=0&&(this.ui_btn_time.visible=!1)},e.prototype.clickStart=function(){var t;2==u.default.instance.Model.ID&&this.node.stopAllActions(),null===(t=u.default.instance.view)||void 0===t||t.showWait(!0,this.startTime,this.times),this.Hide()},e.prototype.Hide=function(){var e;this.fguiComponent.visible&&(r.AudioManager.Singleton.play("","btn_close"),t.prototype.Hide.call(this),(null===(e=l.CommonCtr.instance.view)||void 0===e?void 0:e.fguiComponent.visible)&&l.CommonCtr.instance.view.Hide(),2==u.default.instance.Model.ID&&u.default.instance.cs_anchorready_rummy2())},e.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},e}(a.default);i.default=h,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/base/AudioManager":void 0,"../../../../Common/script/base/CommonCtr":void 0,"../../../../Common/script/base/ViewBase":void 0,"../Controller/RummyController2":"RummyController2"}],RummyResoutItem2:[function(t,e,i){"use strict";cc._RF.push(e,"5c6d11zMphAdIhsQIxqarDK","RummyResoutItem2");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var n=t("../../../../Boot/scirpt/AppConst"),r=t("../../../../Common/script/util/UIUtil"),l=t("../Controller/RummyController2"),a=t("../Model/Rummy2"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.groupType=[],e.groupPoint=[],e}return s(e,t),e.prototype.onConstruct=function(){this.head=this.getChild("head").asCom.getChild("head").asLoader,this.points=this.getChild("points").asTextField,this.win=this.getChild("win").asTextField,this.userName=this.getChild("userName").asTextField,this.colorController=this.getController("c1");for(var t=0;t<14;t++)this["poker"+t]=this.getChild("poker"+t);this.groupTitle=this.getChild("groupTitle").asCom,this.meImg=this.getChild("me").asImage},e.prototype.setPoint=function(t){this.points.text=t+""},e.prototype.setWin=function(t){"0"!=this.points.text&&t>0||(this.win.text=r.UIUtil.formatNumber100(t)+"",t>0?(this.win.font="ui://rummy2/infogfnt",this.colorController.setSelectedIndex(1)):this.win.font="ui://rummy2/failfont")},e.prototype.playEffect=function(t){var e=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(t),cc.callFunc(function(){cc.isValid(e.node)&&(e.node.opacity=255)})))},e.prototype.initData=function(t,e,i,o,s,u,h){this.userid=u,this.seatPos=i,u==n.AppConst.mPlayerModel.userid?this.meImg.visible=!0:this.meImg.visible=!1;var c=400;if(this.poker13.visible=!1,this.groupTitle.removeChildren(0,-1,!0),t&&t.length>0){this.points.text=(s>80?80:s||0)+"";var p=0,m=l.default.instance.view.wildPokerSid();if(this.groupType.length=0,this.groupPoint.length=0,2!=o){for(var d=0;d<t.length;d++){var _=fgui.UIPackage.createObject("rummy2","groupPoker");_.x=c-3,_.y=81,_.height=40,_.width=40*t[d].length+31,_.title.fontSize=20,this.groupTitle.addChild(_);var g=a.Rummy2.GetRummyTypeWild(t[d],m),y=this.getGroupPoint(t[d]);this.groupType.push(g),this.groupPoint.push(y);for(var f=t[d].length>14?14:t[d].length,b=0;b<f;b++)this["poker"+p].visible=!0,this["poker"+p].setData(2==o?18:t[d][b],!1),this["poker"+p].x=c,c+=40,p++;c+=50}this.checkGroupType()}else{this.points.text="0";var C=0;for(b=0;b<13;b++)this["poker"+C].visible=!0,this["poker"+C].setData(18,!1),this["poker"+C].x=c,c+=40,C++}}else for(this.points.text="0",p=0,b=0;b<13;b++)this["poker"+p].visible=!0,this["poker"+p].setData(18,!1),this["poker"+p].x=c,c+=40,p++;cc.log("================yingde----------",e),this.win.text=r.UIUtil.formatNumber100(e)+"",e>0?(this.colorController.setSelectedIndex(1),this.win.font="ui://rummy2/infogfnt"):0==e&&0==s&&2!=o?h?(this.win.font="ui://rummy2/infogfnt",this.colorController.setSelectedIndex(1)):(this.win.font="ui://rummy2/failfont",this.colorController.setSelectedIndex(0)):(this.win.font="ui://rummy2/failfont",2==o?this.colorController.setSelectedIndex(2):this.colorController.setSelectedIndex(0));var v=l.default.instance.view.playerInfo(i);this.setHead(v[0]),this.userName.text=v[1]},e.prototype.setHead=function(t){r.UIUtil.loadImage(this.head,t)},e.prototype.getGroupPoint=function(t){for(var e=0,i=l.default.instance.view.commonPoker[0]%100,o=l.default.instance.view.commonPoker[1]%100,s=0;s<t.length;s++){var n=t[s]%100;16==n||17==n||n==i||n==o||(e+=n>10?10:n)}return e},e.prototype.checkGroupType=function(){var t,e=-1;t=this.groupType.lastIndexOf(14);for(var i=0;i<this.groupType.length;i++)-1!=t&&this.groupType[i]>2&&i!=t&&(e=i);var o="1"==n.AppConst.languageType?"english":"hindi";for(-1!=t&&((s=this.groupTitle.getChildAt(t)).setColor(0),s.setTitle(xgameTable.getComplanguageRummyById(51)[o])),-1!=e&&((s=this.groupTitle.getChildAt(e)).setColor(0),s.setTitle(xgameTable.getComplanguageRummyById(52)[o])),i=0;i<this.groupType.length;i++){var s=this.groupTitle.getChildAt(i);-1==t?(s.setColor(1),s.setTitle(xgameTable.getComplanguageRummyById(56)[o]+"("+(this.groupPoint[i]>80?80:this.groupPoint[i])+")")):i!=t&&i!=e&&(-1!=t&&-1!=e?1==this.groupType[i]||2==this.groupType[i]?(s.setColor(2),s.setTitle(xgameTable.getComplanguageRummyById(54)[o])):14==this.groupType[i]?(s.setColor(0),s.setTitle(xgameTable.getComplanguageRummyById(53)[o])):this.groupType[i]>2?(s.setColor(0),s.setTitle(xgameTable.getComplanguageRummyById(53)[o])):(s.setColor(1),s.setTitle(xgameTable.getComplanguageRummyById(56)[o]+"("+(this.groupPoint[i]>80?80:this.groupPoint[i])+")")):-1==e&&(1==this.groupType[i]||2==this.groupType[i]?(s.setColor(2),s.setTitle(xgameTable.getComplanguageRummyById(54)[o])):(s.setColor(1),s.setTitle(xgameTable.getComplanguageRummyById(56)[o]+"("+(this.groupPoint[i]>80?80:this.groupPoint[i])+")"))))}},e}(fgui.GComponent);i.default=u,cc._RF.pop()},{"../../../../Boot/scirpt/AppConst":void 0,"../../../../Common/script/util/UIUtil":void 0,"../Controller/RummyController2":"RummyController2","../Model/Rummy2":"Rummy2"}]},{},["RummyController2","Rummy2","RummyModel2","GroupTitle2","MainScene2","Player2","Poker2","RummyFinish2","RummyHelp2","RummyResout2","RummyResoutItem2","RmAddCash","RmAreaCom","RmBetInfo","RmBoardView","RmChat","RmChip","RmplayerQueue"]);