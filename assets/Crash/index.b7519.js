window.__require=function t(e,o,n){function i(r,s){if(!o[r]){if(!e[r]){var u=r.split("/");if(u=u[u.length-1],!e[u]){var l="function"==typeof __require&&__require;if(!s&&l)return l(u,!0);if(a)return a(u,!0);throw new Error("Cannot find module '"+r+"'")}r=u}var c=o[r]={exports:{}};e[r][0].call(c.exports,function(t){return i(e[r][1][t]||t)},c,c.exports,t,e,o,n)}return o[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({AllHistoryItem:[function(t,e,o){"use strict";cc._RF.push(e,"11bd3RZ9EhMO5P0COdoqXNg","AllHistoryItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,u=(r.property,function(t){function e(){var e=t.call(this)||this;return e.ui_timeText=null,e.ui_recordItem=null,e.ui_recordItemBg=null,e.ui_recordItemText=null,e}return i(e,t),e.prototype.onConstruct=function(){this.ui_timeText=this.getChild("timeText").asTextField,this.ui_recordItem=this.getChild("recordItem").asCom,this.ui_recordItemBg=this.ui_recordItem.getChild("recordItemBg").asLoader,this.ui_recordItemText=this.ui_recordItem.getChild("recordItemText").asTextField},e.prototype.setData=function(t,e){this.ui_timeText.text=""+e.time,this.ui_recordItemBg.url="ui://Crash/recordItemBg"+e.type,this.ui_recordItemText.text=e.count/100+"x"},a([s],e)}(fgui.GComponent));o.default=u,cc._RF.pop()},{}],BetMark:[function(t,e,o){"use strict";cc._RF.push(e,"fa695ojH0pMTq4wmu56+TV3","BetMark");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.titleText=null,e.markImage=null,e}return i(e,t),e.prototype.onConstruct=function(){this.titleText=this.getChild("title").asTextField,this.markImage=this.getChild("mark").asImage},e.prototype.setTime=function(t){this.titleText.text=t+"s"},e.prototype.reset=function(){cc.Tween.stopAllByTarget(this.node)},e}(fgui.GComponent);o.default=a,cc._RF.pop()},{}],BezierConfig:[function(t,e,o){"use strict";var n;cc._RF.push(e,"386f0nay5hAFLH/rc5rdjvE","BezierConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.EIdent=void 0,function(t){t[t.point=0]="point",t[t.control=1]="control",t[t.window=2]="window"}(n=o.EIdent||(o.EIdent={}));var i=function(){function t(){}return t.addBezierCurve=function(t){this.bezierCurveLists.push(t)},t.saveToPointCurveDict=function(t){var e;for(var o in t){var n=t[o];(e=this.pointCurveDict.has(n)?this.pointCurveDict.get(n):{})[o+"Curve"]=t,this.pointCurveDict.set(n,e)}},t.createPoint=function(e,o,i){var a,r=cc.instantiate(e);i==n.point?(r.ident=n.point,a="point"):i==n.control&&(r.ident=n.control,a="control");var s=t.PointNum++;return r.name=a+"_"+s,r.parent=o,r},t.pointCount=100,t.PointNum=0,t.bezierCurveLists=[],t.bezierCurveData={time:4,length:0,points:[]},t.pointCurveDict=new Map,t}();o.default=i,cc._RF.pop()},{}],Bezier:[function(t,e,o){"use strict";cc._RF.push(e,"3ec72TlBVtOaav2qurVAZDL","Bezier"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t,e){void 0===e&&(e=4),this.pointArr=null,this.allTime=null,this._runTime=null,this._pointArr=null,this.pointArr=t,this.allTime=e,this._runTime=this.allTime,this._pointArr=this.pointArr}return t.prototype.resetData=function(){this._pointLists=[],this.totalLength=this.currentRunTime=0,this.prevPos={x:this.pointArr[0].x,y:this.pointArr[0].y,length:0}},t.prototype.factorial=function(t){for(var e=1,o=1;o<=t;o++)e*=o;return e},t.prototype.ComputeBezier=function(t,e){var o=this,n=this.currentRunTime/e,i=0,a=0,r=this._pointArr.length-1;this._pointArr.forEach(function(t,e){e?(i+=o.factorial(r)/o.factorial(e)/o.factorial(r-e)*t.x*Math.pow(1-n,r-e)*Math.pow(n,e),a+=o.factorial(r)/o.factorial(e)/o.factorial(r-e)*t.y*Math.pow(1-n,r-e)*Math.pow(n,e)):(i+=t.x*Math.pow(1-n,r-e)*Math.pow(n,e),a+=t.y*Math.pow(1-n,r-e)*Math.pow(n,e))});var s=Math.sqrt(Math.pow(this.prevPos.x-i,2)+Math.pow(this.prevPos.y-a,2)),u={x:i,y:a,length:s};this._pointLists.push(u),this.prevPos=u,this.totalLength+=s,this.currentRunTime+=t},t.prototype.getPoints=function(t){void 0===t&&(t=200),this.resetData();for(var e=this._runTime/t,o=0,n=t+1;o<n;o++)this.ComputeBezier(e,this._runTime);return this._pointLists},t.prototype.getCurveLength=function(){return this.totalLength},t}();o.default=n,cc._RF.pop()},{}],CrashAddCash:[function(t,e,o){"use strict";cc._RF.push(e,"eaea3xTqxVCPLyLFrEu8bPw","CrashAddCash");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Boot/scirpt/AppConst"),r=t("../../../Common/script/base/AudioManager"),s=t("../../../Common/script/base/NotificationCenter"),u=t("../../../Common/script/base/NotificationName"),l=t("../../../Common/script/base/ViewBase"),c=t("../Controller/CrashViewCtrl"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_btn_close=null,e.ui_btn_addCash=null,e.ui_addCash_lab1=null,e.ui_addCash_lab2=null,e.ui_addCash_lab3=null,e}return i(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/crash"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"addCash"},enumerable:!1,configurable:!0}),e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),this.fguiComponent.visible=!1,this.ui_btn_close.onClick(this.Hide,this),this.ui_btn_addCash.onClick(this.openAddCash,this),"2"==a.AppConst.languageType&&this.setLanguage(),s.NotificationCenter.Instance.on(u.default.AppLanguage.SELECT_LANGUAGE,this.setLanguage,this)},e.prototype.onDestroy=function(){s.NotificationCenter.Instance.off(u.default.AppLanguage.SELECT_LANGUAGE)},e.prototype.allChildCreated=function(){t.prototype.allChildCreated.call(this),this.Show()},e.prototype.setLanguage=function(){"1"==a.AppConst.languageType?(this.ui_btn_addCash.title="ADD CASH",this.ui_addCash_lab1.text="Only premium players can use this feature",this.ui_addCash_lab2.text="Add cash [color=#ffba55]R$100[/color] now to become a premium player",this.ui_addCash_lab3.text="TIPS"):(this.ui_btn_addCash.title="ACRESCENTE DINHEIRO",this.ui_addCash_lab1.text="Somente jogadores premium podem usar esse recurso",this.ui_addCash_lab2.text="Adicione dinheiro [color=#ffba55]R$100[/color] agora para se tornar um jogador premium",this.ui_addCash_lab3.text="Pontas")},e.prototype.openAddCash=function(){this.Hide(),c.default.instance.view.showAddCash()},e.prototype.Show=function(){t.prototype.Show.call(this),r.AudioManager.Singleton.play("","pop_up")},e.prototype.Hide=function(){t.prototype.Hide.call(this),r.AudioManager.Singleton.play("","btn_close")},e}(l.default);o.default=h,cc._RF.pop()},{"../../../Boot/scirpt/AppConst":void 0,"../../../Common/script/base/AudioManager":void 0,"../../../Common/script/base/NotificationCenter":void 0,"../../../Common/script/base/NotificationName":void 0,"../../../Common/script/base/ViewBase":void 0,"../Controller/CrashViewCtrl":"CrashViewCtrl"}],CrashConfig:[function(t,e,o){"use strict";cc._RF.push(e,"036b0l0HIhM3KCABwrkCXUj","CrashConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.EnumTipIndex=void 0;var n=t("../../../Boot/scirpt/AppConst"),i=t("../../../Common/script/base/CommonCtr"),a=function(){function t(){}return t.showTipLabel=function(t){var e=xgameTable.getTiplanguageTip_crashById(t),o=e.english;"2"==n.AppConst.languageType&&(o=e.hindi),i.CommonCtr.instance.ShowTipLabel(o)},t.minAmount=.1,t.maxAmount=999999,t.defaultRate=0,t.defaultRound=0,t.defaultBet=.1,t}();o.default=a,function(t){t[t.CannotModifil=1]="CannotModifil",t[t.Insufficient=2]="Insufficient",t[t.SuccessfulBet=3]="SuccessfulBet",t[t.StartAuto=4]="StartAuto",t[t.CancelAutomatic=5]="CancelAutomatic",t[t.AutomaticTimes=6]="AutomaticTimes",t[t.TurnOn=7]="TurnOn",t[t.MoreThan=8]="MoreThan",t[t.InvalidParameter=9]="InvalidParameter",t[t.TheParameters=10]="TheParameters",t[t.CannotModifil2=11]="CannotModifil2",t[t.MoreGold=12]="MoreGold",t[t.EnterTableFail=13]="EnterTableFail",t[t.GambleFail=14]="GambleFail",t[t.AutoGambleFail=15]="AutoGambleFail",t[t.CrashFail=16]="CrashFail",t[t.ExitTableFail=17]="ExitTableFail",t[t.ClickStop=18]="ClickStop"}(o.EnumTipIndex||(o.EnumTipIndex={})),cc._RF.pop()},{"../../../Boot/scirpt/AppConst":void 0,"../../../Common/script/base/CommonCtr":void 0}],CrashLoader:[function(t,e,o){"use strict";cc._RF.push(e,"3f056c6qbtORYMQsPqfdMlL","CrashLoader");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,a){function r(t){try{u(n.next(t))}catch(e){a(e)}}function s(t){try{u(n.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(r,s)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Util/CrashUtil"),r=function(){function t(){}return t.loadParticle=function(t){return n(this,void 0,void 0,function(){var e,o,n,r;return i(this,function(i){switch(i.label){case 0:return[4,a.default.addParticle("res/prefab/xingkong")];case 1:return e=i.sent(),(o=cc.instantiate(e)).setPosition(0,-300,0),t.node.addChild(o),[4,a.default.addParticle("res/prefab/liuxing")];case 2:return n=i.sent(),r=cc.instantiate(n),t.node.addChild(r),[2]}})})},t}();o.default=r,cc._RF.pop()},{"../Util/CrashUtil":"CrashUtil"}],CrashModel:[function(t,e,o){"use strict";cc._RF.push(e,"3854amodGlIoKGw3R6LKTnC","CrashModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.CrashModel=o.EnumBtnIndex=void 0;var n=t("./CrashConfig");(function(t){t[t.Join=0]="Join",t[t.CrashOut=1]="CrashOut",t[t.Auto=2]="Auto",t[t.Stop=3]="Stop"})(o.EnumBtnIndex||(o.EnumBtnIndex={}));var i=function(){function t(){}return t.prototype.resetData=function(){},t.prototype.cleanData=function(){},t.resetRoundData=function(t){void 0===t&&(t=0),this.roundData={isGambled:!1,isEscaped:!1,inputGambleRate:.1,inputGambleBet:10,renderData:[],gameTime:t}},t.resetGameData=function(t,e){this.gameData={tableId:t,levelId:e}},t.resetInputGamble=function(){t.roundData.inputGambleRate=n.default.defaultRate,t.roundData.inputGambleRound=n.default.defaultRound,t.roundData.inputGambleBet=n.default.defaultBet},t.getRateByTime=function(e,o){void 0===e&&(e=t.roundData.gameTime),void 0===o&&(o=!1),o&&(e=t.roundData.gameTime+e);var n=1;return e>0&&(n=1+1/64*e*e),n},t.vLastInputStr="",t.vCurInputStr="",t.timeValue=4,t.timerDelta=.1,t.crashData={},t.cacheServerData={},t.delayServerData={},t.roundData={},t.gameData={},t.isInit=!1,t.clickExit=!1,t.nextGambled=!1,t}();o.CrashModel=i,cc._RF.pop()},{"./CrashConfig":"CrashConfig"}],CrashNetCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"34beccRx+tN8JnJBQJIQNN3","CrashNetCtrl");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,a){function r(t){try{u(n.next(t))}catch(e){a(e)}}function s(t){try{u(n.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(r,s)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Boot/scirpt/AppConst"),r=t("../../../Common/script/base/BaseCode"),s=t("../../../Common/script/base/CommonCtr"),u=t("../../../Common/script/base/GlobalConfig"),l=t("../../../Common/script/base/WebSocketManager"),c=t("../Model/CrashConfig"),h=t("../Model/CrashModel"),p=t("../Model/CrashNetData"),d=t("../Test/CrashTest"),C=t("../Util/CrashUtil"),m=t("./CrashViewCtrl"),f=function(){function t(){}return t.enterTable=function(){return n(this,void 0,void 0,function(){var t;return i(this,function(){return(t=new p.cs_entertable_Crash).fn="cs_entertable_Crash",t._g=u.EnumGameId.Crash,t.gameid=u.EnumGameId.Crash,a.AppConst.currentlevelid>0&&(a.AppConst.currentlevelid=0),t.levelid=a.AppConst.currentlevelid,t.tableid=a.AppConst.tableid||0,t._limit=0,[2,new Promise(function(e){l.WebSocketManager.getInstance.SendJSON(t,function(t){if(a.AppConst.tableid=null,h.CrashModel.gameData={tableId:0,levelId:0},1==t.result)m.default.instance.onEnterTable(t),e(t);else{var o=r.BaseErrorCode[a.AppConst.languageType][t.result];o&&""!=o||(o="Enter Table Fail!"),s.CommonCtr.instance.ShowTipCallback(o,function(){m.default.instance.view.gotoHall()})}})})]})})},t.gambleOne=function(t,e,o,d){return void 0===o&&(o=0),n(this,void 0,void 0,function(){var t;return i(this,function(){return(t=new p.cs_gambleone_Crash).fn="cs_gambleone_Crash",t._g=u.EnumGameId.Crash,t.levelid=h.CrashModel.gameData.levelId||0,t.tableid=h.CrashModel.gameData.tableId||0,t._tpos=[0],t.gamble=[C.default.convertParam(e)],t.autocount=o,[2,new Promise(function(e){l.WebSocketManager.getInstance.SendJSON(t,function(t){if(1==t.result)h.CrashModel.crashData.autocount=t.autocount,h.CrashModel.roundData.isGambled=!0,m.default.instance.view.updateUserGold(!0,t._curGold),m.default.instance.view.updateGambleOneView(),d&&d(),e(t);else{var o=r.BaseErrorCode[a.AppConst.languageType][t.result];o?s.CommonCtr.instance.ShowTipLabel(o):c.default.showTipLabel(c.EnumTipIndex.GambleFail),d&&d(),e(null)}})})]})})},t.gambleOneAuto=function(t,e,o,a){return void 0===o&&(o=0),n(this,void 0,void 0,function(){var n;return i(this,function(){return(n=new p.cs_gambleone_Crash).fn="cs_gambleone_Crash",n._g=u.EnumGameId.Crash,n.levelid=h.CrashModel.gameData.levelId||0,n.tableid=h.CrashModel.gameData.tableId||0,n._tpos=[C.default.convertParam(t)],n.gamble=[C.default.convertParam(e)],n.autocount=o,[2,new Promise(function(t){l.WebSocketManager.getInstance.SendJSON(n,function(e){1==e.result?(h.CrashModel.crashData.autocount=e.autocount,h.CrashModel.roundData.isGambled=!0,m.default.instance.view.updateUserGold(!0,e._curGold),m.default.instance.view.updateGambleOneView(),a&&a(),t(e)):(c.default.showTipLabel(c.EnumTipIndex.AutoGambleFail),a&&a(),t(null))})})]})})},t.escapeOne=function(t){return n(this,void 0,void 0,function(){var e;return i(this,function(){return(e=new p.cs_escapeone_Crash).fn="cs_escapeone_Crash",e._g=u.EnumGameId.Crash,e.levelid=h.CrashModel.gameData.levelId||0,e.tableid=h.CrashModel.gameData.tableId||0,e.rate=C.default.convertParam(t),[2,new Promise(function(t){l.WebSocketManager.getInstance.SendJSON(e,function(e){1==e.result?(m.default.instance.onEscapeOne(e),t(e)):t(null)})})]})})},t.getHistory=function(t){return void 0===t&&(t=!0),n(this,void 0,void 0,function(){var t;return i(this,function(){return(t=new p.cs_gethistory_Crash).fn="cs_gethistory_Crash",t._g=u.EnumGameId.Crash,t.gameid=u.EnumGameId.Crash,t.levelid=h.CrashModel.gameData.levelId||0,t.tableid=h.CrashModel.gameData.tableId||0,[2,new Promise(function(e){l.WebSocketManager.getInstance.SendJSON(t,function(t){d.default.createHistoryRecordData(t),e(t)})})]})})},t.exitTable=function(){return n(this,void 0,void 0,function(){var t;return i(this,function(){return(t=new p.cs_applyexittable_Crash).fn="cs_applyexittable_Crash",t._g=u.EnumGameId.Crash,t.gameid=u.EnumGameId.Crash,t.levelid=h.CrashModel.gameData.levelId||0,t.tableid=h.CrashModel.gameData.tableId||0,t.pos=0,[2,new Promise(function(e){l.WebSocketManager.getInstance.SendJSON(t,function(t){1==t.result?e(t):c.default.showTipLabel(c.EnumTipIndex.ExitTableFail)})})]})})},t}();o.default=f,cc._RF.pop()},{"../../../Boot/scirpt/AppConst":void 0,"../../../Common/script/base/BaseCode":void 0,"../../../Common/script/base/CommonCtr":void 0,"../../../Common/script/base/GlobalConfig":void 0,"../../../Common/script/base/WebSocketManager":void 0,"../Model/CrashConfig":"CrashConfig","../Model/CrashModel":"CrashModel","../Model/CrashNetData":"CrashNetData","../Test/CrashTest":"CrashTest","../Util/CrashUtil":"CrashUtil","./CrashViewCtrl":"CrashViewCtrl"}],CrashNetData:[function(t,e,o){"use strict";cc._RF.push(e,"d7a12eXLahL1rpY72dMC25i","CrashNetData");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BetInfo=o.Card100StatusEnum=o.sc_startjump_Crash_n=o.historygamble_Crash=o.sc_gethistorygamble_Crash=o.cs_gethistorygamble_Crash=o.BettingRecord=o.sc_gethistory_Crash=o.cs_gethistory_Crash=o.sc_applyexittable_Crash=o.cs_applyexittable_Crash=o.sc_end_Crash_n=o.ShowDownSD_Crash=o.sc_escapearea_Crash_n=o.sc_gamblearea_Crash_n=o.sc_gambleone_Crash_n=o.sc_escapeone_Crash=o.cs_escapeone_Crash=o.sc_gambleone_Crash=o.cs_gambleone_Crash=o.CarshBetInfo=o.sc_tablestart_Crash_n=o.roomplayersd_Crash=o.sc_getroomplayerlist_Crash=o.cs_getroomplayerlist_Crash=o.sc_entertable_Crash=o.cs_entertable_Crash=void 0;var a=t("../../../Common/script/base/cs_base"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.cs_base);o.cs_entertable_Crash=r;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.sc_base);o.sc_entertable_Crash=s;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.cs_base);o.cs_getroomplayerlist_Crash=u;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.sc_base);o.sc_getroomplayerlist_Crash=l;o.roomplayersd_Crash=function(){};var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.sc_base);o.sc_tablestart_Crash_n=c;o.CarshBetInfo=function(){};var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.cs_base);o.cs_gambleone_Crash=h;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.sc_base);o.sc_gambleone_Crash=p;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.cs_base);o.cs_escapeone_Crash=d;var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.sc_base);o.sc_escapeone_Crash=C;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.sc_base);o.sc_gambleone_Crash_n=m;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.sc_base);o.sc_gamblearea_Crash_n=f;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.sc_base);o.sc_escapearea_Crash_n=_;o.ShowDownSD_Crash=function(){};var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.sc_base);o.sc_end_Crash_n=b;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.cs_base);o.cs_applyexittable_Crash=y;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.sc_base);o.sc_applyexittable_Crash=g;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.cs_base);o.cs_gethistory_Crash=v;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.sc_base);o.sc_gethistory_Crash=T;o.BettingRecord=function(){};var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.cs_base);o.cs_gethistorygamble_Crash=w;var M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.sc_base);o.sc_gethistorygamble_Crash=M;o.historygamble_Crash=function(){};var x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.sc_base);o.sc_startjump_Crash_n=x,function(t){t[t.PreGamble=1]="PreGamble",t[t.Gambling=2]="Gambling",t[t.ShowPrize=3]="ShowPrize",t[t.NoBanker=4]="NoBanker"}(o.Card100StatusEnum||(o.Card100StatusEnum={}));o.BetInfo=function(){},cc._RF.pop()},{"../../../Common/script/base/cs_base":void 0}],CrashTest:[function(t,e,o){"use strict";cc._RF.push(e,"3926cqRjUVOOJgEee6+MeQE","CrashTest"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../../Boot/scirpt/AppConst"),i=t("../../../Common/script/util/UIUtil"),a=t("../Model/CrashModel"),r=t("../Model/CrashNetData"),s=t("../View/InputComp"),u=function(){function t(){}return t.createTestData=function(){},t.createHistoryRecordData=function(e){if(1==e.result){this.allHistoryData=[],e.wbs=e.wbs||[];for(var o=0;o<e.wbs.length;o++)this.allHistoryData.push({type:t.getColor(e.wbs[o]),count:e.wbs[o],time:e.time[o]});this.allHistoryData=this.allHistoryData.sort(function(t,e){var o=+t.time.replace(/:/g,"");return+e.time.replace(/:/g,"")-o}),this.recordData=[];var n=e.wbs.length;if(n>10&&(n=10),e.time){for(e.wbs=e.wbs.slice(-t.maxRecordCount),e.time=e.time.slice(-t.maxRecordCount),o=0;o<n;o++)this.recordData.push({type:t.getColor(e.wbs[o]),count:e.wbs[o],time:e.time[o]});this.selfHistoryData=e.berrecord,this.selfHistoryData=this.selfHistoryData.sort(function(t,e){var o=+t.data.replace(/:/g,"");return+e.data.replace(/:/g,"")-o})}}},t.getColor=function(t){return(t=i.UIUtil.formatNumber100(t))<=2?0:t<=10?1:2},t.createGameStatusData=function(t){return void 0===t&&(t=-1),t},t.createRealTimeRenderDataGroup=function(e){for(var o=a.CrashModel.crashData.state,n=[],s=a.CrashModel.getRateByTime(),u=0,l=e;u<l.length;u++){var c=l[u],h=t.calTotalGamble(c.pos2Gameble),p=t.calTotalPos(c.pos2Gameble);if(0!=h&&0!=p){var d=0;o==r.Card100StatusEnum.Gambling?d=0:o==r.Card100StatusEnum.ShowPrize&&(0==p||p>s||(d=p*h));var C={name:i.UIUtil.getNickNameSub(c.name,9,".."),bet:h,payout:p,win:+d.toFixed(2),id:c.pos,droped:!1,tax:c.tax},m=this.isRenderDataExist(C);m?(Object.assign(m,C),n.push(m)):n.push(C)}}return n},t.createRealTimeRenderData=function(e){for(var o,n=a.CrashModel.crashData.state,i=(null===(o=a.CrashModel.roundData)||void 0===o?void 0:o.renderData)||[],s=a.CrashModel.getRateByTime(),u=0,l=e;u<l.length;u++){var c=l[u],h=t.calTotalGamble(c.pos2Gameble),p=t.calTotalPos(c.pos2Gameble);if(0!=h){var d=0;n==r.Card100StatusEnum.Gambling?d=0:n==r.Card100StatusEnum.ShowPrize&&(0==p||p>s||(d=p*h-c.tax/100));var C={name:c.name,bet:h,payout:p,win:d,id:c.pos,droped:!1,tax:c.tax},m=this.isRenderDataExist(C);m?(m.droped&&(C.win=p*h-c.tax/100),Object.assign(m,C)):i.push(C)}}for(var f=0,_=i;f<_.length;f++)(c=_[f]).droped&&c.payout>0&&c.win<=0&&(c.win=c.bet*c.payout-c.tax/100);return a.CrashModel.roundData&&a.CrashModel.roundData.renderData&&n==r.Card100StatusEnum.Gambling&&(a.CrashModel.roundData.renderData=i.sort(function(t,e){return e.bet-t.bet})),i},t.changeWinMe=function(t){for(var e,o=0,i=(null===(e=a.CrashModel.roundData)||void 0===e?void 0:e.renderData)||[];o<i.length;o++){var r=i[o];if(r.id==n.AppConst.mPlayerModel.userid)return void(r.win=t)}},t.isRenderDataExist=function(t){for(var e,o=0,n=(null===(e=a.CrashModel.roundData)||void 0===e?void 0:e.renderData)||[];o<n.length;o++){var i=n[o];if(i.id==t.id)return i}return null},t.calTotalPos=function(t){var e=0;for(var o in t)e+=+o;return+(e/100).toFixed(2)},t.calTotalGamble=function(t){var e=0;for(var o in t)e+=+t[o];return+(e/100).toFixed(2)},t.getMaxInput=function(t){var e=0;switch(t){case s.EInputType.Extract:e=999;break;case s.EInputType.Frequency:e=20;break;case s.EInputType.Edit:e=999}return e},t.maxRecordCount=10,t.recordData=[],t.allHistoryData=[],t.selfHistoryData=[],t}();o.default=u,cc._RF.pop()},{"../../../Boot/scirpt/AppConst":void 0,"../../../Common/script/util/UIUtil":void 0,"../Model/CrashModel":"CrashModel","../Model/CrashNetData":"CrashNetData","../View/InputComp":"InputComp"}],CrashUtil:[function(t,e,o){"use strict";cc._RF.push(e,"a32ee3iwTFO5ohtfjmQfLm4","CrashUtil");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,a){function r(t){try{u(n.next(t))}catch(e){a(e)}}function s(t){try{u(n.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(r,s)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){}return t.addSpine=function(t,e){return void 0===e&&(e="Crash"),n(this,void 0,void 0,function(){return i(this,function(){return[2,new Promise(function(o){cc.assetManager.getBundle(e).load(t,sp.SkeletonData,function(t,e){o(t?null:e)})})]})})},t.playSpine=function(e,o,a,r,s){return void 0===r&&(r=!0),n(this,void 0,void 0,function(){var n,u,l;return i(this,function(i){switch(i.label){case 0:return[4,t.addSpine(e)];case 1:return n=i.sent(),(l=(u=o).node.getComponent(sp.Skeleton)||u.node.addComponent(sp.Skeleton)).skeletonData=n,l.premultipliedAlpha=!0,"baozha"==a&&(l.timeScale=.7),l.clearTracks(),l.setSlotsToSetupPose(),l.setAnimation(0,a,r),s&&l.setCompleteListener(s),[2]}})})},t.addParticle=function(t,e){return void 0===e&&(e="Crash"),n(this,void 0,void 0,function(){return i(this,function(){return[2,new Promise(function(o){cc.assetManager.getBundle(e).load(t,cc.Prefab,function(t,e){o(t?null:e)})})]})})},t.getParcelDelta=function(t){return t<=4?.25:t<=10?1/2.8:t<=20?.5:t<=40?1/1.2:t<=50?1:2},t.convertParam=function(t){return Math.round(100*t)},t.formatNumber=function(t,e){void 0===e&&(e=2);var o=/(0|[1-9]\d{0,1})(\.\d{1,2})?/;return 5==e&&(o=/(0|[1-9]\d{0,4})(\.\d{1,2})?/),!!o.exec(t)},t.formatMoneyWith6digts2=function(t){var e=t.value;String(e).indexOf(".")>-1||(t.value=t.value.replace(/[^\d]/g,"").replace(/(\d{5})\d*$/g,"$1").replace(/(\d*)\5/g,"$1$9")),t.value=t.value.replace(/[^\d\.]/g,"").replace(/(\.\d{2})\d*$/g,"$1").replace(/(\.)(\d*)\1/g,"$1$9"),t.value=t.value.replace(/[^0-9.]/g,""),t.value=t.value.replace(/\.+/g,"."),t.value=t.value.replace(/(\.+)(\d+)(\.+)/g,"$1$2")},t}();o.default=a,cc._RF.pop()},{}],CrashViewCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"64e80JfKAFM0KDSJjj0Tj8Y","CrashViewCtrl"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../../Boot/scirpt/AppConst"),i=t("../../../Common/script/base/CommonCtr"),a=t("../../../Common/script/base/GlobalConfig"),r=t("../../../Common/script/base/WebSocketManager"),s=t("../../../Common/script/util/UIUtil"),u=t("../Model/CrashConfig"),l=t("../Model/CrashModel"),c=t("../Model/CrashNetData"),h=t("../Test/CrashTest"),p=function(){function t(){this.view=null}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t,this._instance.RegistNotify()),this._instance},enumerable:!1,configurable:!0}),t.Destroy=function(){this._instance&&(this._instance.UnRegistNotify(),this._instance._model=null,this._instance=null)},t.prototype.RegistNotify=function(){var t=r.WebSocketManager.getInstance;t.RegistNotify("sc_tablestart_Crash_n",this.onTableStart,this),t.RegistNotify("sc_startjump_Crash_n",this.onJumpStart,this),t.RegistNotify("sc_gambleone_Crash_n",this.onGambleOne,this),t.RegistNotify("sc_gamblearea_Crash_n",this.onGambleArea,this),t.RegistNotify("sc_escapeone_Crash_n",this.onEscapeOne,this),t.RegistNotify("sc_end_Crash_n",this.onEnd,this),t.RegistNotify("sc_entertable_Crash",this.onEnterTableNotice,this),t.RegistNotify("sc_one_exittable_n",this.sc_one_exittable_n,this),t.RegistNotify("sc_freshgold_n",this.sc_freshgold_n,this),t.RegistNotify("sc_addgoldingame",this.sc_addgoldingame,this)},t.prototype.UnRegistNotify=function(){var t=r.WebSocketManager.getInstance;t.UnRegistNotify("sc_tablestart_Crash_n",this.onTableStart,this),t.UnRegistNotify("sc_startjump_Crash_n",this.onJumpStart,this),t.UnRegistNotify("sc_gambleone_Crash_n",this.onGambleOne,this),t.UnRegistNotify("sc_gamblearea_Crash_n",this.onGambleArea,this),t.UnRegistNotify("sc_escapeone_Crash_n",this.onEscapeOne,this),t.UnRegistNotify("sc_end_Crash_n",this.onEnd,this),t.UnRegistNotify("sc_entertable_Crash",this.onEnterTableNotice,this),t.UnRegistNotify("sc_one_exittable_n",this.sc_one_exittable_n,this),t.UnRegistNotify("sc_freshgold_n",this.sc_freshgold_n,this),t.UnRegistNotify("sc_addgoldingame",this.sc_addgoldingame,this)},Object.defineProperty(t.prototype,"Model",{get:function(){return null==this._model&&(this._model=new l.CrashModel),this._model},enumerable:!1,configurable:!0}),t.prototype.sc_freshgold_n=function(t){this.view&&1==t.result&&2==t.freshType&&(this.view.updateUserGold(!0,t.gold),2==t.source&&(n.AppConst.mPlayerModel.bReCharge=!0))},t.prototype.sc_addgoldingame=function(t){if(this.view&&1==t.result){if(1==t.status){n.AppConst.mPlayerModel.bReCharge=!0;var e="1"==n.AppConst.languageType?"english":"hindi",o=xgameTable.getComplanguageSevenUpDownById(46)[e];i.CommonCtr.instance.ShowTipLabel(o)}this.view.updateUserGold(!0,t.lGold)}},t.prototype.onEnterTable=function(e){if(cc.isValid(this.view)){l.CrashModel.crashData.state=e.state,l.CrashModel.crashData.endTime=e.Endtime,l.CrashModel.crashData.userlist=e._userlist,l.CrashModel.crashData.otherBetList=e.otherBetList,l.CrashModel.nextGambled=e.bNextGambel,l.CrashModel.clickExit=!1,l.CrashModel.resetRoundData(),l.CrashModel.roundData.isEscaped=e.issettle;var o=0;e.state==c.Card100StatusEnum.ShowPrize?((o=e.Totaltime-e.Endtime)<0&&(o=0),l.CrashModel.roundData.gameJumpTime=Date.now()-1e3*o):l.CrashModel.roundData.gameJumpTime=Date.now()-1e3*o,l.CrashModel.roundData.gameTime=o||.01,l.CrashModel.roundData.inputGambleRate=l.CrashModel.roundData.serverGambleRate=u.default.defaultRate,l.CrashModel.roundData.inputGambleRound=l.CrashModel.roundData.serverGambleRound=u.default.defaultRound;var i=s.UIUtil.formatNumber100(n.AppConst.mPlayerModel.gold);if(e.autocount>0&&(l.CrashModel.crashData.autocount=e.autocount,e.escaperate&&e.escaperate[0])){var a=s.UIUtil.formatNumber100(e.escaperate[0].pos),r=s.UIUtil.formatNumber100(e.escaperate[0].val);i>=r*e.autocount&&(l.CrashModel.crashData.autocount=e.autocount,l.CrashModel.roundData.inputGambleRate=a,l.CrashModel.roundData.inputGambleRound=e.autocount,l.CrashModel.roundData.inputGambleBet=r,l.CrashModel.roundData.serverGambleRate=a,l.CrashModel.roundData.serverGambleRound=e.autocount,l.CrashModel.roundData.serverGambleBet=r)}if(0==e._pos2Gameble.length?l.CrashModel.roundData.isGambled=!1:(l.CrashModel.roundData.isGambled=!0,0==e._pos2Gameble[0].pos?l.CrashModel.roundData.isEscaped=!1:(l.CrashModel.roundData.isEscaped=!0,l.CrashModel.roundData.inputGambleRate=s.UIUtil.formatNumber100(e._pos2Gameble[0].pos),l.CrashModel.roundData.inputGambleBet=s.UIUtil.formatNumber100(e._pos2Gameble[0].val))),l.CrashModel.resetGameData(e.tableid,n.AppConst.currentlevelid),e.otherBetList&&e.otherBetList.length>0){e.otherBetList.sort(function(t,e){var o=h.default.calTotalGamble(t.pos2Gameble);return h.default.calTotalGamble(e.pos2Gameble)-o});var p=h.default.createRealTimeRenderData(e.otherBetList);t.instance.view.ui_realTimeComp.updateRealTimeList(p)}l.CrashModel.isInit=!0}},t.prototype.onEnterTableNotice=function(e){cc.isValid(this.view)&&(l.CrashModel.resetGameData(e.tableid,n.AppConst.currentlevelid),1==e.state&&t.instance.view.ui_waitComp.showWaitComp(!0),t.instance.onEnterTable(e))},t.prototype.onTableStart=function(e){if(cc.isValid(this.view))if(l.CrashModel.isInit){if(l.CrashModel.crashData.state=c.Card100StatusEnum.Gambling,l.CrashModel.crashData.endTime=e.Endtime,t.instance.view.initGamblingStatus(),t.instance.view.updateJoinGroupTableStart(),e.betInfos&&e.betInfos.length>0){e.betInfos.sort(function(t,e){var o=h.default.calTotalGamble(t.pos2Gameble);return h.default.calTotalGamble(e.pos2Gameble)-o});var o=h.default.createRealTimeRenderData(e.betInfos);t.instance.view.ui_realTimeComp.updateRealTimeList(o)}}else l.CrashModel.cacheServerData.tableStart=e},t.prototype.onJumpStart=function(e){cc.isValid(this.view)&&(l.CrashModel.isInit?(l.CrashModel.crashData.state=c.Card100StatusEnum.ShowPrize,l.CrashModel.roundData.gameJumpTime=Date.now(),t.instance.view.initShowPrizeStatus(),t.instance.view.updateJoinGroupJumpStart()):l.CrashModel.cacheServerData.jumpStart=e)},t.prototype.onGambleOne=function(e,o){1==e.result&&(l.CrashModel.roundData.isGambled=!0,t.instance.view.updateUserGold(!0,e._curGold),t.instance.view.updateGambleOneView(),o&&o())},t.prototype.onGambleArea=function(e){if(cc.isValid(this.view)){if(!l.CrashModel.isInit)return l.CrashModel.cacheServerData.gambleArea||(l.CrashModel.cacheServerData.gambleArea=[]),void l.CrashModel.cacheServerData.gambleArea.push(e);var o=h.default.createRealTimeRenderData(e.otherBetList);t.instance.view.ui_realTimeComp.updateRealTimeList(o)}},t.prototype.onEscapeOne=function(e){var o;if(cc.isValid(this.view)){l.CrashModel.roundData.isGambled=!1,l.CrashModel.roundData.isEscaped=!0;var n=s.UIUtil.formatNumber100(e._tempshowdown.money);h.default.changeWinMe(n),null===(o=t.instance.view.ui_statusComp)||void 0===o||o.updateResultGoldText(n),t.instance.view.updateJoinGroupEscapeOne()}},t.prototype.onEndHandler=function(e){var o,i;l.CrashModel.crashData.state=c.Card100StatusEnum.NoBanker,t.instance.view.ui_statusComp.stopHandler();var a=s.UIUtil.formatNumber100(e.sdlist.money);null===(o=t.instance.view.ui_statusComp)||void 0===o||o.updateResultGoldText(a),null===(i=t.instance.view.ui_statusComp)||void 0===i||i.updateResultBetText(e.rpos/100),n.AppConst.mPlayerModel.gold=e.money,t.instance.view.updateUserGold(!1),t.instance.view.scheduleOnce(function(){l.CrashModel.crashData.state!=c.Card100StatusEnum.Gambling&&(l.CrashModel.crashData.state=c.Card100StatusEnum.PreGamble,l.CrashModel.crashData.endTime=e.Endtime,t.instance.view.initNoBankerStatus())},e.Endtime),t.instance.view.ui_rocketTrail.isRocketFlyed()&&t.instance.view.ui_rocketTrail.showBomb(!0,function(){}),t.instance.view.updateJoinGroupEnd(),Math.sqrt(64*(e.rpos/100-1)),this.calEndRenderData(e.rpos),l.CrashModel.resetRoundData(),t.instance.view.ui_rocketTrail.clearComp(),t.instance.view.ui_rocketTrail.hideDropComp(),t.instance.view.ui_realTimeComp.clearComp(),t.instance.view.initRecordList(),t.instance.view.ui_stopBtn.touchable=!0},t.prototype.onEnd=function(t){cc.isValid(this.view)&&(l.CrashModel.isInit?(l.CrashModel.roundData.gameTime,Math.sqrt(64*(t.rpos/100-1)),l.CrashModel.getRateByTime(),s.UIUtil.formatNumber100(t.rpos),l.CrashModel.crashData.state=c.Card100StatusEnum.NoBanker,this.onEndHandler(t,!1)):l.CrashModel.cacheServerData.end=t)},t.prototype.calEndRenderData=function(e){for(var o=l.CrashModel.roundData.renderData,n=s.UIUtil.formatNumber100(e),i=0,a=o;i<a.length;i++){var r=a[i];if(0==r.payout)r.win=-r.bet;else if(r.payout<n){if(r.win<=0){var u=r.payout*r.bet;r.win=u-r.tax/100}}else r.win=-r.bet;r.rpos=e}t.instance.view.ui_realTimeComp.updateRealTimeListEnd(o)},t.prototype.sc_one_exittable_n=function(t){if(cc.isValid(this.view))if(1==t.result){if(t.gameid!=a.EnumGameId.Crash)return;if(t.userid!=n.AppConst.mPlayerModel.userid)return;this.view.exitGame()}else-1==t.result||t.result},t.prototype.resumeServerData=function(){if(l.CrashModel.cacheServerData.tableStart&&this.onTableStart(l.CrashModel.cacheServerData.tableStart),l.CrashModel.cacheServerData.jumpStart&&this.onJumpStart(l.CrashModel.cacheServerData.jumpStart),l.CrashModel.cacheServerData.gambleArea)for(var t=0,e=l.CrashModel.cacheServerData.gambleArea;t<e.length;t++){var o=e[t];this.onGambleArea(o)}l.CrashModel.cacheServerData.end&&this.onEnd(l.CrashModel.cacheServerData.end),l.CrashModel.isInit=!0,l.CrashModel.cacheServerData={}},t}();o.default=p,cc._RF.pop()},{"../../../Boot/scirpt/AppConst":void 0,"../../../Common/script/base/CommonCtr":void 0,"../../../Common/script/base/GlobalConfig":void 0,"../../../Common/script/base/WebSocketManager":void 0,"../../../Common/script/util/UIUtil":void 0,"../Model/CrashConfig":"CrashConfig","../Model/CrashModel":"CrashModel","../Model/CrashNetData":"CrashNetData","../Test/CrashTest":"CrashTest"}],CrashView:[function(t,e,o){"use strict";cc._RF.push(e,"5897cOMVsVPCY3a75vIfw1g","CrashView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,a){function r(t){try{u(n.next(t))}catch(e){a(e)}}function s(t){try{u(n.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(r,s)}u((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var u=t("../../../Boot/scirpt/AppConst"),l=t("../../../Common/script/base/AudioManager"),c=t("../../../Common/script/base/BaseFrameNative"),h=t("../../../Common/script/base/CommonCtr"),p=t("../../../Common/script/base/CommonView"),d=t("../../../Common/script/base/LocalStorage"),C=t("../../../Common/script/base/NotificationCenter"),m=t("../../../Common/script/base/NotificationName"),f=t("../../../Common/script/base/ReconnectManager"),_=t("../../../Common/script/base/SceneManager"),b=t("../../../Common/script/base/ViewBase"),y=t("../../../Common/script/util/UIUtil"),g=t("../../../GameHall/script/Module/RechargeView/RechargeView"),v=t("../Controller/CrashNetCtrl"),T=t("../Controller/CrashViewCtrl"),w=t("../Loader/CrashLoader"),M=t("../Model/CrashConfig"),x=t("../Model/CrashModel"),I=t("../Model/CrashNetData"),S=t("../Test/CrashTest"),B=t("../Util/CrashUtil"),D=t("./AllHistoryItem"),k=t("./CrashAddCash"),A=t("./HistoryComp"),E=t("./InputComp"),R=t("./MenuComp"),G=t("./ReadyComp"),O=t("./RealTimeComp"),P=t("./RealTimeItem"),N=t("./RecordItem"),j=t("./RocketTrail"),F=t("./RuleComp"),L=t("./SelfHistoryItem"),U=t("./StatusComp"),H=t("./WaitComp"),V=cc._decorator,z=V.ccclass,J=V.property,q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goldIconPrefab=null,e.ui_content=null,e.ui_particleComp=null,e.ui_settingBtn=null,e.ui_menuComp=null,e.ui_ruleComp=null,e.ui_userName=null,e.ui_userGold=null,e.ui_userHead=null,e.ui_historyComp=null,e.ui_inputComp=null,e.ui_waitComp=null,e.ui_readyComp=null,e.ui_statusComp=null,e.ui_realTimeComp=null,e.ui_historyBtn=null,e.ui_recordList=null,e.ui_amountText=null,e.ui_extractBtn=null,e.ui_frequencyBtn=null,e.ui_openBtn=null,e.ui_amountBtnHalf=null,e.ui_amountBtnSub10=null,e.ui_amountBtnSub1=null,e.ui_editBtn=null,e.ui_editBtn2=null,e.ui_amountBtn2x=null,e.ui_amountBtnAdd1=null,e.ui_amountBtnAdd10=null,e.ui_joinBtn=null,e.ui_crashOutBtn=null,e.ui_autoBtn=null,e.ui_stopBtn=null,e.inputSourceComp=null,e.ui_rocketTrail=null,e.openController=null,e.ui_userGoldIcon=null,e.joinGroupController=null,e.isAutoJoinCalled=!1,e.settingView=null,e.ui_extractDesc=null,e.ui_frequencyDesc=null,e.ui_amountDesc=null,e.ui_menu_btn_toHall_title=null,e.ui_menu_btn_setting_title=null,e.ui_menu_btn_help_title=null,e.ui_timeDescText=null,e.ui_retirouDescText=null,e.ui_dateDescText=null,e.ui_typeDescText=null,e.ui_multipleDescText=null,e.ui_amoutDescText=null,e.ui_balanceDescText=null,e.ui_allHistoryBtn_title=null,e.ui_selfHistoryBtn_title=null,e.ui_statusComp_win=null,e.ui_stopBtn_title=null,e.ui_autoBtn_desc=null,e.ui_autoBtn_desc2=null,e.ui_crashOutBtn_title=null,e.ui_joinBtn_desc=null,e.ui_joinBtn_desc2=null,e.ui_changeRecordBtn_title=null,e.ui_ruleAutoBtn_title=null,e.ui_ruleRulesBtn_title=null,e.ui_rulesContent_1=null,e.ui_rulesContent_2=null,e.ui_rulesContent_3=null,e.ui_rulesContent_4=null,e.ui_rulesContent_5=null,e.ui_autoContent_1=null,e.ui_autoContent_2=null,e.ui_autoContent_3=null,e.ui_autoContent_4=null,e.ui_autoContent_5=null,e.ui_playerDesc=null,e.ui_betDesc=null,e.ui_payoutDesc=null,e.ui_winDesc=null,e.addCash=null,e.mybet=!1,e}return i(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return"Crash"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/crash"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"Crash"},enumerable:!1,configurable:!0}),e.prototype.setLanguage=function(){var t=xgameTable.getTableMgr().getSheet(xgameTable.EnumExcelKey.Complanguage,xgameTable.EnumComplanguage.CrashMain);for(var e in t){var o=t[e];if(o.comp&&this[o.comp]&&this[o.comp]){var n="1"==u.AppConst.languageType?o.english:o.hindi;1==o.type?this[o.comp].text=n:this[o.comp].url="ui://Crash/"+n}}},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),fgui.GRoot.create(),fgui.UIObjectFactory.setExtension("ui://Crash/MenuComp",R.default),fgui.UIObjectFactory.setExtension("ui://Crash/InputComp",E.default),fgui.UIObjectFactory.setExtension("ui://Crash/HistoryComp",A.default),fgui.UIObjectFactory.setExtension("ui://Crash/WaitComp",H.default),fgui.UIObjectFactory.setExtension("ui://Crash/ReadyComp",G.default),fgui.UIObjectFactory.setExtension("ui://Crash/StatusComp",U.default),fgui.UIObjectFactory.setExtension("ui://Crash/RealTimeComp",O.default),fgui.UIObjectFactory.setExtension("ui://Crash/AllHistoryItem",D.default),fgui.UIObjectFactory.setExtension("ui://Crash/SelfHistoryItem",L.default),fgui.UIObjectFactory.setExtension("ui://Crash/RecordItem",N.default),fgui.UIObjectFactory.setExtension("ui://Crash/RocketTrail",j.default),fgui.UIObjectFactory.setExtension("ui://Crash/RealTimeItem",P.default),fgui.UIObjectFactory.setExtension("ui://Crash/RuleComp",F.default),T.default.instance.view=this},e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),fgui.GRoot.inst.addChild(this.fguiComponent),this.addFguiComponent(p.default,!0),this.fguiComponent.makeFullScreen(),this.loadSoundResources(),C.NotificationCenter.Instance.on(m.default.AppLanguage.SELECT_LANGUAGE,this.setLanguage,this),"2"==u.AppConst.languageType&&this.setLanguage(),this.joinGroupController=this.ui_content.getController("c3"),this.ui_rocketTrail.initBezierData(),this.initEventHandler(),this.initView()},e.prototype.initEventHandler=function(){this.ui_settingBtn.onClick(this.onSettingBtnClick,this),this.ui_historyBtn.onClick(this.onHistoryBtnClick,this),this.ui_extractBtn.onClick(this.onInputBtnClick,this),this.ui_frequencyBtn.onClick(this.onInputBtnClick,this),this.ui_editBtn.onClick(this.onInputBtnClick,this),this.ui_editBtn2.onClick(this.onInputBtnClick,this),this.ui_amountBtnHalf.onClick(this.onAmountBtnClick,this),this.ui_amountBtnSub10.onClick(this.onAmountBtnClick,this),this.ui_amountBtnSub1.onClick(this.onAmountBtnClick,this),this.ui_amountBtn2x.onClick(this.onAmountBtnClick,this),this.ui_amountBtnAdd1.onClick(this.onAmountBtnClick,this),this.ui_amountBtnAdd10.onClick(this.onAmountBtnClick,this),this.openController=this.ui_content.getController("c2"),this.openController.onChanged(this.onOpenBtnClick.bind(this)),this.ui_joinBtn.onClick(this.onJoinBtnClick,this),this.ui_crashOutBtn.onClick(this.onCrashOutBtnClick.bind(this),this),this.ui_autoBtn.onClick(this.onAutoBtnClick,this),this.ui_stopBtn.onClick(this.onStopBtnClick.bind(this),this)},e.prototype.checkIsAuto=function(t){var e,o;void 0===t&&(t=!1),x.CrashModel.crashData.state;var n=(null===(e=x.CrashModel.roundData)||void 0===e?void 0:e.isGambled)||!1;return null===(o=x.CrashModel.roundData)||void 0===o||o.isEscaped,T.default.instance.view.openController.selectedIndex,n?(M.default.showTipLabel(M.EnumTipIndex.CannotModifil),!0):this.joinGroupController.selectedIndex==x.EnumBtnIndex.Stop?(M.default.showTipLabel(M.EnumTipIndex.ClickStop),!0):(this.joinGroupController.selectedIndex,x.EnumBtnIndex.Auto,this.openController.selectedIndex,!1)},e.prototype.onSettingBtnClick=function(){return r(this,void 0,void 0,function(){return s(this,function(){return l.AudioManager.Singleton.play("","btn_click"),this.ui_menuComp.visible=!this.ui_menuComp.visible,[2]})})},e.prototype.onHistoryBtnClick=function(){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return l.AudioManager.Singleton.play("","btn_click"),[4,v.default.getHistory(!1)];case 1:return t.sent(),this.ui_historyComp.updateComp(),[2]}})})},e.prototype.onInputBtnClick=function(t){if(l.AudioManager.Singleton.play("","btn_click"),!this.checkIsAuto()){var e=t.target.$gobj,o=null;"extractBtn"==e._name?(this.inputSourceComp=this.ui_extractBtn,o=E.EInputType.Extract,x.CrashModel.vCurInputStr=""+this.inputGambleRate):"frequencyBtn"==e._name?(this.inputSourceComp=this.ui_frequencyBtn,o=E.EInputType.Frequency,x.CrashModel.vCurInputStr=""+this.inputGambleRound):"editBtn"!=e._name&&"editBtn2"!=e._name||(this.inputSourceComp=this.ui_editBtn,o=E.EInputType.Edit,x.CrashModel.vCurInputStr=""+this.inputGambleBet),this.inputSourceComp&&this.showInputComp(o)}},e.prototype.updateInputText=function(t){switch(this.inputSourceComp.name){case"extractBtn":this.ui_extractBtn.title=t+"x",x.CrashModel.roundData.inputGambleRate=+t;break;case"frequencyBtn":this.ui_frequencyBtn.text=""+t,x.CrashModel.roundData.inputGambleRound=+t;break;case"editBtn":case"editBtn2":this.ui_amountText.text=this.ui_joinBtn.text=this.ui_autoBtn.text=""+t,x.CrashModel.roundData.inputGambleBet=+t}},e.prototype.showInputComp=function(t){this.ui_inputComp.updateComp(t)},e.prototype.onAmountBtnClick=function(t){if(l.AudioManager.Singleton.play("","btn_click"),!this.checkIsAuto()){var e=t.currentTarget.$gobj;if("amountBtnHalf"==e._name)this.updateAmountText(.5,!0);else if("amountBtn2x"==e._name)this.updateAmountText(2,!0);else{var o=+e.data.replace("+","");this.updateAmountText(o)}}},e.prototype.showUpDownAddCash=function(){this.crashAddCash?this.crashAddCash.Show():this.crashAddCash=this.addFguiComponent(k.default,!0)},e.prototype.showAddCash=function(){this.addCash?this.addCash.Show():this.addCash=this.addFguiComponent(g.default),this.addCash.init(x.CrashModel.gameData.tableId,u.AppConst.mPlayerModel.gold)},e.prototype.onJoinBtnClick=function(){var t;return r(this,void 0,void 0,function(){var e,o;return s(this,function(n){switch(n.label){case 0:return this.mybet?[2]:(l.AudioManager.Singleton.play("","opt_bet"),x.CrashModel.crashData.state!=I.Card100StatusEnum.Gambling&&0!=(null===(t=x.CrashModel.roundData)||void 0===t?void 0:t.isGambled)?[3,2]:(this.mybet=!0,e=y.UIUtil.formatNumber100(u.AppConst.mPlayerModel.gold),this.inputGambleBet>e?(M.default.showTipLabel(M.EnumTipIndex.MoreThan),this.mybet=!1,[2]):(console.log("onJoinBtnClick",this.inputGambleBet),[4,v.default.gambleOne(this.inputGambleRate,this.inputGambleBet,0)])));case 1:o=n.sent(),this.mybet=!1,1==(null==o?void 0:o.result)&&(x.CrashModel.nextGambled=x.CrashModel.crashData.state==I.Card100StatusEnum.ShowPrize,x.CrashModel.roundData.inputGambleRate=this.inputGambleBet,M.default.showTipLabel(M.EnumTipIndex.SuccessfulBet),this.ui_readyComp.updateStartTip(3)),n.label=2;case 2:return[2]}})})},e.prototype.onCrashOutBtnClick=function(){return r(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return l.AudioManager.Singleton.play("","btn_click"),x.CrashModel.crashData.state!=I.Card100StatusEnum.ShowPrize?[3,2]:(t=this.ui_statusComp.getBetNum(),[4,v.default.escapeOne(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.onAutoBtnClick=function(){return r(this,void 0,void 0,function(){return s(this,function(){return l.AudioManager.Singleton.play("","btn_click"),M.default.showTipLabel(M.EnumTipIndex.StartAuto),this.joinGroupControll(x.EnumBtnIndex.Stop,!0),this.showAutoTween(),x.CrashModel.crashData.state!=I.Card100StatusEnum.Gambling||x.CrashModel.roundData.isGambled||this.ui_readyComp.getCountDown()<5&&(this.ui_readyComp.updateStartTip(3),this.checkAutoJoinClick(function(){})),[2]})})},e.prototype.onStopBtnClick=function(){return r(this,void 0,void 0,function(){return s(this,function(){return l.AudioManager.Singleton.play("","btn_click"),M.default.showTipLabel(M.EnumTipIndex.CancelAutomatic),this.joinGroupControll(x.EnumBtnIndex.Auto),this.showAutoTween(),x.CrashModel.crashData.state==I.Card100StatusEnum.Gambling&&this.ui_readyComp.updateStartTip(1),[2]})})},e.prototype.checkAutoJoinClick=function(t){return r(this,void 0,void 0,function(){var e,o,n,i,a,r=this;return s(this,function(){return x.CrashModel.crashData.state!=I.Card100StatusEnum.Gambling?[2]:0==this.openController.selectedIndex?[2]:this.joinGroupController.selectedIndex!=x.EnumBtnIndex.Stop?[2]:(e=function(){r.openController.setSelectedIndex(0),r.joinGroupControll(x.EnumBtnIndex.Auto)},o=y.UIUtil.formatNumber100(u.AppConst.mPlayerModel.gold),n=this.inputGambleRate,i=this.inputGambleRound,a=this.inputGambleBet,o<a*i?(M.default.showTipLabel(M.EnumTipIndex.MoreThan),e(),[2]):0==x.CrashModel.crashData.autocount?(M.default.showTipLabel(M.EnumTipIndex.AutomaticTimes),e(),[2]):this.isAutoJoinCalled?[2]:(this.isAutoJoinCalled=!0,v.default.gambleOneAuto(n,a,i,function(){l.AudioManager.Singleton.play("","opt_bet"),M.default.showTipLabel(M.EnumTipIndex.TurnOn),r.showAutoTween(),r.joinGroupControll(x.EnumBtnIndex.Stop,!1),r.isAutoJoinCalled=!1,t&&t(),r.ui_frequencyBtn.text=""+x.CrashModel.crashData.autocount}),[2]))})})},e.prototype.updateAmountText=function(t,e){void 0===e&&(e=!1);var o=T.default.instance.view.inputGambleBet,n=o;e?o*=t:o+=t,o<M.default.minAmount?o=M.default.minAmount:o>M.default.maxAmount&&(o=M.default.maxAmount);var i=!0,a=y.UIUtil.formatNumber100(u.AppConst.mPlayerModel.gold);if(1==this.openController.selectedIndex?a<o*this.inputGambleRound&&(i=!1):(a<o&&(i=!1),o<n&&(i=!0)),i){var r=o.toFixed(2);o=+r.slice(0,r.length-1),T.default.instance.view.inputGambleBet=o}else M.default.showTipLabel(M.EnumTipIndex.MoreThan)},e.prototype.allChildCreated=function(){return r(this,void 0,void 0,function(){return s(this,function(){return t.prototype.allChildCreated.call(this),c.BaseFrameNative.nowGameView=this,c.BaseFrameNative.isInHall=!1,cc.game.off(cc.game.EVENT_SHOW),cc.game.on(cc.game.EVENT_SHOW,this.gameEventShow.bind(this)),cc.game.off(cc.game.EVENT_HIDE),cc.game.on(cc.game.EVENT_HIDE,this.gameEventHide.bind(this)),this.node.getChildByName("bg").removeFromParent(),[2]})})},e.prototype.initView=function(){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return w.default.loadParticle(this.ui_particleComp),this.updateUserInfo(),[4,B.default.addSpine("res/spine/huojian")];case 1:return t.sent(),[4,B.default.addParticle("res/prefab/huojianlizi")];case 2:return t.sent(),[4,v.default.enterTable()];case 3:return t.sent(),this.initGameView(!0),this.initOptView(),this.initRecordList(),this.checkRuleComp(),T.default.instance.resumeServerData(),[2]}})})},e.prototype.checkRuleComp=function(){d.LocalStorage.getInstance().getItem("crash_firstShow")||(this.ui_ruleComp.visible=!0,this.scheduleOnce(function(){d.LocalStorage.getInstance().setItem("crash_firstShow",!0)},1))},e.prototype.initGameView=function(t){switch(void 0===t&&(t=!1),this.ui_waitComp.hideWaitComp(),this.ui_readyComp.hideReadyComp(),this.ui_statusComp.hideStatusComp(),this.ui_rocketTrail.hideFlyRocket(),this.inputGambleBet=x.CrashModel.roundData.inputGambleBet,x.CrashModel.crashData.state){case I.Card100StatusEnum.PreGamble:this.initPreGambleStatus();break;case I.Card100StatusEnum.Gambling:this.initGamblingStatus();break;case I.Card100StatusEnum.ShowPrize:this.initShowPrizeStatus(t);break;case I.Card100StatusEnum.NoBanker:this.initNoBankerStatus()}},e.prototype.initPreGambleStatus=function(){this.ui_waitComp.hideWaitComp(),this.ui_readyComp.hideReadyComp(),this.ui_statusComp.hideStatusComp()},e.prototype.initGamblingStatus=function(){this.ui_waitComp.hideWaitComp(),this.ui_readyComp.showReadyComp(),this.ui_statusComp.showStatusComp(!1)},e.prototype.initShowPrizeStatus=function(t){void 0===t&&(t=!1),this.ui_waitComp.hideWaitComp(),this.ui_readyComp.hideReadyComp(),this.ui_statusComp.showStatusComp(!0,t),this.ui_rocketTrail.showFlyRocket(t)},e.prototype.initNoBankerStatus=function(){this.ui_waitComp.showWaitComp(!1),this.ui_readyComp.hideReadyComp(),this.ui_statusComp.hideStatusComp()},e.prototype.updateGambleOneView=function(){1==this.openController.selectedIndex?(x.CrashModel.roundData.isGambled&&(T.default.instance.view.ui_frequencyBtn.title=""+x.CrashModel.crashData.autocount),this.joinGroupControll(x.EnumBtnIndex.Stop,!1),x.CrashModel.crashData.autocount):this.joinGroupControll(x.EnumBtnIndex.CrashOut,!1)},e.prototype.initOptView=function(){this.initOtherOptView(),this.initJoinGroup(!0)},e.prototype.updateInputGroupInput=function(){this.joinGroupControll(x.EnumBtnIndex.Auto)},e.prototype.initJoinGroup=function(t){var e,o;void 0===t&&(t=!1);var n=x.CrashModel.crashData.state,i=(null===(e=x.CrashModel.roundData)||void 0===e?void 0:e.isGambled)||!1,a=(null===(o=x.CrashModel.roundData)||void 0===o?void 0:o.isEscaped)||!1;1==this.openController.selectedIndex?(this.joinGroupControll(x.EnumBtnIndex.Stop),this.showAutoTween(),n==I.Card100StatusEnum.PreGamble?this.joinGroupControll(x.EnumBtnIndex.Stop):n==I.Card100StatusEnum.Gambling?this.joinGroupControll(x.EnumBtnIndex.Stop):n==I.Card100StatusEnum.ShowPrize?a?this.joinGroupControll(x.EnumBtnIndex.Stop):this.joinGroupControll(x.EnumBtnIndex.Stop,!1):n==I.Card100StatusEnum.NoBanker&&this.joinGroupControll(x.EnumBtnIndex.Stop)):n==I.Card100StatusEnum.PreGamble?this.joinGroupControll(x.EnumBtnIndex.Join):n==I.Card100StatusEnum.Gambling?i?this.joinGroupControll(x.EnumBtnIndex.CrashOut,!1):this.joinGroupControll(x.EnumBtnIndex.Join):n==I.Card100StatusEnum.ShowPrize?i?a?this.joinGroupControll(x.EnumBtnIndex.Join,!1):this.joinGroupControll(x.EnumBtnIndex.CrashOut):this.joinGroupControll(x.EnumBtnIndex.Join,!0):n==I.Card100StatusEnum.NoBanker&&this.joinGroupControll(x.EnumBtnIndex.Join,!1)},e.prototype.updateJoinGroupTableStart=function(){var t,e;x.CrashModel.roundData.isGambled=x.CrashModel.nextGambled,x.CrashModel.nextGambled=!1,x.CrashModel.crashData.state,null===(t=x.CrashModel.roundData)||void 0===t||t.isGambled,null===(e=x.CrashModel.roundData)||void 0===e||e.isEscaped,1==this.openController.selectedIndex?x.CrashModel.crashData.autocount:this.joinGroupControll(x.EnumBtnIndex.Join,!x.CrashModel.roundData.isGambled)},e.prototype.updateJoinGroupJumpStart=function(){x.CrashModel.crashData.state;var t,e,o=(null===(t=x.CrashModel.roundData)||void 0===t?void 0:t.isGambled)||!1;null===(e=x.CrashModel.roundData)||void 0===e||e.isEscaped,1==this.openController.selectedIndex?o&&(this.joinGroupController.selectedIndex,x.EnumBtnIndex.Stop,this.joinGroupControll(x.EnumBtnIndex.Stop,!1),this.showAutoTween()):o?this.joinGroupControll(x.EnumBtnIndex.CrashOut):this.joinGroupControll(x.EnumBtnIndex.Join,!0)},e.prototype.updateJoinGroupEscapeOne=function(){var t,e,o=x.CrashModel.crashData.state,n=(null===(t=x.CrashModel.roundData)||void 0===t?void 0:t.isGambled)||!1,i=(null===(e=x.CrashModel.roundData)||void 0===e?void 0:e.isEscaped)||!1;1==this.openController.selectedIndex?n&&i&&this.joinGroupController.selectedIndex==x.EnumBtnIndex.Stop&&(this.joinGroupControll(x.EnumBtnIndex.Stop),this.showAutoTween()):n&&i&&o==I.Card100StatusEnum.ShowPrize?this.joinGroupControll(x.EnumBtnIndex.Join,!0):this.joinGroupControll(x.EnumBtnIndex.Join,!1)},e.prototype.updateJoinGroupEnd=function(){var t,e,o=(null===(t=x.CrashModel.roundData)||void 0===t?void 0:t.isGambled)||!1;null===(e=x.CrashModel.roundData)||void 0===e||e.isEscaped,1==this.openController.selectedIndex?this.joinGroupController.selectedIndex==x.EnumBtnIndex.Stop&&(this.joinGroupControll(x.EnumBtnIndex.Stop),0==x.CrashModel.crashData.autocount?(this.openController.setSelectedIndex(0),this.joinGroupControll(x.EnumBtnIndex.Join,!1)):o&&this.joinGroupControll(x.EnumBtnIndex.Stop)):this.joinGroupControll(x.EnumBtnIndex.Join,!1)},e.prototype.joinGroupControll=function(t,e,o){void 0===e&&(e=!0),void 0===o&&(o=!1);var n=null;switch(t){case x.EnumBtnIndex.Join:n=this.ui_joinBtn;break;case x.EnumBtnIndex.CrashOut:n=this.ui_crashOutBtn;break;case x.EnumBtnIndex.Auto:n=this.ui_autoBtn;break;case x.EnumBtnIndex.Stop:n=this.ui_stopBtn}this.joinGroupController.setSelectedIndex(t),n.touchable=e,n.grayed=!e},Object.defineProperty(e.prototype,"inputGambleRate",{get:function(){return+this.ui_extractBtn.title.replace("x","")},set:function(t){this.ui_extractBtn.title=t+"x",x.CrashModel.roundData.inputGambleRate=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inputGambleRound",{get:function(){return+this.ui_frequencyBtn.title},set:function(t){this.ui_frequencyBtn.title=""+t,x.CrashModel.roundData.inputGambleRound=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inputGambleBet",{get:function(){return+this.ui_amountText.text},set:function(t){this.ui_amountText.text=""+t,this.ui_autoBtn.title=this.ui_joinBtn.title=""+t,x.CrashModel.roundData.inputGambleBet=t},enumerable:!1,configurable:!0}),e.prototype.initOtherOptView=function(){x.CrashModel.crashData.autocount>0?this.openController.setSelectedIndex(1):this.openController.setSelectedIndex(0),this.inputGambleRate=x.CrashModel.roundData.inputGambleRate,this.inputGambleRound=x.CrashModel.roundData.inputGambleRound,this.inputGambleBet=x.CrashModel.roundData.inputGambleBet},e.prototype.showAutoTween=function(){var t=this.ui_stopBtn.getChild("stopCircle").asImage;cc.Tween.stopAllByTarget(t.node),cc.tween(t.node).repeatForever(cc.tween().by(.5,{angle:60})).start()},e.prototype.onOpenBtnClick=function(){var t,e;l.AudioManager.Singleton.play("","btn_click");var o=(null===(t=x.CrashModel.roundData)||void 0===t?void 0:t.isGambled)||!1;if(null===(e=x.CrashModel.roundData)||void 0===e||e.isEscaped,1!=this.openController.selectedIndex)return 0==this.openController.selectedIndex&&o?(M.default.showTipLabel(M.EnumTipIndex.CannotModifil),void this.openController.setSelectedIndex(1)):void(this.checkIsAuto()?this.openController.setSelectedIndex(1):(this.inputGambleRate=M.default.defaultRate,this.inputGambleRound=M.default.defaultRound,this.ui_inputComp.isExtractInputed=!1,this.ui_inputComp.isfrequencyInputed=!1,this.initJoinGroup()));this.openController.setSelectedIndex(0)},e.prototype.initRecordList=function(){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.ui_recordList.itemRenderer=this.renderRecordItem.bind(this),[4,v.default.getHistory()];case 1:return t.sent(),this.ui_recordList.numItems=S.default.recordData.length,[2]}})})},e.prototype.renderRecordItem=function(t,e){e.setData(t,S.default.recordData[t])},e.prototype.updateUserInfo=function(){this.ui_userName.text=y.UIUtil.getNickNameSub(u.AppConst.mPlayerModel._n,12);var t=u.AppConst.mPlayerModel.wechat.wicon;y.UIUtil.loadImage(this.ui_userHead,t),this.updateUserGold(!1)},e.prototype.updateUserGold=function(t,e){var o=this;if(void 0===t&&(t=!0),t){cc.Tween.stopAllByTarget(this.ui_userGold.node);var n=e,i=u.AppConst.mPlayerModel.gold,a={num:i};u.AppConst.mPlayerModel.gold=n,cc.tween(a).to(.5,{num:n},{progress:function(t,e,a,r){var s=0;return o.ui_userGold&&(n>=i?(s=t+(e-t)*r,o.ui_userGold.text=""+y.UIUtil.formatNumber100(s)):(s=t-(t-e)*r,o.ui_userGold.text=""+y.UIUtil.formatNumber100(s))),s}}).start()}else this.ui_userGold.text=""+y.UIUtil.formatNumber100(u.AppConst.mPlayerModel.gold)},e.prototype.exitGame=function(){var t=this;if(!x.CrashModel.clickExit){var e="1"==u.AppConst.languageType?"Kicked out because you haven't played for a long time":"Expulso porque voc\xea n\xe3o jogou por muito tempo";h.CommonCtr.instance.ShowTipCallback(e,function(){t.gotoHall()})}},e.prototype.gotoHall=function(){l.AudioManager.Singleton.stopBGM(),l.AudioManager.Singleton.stopEffect("crash_loop"),cc.game.off(cc.game.EVENT_SHOW),cc.game.off(cc.game.EVENT_HIDE),c.BaseFrameNative.nowGameView=null,this.ui_rocketTrail.clearComp(),this.ui_realTimeComp.clearComp(),_.SceneManager.Singleton.loadScene("GameHall","gameHall")},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),T.default.Destroy()},e.prototype.loadSoundResources=function(){cc.assetManager.getBundle(this.packageResourceName).loadDir("res/sound",cc.AudioClip,function(t,e){for(var o=0;o<e.length;o++)l.AudioManager.Singleton.add(e[o].name,e[o]);l.AudioManager.Singleton.playBGM("crash_bgm")})},e.prototype.gameEventShow=function(){console.log("---gameEventShow---"),cc.game.resume(),this.sendReconnect()},e.prototype.sendReconnect=function(){h.CommonCtr.instance.ShowLoading(),f.ReconnectManager.getInstance.reconnect(this.connectSuccess.bind(this),this.connectFail.bind(this))},e.prototype.connectSuccess=function(){var t=this;cc.isValid(this.node)&&(this.unscheduleAllCallbacks(),this.scheduleOnce(function(){return r(t,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,v.default.enterTable()];case 1:return e.sent(),this.ui_inputComp.isExtractInputed=!1,this.ui_inputComp.isfrequencyInputed=!1,(null===(t=x.CrashModel.roundData)||void 0===t?void 0:t.isGambled)||(this.isAutoJoinCalled=!1),0==x.CrashModel.crashData.autocount&&this.openController.setSelectedIndex(0),this.initGameView(!0),this.initOtherOptView(),h.CommonCtr.instance.HideLoading(),[2]}})})},.5))},e.prototype.connectFail=function(t){var e=this;h.CommonCtr.instance.ShowTipCallback(t,function(){e.sendReconnect()})},e.prototype.gameEventHide=function(){console.log("---gameEventHide---"),this.unscheduleAllCallbacks(),cc.game.pause()},a([J(cc.Prefab)],e.prototype,"goldIconPrefab",void 0),a([z],e)}(b.default);o.default=q,cc._RF.pop()},{"../../../Boot/scirpt/AppConst":void 0,"../../../Common/script/base/AudioManager":void 0,"../../../Common/script/base/BaseFrameNative":void 0,"../../../Common/script/base/CommonCtr":void 0,"../../../Common/script/base/CommonView":void 0,"../../../Common/script/base/LocalStorage":void 0,"../../../Common/script/base/NotificationCenter":void 0,"../../../Common/script/base/NotificationName":void 0,"../../../Common/script/base/ReconnectManager":void 0,"../../../Common/script/base/SceneManager":void 0,"../../../Common/script/base/ViewBase":void 0,"../../../Common/script/util/UIUtil":void 0,"../../../GameHall/script/Module/RechargeView/RechargeView":void 0,"../Controller/CrashNetCtrl":"CrashNetCtrl","../Controller/CrashViewCtrl":"CrashViewCtrl","../Loader/CrashLoader":"CrashLoader","../Model/CrashConfig":"CrashConfig","../Model/CrashModel":"CrashModel","../Model/CrashNetData":"CrashNetData","../Test/CrashTest":"CrashTest","../Util/CrashUtil":"CrashUtil","./AllHistoryItem":"AllHistoryItem","./CrashAddCash":"CrashAddCash","./HistoryComp":"HistoryComp","./InputComp":"InputComp","./MenuComp":"MenuComp","./ReadyComp":"ReadyComp","./RealTimeComp":"RealTimeComp","./RealTimeItem":"RealTimeItem","./RecordItem":"RecordItem","./RocketTrail":"RocketTrail","./RuleComp":"RuleComp","./SelfHistoryItem":"SelfHistoryItem","./StatusComp":"StatusComp","./WaitComp":"WaitComp"}],DropComp:[function(t,e,o){"use strict";cc._RF.push(e,"18719Y/RbFOLIamOv/bN5tr","DropComp");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Common/script/util/UIUtil"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nameText=null,e.betText=null,e.c1=null,e}return i(e,t),e.prototype.onConstruct=function(){this.nameText=this.getChild("nameText").asTextField,this.betText=this.getChild("betText").asTextField,this.c1=this.getController("c1")},e.prototype.setData=function(t){this.nameText.text=""+a.UIUtil.getNickNameSub(t.name,12,""),this.betText.text=t.bet+"x",t.bet<2?this.c1.setSelectedIndex(0):t.bet<10?this.c1.setSelectedIndex(1):this.c1.setSelectedIndex(2)},e.prototype.reset=function(){this.c1.setSelectedIndex(0),this.nameText.text="",this.betText.text=""},e}(fgui.GComponent);o.default=r,cc._RF.pop()},{"../../../Common/script/util/UIUtil":void 0}],HistoryComp:[function(t,e,o){"use strict";cc._RF.push(e,"15f5eFaD0BAr6xHjh24TLMm","HistoryComp");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../Common/script/base/AudioManager"),s=t("../Test/CrashTest"),u=cc._decorator,l=u.ccclass,c=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_allList=null,e.ui_selfList=null,e.ui_closeBtn=null,e.c1=null,e}return i(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return"Crash"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/crash"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"HistoryComp"},enumerable:!1,configurable:!0}),e.prototype.onConstruct=function(){var t=this;this.ui_closeBtn=this.getChild("closeBtn").asButton,this.ui_allList=this.getChild("allList").asList,this.ui_selfList=this.getChild("selfList").asList,this.c1=this.getController("c1"),this.c1.onChanged(function(){t.updateComp()}),this.initComp()},e.prototype.initComp=function(){this.AddEventLister(),this.ui_allList.itemRenderer=this.renderAllHistoryItem.bind(this),this.ui_selfList.itemRenderer=this.renderSelfHistoryItem.bind(this)},e.prototype.AddEventLister=function(){this.ui_closeBtn.onClick(this.Hide,this),this.ui_allList.itemRenderer=this.renderAllHistoryItem.bind(this)},e.prototype.updateComp=function(){this.visible=!0,0==this.c1.selectedIndex?this.ui_allList.numItems=s.default.allHistoryData.length:this.ui_selfList.numItems=s.default.selfHistoryData.length},e.prototype.Hide=function(){r.AudioManager.Singleton.play("","btn_close"),this.visible=!1},e.prototype.renderAllHistoryItem=function(t,e){e.setData(t,s.default.allHistoryData[t])},e.prototype.renderSelfHistoryItem=function(t,e){e.setData(t,s.default.selfHistoryData[t])},a([l],e)}(fgui.GComponent));o.default=c,cc._RF.pop()},{"../../../Common/script/base/AudioManager":void 0,"../Test/CrashTest":"CrashTest"}],InputComp:[function(t,e,o){"use strict";cc._RF.push(e,"14cb2+UX3xJ1ocXtPWd+9dh","InputComp");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.EInputType=void 0;var r,s=t("../../../Boot/scirpt/AppConst"),u=t("../../../Common/script/base/AudioManager"),l=t("../../../Common/script/util/UIUtil"),c=t("../Controller/CrashViewCtrl"),h=t("../Model/CrashConfig"),p=t("../Model/CrashModel"),d=cc._decorator,C=d.ccclass;d.property,function(t){t[t.Extract=0]="Extract",t[t.Frequency=1]="Frequency",t[t.Edit=2]="Edit"}(r=o.EInputType||(o.EInputType={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_closeBtn=null,e._inputType=null,e._inputStr="",e._lastInputStr="",e._isNewInput=!1,e.isExtractInputed=!1,e.isfrequencyInputed=!1,e._grayColor=(new cc.Color).fromHEX("#C3C3C3"),e._whiteColor=(new cc.Color).fromHEX("#ffffff"),e.frequencyNumOld=0,e}return i(e,t),e.prototype.onConstruct=function(){this.ui_closeBtn=this.getChild("closeBtn").asButton,this.initComp()},e.prototype.initComp=function(){this.AddEventLister()},e.prototype.AddEventLister=function(){var t=this;this.ui_closeBtn.onClick(this.onCloseBtnClick,this);for(var e=0,o=this._children;e<o.length;e++){var n=o[e];if(n.name.indexOf("num")>-1){var i=n.name.replace("num","");n.asCom.getChild("title").asLoader.url="ui://Crash/"+i,n.onClick(this.onInputNumClick,this)}}this.getChild("closeBtn").onClick(function(){u.AudioManager.Singleton.play("","btn_close"),t._inputType==r.Edit&&0==c.default.instance.view.inputGambleBet&&c.default.instance.view.updateInputText("0.1",t._inputType),t._inputType==r.Frequency&&c.default.instance.view.updateInputText(""+t.frequencyNumOld,t._inputType),t.visible=!1,t._inputStr="",c.default.instance.view.inputSourceComp=null}),this.getChild("backBtn").onClick(function(){switch(u.AudioManager.Singleton.play("","btn_click"),t._inputType){case r.Extract:case r.Frequency:case r.Edit:p.CrashModel.vCurInputStr="0"}t._inputStr="",c.default.instance.view.updateInputText(p.CrashModel.vCurInputStr,t._inputType)}),this.getChild("confirmBtn").onClick(function(){if(u.AudioManager.Singleton.play("","btn_click"),""!=t._inputStr){var e=c.default.instance.view,o=l.UIUtil.formatNumber100(s.AppConst.mPlayerModel.gold),n=e.inputGambleRate,i=e.inputGambleRound,a=e.inputGambleBet;if(t._inputType==r.Edit){var d=!0;if(e.openController.selectedIndex,o<a*(i||1)&&(d=!1),a||(d=!1),!d)return void h.default.showTipLabel(h.EnumTipIndex.MoreThan);c.default.instance.view.updateInputText(""+a,t._inputType)}if(t._inputType==r.Extract||t._inputType==r.Frequency){if(t._inputType==r.Extract)t.isExtractInputed=!0,n<1.01&&(n=1.01),c.default.instance.view.updateInputText(""+n,t._inputType);else if(t._inputType==r.Frequency){if(0==i&&0!=t.frequencyNumOld)return t.visible=!1,c.default.instance.view.openController.setSelectedIndex(0),c.default.instance.view.initJoinGroup(),t.frequencyNumOld=0,c.default.instance.view.updateInputText(""+t.frequencyNumOld,t._inputType),void h.default.showTipLabel(h.EnumTipIndex.InvalidParameter);if(o<a*(i||1))return void h.default.showTipLabel(h.EnumTipIndex.MoreThan);t.isfrequencyInputed=!0,t.frequencyNumOld=i,c.default.instance.view.updateInputText(""+i,t._inputType)}if(t.isExtractInputed&&t.isfrequencyInputed&&1!=c.default.instance.view.openController.selectedIndex){if(0==n||0==i||0==a)return void h.default.showTipLabel(h.EnumTipIndex.CancelAutomatic);if(o<i*a)return void h.default.showTipLabel(h.EnumTipIndex.MoreGold);p.CrashModel.crashData.autocount=i,h.default.showTipLabel(h.EnumTipIndex.TheParameters),e.openController.setSelectedIndex(1),c.default.instance.view.updateInputGroupInput()}}t.visible=!1,t.updateTextColor(!1),t._inputStr="",p.CrashModel.vCurInputStr=t._inputStr}}),this.getChild("dotBtn").onClick(function(){var e;e=t._inputType==r.Extract?t.checkExtractInput(".",!1):t._inputType==r.Frequency?t.checkFrequencyInput(".",!1):t.checkBetInput(".",!1),t._inputStr=e,c.default.instance.view.updateInputText(e,t._inputType)})},e.prototype.checkFrequencyConfirm=function(){var t=c.default.instance.view.openController.selectedIndex;return+c.default.instance.view.ui_amountText.text*+c.default.instance.view.ui_frequencyBtn.title>l.UIUtil.formatNumber100(s.AppConst.mPlayerModel.gold)&&1==t},e.prototype.checkIsAuto=function(){return 1==c.default.instance.view.openController.selectedIndex&&(h.default.showTipLabel(h.EnumTipIndex.CannotModifil2),!0)},e.prototype.updateComp=function(t){this._inputType=t,this.visible=!0,this._isNewInput=!0,this._inputType==r.Frequency&&(this.frequencyNumOld=c.default.instance.view.inputGambleRound),this.updateTextColor()},e.prototype.updateTextColor=function(t){void 0===t&&(t=!0);var e=c.default.instance.view;this._inputType==r.Extract?e.ui_extractBtn.getChild("title").grayed=!t:this._inputType==r.Frequency?e.ui_frequencyBtn.getChild("title").grayed=!t:(e.ui_amountBtnHalf.getChild("title").grayed=!t,e.ui_amountBtn2x.getChild("title").grayed=!t,e.ui_amountBtnSub10.getChild("title").grayed=!t,e.ui_amountBtnAdd10.getChild("title").grayed=!t,e.ui_amountBtnAdd1.getChild("title").grayed=!t,e.ui_amountBtnSub1.getChild("title").grayed=!t,e.ui_amountText.color=t?this._whiteColor:this._grayColor)},e.prototype.onInputNumClick=function(t){u.AudioManager.Singleton.play("","btn_click");var e,o=t.currentTarget.$gobj;e=this._inputType==r.Extract?this.checkExtractInput(o.data):this._inputType==r.Frequency?this.checkFrequencyInput(o.data):this.checkBetInput(o.data),this._inputStr=e,c.default.instance.view.updateInputText(e,this._inputType)},e.prototype.checkExtractInput=function(t,e){void 0===e&&(e=!0);var o=c.default.instance.view.ui_extractBtn.text.replace("x","");return this._isNewInput&&(o="0",this._isNewInput=!1),e?"0"===o?o=""+t:(parseInt(o+t)<=Math.pow(10,2)-1&&(o+=""+t),o.indexOf(".")>-1&&o.split(".")[1].length>2&&(o=parseFloat(o).toFixed(3).slice(0,-1))):-1==o.indexOf(".")&&(o+="."),o},e.prototype.checkFrequencyInput=function(t,e){void 0===e&&(e=!0);var o=c.default.instance.view.ui_frequencyBtn.text;return this._isNewInput&&(o="0",this._isNewInput=!1),e&&("0"===o?o=""+t:parseInt(o+t)<=Math.pow(10,2)-1&&(o+=""+t)),o},e.prototype.checkBetInput=function(t,e){void 0===e&&(e=!0);var o=c.default.instance.view.ui_amountText.text;return this._isNewInput&&(o="0",this._isNewInput=!1),e?"0"===o?o=""+t:(parseInt(o+t)<=Math.pow(10,5)-1&&(o+=""+t),o.indexOf(".")>-1&&o.split(".")[1].length>2&&(o=parseFloat(o).toFixed(3).slice(0,-1))):-1==o.indexOf(".")&&(o+="."),o},e.prototype.onCloseBtnClick=function(){this.updateTextColor(!1),this.visible=!1,""!=this._inputStr&&(this._inputStr="",c.default.instance.view.updateInputText(p.CrashModel.vCurInputStr,this._inputType))},a([C],e)}(fgui.GComponent);o.default=m,cc._RF.pop()},{"../../../Boot/scirpt/AppConst":void 0,"../../../Common/script/base/AudioManager":void 0,"../../../Common/script/util/UIUtil":void 0,"../Controller/CrashViewCtrl":"CrashViewCtrl","../Model/CrashConfig":"CrashConfig","../Model/CrashModel":"CrashModel"}],MenuComp:[function(t,e,o){"use strict";cc._RF.push(e,"73182RQappHqb9LmZ6pn/EP","MenuComp");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,a){function r(t){try{u(n.next(t))}catch(e){a(e)}}function s(t){try{u(n.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(r,s)}u((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Common/script/base/AudioManager"),u=t("../../../Common/script/base/NotificationCenter"),l=t("../../../Common/script/base/NotificationName"),c=t("../Controller/CrashNetCtrl"),h=t("../Controller/CrashViewCtrl"),p=t("../Model/CrashModel"),d=t("./SettingView"),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_returnBtn=null,e.ui_helpBtn=null,e.ui_closeBtn=null,e.ui_btn_setting=null,e}return i(e,t),e.prototype.onConstruct=function(){this.ui_returnBtn=this.getChild("returnBtn").asButton,this.ui_helpBtn=this.getChild("helpBtn").asButton,this.ui_closeBtn=this.getChild("closeBtn").asButton,this.ui_btn_setting=this.getChild("btn_setting").asButton,this.ui_returnBtn.onClick(this.onReturnBtnClick.bind(this),this),this.ui_helpBtn.onClick(this.onHelpBtnClick.bind(this),this),this.ui_closeBtn.onClick(this.onCloseBtnClick.bind(this),this),this.ui_btn_setting.onClick(this.onSettingBtnClick.bind(this),this)},e.prototype.showMenuView=function(t){void 0===t&&(t=!0),this.visible=t},e.prototype.onReturnBtnClick=function(){return a(this,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:return p.CrashModel.gameData.tableId?(p.CrashModel.clickExit=!0,[4,c.default.exitTable()]):(h.default.instance.view.gotoHall(),[2]);case 1:return t=e.sent(),cc.isValid(this.node)?(1==t.result?(this.showMenuView(!1),s.AudioManager.Singleton.play("gamehall","btn_close"),h.default.instance.view.gotoHall()):p.CrashModel.clickExit=!1,[2]):[2]}})})},e.prototype.onHelpBtnClick=function(){return a(this,void 0,void 0,function(){return r(this,function(){return h.default.instance.view.ui_ruleComp.visible=!0,[2]})})},e.prototype.onCloseBtnClick=function(t){void 0===t&&(t=!0),this.visible=!1},e.prototype.onSettingBtnClick=function(t){void 0===t&&(t=!0);var e=h.default.instance.view;e.settingView?e.settingView.Show():(e.settingView=e.addFguiComponent(d.default,!0),e.settingView.selectLanguageFun=this.selectLanguageFun.bind(this))},e.prototype.selectLanguageFun=function(){u.NotificationCenter.Instance.emit(l.default.AppLanguage.SELECT_LANGUAGE)},e}(fgui.GComponent);o.default=C,cc._RF.pop()},{"../../../Common/script/base/AudioManager":void 0,"../../../Common/script/base/NotificationCenter":void 0,"../../../Common/script/base/NotificationName":void 0,"../Controller/CrashNetCtrl":"CrashNetCtrl","../Controller/CrashViewCtrl":"CrashViewCtrl","../Model/CrashModel":"CrashModel","./SettingView":"SettingView"}],ReadyComp:[function(t,e,o){"use strict";cc._RF.push(e,"169fcZmYMRGH4DXjaStUqAE","ReadyComp");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,a){function r(t){try{u(n.next(t))}catch(e){a(e)}}function s(t){try{u(n.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(r,s)}u((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Boot/scirpt/AppConst"),u=t("../Controller/CrashViewCtrl"),l=t("../Model/CrashModel"),c=t("../Model/CrashNetData"),h=t("../Util/CrashUtil"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_startImage=null,e.ui_startTime=null,e.ui_startTip=null,e.ui_mountComp=null,e._rocketInitPos=null,e._countDown=10,e.scheduleComp=null,e}return i(e,t),e.prototype.onConstruct=function(){this.ui_startImage=this.getChild("startImage").asImage,this.ui_startTime=this.getChild("startTime").asTextField,this.ui_startTip=this.getChild("startTip").asTextField,this.ui_mountComp=this.getChild("spine").asCom,this.AddEventLister(),this.initComp(),this.scheduleComp=new cc.Node("scheduleComp").addComponent(cc.Sprite),this.node.addChild(this.scheduleComp.node)},e.prototype.initComp=function(){this._rocketInitPos||(this._rocketInitPos=this.ui_mountComp.node.position),this._countDown=10,this._initRocketParticle()},e.prototype.AddEventLister=function(){},e.prototype.showStartTime=function(t){void 0===t&&(t=!0),this.ui_startImage.visible=this.ui_startTime.visible=t,t&&(this._countDown=l.CrashModel.crashData.endTime,this.ui_startTime.text=""+this._countDown)},e.prototype.showReadyComp=function(t){void 0===t&&(t=!0),this.hideReadyComp(),l.CrashModel.crashData.state==c.Card100StatusEnum.Gambling&&(u.default.instance.view.ui_rocketTrail.isRocketFlyed()||(this.visible=!0,this.showRocketTween(),this.showStartTime(),this.showStartTip(),this.showCountDown()))},e.prototype.updateStartTip=function(t,e){void 0===e&&(e=0);var o;o="1"==s.AppConst.languageType?{0:'Click [color=#fce678]"JOIN" [/color]to play',1:'Click [color=#fce678]"START" [/color]to start automatic betting',2:"Will bet after [color=#fce678]  [/color]",3:""}:{0:'Clique em [color=#fce678]"JUNTAR"[color] para jogar',1:'Clique em [color=#fce678]"INICIAR"[color] para come\xe7ar a apostar automaticamente',2:"Apostar\xe1 depois do [color=#fce678] [/color]",3:""},2==t?"1"==s.AppConst.languageType?this.ui_startTip.text="Will bet after [color=#fce678] "+e+"s [/color]":this.ui_startTip.text="Apostar\xe1 depois do [color=#fce678] "+e+"s [/color]":this.ui_startTip.text=""+o[t]},e.prototype.hideReadyComp=function(){this.visible=!1,this.scheduleComp.unscheduleAllCallbacks(),cc.Tween.stopAllByTarget(this.ui_mountComp.node),cc.Tween.stopAllByTarget(this.ui_startTip.node)},e.prototype.showCountDown=function(){this._countDown=l.CrashModel.crashData.endTime,this.ui_startTime.text=""+this._countDown,this.scheduleComp.unschedule(this.countDownSchedule.bind(this)),this._countDown++,this.countDownSchedule(),l.CrashModel.crashData.state==c.Card100StatusEnum.Gambling&&this.scheduleComp.schedule(this.countDownSchedule.bind(this),1)},e.prototype.getCountDown=function(){return this._countDown},e.prototype.countDownSchedule=function(){var t,e;if(this._countDown--,this._countDown<0)this.visible=!1;else if(this.ui_startTime.text=""+this._countDown,l.CrashModel.crashData.state==c.Card100StatusEnum.Gambling){var o=u.default.instance.view;if(1==o.openController.selectedIndex)if(l.CrashModel.crashData.autocount>0){if(o.joinGroupController.selectedIndex==l.EnumBtnIndex.Auto&&this.updateStartTip(1),o.joinGroupController.selectedIndex==l.EnumBtnIndex.Stop){if(null===(t=l.CrashModel.roundData)||void 0===t?void 0:t.isGambled)return void this.updateStartTip(3);this._countDown>5?o.ui_readyComp.updateStartTip(2,this._countDown-5):this._countDown<=5&&(this.updateStartTip(3),o.checkAutoJoinClick(function(){}))}}else o.joinGroupController.selectedIndex==l.EnumBtnIndex.Stop&&o.joinGroupControll(l.EnumBtnIndex.Stop,!1);else o.joinGroupController.selectedIndex==l.EnumBtnIndex.Join&&(o.joinGroupControll(l.EnumBtnIndex.Join,!(null===(e=l.CrashModel.roundData)||void 0===e?void 0:e.isGambled)),this.updateStartTip(0))}},e.prototype._initRocketParticle=function(){return a(this,void 0,void 0,function(){var t,e;return r(this,function(o){switch(o.label){case 0:return[4,h.default.addParticle("res/prefab/huojianlizi")];case 1:return t=o.sent(),(e=cc.instantiate(t)).name="particle",e.setPosition(0,-150,0),this.ui_mountComp.node.addChild(e),[2]}})})},e.prototype.showRocketTween=function(t){return void 0===t&&(t=!0),a(this,void 0,void 0,function(){return r(this,function(){return this.ui_mountComp.visible=!1,cc.Tween.stopAllByTarget(this.ui_mountComp.node),this.ui_mountComp.node.position=this._rocketInitPos,t?(this.ui_mountComp.visible=!0,this.ui_mountComp.node.angle=-90,h.default.playSpine("res/spine/huojian",this.ui_mountComp,"bofang_daiji"),cc.tween(this.ui_mountComp.node).repeatForever(cc.tween().by(.5,{position:cc.v2(50,0)}).by(.5,{position:cc.v2(-50,0)})).start(),this.ui_mountComp.node.getChildByName("particle").getComponent(cc.ParticleSystem).active=!0,[2]):[2]})})},e.prototype.showStartTip=function(t){void 0===t&&(t=!0),this.ui_startTip.visible=!1,this.ui_startTip.node.scale=1,cc.Tween.stopAllByTarget(this.ui_startTip.node),t&&(this.ui_startTip.visible=!0,cc.tween(this.ui_startTip.node).repeatForever(cc.tween().to(1,{scaleX:1.05,scaleY:1.05}).to(1,{scaleX:1,scaleY:1})).start())},e}(fgui.GComponent);o.default=p,cc._RF.pop()},{"../../../Boot/scirpt/AppConst":void 0,"../Controller/CrashViewCtrl":"CrashViewCtrl","../Model/CrashModel":"CrashModel","../Model/CrashNetData":"CrashNetData","../Util/CrashUtil":"CrashUtil"}],RealTimeComp:[function(t,e,o){"use strict";cc._RF.push(e,"9022awKljVCa4kjLUAwLQYT","RealTimeComp");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Boot/scirpt/AppConst"),r=t("../Controller/CrashNetCtrl"),s=t("../Controller/CrashViewCtrl"),u=t("../Model/CrashModel"),l=t("../Model/CrashNetData"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_playerDesc=null,e.ui_betDesc=null,e.ui_payoutDesc=null,e.ui_winDesc=null,e.ui_realTimeList=null,e._renderData=[],e.scheduleComp=null,e._scheduleInit=!1,e._itemCount=0,e}return i(e,t),e.prototype.onConstruct=function(){this.ui_realTimeList=this.getChild("realTimeList").asList,this.ui_realTimeList.itemRenderer=this.renderRealTimeItem.bind(this),this.ui_realTimeList.setVirtual(),this.initComp(),this.scheduleComp=new cc.Node("scheduleComp").addComponent(cc.Sprite),this.node.addChild(this.scheduleComp.node)},e.prototype.initComp=function(){this.AddEventLister()},e.prototype.AddEventLister=function(){},e.prototype.updateRealTimeList=function(){this._scheduleInit||(this._scheduleInit=!0,this.scheduleComp.schedule(this.scheduleHandler.bind(this),.1))},e.prototype.updateRealTimeList_OldRealtime=function(t){var e=u.CrashModel.crashData.state,o=u.CrashModel.getRateByTime();this._renderData=t.filter(function(t){return e!=l.Card100StatusEnum.ShowPrize||t.payout<=o}),this.ui_realTimeList.numItems=this._renderData.length},e.prototype.updateRealTimeListEnd=function(t){this._renderData=t,this.ui_realTimeList.numItems=this._renderData.length},e.prototype.renderRealTimeItem=function(t,e){e.setData(t,this._renderData[t])},e.prototype.scheduleHandler=function(){if(this._renderData=u.CrashModel.roundData.renderData,u.CrashModel.crashData.state==l.Card100StatusEnum.ShowPrize){for(var t=[],e=u.CrashModel.getRateByTime(),o=function(o){if(o.droped)return"continue";if(o.payout>0&&o.payout<=e&&(o.droped=!0,t.push(o),o.win<=0&&(o.win=o.payout*o.bet-o.tax/100),o.id==a.AppConst.mPlayerModel.userid)){var n=o.payout,i=o.bet;if(n>0&&i>0&&o.win>0){if(!u.CrashModel.roundData.isEscaped)return r.default.escapeOne(n),{value:void 0};u.CrashModel.roundData.isEscaped=!0,s.default.instance.view.updateJoinGroupEscapeOne(),u.CrashModel.roundData.isGambled=!1,0==u.CrashModel.crashData.autocount&&(s.default.instance.view.joinGroupControll(u.EnumBtnIndex.Join,!0),s.default.instance.view.openController.setSelectedIndex(0));var l=n*i*100-o.tax,c=a.AppConst.mPlayerModel.gold+l;l>0&&s.default.instance.view.ui_statusComp.showGoldTween(function(){s.default.instance.view.updateUserGold(!0,c)})}}},n=0,i=this._renderData;n<i.length;n++){var c=o(i[n]);if("object"==typeof c)return c.value}t.length>0&&(t.sort(function(t,e){return t.payout-e.payout}),this.scheduleComp.scheduleOnce(function(){s.default.instance.view.ui_rocketTrail.dropRocket(t)},Math.random()))}this.ui_realTimeList.numItems==this._renderData.length?this.ui_realTimeList.refreshVirtualList():this.ui_realTimeList.numItems=this._renderData.length},e.prototype.scheduleHandler_OldRandom=function(){var t=u.CrashModel.roundData.renderData,e=0;switch(u.CrashModel.crashData.state){case l.Card100StatusEnum.PreGamble:e=1;break;case l.Card100StatusEnum.Gambling:e=2;break;case l.Card100StatusEnum.ShowPrize:e=3;break;case l.Card100StatusEnum.NoBanker:e=4}Math.random()>.8&&(e=0);var o=Math.floor(Math.random()*e);this._itemCount+=o,this._itemCount>t.length&&(this._itemCount=t.length),u.CrashModel.crashData.state==l.Card100StatusEnum.NoBanker&&(this._itemCount=t.length),this._renderData=t.slice(0,this._itemCount),u.CrashModel.crashData.state==l.Card100StatusEnum.ShowPrize&&(this._renderData=this._renderData.filter(function(t){return 0==t.payout||t.payout<=u.CrashModel.getRateByTime()+.2})),this.ui_realTimeList.numItems=this._renderData.length},e.prototype.clearComp=function(){this._itemCount=0,this._scheduleInit=!1,this.scheduleComp.unscheduleAllCallbacks()},e}(fgui.GComponent);o.default=c,cc._RF.pop()},{"../../../Boot/scirpt/AppConst":void 0,"../Controller/CrashNetCtrl":"CrashNetCtrl","../Controller/CrashViewCtrl":"CrashViewCtrl","../Model/CrashModel":"CrashModel","../Model/CrashNetData":"CrashNetData"}],RealTimeItem:[function(t,e,o){"use strict";cc._RF.push(e,"095d2PLRtRJs5tQSor2vQO9","RealTimeItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Common/script/util/UIUtil"),r=t("../Model/CrashModel"),s=t("../Model/CrashNetData"),u=t("../Test/CrashTest"),l=function(t){function e(){var e=t.call(this)||this;return e.ui_nameText=null,e.ui_betText=null,e.ui_betText2=null,e.ui_payoutText=null,e.ui_payoutText2=null,e.ui_winText=null,e.ui_winText2=null,e.ui_border=null,e._grayColor=(new cc.Color).fromHEX("#959596"),e._greenColor=(new cc.Color).fromHEX("#6eff79"),e._redColor=(new cc.Color).fromHEX("#ff0033"),e.c1=null,e.c2=null,e.c3=null,e.c4=null,e}return i(e,t),e.prototype.onConstruct=function(){this.ui_nameText=this.getChild("nameText").asTextField,this.ui_betText=this.getChild("betText").asTextField,this.ui_betText2=this.getChild("betText2").asTextField,this.ui_payoutText=this.getChild("payoutText").asTextField,this.ui_payoutText2=this.getChild("payoutText2").asTextField,this.ui_winText=this.getChild("winText").asTextField,this.ui_winText2=this.getChild("winText2").asTextField,this.ui_border=this.getChild("border").asImage,this.c1=this.getController("c1"),this.c2=this.getController("c2"),this.c3=this.getController("c3"),this.c4=this.getController("c4")},e.prototype.reset=function(){this.ui_nameText.text="",this.showWaitView(1,null)},e.prototype.setData=function(t,e){switch(this.reset(),this.ui_nameText.text=""+a.UIUtil.getNickNameSub(e.name,12,""),r.CrashModel.crashData.state,r.CrashModel.crashData.state){case s.Card100StatusEnum.PreGamble:this.showWaitView(t,e);break;case s.Card100StatusEnum.Gambling:this.showGambleView(t,e);break;case s.Card100StatusEnum.ShowPrize:this.showGameView(t,e);break;case s.Card100StatusEnum.NoBanker:this.showEndView(t,e)}},e.prototype.showWaitView=function(){this.c1.setSelectedIndex(0),this.c2.setSelectedIndex(0),this.c3.setSelectedIndex(0),this.ui_betText2.color=this._grayColor,this.ui_payoutText2.color=this._grayColor,this.ui_winText2.color=this._grayColor,this.ui_betText.color=this._grayColor},e.prototype.showGambleView=function(t,e){this.c1.setSelectedIndex(1),this.ui_betText.text=""+e.bet.toFixed(2),this.ui_betText.color=this._grayColor,this.c2.setSelectedIndex(0),this.ui_payoutText2.color=this._grayColor,this.c3.setSelectedIndex(0),this.ui_winText2.color=this._grayColor},e.prototype.showGameView=function(t,e){this.c1.setSelectedIndex(1),this.ui_betText.text=""+e.bet.toFixed(2),e.win>0?(this.ui_betText.color=this._greenColor,this.c2.setSelectedIndex(1),this.ui_payoutText.text=e.payout.toFixed(2)+"x",this.ui_payoutText.color=this._greenColor,this.c4.setSelectedIndex(u.default.getColor(e.payout)),this.c3.setSelectedIndex(1),this.ui_winText.text=""+(Math.floor(100*e.win)/100).toFixed(2),this.ui_winText.color=this._greenColor):e.win<0&&(this.ui_betText.color=this._redColor,this.c2.setSelectedIndex(0),this.ui_payoutText2.color=this._redColor,this.c3.setSelectedIndex(0),this.ui_winText2.color=this._redColor)},e.prototype.showEndView=function(t,e){this.c1.setSelectedIndex(1),this.ui_betText.text=""+e.bet.toFixed(2),e.win>0?(this.ui_betText.color=this._greenColor,this.c2.setSelectedIndex(1),this.ui_payoutText.text=e.payout.toFixed(2)+"x",this.ui_payoutText.color=this._greenColor,this.c4.setSelectedIndex(u.default.getColor(e.payout)),this.c3.setSelectedIndex(1),this.ui_winText.text=""+(Math.floor(100*e.win)/100).toFixed(2),this.ui_winText.color=this._greenColor):e.win<0&&(this.ui_betText.color=this._redColor,this.c2.setSelectedIndex(0),this.ui_payoutText2.color=this._redColor,this.c3.setSelectedIndex(0),this.ui_winText2.color=this._redColor)},e.prototype.findGamble=function(t){for(var e=null,o=0,n=r.CrashModel.crashData.otherBetList;o<n.length;o++)if((u=n[o]).pos==t){e=u.pos2Gameble;break}for(var i=0,a=0,s=Object.values(e);a<s.length;a++){var u;i+=+(u=s[a])}return i},e}(fgui.GComponent);o.default=l,cc._RF.pop()},{"../../../Common/script/util/UIUtil":void 0,"../Model/CrashModel":"CrashModel","../Model/CrashNetData":"CrashNetData","../Test/CrashTest":"CrashTest"}],RecordItem:[function(t,e,o){"use strict";cc._RF.push(e,"c82f7Q8GuBOXLIlqrZSO2pO","RecordItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(t){function e(){var e=t.call(this)||this;return e.ui_recordItemBg=null,e.ui_recordItemText=null,e.c1=null,e}return i(e,t),e.prototype.onConstruct=function(){this.ui_recordItemBg=this.getChild("recordItemBg").asLoader,this.ui_recordItemText=this.getChild("recordItemText").asTextField,this.c1=this.getController("c1")},e.prototype.setData=function(t,e){this.c1.setSelectedIndex(e.type),this.ui_recordItemText.text=e.count/100+"x"},e}(fgui.GComponent);o.default=a,cc._RF.pop()},{}],RocketTrail:[function(t,e,o){"use strict";cc._RF.push(e,"0dd57C9bg5HVpn7f966xjCF","RocketTrail");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,a){function r(t){try{u(n.next(t))}catch(e){a(e)}}function s(t){try{u(n.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(r,s)}u((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var u=t("../../../Common/script/base/AudioManager"),l=t("../Bezier/Bezier"),c=t("../Bezier/BezierConfig"),h=t("../Model/CrashModel"),p=t("../Model/CrashNetData"),d=t("../Util/CrashUtil"),C=t("./BetMark"),m=t("./DropComp"),f=t("./TimeMark"),_=cc._decorator,b=_.ccclass,y=(_.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_lineMountComp=null,e.ui_rocketMountComp=null,e.ui_bombMountComp=null,e.ui_timeMarkContainer=null,e.ui_betMarkContainer=null,e._rocketInitPos=cc.v3(32,-695),e._timeMarkBaseMove=140,e._betMarkBaseMove=75,e._resetCount=0,e._resetCount2=0,e._baseTime=4,e._dropCompPool=[],e._dropContent=null,e.bezierActionList=[],e.ui_startPoint=null,e.ui_controlPoint=null,e.ui_endPoint=null,e.ui_LineImage=null,e.scheduleComp=null,e.startAngle=-70,e.endAngle=-36,e}return i(e,t),e.prototype.onConstruct=function(){this.ui_lineMountComp=this.getChild("line").asCom,this.ui_rocketMountComp=this.getChild("rocket").asCom,this.ui_bombMountComp=this.getChild("bomb").asCom,this.ui_startPoint=this.getChild("startPoint").asLoader,this.ui_controlPoint=this.getChild("controlPoint").asLoader,this.ui_endPoint=this.getChild("endPoint").asLoader,this.ui_LineImage=this.getChild("lineImage").asImage,this.ui_timeMarkContainer=this.getChild("timeMarkContainer").asCom,this.ui_betMarkContainer=this.getChild("betMarkContainer").asCom,fgui.UIObjectFactory.setExtension("ui://Crash/TimeMark",f.default),fgui.UIObjectFactory.setExtension("ui://Crash/BetMark",C.default),fgui.UIObjectFactory.setExtension("ui://Crash/DropComp",m.default),this.scheduleComp=new cc.Node("scheduleComp").addComponent(cc.Sprite),this.node.addChild(this.scheduleComp.node),this.initDropCompPool()},e.prototype.showBomb=function(t,e){return void 0===t&&(t=!0),r(this,void 0,void 0,function(){return s(this,function(){return u.AudioManager.Singleton.stopEffect("rocket_fly"),u.AudioManager.Singleton.stopEffect("crash_loop"),u.AudioManager.Singleton.play("","rocket_bomb"),this.ui_bombMountComp.visible=t,this.ui_bombMountComp.node.position=this.ui_rocketMountComp.node.position,d.default.playSpine("res/spine/baozha",this.ui_bombMountComp,"baozha",!1,function(){e&&e()}),cc.Tween.stopAllByTarget(this.ui_bombMountComp.node),[2]})})},e.prototype.showFlyRocket=function(t){return void 0===t&&(t=!1),r(this,void 0,void 0,function(){var e;return s(this,function(){return e=u.AudioManager.Singleton.play("","rocket_fly"),u.AudioManager.Singleton.setPlaySoundCall(e,function(){u.AudioManager.Singleton.play("","crash_loop",!0)},"rocket_fly"),this.ui_rocketMountComp.node.angle=this.startAngle,d.default.playSpine("res/spine/huojian",this.ui_rocketMountComp,"bofang"),cc.Tween.stopAllByTarget(this.ui_rocketMountComp.node),this.runRocketAction(t),this.drawRocketLine(t),this.showTimeMark(t),this.showBetMark(t),[2]})})},e.prototype.hideFlyRocket=function(){this.ui_rocketMountComp.visible=!1,this.ui_LineImage.visible=!1,this.ui_timeMarkContainer.visible=!1,this.ui_betMarkContainer.visible=!1},e.prototype.drawRocketLine=function(t){if(void 0===t&&(t=!1),this.ui_LineImage.visible=!0,this.ui_LineImage.fillAmount=0,cc.Tween.stopAllByTarget(this.ui_LineImage),h.CrashModel.crashData.state==p.Card100StatusEnum.ShowPrize&&t){var e=h.CrashModel.roundData.gameTime;e<0&&(h.CrashModel.roundData.gameTime=.01),e>0&&e<=4?(this.ui_LineImage.fillAmount=e/4,cc.tween(this.ui_LineImage).to(4-e,{fillAmount:1}).start()):e>4&&(this.ui_LineImage.fillAmount=1)}else cc.tween(this.ui_LineImage).to(4,{fillAmount:1}).start()},e.prototype.isRocketFlyed=function(){var t=this.ui_rocketMountComp.node.position;return t.x>32&&t.y>-695},e.prototype.runRocketAction=function(t){if(void 0===t&&(t=!1),this.ui_rocketMountComp.visible=!0,this.ui_rocketMountComp.node.active=!0,h.CrashModel.crashData.state==p.Card100StatusEnum.ShowPrize&&t){var e=h.CrashModel.roundData.gameTime;if(e>0&&e<=4){var o=Math.floor(e/4*100),n=this.bezierActionList.slice(o);n.length>1?this.ui_rocketMountComp.node.runAction(cc.sequence(n)):this.ui_rocketMountComp.node.runAction(n[0])}else e>4&&(this.ui_rocketMountComp.node.setPosition(1310,-60,0),this.ui_rocketMountComp.node.rotation=50)}else this.bezierActionList.length>1?this.ui_rocketMountComp.node.runAction(cc.sequence(this.bezierActionList)):this.ui_rocketMountComp.node.runAction(this.bezierActionList[0])},e.prototype.showTimeMark=function(t){var e=this;void 0===t&&(t=!1);var o=h.CrashModel.roundData.gameTime,n=h.CrashModel.timeValue;t?o<4?(this._resetCount=0,n=4-o):(this._resetCount=Math.floor(o/4),n=o-Math.pow(2,this._resetCount)):(this._resetCount=0,n=4),this._initTimeMark(this._resetCount,t),this.scheduleComp.scheduleOnce(function(){h.CrashModel.crashData.state==p.Card100StatusEnum.ShowPrize&&e._resetTimeMark()},n)},e.prototype._initTimeMark=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1),this.ui_timeMarkContainer.visible=!0;for(var o=0;o<this.ui_timeMarkContainer._children.length;o++){var n=this.ui_timeMarkContainer._children[o];n.visible=!0,n.node.y=-55,n.node.x=this._getTimeMarkPos(o).x,h.CrashModel.roundData.gameTime;var i=Math.pow(2,this._resetCount);n.getChild("title").asTextField.text=i*(o+1)+"s"}},e.prototype._resetTimeMark=function(t){void 0===t&&(t=1),this.ui_timeMarkContainer.visible=!0;for(var e=0;e<this.ui_timeMarkContainer._children.length;e++){var o=this.ui_timeMarkContainer._children[e];o.visible=!0,o.node.y=-55,o.node.x=this._getTimeMarkPos(e).x,h.CrashModel.roundData.gameTime;var n=Math.pow(2,this._resetCount);o.getChild("title").asTextField.text=n*(e+1)+"s",this._moveTimeMark(o.node,e)}},e.prototype._stopTimeMark=function(){for(var t=0;t<this.ui_timeMarkContainer._children.length;t++){var e=this.ui_timeMarkContainer._children[t];e.visible=!1,cc.Tween.stopAllByTarget(e.node)}},e.prototype._moveTimeMark=function(t,e){var o=this;if(cc.Tween.stopAllByTarget(t),h.CrashModel.crashData.state==p.Card100StatusEnum.ShowPrize){var n=(this._resetCount+1)*this._baseTime;cc.tween(t).to(n,{position:this._getTimeMarkPos(e,!1)}).call(function(){e==o.ui_betMarkContainer._children.length-1&&o.scheduleComp.scheduleOnce(function(){o._resetCount++,o._resetTimeMark()},0)}).start()}},e.prototype._getTimeMarkPos=function(t,e){return void 0===e&&(e=!0),e?cc.v3(this._timeMarkBaseMove+t*this._timeMarkBaseMove*2,-55,0):cc.v3(t*this._timeMarkBaseMove+20,-55,0)},e.prototype.showBetMark=function(t){var e=this;void 0===t&&(t=!1);var o=h.CrashModel.roundData.gameTime,n=h.CrashModel.timeValue;t&&(o<=4?n-=4:n=.001),this._initBetMark(1,t),this.scheduleComp.scheduleOnce(function(){h.CrashModel.crashData.state==p.Card100StatusEnum.ShowPrize&&e._resetBetMark()},n)},e.prototype._initBetMark=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.ui_betMarkContainer.visible=!0;for(var o=0;o<this.ui_betMarkContainer._children.length;o++){var n=this.ui_betMarkContainer._children[o];n.visible=!0,n.node.x=0,n.node.y=this._getBetMarkPos(o,!1).y;var i=h.CrashModel.roundData.gameTime,a=1,r=h.CrashModel.getRateByTime(4),s=(r-a)/(this.ui_betMarkContainer._children.length-1);e&&i>4?(r=h.CrashModel.getRateByTime(),a=h.CrashModel.getRateByTime(-4,!0),s=((r=h.CrashModel.getRateByTime())-a)/(this.ui_betMarkContainer._children.length-1),n.getChild("title").asTextField.text=(a+o*s).toFixed(2)+"x"):(s=(r-(a=i>4?h.CrashModel.getRateByTime(-4,!0):1))/(this.ui_betMarkContainer._children.length-1),n.getChild("title").asTextField.text=(a+o*s).toFixed(2)+"x")}},e.prototype._resetBetMark=function(t){void 0===t&&(t=1),this._resetCount2++,this.ui_betMarkContainer.visible=!0;for(var e=0;e<this.ui_betMarkContainer._children.length;e++){var o=this.ui_betMarkContainer._children[e];o.visible=!0,o.node.x=0,o.node.y=this._getBetMarkPos(e).y;var n=h.CrashModel.getRateByTime(),i=(h.CrashModel.getRateByTime(4,!0)-n)/(this.ui_betMarkContainer._children.length-1);o.getChild("title").asTextField.text=(n+e*i).toFixed(2)+"x",this._moveBetMark(o.node,e)}},e.prototype._stopBetMark=function(){for(var t=0;t<this.ui_betMarkContainer._children.length;t++){var e=this.ui_betMarkContainer._children[t];e.visible=!1,cc.Tween.stopAllByTarget(e.node)}},e.prototype._getBetMarkPos=function(t,e){return void 0===e&&(e=!0),e?cc.v3(0,t*this._betMarkBaseMove*4-350,0):cc.v3(0,t*this._betMarkBaseMove*2-500,0)},e.prototype._moveBetMark=function(t,e){var o=this;cc.Tween.stopAllByTarget(t),h.CrashModel.crashData.state==p.Card100StatusEnum.ShowPrize&&cc.tween(t).to(this._baseTime,{position:this._getBetMarkPos(e,!1)}).call(function(){e==o.ui_betMarkContainer._children.length-1&&o.scheduleComp.scheduleOnce(function(){o._resetBetMark()},0)}).start()},e.prototype.hideDropComp=function(){for(var t=0;t<this.node.childrenCount;t++){var e=this.node.children[t];e.name.indexOf("drop_item_")>-1&&(cc.Tween.stopAllByTarget(e),e.active=!1)}},e.prototype.dropRocket=function(t){if(this.isRocketFlyed())for(var e=0;e<t.length;e++)this.dropRocketItem(e,t[e])},e.prototype.dropRocketItem=function(t,e){var o=this.getDropComp();o.node.name="drop_item_"+Date.now(),o.node.active=!0,this.node.addChild(o.node);var n=this.ui_rocketMountComp.node.parent.convertToWorldSpaceAR(this.ui_rocketMountComp.node.position);n.x-=50,n.y-=100,o.node.position=this.node.convertToNodeSpaceAR(n),o.setData({name:e.name,bet:e.payout});var i=2,a=-160,r=-120,s=h.CrashModel.roundData.gameTime;s<.5?(i=.2,a=0,r=-20):s<1?(i=1,a=-60,r=-80):s<2&&(i=1.5,a=-120,r=-100);var u=cc.v3(o.node.x+a,o.node.y+r,0);cc.tween(o.node).delay(.5*t).parallel(cc.tween().to(i,{position:u}),cc.tween().to(i,{opacity:0})).call(function(){o.node.removeFromParent()}).start()},e.prototype.initDropCompPool=function(){for(var t=0;t<10;t++){var e=new fgui.AsyncOperation;e.callback=this.addDropComp.bind(this),e.createObject("Crash","DropComp")}},e.prototype.initBezierData=function(){var t;c.default.bezierCurveLists=[],c.default.bezierCurveData.length=0,c.default.bezierCurveData.points=[],c.default.bezierCurveData.time=4;var e={start:this.ui_startPoint.node,control:this.ui_controlPoint.node,end:this.ui_endPoint.node};c.default.addBezierCurve(e),c.default.saveToPointCurveDict(e);for(var o=0,n=c.default.bezierCurveLists.length;o<n;o++){var i=c.default.bezierCurveLists[o],a=new l.default(Object.values(i),2),r=a.getPoints(c.default.pointCount),s=a.getCurveLength();c.default.bezierCurveData.length+=s,(t=c.default.bezierCurveData.points).push.apply(t,r)}for(o=0,n=c.default.bezierCurveData.points.length;o<n;o++){var u=c.default.bezierCurveData.points[o],h=u.length/c.default.bezierCurveData.length*c.default.bezierCurveData.time;u.time=h;var p=this.startAngle+(this.endAngle-this.startAngle)/199*o,d=cc.spawn(cc.moveTo(h,cc.v2(u.x,u.y)),cc.rotateTo(h,-p));this.bezierActionList.push(d)}},e.prototype.getDropComp=function(){return this._dropCompPool.length<=0&&this._dropCompPool.push(fgui.UIPackage.createObject("Crash","DropComp")),this._dropCompPool.shift()},e.prototype.addDropComp=function(t){this._dropCompPool.push(t)},e.prototype.clearDropComp=function(){for(;this._dropCompPool.length;)this._dropCompPool.pop().dispose()},e.prototype.clearRocket=function(){cc.Tween.stopAllByTarget(this.ui_rocketMountComp.node),this.ui_rocketMountComp.visible=!1,this.ui_rocketMountComp.node.setPosition(this._rocketInitPos)},e.prototype.clearLine=function(){cc.Tween.stopAllByTarget(this.ui_LineImage),this.ui_LineImage.visible=!1},e.prototype.clearMark=function(){this._resetCount=0,this._resetCount2=0,this.ui_timeMarkContainer.visible=!1,this.ui_betMarkContainer.visible=!1,this._stopTimeMark(),this._stopBetMark()},e.prototype.clearBomb=function(){this.ui_bombMountComp.visible=!1},e.prototype.clearComp=function(){this.scheduleComp.unscheduleAllCallbacks(),this.clearRocket(),this.clearLine(),this.clearMark()},a([b],e)}(fgui.GComponent));o.default=y,cc._RF.pop()},{"../../../Common/script/base/AudioManager":void 0,"../Bezier/Bezier":"Bezier","../Bezier/BezierConfig":"BezierConfig","../Model/CrashModel":"CrashModel","../Model/CrashNetData":"CrashNetData","../Util/CrashUtil":"CrashUtil","./BetMark":"BetMark","./DropComp":"DropComp","./TimeMark":"TimeMark"}],RuleComp:[function(t,e,o){"use strict";cc._RF.push(e,"4163d8INDxCRp1YqLILZ9FX","RuleComp");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_closeBtn=null,e}return i(e,t),e.prototype.onConstruct=function(){this.ui_closeBtn=this.getChild("ruleCloseBtn").asButton,this.ui_closeBtn.onClick(this.onCloseBtnClick,this)},e.prototype.onCloseBtnClick=function(){this.visible=!1},e}(fgui.GComponent);o.default=a,cc._RF.pop()},{}],SelfHistoryItem:[function(t,e,o){"use strict";cc._RF.push(e,"c4bc1NPk0dN2oQldMtqXTNf","SelfHistoryItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../Common/script/util/UIUtil"),s=cc._decorator,u=s.ccclass,l=(s.property,function(t){function e(){var e=t.call(this)||this;return e.ui_dateText=null,e.ui_typeText=null,e.ui_multipleText=null,e.ui_amoutText=null,e.ui_balanceText=null,e._greenColor=(new cc.Color).fromHEX("#6eff79"),e._redColor=(new cc.Color).fromHEX("#ff0033"),e}return i(e,t),e.prototype.onConstruct=function(){this.ui_dateText=this.getChild("dateText").asTextField,this.ui_typeText=this.getChild("typeText").asTextField,this.ui_multipleText=this.getChild("multipleText").asTextField,this.ui_amoutText=this.getChild("amoutText").asTextField,this.ui_balanceText=this.getChild("balanceText").asTextField},e.prototype.setData=function(t,e){this.ui_dateText.text=""+e.data,this.ui_typeText.text=""+e.type,e.multiple>0&&e.multiple<=e.times?(this.ui_multipleText.text=r.UIUtil.formatNumber100(e.multiple)+"X",this.ui_multipleText.color=this._greenColor):(this.ui_multipleText.text="-"+r.UIUtil.formatNumber100(e.times)+"X",this.ui_multipleText.color=this._redColor),this.ui_amoutText.text=""+r.UIUtil.formatNumber100(e.Bet),e.Bet>0?this.ui_amoutText.color=this._greenColor:this.ui_amoutText.color=this._redColor,this.ui_balanceText.text=""+r.UIUtil.formatNumber100(e.balance)},a([u],e)}(fgui.GComponent));o.default=l,cc._RF.pop()},{"../../../Common/script/util/UIUtil":void 0}],SettingView:[function(t,e,o){"use strict";cc._RF.push(e,"84c4c9sudNN5oYmM4a/JliO","SettingView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Boot/scirpt/AppConst"),r=t("../../../Common/script/base/AudioManager"),s=t("../../../Common/script/base/BaseFrameNative"),u=t("../../../Common/script/base/NotificationCenter"),l=t("../../../Common/script/base/NotificationName"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_btn_break=null,e.ui_setSound=null,e.ui_setMusic=null,e.ui_btn_setLanguage=null,e.ui_resver=null,e.ui_setting_title_text=null,e.ui_setting_Sound_text=null,e.ui_setting_music_text=null,e.ui_btn_logout_lab=null,e.ui_btn_logout=null,e}return i(e,t),Object.defineProperty(e.prototype,"packageResourceName",{get:function(){return"Crash"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"packageName",{get:function(){return"res/crash"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return"SettingView"},enumerable:!1,configurable:!0}),e.prototype.createChildComponents=function(){t.prototype.createChildComponents.call(this),this.fguiComponent.visible=!1,this.fguiComponent.sortingOrder=200,this.ui_btn_break.onClick(this.Hide,this),this.ui_resver.setVar("ver",s.BaseFrameNative.resVersion).flushVars(),this.ui_setMusic.on(fgui.Event.STATUS_CHANGED,this.onChangedMusic1,this),this.ui_setSound.on(fgui.Event.STATUS_CHANGED,this.onChangedSound1,this);var e=r.AudioManager.Singleton.YinxiaoVolume;this.ui_setSound.value=e;var o=r.AudioManager.Singleton.MusicVolume;this.ui_setMusic.value=o,this.ui_btn_setLanguage.onClick(this.selectLanguage,this),this.typeController=this.fguiComponent.getController("c1"),this.ui_btn_logout.onClick(this.logout,this),"2"==a.AppConst.languageType?(this.setLanguage(),this.ui_btn_setLanguage.selected=!0):this.ui_btn_setLanguage.selected=!1},e.prototype.allChildCreated=function(){t.prototype.allChildCreated.call(this),this.typeController.setSelectedIndex(s.BaseFrameNative.isInHall?0:1),s.BaseFrameNative.isInHall||(this.ui_resver.y+=23),this.Show()},e.prototype.setLanguage=function(){for(var t="1"==a.AppConst.languageType?"english":"hindi",e=1;e<5;e++){var o=xgameTable.getComplanguageComsettingById(e);o&&o.comp&&this[o.comp]&&(this[o.comp].text="1"==a.AppConst.languageType?o.english:o.hindi)}this.ui_resver.setVar("base",xgameTable.getComplanguageComsettingById(5)[t]).flushVars()},e.prototype.selectLanguage=function(){r.AudioManager.Singleton.play("","btn_click"),this.ui_btn_setLanguage.selected?a.AppConst.languageType="2":a.AppConst.languageType="1",cc.sys.localStorage.setItem("languageType",a.AppConst.languageType),this.setLanguage(),u.NotificationCenter.Instance.emit(l.default.AppLanguage.SELECT_LANGUAGE)},e.prototype.logout=function(){this.logoutFunction&&this.logoutFunction()},e.prototype.onChangedSound1=function(){var t=Math.floor(10*this.ui_setSound.value)/10;t!=r.AudioManager.Singleton.YinxiaoVolume&&(r.AudioManager.Singleton.YinxiaoVolume=t)},e.prototype.onChangedMusic1=function(){var t=Math.floor(10*this.ui_setMusic.value)/10;t!=r.AudioManager.Singleton.MusicVolume&&(r.AudioManager.Singleton.MusicVolume=t)},e.prototype.Show=function(){t.prototype.Show.call(this),r.AudioManager.Singleton.play("","pop_up"),a.AppConst.dealer.popUpCount++},e.prototype.Hide=function(){r.AudioManager.Singleton.play("","btn_close"),t.prototype.Hide.call(this),a.AppConst.dealer.popUpCount--},e}(t("../../../Common/script/base/ViewBase").default);o.default=c,cc._RF.pop()},{"../../../Boot/scirpt/AppConst":void 0,"../../../Common/script/base/AudioManager":void 0,"../../../Common/script/base/BaseFrameNative":void 0,"../../../Common/script/base/NotificationCenter":void 0,"../../../Common/script/base/NotificationName":void 0,"../../../Common/script/base/ViewBase":void 0}],StatusComp:[function(t,e,o){"use strict";cc._RF.push(e,"bfb35b6TaJJBaShHwVoHfgg","StatusComp");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Common/script/base/AudioManager"),r=t("../Controller/CrashViewCtrl"),s=t("../Model/CrashModel"),u=t("../Model/CrashNetData"),l=t("../Test/CrashTest"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui_betText=null,e.ui_goldText=null,e.ui_goldIcon=null,e._betCount=1,e._handler=null,e._goldColor0=(new cc.Color).fromHEX("#FEC039"),e._goldColor1=(new cc.Color).fromHEX("#6eff79"),e._goldColor2=(new cc.Color).fromHEX("#ff0033"),e.c1=null,e.scheduleComp=null,e.waitRate=null,e}return i(e,t),e.prototype.onConstruct=function(){this.ui_betText=this.getChild("betText").asTextField,this.ui_goldText=this.getChild("goldText").asTextField,this.ui_goldIcon=this.getChild("goldIcon").asCom,this.c1=this.getController("c1"),this.scheduleComp=new cc.Node("scheduleComp").addComponent(cc.Sprite),this.node.addChild(this.scheduleComp.node)},e.prototype.showStatusComp=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1),t?(this.visible=!0,this.ui_goldText.text="+0.00",this.ui_goldText.color=this._goldColor0,this._betCount=s.CrashModel.getRateByTime(),this.ui_betText.text=this._betCount.toFixed(2)+"x",this.setBetColor(),this.scheduleComp.unschedule(this.statusHandler.bind(this)),this.scheduleComp.schedule(this.statusHandler.bind(this),s.CrashModel.timerDelta)):this.visible=!1},e.prototype.hideStatusComp=function(){this.visible=!1,this.scheduleComp.unscheduleAllCallbacks()},e.prototype.getBetNum=function(){return this._betCount},e.prototype.updateGoldText=function(t){this.ui_goldText.color=this._goldColor0,this.ui_goldText.text=t>0?"+"+t.toFixed(2):0==t?"+0.00":""+t.toFixed(2)},e.prototype.updateResultGoldText=function(t){this.updateGoldText(t),this.ui_goldText.color=t>0?this._goldColor1:0==t?this._goldColor0:this._goldColor2},e.prototype.updateResultBetText=function(t){this._betCount=t,this.ui_betText.text=this._betCount.toFixed(2)+"x",this.setBetColor()},e.prototype.startHandler=function(){this._betCount=s.CrashModel.getRateByTime(),this.ui_betText.text=this._betCount.toFixed(2)+"x",this.setBetColor(),this.scheduleComp.unschedule(this.statusHandler.bind(this)),this.scheduleComp.schedule(this.statusHandler.bind(this),s.CrashModel.timerDelta)},e.prototype.statusHandler=function(){if(s.CrashModel.crashData.state==u.Card100StatusEnum.ShowPrize){s.CrashModel.roundData.gameTime=(Date.now()-s.CrashModel.roundData.gameJumpTime)/1e3,this._betCount=s.CrashModel.getRateByTime(),this.waitRate&&this._betCount>this.waitRate&&(this._betCount=this.waitRate),this.ui_betText.text=this._betCount.toFixed(2)+"x",this.setBetColor();var t=s.CrashModel.nextGambled,e=s.CrashModel.roundData.isGambled,o=s.CrashModel.roundData.isEscaped;if(e&&!o&&!t){var n=r.default.instance.view.inputGambleBet,i=+(this._betCount*n).toFixed(2);this.updateGoldText(i)}}else s.CrashModel.roundData.gameTime=0},e.prototype.stopHandler=function(){this._betCount=1,s.CrashModel.roundData.gameTime=0,this.scheduleComp.unschedule(this.statusHandler.bind(this))},e.prototype.showGoldTween=function(t){for(var e=r.default.instance.view.ui_userGoldIcon.node,o=r.default.instance.view.ui_userGoldIcon.node.parent,n=Math.floor(5*Math.random()+5),i=function(n){var i=cc.instantiate(r.default.instance.view.goldIconPrefab);o.addChild(i);var u=s.ui_goldIcon.node.parent.convertToWorldSpaceAR(s.ui_goldIcon.node.position),l=o.convertToNodeSpaceAR(u);i.setScale(1.3),i.setPosition(l);var c=40+Math.floor(80*Math.random()-40),h=40+Math.floor(80*Math.random()-40);cc.Tween.stopAllByTarget(i),cc.tween(i).call(function(){0==n&&a.AudioManager.Singleton.play("","gold_award1")}).to(.5,{position:cc.v3(l.x+c,l.y+h,0)}).delay(.05*n).to(.5,{position:cc.v3(e.x,e.y,0)}).call(function(){0==n&&(a.AudioManager.Singleton.play("","gold_award2"),t&&t()),i.removeFromParent()}).start()},s=this,u=0;u<n;u++)i(u)},e.prototype.getTargetpOS=function(t,e){return t.parent.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position))},e.prototype.setBetColor=function(){var t=l.default.getColor(100*this._betCount);this.c1.setSelectedIndex(t)},e}(fgui.GComponent);o.default=c,cc._RF.pop()},{"../../../Common/script/base/AudioManager":void 0,"../Controller/CrashViewCtrl":"CrashViewCtrl","../Model/CrashModel":"CrashModel","../Model/CrashNetData":"CrashNetData","../Test/CrashTest":"CrashTest"}],TimeMark:[function(t,e,o){"use strict";cc._RF.push(e,"dbe01nQRk1N2ZAXSazw9Nr6","TimeMark");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.titleText=null,e.markImage=null,e}return i(e,t),e.prototype.onConstruct=function(){this.titleText=this.getChild("title").asTextField,this.markImage=this.getChild("mark").asImage},e.prototype.setTime=function(t){this.titleText.text=t+"s"},e.prototype.reset=function(){cc.Tween.stopAllByTarget(this.node)},e}(fgui.GComponent);o.default=a,cc._RF.pop()},{}],WaitComp:[function(t,e,o){"use strict";cc._RF.push(e,"84a7dSvvU9EPLkGW+2hPTNp","WaitComp");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Controller/CrashViewCtrl"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onConstruct=function(){},e.prototype.showWaitComp=function(t){void 0===t&&(t=!1),this.visible=!1,t||a.default.instance.view.ui_realTimeComp.updateRealTimeList([])},e.prototype.hideWaitComp=function(){this.visible=!1},e}(fgui.GComponent);o.default=r,cc._RF.pop()},{"../Controller/CrashViewCtrl":"CrashViewCtrl"}]},{},["Bezier","BezierConfig","CrashNetCtrl","CrashViewCtrl","CrashLoader","CrashConfig","CrashModel","CrashNetData","CrashTest","CrashUtil","AllHistoryItem","BetMark","CrashAddCash","CrashView","DropComp","HistoryComp","InputComp","MenuComp","ReadyComp","RealTimeComp","RealTimeItem","RecordItem","RocketTrail","RuleComp","SelfHistoryItem","SettingView","StatusComp","TimeMark","WaitComp"]);