System.register("chunks:///_virtual/battle",["./battleGame.ts","./bttleBG2.ts","./BattleMainUI.ts"],(function(){"use strict";return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/battleGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NRole.ts","./SkillTxt.ts","./NConst.ts","./NGlobal.ts","./NEnum.ts","./WeaponTxt.ts"],(function(t){"use strict";var e,i,n,l,o,s,r,a,f,h,u,_,p,c,g,b,d,m,k,L,y,w,C,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,r=t.Node,a=t.Prefab,f=t.Label,h=t.sp,u=t.JsonAsset,_=t.Button,p=t.instantiate,c=t.randomRangeInt,g=t.tween,b=t.v3,d=t.Component},function(t){m=t.NRole},function(t){k=t.SkillTxt},function(t){L=t.C_BUNDLE_LIST},function(t){y=t.NGlobal},function(t){w=t.E_StageType,C=t.E_CAMP},function(t){S=t.WeaponTxt}],execute:function(){var v,E,I,A,D,x,T,N,z,R,B,P,F,K,G,M,j,U,H,O,W,q,J,Q,V,Z,X,Y,$,tt,et;o._RF.push({},"d66b0ZPrjlLSL6QhVfqT9F/","battleGame",void 0);var it=s.ccclass,nt=s.property;t("battleGame",(v=it("battleGame"),E=nt(r),I=nt([a]),A=nt(m),D=nt(m),x=nt(a),T=nt([r]),N=nt(r),z=nt(r),R=nt(f),B=nt(f),P=nt(f),F=nt(h.Skeleton),K=nt(u),G=nt(_),v((U=e((j=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"n_bg",U,l(e)),n(e,"pf_bgList",H,l(e)),n(e,"role_letf",O,l(e)),n(e,"role_right",W,l(e)),n(e,"pf_skillEff",q,l(e)),n(e,"n_effList",J,l(e)),n(e,"n_skillInfoLeft",Q,l(e)),n(e,"n_skillInfoRight",V,l(e)),n(e,"lbl_weapon",Z,l(e)),n(e,"lbl_skill",X,l(e)),n(e,"lbl_time",Y,l(e)),n(e,"spn_skillShowEff",$,l(e)),n(e,"json_weaponSkill",tt,l(e)),n(e,"btn_test",et,l(e)),e._wpIdx=void 0,e._wpList=void 0,e._fireCamp=void 0,e._battleTime=void 0,e._roundIdx=void 0,e._effNum=void 0,e}i(e,t);var o=e.prototype;return o.onLoad=function(){this._battleTime=0,this._wpList=[],this._fireCamp=[],this.role_letf.setCompleteListener(this.roleCompleteListener.bind(this,this.role_letf.spn_body)),this.role_right.setCompleteListener(this.roleCompleteListener.bind(this,this.role_letf.spn_body)),this.spn_skillShowEff.setCompleteListener(this.spnSkillShowEffCompleteListener.bind(this)),this.spn_skillShowEff.timeScale=2;var t=p(this.pf_bgList[c(0,2)]);this.n_bg.addChild(t),y.audioMgr.playMusic(w.BATTLE)},o.start=function(){this.enterBattle(),this.btn_test.node.on(_.EventType.CLICK,this.btn_test_click,this),this._wpIdx=0,this._roundIdx=-1,this.spn_skillShowEff.node.active=!1},o.spnSkillShowEffCompleteListener=function(t){this.spn_skillShowEff.node.active=!1},o.roleCompleteListener=function(t,e){switch(t.getCurrent(0).animation.name){case"hit_1":t.setAnimation(0,"idle_1",!0)}},o.roletEventListener=function(t,e){},o.btn_test_click=function(){},o.enterBattle=function(){var t=this;this.role_letf.changePartColor(y.userData.gameUD.petColorCfg[0].componentConfigList),this.role_letf.setAnimation(0,"run",!0),this.role_letf.node.setPosition(-900,-190,0),g(this.role_letf.node).to(1,{position:b(-450,-190,0)}).call((function(){t.role_letf.setAnimation(0,"idle_1",!0)})).delay(.5).call((function(){t.startFight()})).start(),this.role_right.changePartColor(y.userData.gameUD.petColorCfg[1].componentConfigList),this.role_right.setAnimation(0,"run",!0),this.role_right.node.setPosition(900,-190,0),g(this.role_right.node).to(1,{position:b(450,-190,0)}).call((function(){t.role_right.setAnimation(0,"idle_1",!0)})).start()},o.startFight=function(){this._wpList=y.userData.gameUD.weaponList,this._fireCamp=y.userData.gameUD.fireCamp,this.startNextRound()},o.resetRoundData=function(){this._effNum=0,this.role_letf.setAnimation(0,"idle_1",!0),this.role_right.setAnimation(0,"idle_1",!0)},o.startNextRound=function(){if(this._roundIdx++,!(this._roundIdx>=this._wpList.length)){this.resetRoundData();var t=this._wpList[this._roundIdx],e=this._fireCamp[this._roundIdx],i=e==C.LEFT?this.role_letf:this.role_right;this.showSkillInfo(i,t,e)}},o.getLanguageByKey=function(t){if(t){for(var e=t.split("."),i=this.json_weaponSkill.json,n=0;n<e.length;n++)if(!(i=i[e[n]]))return"";return i||""}},o.showSkillInfo=function(t,e,i){var n=this,l=S.getDataByKey(e),o=k.getDataByKey(l.skillId);this.lbl_weapon.string=String(this.getLanguageByKey(l.name)),this.lbl_skill.string=String(this.getLanguageByKey(o.name)),g(this.n_skillInfoRight).to(.3,{position:b(-100,0,0)}).start(),g(this.n_skillInfoLeft).to(.3,{position:b(100,0,0)}).delay(.5).call((function(){n.n_skillInfoLeft.setPosition(-1e3,0),n.n_skillInfoRight.setPosition(1e3,0),n.fireSkill(t,e,i)})).start(),this.spn_skillShowEff.node.active=!0,this.spn_skillShowEff.setAnimation(0,"act_1",!1)},o.fireSkill=function(t,e,i,n){var l=S.getDataByKey(e),o=k.getDataByKey(l.skillId);t.setAnimation(0,o.playerAni,!1),this._effNum=o.effectAnis.length,this.createSkillEffect(t,i,e,o)},o.createSkillEffect=function(t,e,i,n){for(var l=this,o=function(o){var s=n.effectAnis[o];y.AssteMgr.loadResAsync("res/skill/"+i+"/"+i,L.COMMON,h.SkeletonData).then((function(i){var n=p(l.pf_skillEff).getComponent(h.Skeleton);n.skeletonData=i,n.node.setParent(l.n_effList[o]),n.node.setScale(e==C.RIGHT?1:-1,1),n.node.setPosition(t.node.getPosition()),n.setAnimation(0,s,!1),n.setEventListener(l.effAniamEvent.bind(l)),n.setCompleteListener(l.effAnimaComplete.bind(l,n))}))},s=0;s<n.effectAnis.length;s++)o(s)},o.effAniamEvent=function(t,e){"knock"==e.data.name&&(this._fireCamp[this._roundIdx]==C.LEFT?this.role_right:this.role_letf).setAnimation(0,"hit_1",!1)},o.effAnimaComplete=function(t,e){t.node.destroy(),this._effNum--,0==this._effNum&&(this._roundIdx==this._wpList.length-1?this.endBattle():this.startNextRound())},o.endBattle=function(){var t=this._fireCamp[this._roundIdx],e=t==C.LEFT?this.role_letf:this.role_right,i=t==C.LEFT?this.role_right:this.role_letf;e.setAnimation(0,"win",!0),i.setAnimation(0,"die",!1)},e}(d)).prototype,"n_bg",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(j.prototype,"pf_bgList",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=e(j.prototype,"role_letf",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(j.prototype,"role_right",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(j.prototype,"pf_skillEff",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(j.prototype,"n_effList",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=e(j.prototype,"n_skillInfoLeft",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(j.prototype,"n_skillInfoRight",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=e(j.prototype,"lbl_weapon",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=e(j.prototype,"lbl_skill",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(j.prototype,"lbl_time",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=e(j.prototype,"spn_skillShowEff",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=e(j.prototype,"json_weaponSkill",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=e(j.prototype,"btn_test",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=j))||M));o._RF.pop()}}}));

System.register("chunks:///_virtual/BattleMainUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NGlobal.ts","./NEnum.ts"],(function(t){"use strict";var n,e,o,r,a,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.Component},function(t){a=t.NGlobal},function(t){i=t.E_StageType}],execute:function(){var c;e._RF.push({},"73c26jrb2dG7pNp1SNJkJxa","BattleMainUI",void 0);var u=o.ccclass;o.property,t("BattleMainUI",u("BattleMainUI")(c=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.start=function(){a.audioMgr.playMusic(i.BATTLE)},e}(r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/bttleBG2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,i,n,o,a,s,c,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Node,c=t.CCFloat,l=t.Component}],execute:function(){var u,p,f,b,h,d,v;o._RF.push({},"71c4bo4x2hJVpuNduEqV7oJ","bttleBG2",void 0);var y=a.ccclass,_=a.property;t("bttleBG2",(u=y("bttleBG2"),p=_(s),f=_(c),u((d=e((h=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"n_star",d,n(e)),i(e,"moveSpeed",v,n(e)),e}r(e,t);var o=e.prototype;return o.start=function(){},o.update=function(t){var e=this.n_star.position.x+this.moveSpeed*t;e=e>815?-1060:e,this.n_star.setPosition(e,this.n_star.position.y)},e}(l)).prototype,"n_star",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(h.prototype,"moveSpeed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=h))||b));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/battle', 'chunks:///_virtual/battle'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});