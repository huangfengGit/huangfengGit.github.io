System.register("chunks:///_virtual/loading",["./loadingMainUI.ts"],(function(){"use strict";return{setters:[null],execute:function(){}}}));

System.register("chunks:///_virtual/loadingMainUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NGlobal.ts","./NEnum.ts","./NConst.ts"],(function(t){"use strict";var e,s,r,i,n,o,a,l,u,c,h,d,p,g,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,n=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){a=t.cclegacy,l=t._decorator,u=t.ProgressBar,c=t.Label,h=t.Component,d=t.SpriteAtlas},function(t){p=t.NGlobal},function(t){g=t.E_StageType},function(t){f=t.C_BUNDLE_LIST}],execute:function(){var _,b,m,k,v,y,S,R,T;a._RF.push({},"b15a4KzI+5HBrpz0Q6Q/Idn","loadingMainUI",void 0);var C=l.ccclass,L=l.property,P=[100,300,400];t("loadingMainUI",(_=C("loadingMainUI"),b=L(u),m=L(c),k=L(c),_((S=e((y=function(t){function e(){for(var e,s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,r(e,"pb",S,i(e)),r(e,"lbl_hint",R,i(e)),r(e,"lbl_progress",T,i(e)),e._taskList=void 0,e._runIdx=void 0,e._needAddProgress=0,e._everyTimeProgress=0,e}s(e,t);var a=e.prototype;return a.onLoad=function(){this._taskList=new Array},a.start=function(){this.node.active=!1,this.initTask()},a.initTask=function(){switch(p.mainScene.lastStageKey){case g.NONE:this.firstRun()}},a.createTask=function(t,e,s,r){return{hint:t,func:e,progress:s,isRun:!1,isComplete:!1,maxStep:r,currStep:0}},a.runTaskList=function(){this._taskList.length>0&&(this._runIdx=0,this.schedule(this.taskUpdate))},a.completeSubTask=function(t){this._needAddProgress+=t.progress/t.maxStep,this._everyTimeProgress=this._needAddProgress/60,this.lbl_hint.string=t.hint,t.currStep++,t.currStep==t.maxStep&&(t.isComplete=!0)},a.taskUpdate=function(t){this._needAddProgress>0&&(this.pb.progress+=this._everyTimeProgress,this.pb.progress>=1&&(this.pb.progress=1,this._needAddProgress=0),this._needAddProgress-=this._everyTimeProgress),this.lbl_progress.string=Math.floor(100*this.pb.progress)+"%";var e=this._taskList[this._runIdx];this.lbl_hint.string=e.hint,e.isRun?e.isComplete&&(this._runIdx<this._taskList.length-1?this._runIdx++:this._needAddProgress<=0&&(this.unschedule(this.taskUpdate),p.mainScene.enterStage(p.mainScene.nextStage))):(e.isRun=!0,e.func.call(this,e))},a.firstRun=function(){this._taskList.push(this.createTask("Loading Resource...",this.loadGlobalRes.bind(this),.8,3)),this._taskList.push(this.createTask("Loading Resource...",this.loadingRandomColorCfg.bind(this),.2,2)),this.runTaskList()},a.loadingRandomColorCfg=function(t){for(var e=this,s=0;s<2;s++)p.netMgr.http.post("https://login.dasinodao.com/nftinfo/",{nftid:1},(function(s){var r=JSON.parse(s.response);0==r.resultCode&&(p.userData.accountUD.addPetColorCfg(r.data),e.completeSubTask(t))}))},a.loadGlobalRes=function(){var t=n(o().mark((function t(e){var s=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"res/role/res/skin/","role/NColorRole",p.AssteMgr.loadBundleAsync(f.COMMON).then((function(t){for(var r=0,i=P;r<i.length;r++){var n=i[r];p.AssteMgr.loadResAsync("res/role/res/skin/"+n,f.COMMON,d).then((function(t){t.addRef(),s.completeSubTask(e)}))}t.load("role/NColorRole",(function(t,r){t||r.addRef(),s.completeSubTask(e)}))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}(h)).prototype,"pb",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(y.prototype,"lbl_hint",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(y.prototype,"lbl_progress",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=y))||v));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/loading', 'chunks:///_virtual/loading'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});