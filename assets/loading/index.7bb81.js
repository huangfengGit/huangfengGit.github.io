System.register("chunks:///_virtual/loading",["./loadingMainUI.ts"],(function(){"use strict";return{setters:[null],execute:function(){}}}));

System.register("chunks:///_virtual/loadingMainUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NGlobal.ts","./NEnum.ts","./NConst.ts"],(function(e){"use strict";var t,s,r,n,i,o,a,l,u,c,d,h,p,g,f,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){a=e.cclegacy,l=e._decorator,u=e.ProgressBar,c=e.Label,d=e.Component,h=e.SpriteAtlas,p=e.Texture2D},function(e){g=e.NGlobal},function(e){f=e.E_StageType},function(e){_=e.C_BUNDLE_LIST}],execute:function(){var b,m,k,v,y,S,R,T,C;a._RF.push({},"b15a4KzI+5HBrpz0Q6Q/Idn","loadingMainUI",void 0);var L=l.ccclass,A=l.property,M=[100,300,400],P=[501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,548,549,550];e("loadingMainUI",(b=L("loadingMainUI"),m=A(u),k=A(c),v=A(c),b((R=t((S=function(e){function t(){for(var t,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"pb",R,n(t)),r(t,"lbl_hint",T,n(t)),r(t,"lbl_progress",C,n(t)),t._taskList=void 0,t._runIdx=void 0,t._needAddProgress=0,t._everyTimeProgress=0,t}s(t,e);var a=t.prototype;return a.onLoad=function(){this._taskList=new Array},a.start=function(){this.node.active=!1,this.initTask()},a.initTask=function(){switch(g.mainScene.lastStageKey){case f.NONE:this.firstRun()}},a.createTask=function(e,t,s,r){return{hint:e,func:t,progress:s,isRun:!1,isComplete:!1,maxStep:r,currStep:0}},a.runTaskList=function(){this._taskList.length>0&&(this._runIdx=0,this.schedule(this.taskUpdate))},a.completeSubTask=function(e){this._needAddProgress+=e.progress/e.maxStep,this._everyTimeProgress=this._needAddProgress/60,this.lbl_hint.string=e.hint,e.currStep++,e.currStep==e.maxStep&&(e.isComplete=!0)},a.taskUpdate=function(e){this._needAddProgress>0&&(this.pb.progress+=this._everyTimeProgress,this.pb.progress>=1&&(this.pb.progress=1,this._needAddProgress=0),this._needAddProgress-=this._everyTimeProgress),this.lbl_progress.string=Math.floor(100*this.pb.progress)+"%";var t=this._taskList[this._runIdx];this.lbl_hint.string=t.hint,t.isRun?t.isComplete&&(this._runIdx<this._taskList.length-1?this._runIdx++:this._needAddProgress<=0&&(this.unschedule(this.taskUpdate),g.mainScene.enterStage(g.mainScene.nextStage))):(t.isRun=!0,t.func.call(this,t))},a.firstRun=function(){this._taskList.push(this.createTask("Loading Resource...",this.loadGlobalRes.bind(this),.8,49)),this._taskList.push(this.createTask("Loading Resource...",this.loadingRandomColorCfg.bind(this),.2,2)),this.runTaskList()},a.loadingRandomColorCfg=function(e){for(var t=this,s=0;s<2;s++)g.netMgr.http.post("https://login.dasinodao.com/nftinfo/",{nftid:1},(function(s){var r=JSON.parse(s.response);0==r.resultCode&&(g.userData.accountUD.addPetColorCfg(r.data),t.completeSubTask(e))}))},a.loadGlobalRes=function(){var e=i(o().mark((function e(t){var s=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"res/role/res/skin/","role/NColorRole",g.AssteMgr.loadBundleAsync(_.COMMON).then((function(e){for(var r=0,n=M;r<n.length;r++){var i=n[r];g.AssteMgr.loadResAsync("res/role/res/skin/"+i,_.COMMON,h).then((function(e){e.addRef(),s.completeSubTask(t)}))}for(var o=0,a=P;o<a.length;o++){var l=a[o];g.AssteMgr.loadResAsync("res/skill/"+l+"/"+l+"/texture",_.COMMON,p).then((function(e){e.addRef(),s.completeSubTask(t)}))}e.load("role/NColorRole",(function(e,r){e||r.addRef(),s.completeSubTask(t)}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}(d)).prototype,"pb",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(S.prototype,"lbl_hint",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(S.prototype,"lbl_progress",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=S))||y));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/loading', 'chunks:///_virtual/loading'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});