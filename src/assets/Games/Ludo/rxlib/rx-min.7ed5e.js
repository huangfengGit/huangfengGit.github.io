(function(t){var e=function(){function t(t,e){this._checkObject=t,this._eventMgr=e,this._UIRegisterInfoList=new Array,this._eventRegExpList=new Array}return t.prototype.addEventRegExp=function(t){this._eventRegExpList.push(t)},t.prototype.forObject=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];if("function"==typeof this._checkObject[i])for(var r=0,o=this._eventRegExpList;r<o.length;r++){var s=o[r];if(s.test(i)){this.registeredEvent(this.getRegInfo(i,s));break}}}},t.prototype.autoRegisteredEvent=function(){var t=Object.getOwnPropertyNames(this._checkObject.__proto__);this.forObject(t)},t.prototype.getRegInfo=function(t,e){var n,i=this._checkObject[t],r=t.substring(t.match(e).index+1,t.length),o=t.substring(0,t.match(e).index),s=t.substring(0,t.match(e).index);return{eventName:o,regType:r,callback:i,uiNode:null===(n=this._checkObject[s])||void 0===n?void 0:n.node}},t.prototype.registeredEvent=function(t){switch(t.regType){case"NetRespone":case"CSEvent":this._eventMgr.on(t.eventName.toUpperCase(),t.callback,this._checkObject);break;default:t.uiNode||console.warn("can not find uinode",t.eventName,t),t.uiNode.on(t.regType,t.callback,this._checkObject),this._UIRegisterInfoList.push(t)}},t.prototype.clearReg=function(){this._eventMgr.targetOff(this._checkObject)},t}();t.TAutoRegEventCom=e})(rx||(rx={})),function(t){var e=function(){function t(){}return t.prototype.loadResAsync=function(t,e,n){return new Promise(function(i,r){var o=cc.assetManager.getBundle(e);o||r(new Error("do not find ".concat(e))),o.load(t,n,function(t,e){null!=t?r(t):i(e)})})},t.prototype.loadBundleAsync=function(t){return new Promise(function(e,n){var i=cc.assetManager.getBundle(t);i?e(i):cc.assetManager.loadBundle(t,function(t,i){t?n(t):e(i)})})},t.prototype.cleanBunldeRes=function(t){var e=cc.assetManager.getBundle(t);e&&(e.releaseAll(),cc.assetManager.removeBundle(e))},t}();t.TAssetsMgr=e}(rx||(rx={}));var rx,__awaiter=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{a(i.next(t))}catch(e){o(e)}}function c(t){try{a(i.throw(t))}catch(e){o(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,c)}a((i=i.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(t){return function(e){return a([t,e])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(s=0)),s;)try{if(n=1,i&&(r=2&c[0]?i.return:c[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,c[1])).done)return r;switch(i=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,i=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===c[0]||2===c[0])){s=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){s.label=c[1];break}if(6===c[0]&&s.label<r[1]){s.label=r[1],r=c;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(c);break}r[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(a){c=[6,a],i=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};(function(t){var e=function(){function t(){this._clipList={},this._isPlayMusic=!0,this._isPlaySound=!0,this.init()}return t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},t.prototype.isPlayMusic=function(){return this._isPlayMusic},t.prototype.isPlaySound=function(){return this._isPlaySound},t.prototype.playEffect=function(t){this._isPlaySound&&cc.audioEngine.playEffect(this._clipList[t],!1)},t.prototype.playMusic=function(){},t}();t.TAudioMgr=e})(rx||(rx={})),function(t){var e=function(){function t(t,e){this._assetsMgr=e,this._winLayer=t,this._winList=new Array}return t.prototype.showWin=function(t,e,n,i){var r=this;return new Promise(function(o){r._assetsMgr.loadResAsync(t,e,cc.Prefab).then(function(e){var s=cc.instantiate(e),c=s.getComponent("TWindow");c.path=t,n&&(c.winData=n),i&&(c.onClose=i),r._winLayer.addChild(s),r._winList.push(c),o(c)})})},t.prototype.popWin=function(){var t=this._winList.pop();t&&t.close()},t.prototype.closeAllWin=function(){for(var t=this._winList.length-1;t>=0;t--)this._winList[t].close();this._winList.length=0},t.prototype.closeWindow=function(t){for(var e=0;e<this._winList.length;e++){var n=this._winList[e];n.path==t&&(n.close(),this._winList.splice(e,1))}},t.prototype.getCurWindow=function(){return this._winList[this._winList.length-1]},t.prototype.getWindowByName=function(t){for(var e=0;e<this._winList.length;e++){var n=this._winList[e];if(n.path==t)return n}return null},t}();t.TWinMgr=e}(rx||(rx={}));