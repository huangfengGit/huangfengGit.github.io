(function(){var e=Object.prototype.hasOwnProperty,t=function(e,n,o){var r=t.resolve(e);if(null==r){o=o||e,n=n||"root";var i=new Error('Failed to require "'+o+'" from "'+n+'"');throw i.path=o,i.parent=n,i.require=!0,i}var s=t.modules[r];return s.exports||(s.exports={},s.client=s.component=!0,s.call(this,s.exports,t.relative(r),s)),s.exports};t.modules={},t.aliases={},t.resolve=function(n){"/"===n.charAt(0)&&(n=n.slice(1));for(var o=n+"/index.js",r=[n,n+".js",n+".json",n+"/index.js",n+"/index.json"],i=0;i<r.length;i++)if(n=r[i],e.call(t.modules,n))return n;if(e.call(t.aliases,o))return t.aliases[o]},t.normalize=function(e,t){var n=[];if("."!=t.charAt(0))return t;e=e.split("/"),t=t.split("/");for(var o=0;o<t.length;++o)".."==t[o]?e.pop():"."!=t[o]&&""!=t[o]&&n.push(t[o]);return e.concat(n).join("/")},t.register=function(e,n){t.modules[e]=n},t.alias=function(n,o){if(!e.call(t.modules,n))throw new Error('Failed to alias "'+n+'", it does not exist');t.aliases[o]=n},t.relative=function(n){var o=t.normalize(n,"..");function r(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function i(e){var o=i.resolve(e);return t(o,n,e)}return i.resolve=function(e){var i=e.charAt(0);if("/"==i)return e.slice(1);if("."==i)return t.normalize(o,e);var s=n.split("/"),c=r(s,"deps")+1;return c||(c=0),s.slice(0,c+1).join("/")+"/deps/"+e},i.exists=function(n){return e.call(t.modules,i.resolve(n))},i},t.register("component-indexof/index.js",function(e,t,n){var o=[].indexOf;n.exports=function(e,t){if(o)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}}),t.register("component-emitter/index.js",function(e,t,n){var o=t("indexof");function r(e){if(e)return i(e)}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}n.exports=r,r.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){var n=this;function o(){n.off(e,o),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},t._off=o,this.on(e,o),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;var r=o(n,t._off||t);return~r&&n.splice(r,1),this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var o=0,r=(n=n.slice(0)).length;o<r;++o)n[o].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),t.register("node-pinus-pinus-protocol/lib/protocol.js",function(e,t,n){(function(e,t){var o=e,r=o.Package={},i=o.Message={};r.TYPE_HANDSHAKE=1,r.TYPE_HANDSHAKE_ACK=2,r.TYPE_HEARTBEAT=3,r.TYPE_DATA=4,r.TYPE_KICK=5,i.TYPE_REQUEST=0,i.TYPE_NOTIFY=1,i.TYPE_RESPONSE=2,i.TYPE_PUSH=3,o.strencode=function(e){for(var n=new t(3*e.length),o=0,r=0;r<e.length;r++){var i,c=e.charCodeAt(r);i=c<=127?[c]:c<=2047?[192|c>>6,128|63&c]:[224|c>>12,128|(4032&c)>>6,128|63&c];for(var u=0;u<i.length;u++)n[o]=i[u],++o}var a=new t(o);return s(a,0,n,0,o),a},o.strdecode=function(e){for(var n=new t(e),o=[],r=0,i=0,s=n.length;r<s;)n[r]<128?(i=n[r],r+=1):n[r]<224?(i=((63&n[r])<<6)+(63&n[r+1]),r+=2):(i=((15&n[r])<<12)+((63&n[r+1])<<6)+(63&n[r+2]),r+=3),o.push(i);var c,u="";for(c=0;c<o.length/8192;c++)u+=String.fromCharCode.apply(null,o.slice(8192*c,8192*(c+1)));return u+String.fromCharCode.apply(null,o.slice(8192*c))},r.encode=function(e,n){var o=n?n.length:0,r=new t(4+o),i=0;return r[i++]=255&e,r[i++]=o>>16&255,r[i++]=o>>8&255,r[i++]=255&o,n&&s(r,4,n,0,o),r},r.decode=function(e){var n=new t(e),o=n[0],r=1,i=(n[r++]<<16|n[r++]<<8|n[r++])>>>0,c=i?new t(i):null;return s(c,0,n,4,i),{type:o,body:c}},i.encode=function(e,n,r,i,s){var b=c(n)?a(e):0,h=1+b;if(u(n))if(r){if("number"!=typeof i)throw new Error("error flag for number route!");h+=2}else if(h+=1,i){if((i=o.strencode(i)).length>255)throw new Error("route maxlength is overflow");h+=i.length}s&&(h+=s.length);var v=new t(h),y=0;return y=l(n,r,v,y),c(n)&&(y=f(e,b,v,y)),u(n)&&(y=p(r,i,v,y)),s&&(y=d(s,v,y)),v},i.decode=function(e){var n=new t(e),r=n.length||n.byteLength,i=0,a=0,l=null,f=n[i++],p=1&f,d=f>>1&7;if(c(d)){var b=n[i++];for(a=127&b;128&b;)a<<=7,a|=127&(b=n[i++])}if(u(d))if(p)l=n[i++]<<8|n[i++];else{var h=n[i++];h?(l=new t(h),s(l,0,n,i,h),l=o.strdecode(l)):l="",i+=h}var v=r-i,y=new t(v);return s(y,0,n,i,v),{id:a,type:d,compressRoute:p,route:l,body:y}};var s=function(e,t,n,o,r){if("function"==typeof n.copy)n.copy(e,t,o,o+r);else for(var i=0;i<r;i++)e[t++]=n[o++]},c=function(e){return e===i.TYPE_REQUEST||e===i.TYPE_RESPONSE},u=function(e){return e===i.TYPE_REQUEST||e===i.TYPE_NOTIFY||e===i.TYPE_PUSH},a=function(e){var t=0;do{t+=1,e>>=7}while(e>0);return t},l=function(e,t,n,o){if(e!==i.TYPE_REQUEST&&e!==i.TYPE_NOTIFY&&e!==i.TYPE_RESPONSE&&e!==i.TYPE_PUSH)throw new Error("unkonw message type: "+e);return n[o]=e<<1|(t?1:0),o+1},f=function(e,t,n,o){var r=o+t-1;for(n[r--]=127&e;r>=o;)e>>=7,n[r--]=127&e|128;return o+t},p=function(e,t,n,o){if(e){if(t>65535)throw new Error("route number is overflow");n[o++]=t>>8&255,n[o++]=255&t}else t?(n[o++]=255&t.length,s(n,o,t,0,t.length),o+=t.length):n[o++]=0;return o},d=function(e,t,n){return s(t,n,e,0,e.length),n+e.length};n.exports=o})("object"==typeof n?n.exports:this.Protocol={},"object"==typeof n?Buffer:Uint8Array)}),t.register("pinusnode-pinus-protobuf/lib/client/protobuf.js",function(e,t,n){var o,r,i,s,c;(function(e){var t=e;t.init=function(e){t.encoder.init(e.encoderProtos),t.decoder.init(e.decoderProtos)},t.encode=function(e,n){return t.encoder.encode(e,n)},t.decode=function(e,n){return t.decoder.decode(e,n)},n.exports=t})("object"==typeof n?n.exports:this.protobuf={}),(("undefined"!=typeof protobuf?protobuf:n.exports).constants={}).TYPES={uInt32:0,sInt32:0,int32:0,double:1,string:2,message:2,float:5},(("undefined"!=typeof protobuf?protobuf:n.exports).util={}).isSimpleType=function(e){return"uInt32"===e||"sInt32"===e||"int32"===e||"uInt64"===e||"sInt64"===e||"float"===e||"double"===e},o=("undefined"!=typeof protobuf?protobuf:n.exports).codec={},r=new ArrayBuffer(8),i=new Float32Array(r),s=new Float64Array(r),c=new Uint8Array(r),o.encodeUInt32=function(e){if(e=parseInt(e),isNaN(e)||e<0)return null;var t=[];do{var n=e%128,o=Math.floor(e/128);0!==o&&(n+=128),t.push(n),e=o}while(0!==e);return t},o.encodeSInt32=function(e){return e=parseInt(e),isNaN(e)?null:(e=e<0?2*Math.abs(e)-1:2*e,o.encodeUInt32(e))},o.decodeUInt32=function(e){for(var t=0,n=0;n<e.length;n++){var o=parseInt(e[n]);if(t+=(127&o)*Math.pow(2,7*n),o<128)return t}return t},o.decodeSInt32=function(e){var t=this.decodeUInt32(e);return(t%2+t)/2*(t%2==1?-1:1)},o.encodeFloat=function(e){return i[0]=e,c},o.decodeFloat=function(e,t){if(!e||e.length<t+4)return null;for(var n=0;n<4;n++)c[n]=e[t+n];return i[0]},o.encodeDouble=function(e){return s[0]=e,c.subarray(0,8)},o.decodeDouble=function(e,t){if(!e||e.length<8+t)return null;for(var n=0;n<8;n++)c[n]=e[t+n];return s[0]},o.encodeStr=function(e,t,n){for(var o=0;o<n.length;o++)for(var r=(s=n.charCodeAt(o))<=127?[s]:s<=2047?[192|s>>6,128|63&s]:[224|s>>12,128|(4032&s)>>6,128|63&s],i=0;i<r.length;i++)e[t]=r[i],t++;var s;return t},o.decodeStr=function(e,t,n){for(var o=[],r=t+n;t<r;){var i=0;e[t]<128?(i=e[t],t+=1):e[t]<224?(i=((63&e[t])<<6)+(63&e[t+1]),t+=2):(i=((15&e[t])<<12)+((63&e[t+1])<<6)+(63&e[t+2]),t+=3),o.push(i)}for(var s="",c=0;c<o.length;)s+=String.fromCharCode.apply(null,o.slice(c,c+1e4)),c+=1e4;return s},o.byteLength=function(e){if("string"!=typeof e)return-1;for(var t=0,n=0;n<e.length;n++)t+=(o=e.charCodeAt(n))<=127?1:o<=2047?2:3;var o;return t},function(e){var t=e,n=e.encoder={},o=t.codec,r=t.constants,i=t.util;function s(e,t){if(!t)return!1;for(var n in t){var o=t[n];switch(o.option){case"required":if(void 0===e[n])return!1;case"optional":void 0!==e[n]&&t.__messages[o.type]&&s(e[n],t.__messages[o.type]);break;case"repeated":if(e[n]&&t.__messages[o.type])for(var r=0;r<e[n].length;r++)if(!s(e[n][r],t.__messages[o.type]))return!1}}return!0}function c(e,t,n,o){for(var r in o)if(n[r]){var i=n[r];switch(i.option){case"required":case"optional":t=l(e,t,f(i.type,i.tag)),t=u(o[r],i.type,t,e,n);break;case"repeated":o[r].length>0&&(t=a(o[r],i,t,e,n))}}return t}function u(e,t,n,r,i){switch(t){case"uInt32":n=l(r,n,o.encodeUInt32(e));break;case"int32":case"sInt32":n=l(r,n,o.encodeSInt32(e));break;case"float":l(r,n,o.encodeFloat(e)),n+=4;break;case"double":l(r,n,o.encodeDouble(e)),n+=8;break;case"string":var s=o.byteLength(e);n=l(r,n,o.encodeUInt32(s)),o.encodeStr(r,n,e),n+=s;break;default:if(i.__messages[t]){var u=new ArrayBuffer(o.byteLength(JSON.stringify(e)));s=c(u,s=0,i.__messages[t],e),n=l(r,n,o.encodeUInt32(s));for(var a=0;a<s;a++)r[n]=u[a],n++}}return n}function a(e,t,n,r,s){var c=0;if(i.isSimpleType(t.type))for(n=l(r,n,f(t.type,t.tag)),n=l(r,n,o.encodeUInt32(e.length)),c=0;c<e.length;c++)n=u(e[c],t.type,n,r);else for(c=0;c<e.length;c++)n=l(r,n,f(t.type,t.tag)),n=u(e[c],t.type,n,r,s);return n}function l(e,t,n){for(var o=0;o<n.length;o++,t++)e[t]=n[o];return t}function f(e,t){var n=r.TYPES[e]||2;return o.encodeUInt32(t<<3|n)}n.init=function(e){this.protos=e||{}},n.encode=function(e,t){var n=this.protos[e];if(!s(t,n))return null;var r=o.byteLength(JSON.stringify(t)),i=new ArrayBuffer(r),u=new Uint8Array(i),a=0;return n&&(a=c(u,a,n,t))>0?u.subarray(0,a):null}}("undefined"!=typeof protobuf?protobuf:n.exports),function(e){var t,n=e,o=e.decoder={},r=n.codec,i=n.util,s=0;function c(e,t,n){for(;s<n;){var o=u(),r=(o.type,o.tag),i=t.__tags[r];switch(t[i].option){case"optional":case"required":e[i]=a(t[i].type,t);break;case"repeated":e[i]||(e[i]=[]),l(e[i],t[i].type,t)}}return e}function u(){var e=r.decodeUInt32(f());return{type:7&e,tag:e>>3}}function a(e,n){switch(e){case"uInt32":return r.decodeUInt32(f());case"int32":case"sInt32":return r.decodeSInt32(f());case"float":var o=r.decodeFloat(t,s);return s+=4,o;case"double":var i=r.decodeDouble(t,s);return s+=8,i;case"string":var u=r.decodeUInt32(f()),a=r.decodeStr(t,s,u);return s+=u,a;default:if(n&&n.__messages[e]){u=r.decodeUInt32(f());var l={};return c(l,n.__messages[e],s+u),l}}}function l(e,t,n){if(i.isSimpleType(t))for(var o=r.decodeUInt32(f()),s=0;s<o;s++)e.push(a(t));else e.push(a(t,n))}function f(e){var n,o=[],r=s;e=e||!1;do{n=t[r],o.push(n),r++}while(n>=128);return e||(s=r),o}o.init=function(e){this.protos=e||{}},o.setProtos=function(e){e&&(this.protos=e)},o.decode=function(e,n){var o=this.protos[e];return t=n,s=0,o?c({},o,t.length):null}}("undefined"!=typeof protobuf?protobuf:n.exports)}),t.register("pinusnode-pinus-jsclient-websocket/lib/pinus-client.js",function(e,t,n){(function(){var e=window.Protocol,t=e.Package,o=e.Message,r=window.EventEmitter;"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var i=window,s=Object.create(r.prototype);i.pinus=s;var c=null,u=0,a={},l={},f={},p=0,d=0,b=0,h=null,v=null,y=null,g={sys:{type:"js-websocket",version:"0.0.1"},user:{}},w=null,E=null,_=null,m=null;s.init=function(e,t,n,o){w=t;var r=e.host,i=e.port,s="ws://"+r;i&&(s+=":"+i),E=n,_=o,g.user=e.user,y=e.handshakeCallback,T(s,t)},s.setActorMessageCallback=function(e){m=e};var T=function(e,t){console.log("connect to "+e),console.time("connect"),(c=new WebSocket(e)).binaryType="arraybuffer",c.onopen=function(){console.timeEnd("connect"),w&&(w(c),w=null)},c.onmessage=function(e){x(e.data,t),d&&(b=Date.now()+d)},c.onerror=function(e){s.emit("io-error",e),console.error("socket error: ",e)},c.onclose=function(e){s.emit("close",e),console.error("socket close: ",e)},c.sid=Date.now(),s.WebSocket=c};s.disconnect=function(){c&&(c.disconnect&&c.disconnect(),c.close&&c.close(),console.log("disconnect"),c=null),h&&(clearTimeout(h),h=null),v&&(clearTimeout(v),v=null),u=0,a={},f={}},s.request=function(e,t,n){2===arguments.length&&"function"==typeof t?(n=t,t={}):t=t||{},(e=e||t.route)&&(u++,t.RpcId=u,j(u,e,t),a[u]=n,f[u]=e)},s.notify=function(e,t){j(0,e,t=t||{})};var j=function(e,t,n){e?o.TYPE_REQUEST:o.TYPE_NOTIFY;var r=E(t,n);k(r)},k=function(e){c.send(e)},P=function(){var e=b-Date.now();e>100?v=setTimeout(P,e):(console.error("server heartbeat timeout"),s.emit("heartbeat timeout"),s.disconnect())};l[t.TYPE_HANDSHAKE]=function(n){if(501!==(n=JSON.parse(e.strdecode(n))).code)if(200===n.code){S(n);var o=t.encode(t.TYPE_HANDSHAKE_ACK);k(o),w&&(w(c),w=null)}else s.emit("error","handshake fail");else s.emit("error","client version not fullfill")},l[t.TYPE_HEARTBEAT]=function(){if(p){var e=t.encode(t.TYPE_HEARTBEAT);v&&(clearTimeout(v),v=null),h||(h=setTimeout(function(){h=null,k(e),b=Date.now()+d,v=setTimeout(P,d)},p))}},l[t.TYPE_DATA]=function(e){var t=_(e);if(t.RpcId>0){if(t.route=f[t.RpcId],delete f[t.RpcId],!t.route)return}else m&&m(t);I(t)},l[t.TYPE_KICK]=function(){s.emit("onKick")};var x=function(e){l[t.TYPE_DATA](e)},I=function(e){var t=a[e.RpcId];delete a[e.RpcId],"function"==typeof t&&t(e)},S=function(e){e.sys&&e.sys.heartbeat?(p=1e3*e.sys.heartbeat,d=2*p):(p=0,d=0),A(e),"function"==typeof y&&y(e.user)},A=function(e){if(e&&e.sys){s.data=s.data||{};var t=e.sys.dict,n=e.sys.protos;if(t)for(var o in s.data.dict=t,s.data.abbrs={},t)s.data.abbrs[t[o]]=o;n&&(s.data.protos={server:n.server||{},client:n.client||{}},protobuf&&protobuf.init({encoderProtos:n.client,decoderProtos:n.server}))}};n.exports=s})()}),t.register("boot/index.js",function(e,t){var n=t("emitter");window.EventEmitter=n;var o=t("pinus-protocol");window.Protocol=o;var r=t("pinus-protobuf");window.protobuf=r;var i=t("pinus-jsclient-websocket");window.pinus=i}),t.alias("boot/index.js","pinus-client/deps/boot/index.js"),t.alias("component-emitter/index.js","boot/deps/emitter/index.js"),t.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js"),t.alias("node-pinus-pinus-protocol/lib/protocol.js","boot/deps/pinus-protocol/lib/protocol.js"),t.alias("node-pinus-pinus-protocol/lib/protocol.js","boot/deps/pinus-protocol/index.js"),t.alias("node-pinus-pinus-protocol/lib/protocol.js","node-pinus-pinus-protocol/index.js"),t.alias("pinusnode-pinus-protobuf/lib/client/protobuf.js","boot/deps/pinus-protobuf/lib/client/protobuf.js"),t.alias("pinusnode-pinus-protobuf/lib/client/protobuf.js","boot/deps/pinus-protobuf/index.js"),t.alias("pinusnode-pinus-protobuf/lib/client/protobuf.js","pinusnode-pinus-protobuf/index.js"),t.alias("pinusnode-pinus-jsclient-websocket/lib/pinus-client.js","boot/deps/pinus-jsclient-websocket/lib/pinus-client.js"),t.alias("pinusnode-pinus-jsclient-websocket/lib/pinus-client.js","boot/deps/pinus-jsclient-websocket/index.js"),t.alias("pinusnode-pinus-jsclient-websocket/lib/pinus-client.js","pinusnode-pinus-jsclient-websocket/index.js"),t("boot")})();